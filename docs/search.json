[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "PLAY Survey Data",
    "section": "",
    "text": "Purpose\nPLAY project researchers use KoBoToolbox to collect data from participant families. Data from all sessions at all PLAY data collection sites are pushed to a common set of files on the KoBoToolbox server.\nThis document describes the process of i) downloading, ii) parsing, iii) cleaning, and iv) exporting these files into forms more suitable for data analysis.\nFor details about the PLAY Project data collection protocol, see https://PLAY-behaviorome.github.io/protocol/.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Overview</span>"
    ]
  },
  {
    "objectID": "index.html#overview-of-data-sets",
    "href": "index.html#overview-of-data-sets",
    "title": "PLAY Survey Data",
    "section": "Overview of data sets",
    "text": "Overview of data sets\nThere are three sets of data collected using KoBoToolbox.\nOne set is collected during the recruiting and screening calls for the study. This is called the screening or demographic data.\nThe second set is collected during the home visit. This is called the home visit data.\nThe third set consists of notes generated by the experimenter after the visit. This data is called the post-visit data.\n\nData access and processing\nAll data are downloaded and manipulated locally but are not synched to GitHub. This is accomplished by adding data to .gitignore.\nThere are separate processes for detecting and deleting personal identifiers from specific data files and exporting ‘cleaned’ versions that may be shared on Databrary.\n\n\nHome visit data\nThere are three (3) age groups (12-, 18-, and 24-month-olds) and four (4) different language environment groups (English-only, Spanish-only, Bilingual-English-dominant, Bilingual-Spanish-dominant). Since the language of the questions and some of the specific questions vary by age group and by language environment group, there multiple KoBoToolbox survey form files that must be processed.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Overview</span>"
    ]
  },
  {
    "objectID": "setup.html",
    "href": "setup.html",
    "title": "Authentication",
    "section": "",
    "text": "Set-up\nTo test whether the local system has the API key installed, we can run the command Sys.getenv(\"KOBO_API_KEY\").",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Setup</span>"
    ]
  },
  {
    "objectID": "setup.html#set-up",
    "href": "setup.html#set-up",
    "title": "Authentication",
    "section": "",
    "text": "Check KoBo API Key\n\n\nCode\nkb_api &lt;- Sys.getenv(\"KOBO_API_KEY\")\nif ((length(kb_api) != 1) || (!is.character(kb_api))) {\n  stop(\"'KOBO_API_KEY' not installed in .Renviron\")\n} else {\n  message(\"'KOBO_API_KEY' installed.\")\n}\n\n\n'KOBO_API_KEY' installed.\n\n\n\n\nDatabrary credentials\nThe databraryr package handles authenticating to Databrary. For scripting access to Databrary that require authentication, it is useful to store the user’s Databrary login (email) in .Renviron using the R command Sys.setenv(DATABRARY_LOGIN = \"&lt;email@provider.com&gt;\") where you substitute your Databrary login (email) for &lt;email@provider.com&gt;.\nHere, we check that .Renviron contains DATABRARY_LOGIN.\n\n\nCode\ndb_api &lt;- Sys.getenv(\"DATABRARY_LOGIN\")\nif ((length(kb_api) != 1) || (!is.character(db_api))) {\n  stop(\"'DATABRARY_LOGIN' not installed in .Renviron\")\n} else {\n  message(\"'DATABRARY_LOGIN' installed.\")\n}\n\n\n'DATABRARY_LOGIN' installed.\n\n\n\n\nInstall dependencies\nWe use the renv package to manage package dependencies.\n\n\nLoad/source helper functions\nMost of the work is contained in functions located in R/. The functions in this directory are sourced when tar_make() from the {targets} package is sourced.\n\n\n\n\n\n\nNote\n\n\n\nThe update_report_render.R function handles updating all data targets and rendering the report. So, the typical workflow to update the report is as follows;\nsource(\"R/update_report_render.R\")\nupdate_report_render()\n\n\n\n\n\n\n\n\nImportant\n\n\n\nNone of the data outputs are synched to GitHub.\nWe have .gitignore files in the data/ directories and subdirectories that keep all data out of the version control database.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Setup</span>"
    ]
  },
  {
    "objectID": "setup.html#approach",
    "href": "setup.html#approach",
    "title": "Authentication",
    "section": "Approach",
    "text": "Approach\nTo make the workflow more robust and reproducible, much of the work is embedded in functions and extensive use is made of the {targets} package mentioned previously.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Setup</span>"
    ]
  },
  {
    "objectID": "screen-gather.html",
    "href": "screen-gather.html",
    "title": "Gather",
    "section": "",
    "text": "Collection protocol\nDetails about the data collection protocol for participant screening and recruiting can be found on the PLAY Project website.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "screen-gather.html#collection-protocol",
    "href": "screen-gather.html#collection-protocol",
    "title": "Gather",
    "section": "",
    "text": "Setup\nWe load functions needed to download KBT screening/demographic questionnaire files.\n\n\nCode\nfl &lt;- list.files(file.path(here::here(), \"R\"), \"^kobo_|^file_|^screen_|CONSTANTS\", full.names = TRUE)\npurrr::walk(fl, source)\n\nlibrary(tidyverse) # for the `magrittr` pipe `%&gt;%`\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "screen-gather.html#retrieve-from-kobotoolbox-kbt",
    "href": "screen-gather.html#retrieve-from-kobotoolbox-kbt",
    "title": "Gather",
    "section": "Retrieve from KoBoToolbox (KBT)",
    "text": "Retrieve from KoBoToolbox (KBT)\nWe make use of the targets package for downloading data files from KoBoToolbox and for saving local XLSX and CSV copies. This allows us to download and process those files on a regular basis.\nThis excerpt from _targets.R shows two of these ‘targets’:\n  # Download screening/demographic survey\n  tar_target(\n    kb_screen_df,\n    kobo_list_data_filtered(kb_df, \"[Dd]emographic\"),\n    cue = tarchetypes::tar_cue_age(\n      name = kb_screen,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\n  tar_target(\n    screen_download,\n    screen_download_convert(kb_screen_df, \"data/xlsx/screening\", \"data/csv/screening\"),\n    cue = tarchetypes::tar_cue_age(\n      name = screen_df,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\nThe kb_df data frame is input to the first target kb_screen_df. kb_df is generated when the following target is generated (by kobo_list_data()).\n  tar_target(\n    kb_df,\n    kobo_list_data(),\n    cue = tarchetypes::tar_cue_age(\n      name = kb_df,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\n\nDownload\nWe have two targets specified in _targets.R that handle the regular downloading of screening data files.\nFirst, we generate a data frame of KoBoToolbox forms that contain the screening (“Demographic”) data. Here is the target for that process:\n# Not evaluated\n  tar_target(\n    kb_screen_df,\n    kobo_list_data_filtered(\"[Dd]emographic\"),\n    cue = tarchetypes::tar_cue_age(\n      name = kb_screen,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\nThen we download and save the raw XLSX files to ../data/xlsx/screening using kobo_retrieve_save_many_xlsx(kb_screen_df, save_dir = \"../data/xlsx/screening\"). Finally, we convert the XLSX files to CSVs via file_load_xlsx_save_many_csv(\"../data/xlsx/screening\", \"../data/csv/screening\", \"Demographic\"). The latter two steps are handled by the wrapper function screen_download_convert(kb_screen_df, \"data/xlsx/screening\", \"data/csv/screening\"). Here is the accompanying target:\n# Download screening/demographic survey\n  tar_target(\n    screen_download,\n    screen_download_convert(kb_screen_df, \"data/xlsx/screening\", \"data/csv/screening\"),\n    cue = tarchetypes::tar_cue_age(\n      name = screen_df,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\nWe can confirm that these functions have run properly, as follows:\n\n\nCode\nscreening_fl &lt;- list.files(\"../data/csv/screening/\", pattern = \"*.csv$\")\n\n\n\n\nSurvey questions\nThere are n=3 screening/demographic data files.\nThe KoBoToolbox API enables us to download a table with the questions, as follows.\n\n\nCode\ntargets::tar_load(kb_screen_df, store=\"../_targets\")\nkb_screen_df\n\n\n      id              id_string                                    title\n1 334134 agChfbnGHc6fiUdfYUaZ2z PLAY Demographic Questionnaire (Spanish)\n2 359546 aGLEqT7eRBhuPgizCQBeqA           PLAY Demographic Questionnaire\n3 275882 anqhvxKtQieo7gc9uPqJ3y           PLAY Demographic Questionnaire\n                               description\n1 PLAY Demographic Questionnaire (Spanish)\n2            New Demographic Questionnaire\n3                 PLAY Phone Questionnaire\n                                            url\n1 https://kc.kobotoolbox.org/api/v1/data/334134\n2 https://kc.kobotoolbox.org/api/v1/data/359546\n3 https://kc.kobotoolbox.org/api/v1/data/275882\n                                                             form_url\n1 https://kf.kobotoolbox.org/api/v2/assets/agChfbnGHc6fiUdfYUaZ2z.xls\n2 https://kf.kobotoolbox.org/api/v2/assets/aGLEqT7eRBhuPgizCQBeqA.xls\n3 https://kf.kobotoolbox.org/api/v2/assets/anqhvxKtQieo7gc9uPqJ3y.xls\n\n\nBased on this information, we know that the questionnaires may be downloaded from the following URLs:\n\n\nCode\npaste0(\"https://kf.kobotoolbox.org/api/v2/assets/\", kb_screen_df$id_string, \".xls\")\n\n\n[1] \"https://kf.kobotoolbox.org/api/v2/assets/agChfbnGHc6fiUdfYUaZ2z.xls\"\n[2] \"https://kf.kobotoolbox.org/api/v2/assets/aGLEqT7eRBhuPgizCQBeqA.xls\"\n[3] \"https://kf.kobotoolbox.org/api/v2/assets/anqhvxKtQieo7gc9uPqJ3y.xls\"\n\n\nWe import and clean the screening/demographic data in the next section.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "screen-clean.html",
    "href": "screen-clean.html",
    "title": "Clean",
    "section": "",
    "text": "Setup\nWe source a set of cleaning functions have the screen_ prefix.\nCode\npurrr::walk(list.files(file.path(here::here(), \"R\"), \n                    \"^screen_\", full.names = TRUE), source)\nThere are three CSV files to clean:\nCode\n(fn &lt;- list.files(\"../data/csv/screening\", \"[Dd]emographic\", full.names = TRUE))\n\n\n[1] \"../data/csv/screening/275882_PLAY_Demographic_Questionnaire.csv\"        \n[2] \"../data/csv/screening/334134_PLAY_Demographic_Questionnaire_Spanish.csv\"\n[3] \"../data/csv/screening/359546_PLAY_Demographic_Questionnaire.csv\"\nWe clean them separately, as needed, then merge them.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "screen-clean.html#merge",
    "href": "screen-clean.html#merge",
    "title": "Clean",
    "section": "Merge",
    "text": "Merge\nLet’s add the Databrary volume ID info.\n\n\nCode\nscr_df &lt;- scr_df |&gt;\n  screen_add_db_vol_id()\n\n\nThen filter out rows that do not have valid volume IDs.\n\n\nCode\nvalid_db_vol &lt;- !is.na(scr_df$vol_id)\n\nscr_df &lt;- scr_df[valid_db_vol,]\n\n\nThere are n=970 valid Databrary volume IDs out of a total of n=974 screening records.\nNext, we add a play_status field based on the group-name field from Databrary. We use group-name for indicating “Gold”, “Silver”, or “Not run.”\nTwo targets in _targets.R are relevant for this operation:\n  tar_target(\n    play_vols_df,\n    readr::read_csv(\"data/csv/_meta/play_site_vols.csv\",\n                    show_col_types = FALSE)\n  ),\n  tar_target(\n    databrary_session_csvs,\n    purrr::map(play_vols_df$site_id, databrary_get_save_session_csv),\n    cue = tarchetypes::tar_cue_age(\n      name = databrary_session_csvs,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  )\n\nThese targets generate site-specific CSVs in data/csv/site_sessions based on the database of PLAY sites contained in data/csv/_meta/play_site_vols.csv. We load these CSVs into a single data frame.\n\nLoad site session data\n\n\nCode\nsession_fns &lt;-\n  list.files(\"../data/csv/site_sessions\", \"\\\\.csv$\", full.names = TRUE)\n\ndf_sessions &lt;-\n  purrr::map(\n    session_fns,\n    readr::read_csv,\n    col_types = readr::cols(.default = 'c'),\n    show_col_types = FALSE\n  ) |&gt;\n  purrr::list_rbind()\n\n\nThe group_name variable contains status information about the sessions.\n\n\nCode\nxtabs(~ group_name, data=df_sessions)\n\n\ngroup_name\n   No visit    No_visit    No_Visit   PLAY_Gold PLAY_Silver \n          1          54          88         752         122 \n\n\nWe note that there are three different versions of no visit: “No visit”, “No_visit”, and “No_Visit”. In addition, there are n=24 sessions with NA in the group_name.\nLet’s modify those values that specify no visit on one of these forms to conform with one another.\n\n\nCode\ndf_sessions &lt;- df_sessions |&gt;\n  dplyr::mutate(group_name = stringr::str_replace(group_name, \"No.*isit\", \"No_visit\"))\n\n\nThese could be sessions that are still in QA or which are scheduled, or there could be some other anomaly. Here, we want to select only those sessions that occurred and which have passed QA–those sessions for which group_name is either ‘PLAY_Gold’ or ‘PLAY_Silver’.\n\n\nCode\ndf_sessions &lt;- df_sessions |&gt;\n  dplyr::filter(stringr::str_detect(group_name, \"PLAY_\"))\n\n\n\n\nSharing by session status\nHere is information about the sharing status.\n\n\nCode\nxtabs(~ group_name + session_release, df_sessions)\n\n\n             session_release\ngroup_name    EXCERPTS PRIVATE SHARED\n  PLAY_Gold        590       0    162\n  PLAY_Silver       85       4     33\n\n\nThere was one session marked PRIVATE.\n\n\nCode\ndf_sessions |&gt;\n  dplyr::filter(session_release == \"PRIVATE\") |&gt;\n  dplyr::select(vol_id, session_id, session_name, group_name)\n\n\n# A tibble: 4 × 4\n  vol_id session_id session_name   group_name \n  &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;      \n1 1656   70116      PLAY_ASUNI_001 PLAY_Silver\n2 979    66932      PLAY_PRINU_024 PLAY_Silver\n3 1397   70234      PLAY_UHOUS_035 PLAY_Silver\n4 1422   72657      PLAY_UIOWA_025 PLAY_Silver\n\n\nNow, we join the screening data with the Databrary session data.\n\n\nCode\nscreen_datab_df &lt;- dplyr::left_join(df_sessions, scr_df, by = c('vol_id', 'participant_ID'))\n\n\nLet’s do some additional cleaning of redundant column names, e.g., exclusion.\n\n\nCode\nscreen_datab_df &lt;- screen_datab_df |&gt;\n  tidyr::unite(exclusion_reason, c(\"exclusion1_reason\", \"exclusion2_reason\", \"exclusion_reason\")) |&gt;\n  dplyr::mutate(exclusion_reason = stringr::str_remove_all(exclusion_reason, \"NA|_\"))",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "screen-clean.html#export-cleaned-file",
    "href": "screen-clean.html#export-cleaned-file",
    "title": "Clean",
    "section": "Export cleaned file",
    "text": "Export cleaned file\nWe date-stamp the exported file so we can monitor progress as this workflow develops.\n\n\nCode\nsfn &lt;- paste0(\"PLAY-screening-datab-\", Sys.Date(), \".csv\")\nreadr::write_csv(screen_datab_df, file.path(here::here(), \"data/csv/screening/agg/\", sfn))\n\n\nWe also save a copy with “latest”.\n\n\nCode\nsfn &lt;- \"PLAY-screening-datab-latest.csv\"\nreadr::write_csv(screen_datab_df, file.path(here::here(), \"data/csv/screening/agg/\", sfn))",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "screen-viz.html",
    "href": "screen-viz.html",
    "title": "Visualize",
    "section": "",
    "text": "Setup\nCode\nsuppressPackageStartupMessages(library(tidyverse))\nCode\nscreen_df &lt;- readr::read_csv(file.path(here::here(), \"data/csv/screening/agg/PLAY-screening-datab-latest.csv\"))\n\n\nRows: 909 Columns: 68\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (55): session_name, session_release, participant_ID, participant_gender...\ndbl   (9): session_id, vol_id, child_age_mos, child_birthage, child_weight_p...\nlgl   (1): pilot_pilot\ndttm  (1): submit_date\ndate  (2): session_date, participant_birthdate\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#sharing-permission",
    "href": "screen-viz.html#sharing-permission",
    "title": "Visualize",
    "section": "Sharing permission",
    "text": "Sharing permission\n\n\nCode\n(s &lt;- xtabs(~ session_release + group_name, screen_df))\n\n\n               group_name\nsession_release PLAY_Gold PLAY_Silver\n       EXCERPTS       607          87\n       PRIVATE          0           4\n       SHARED         175          36\n\n\nOf the n=909 sessions so far, 76.3% have agreed to EXCERPTS or “Learning Audiences” sharing. Conversely, only n=4 or 0.4% have declined to share at all.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#dates-times",
    "href": "screen-viz.html#dates-times",
    "title": "Visualize",
    "section": "Dates & times",
    "text": "Dates & times\nTo calculate cumulative screening/recruiting calls by site, we have to add an index variable\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::arrange(submit_date) %&gt;%\n  dplyr::mutate(n_calls = seq_along(submit_date))\n\n\n\nCalls across time\n\n\nCode\ndf |&gt;\n    dplyr::filter(!is.na(submit_date), !is.na(n_calls), !is.na(site_id)) %&gt;%\n    ggplot() +\n    aes(submit_date, n_calls, color = site_id) +\n    geom_point()\n\n\n\n\n\n\n\n\nFigure 5.1: Cumulative screening calls by year and site\n\n\n\n\n\n\n\nCalls by site\n\n\nCode\ncalls_by_site_plot &lt;- function(df) {\n  df |&gt;\n    filter(!is.na(site_id)) %&gt;%\n    ggplot() +\n    aes(fct_infreq(site_id), fill = site_id) +\n    geom_bar() +\n    theme(axis.text.x = element_text(\n      angle = 90,\n      vjust = 0.5,\n      hjust = 1\n    )) + # Rotate text\n    labs(x = \"site\") +\n    theme(legend.position = \"none\")\n}\n\ncalls_by_site_plot(df)\n\n\n\n\n\n\n\n\nFigure 5.2: Cumulative screening calls by site",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#demographics",
    "href": "screen-viz.html#demographics",
    "title": "Visualize",
    "section": "Demographics",
    "text": "Demographics\n\nChild age\nChild age in months (child_age_mos) by child_sex.\n\n\nCode\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_age_mos), !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(child_age_mos, fill = child_sex) +\n  geom_histogram(bins = 50) +\n  facet_grid(cols = vars(child_sex)) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\nFigure 5.3: Histogram of child age at time of recruiting call.\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nSome of the code to clean the screen_df variables could be incorporated into an earlier stage of the workflow.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#language",
    "href": "screen-viz.html#language",
    "title": "Visualize",
    "section": "Language",
    "text": "Language\n\nTo child\nLanguage(s) spoken to child by child_sex.\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(\n    language_spoken_child = stringr::str_replace_all(language_spoken_child, \" \", \"_\"),\n    language_spoken_home = stringr::str_replace_all(language_spoken_home, \" \", \"_\")\n  )\n\nxtabs(formula = ~ child_sex + language_spoken_child,\n      data = df)\n\n\n         language_spoken_child\nchild_sex english english_other english_spanish english_spanish_other spanish\n   female     332             3              59                     3      20\n   male       324             6              66                     1      15\n\n\n\n\nAt home\n\n\nCode\nxtabs(formula = ~ language_spoken_home + child_sex, data = df)\n\n\n                       child_sex\nlanguage_spoken_home    female male\n  english                  339  306\n  english_other              5    4\n  english_spanish           50   81\n  english_spanish_other      1    2\n  other                      1    3\n  spanish                   17   15\n\n\n\n\nTo child vs. at home\n\n\nCode\nxtabs(formula = ~ language_spoken_child + language_spoken_home, data = df)\n\n\n                       language_spoken_home\nlanguage_spoken_child   english english_other english_spanish\n  english                   618             3              25\n  english_other               3             6               0\n  english_spanish            19             0              94\n  english_spanish_other       3             0               1\n  spanish                     2             0              11\n                       language_spoken_home\nlanguage_spoken_child   english_spanish_other other spanish\n  english                                   2     2       5\n  english_other                             0     0       0\n  english_spanish                           1     2       5\n  english_spanish_other                     0     0       0\n  spanish                                   0     0      22",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#child-health",
    "href": "screen-viz.html#child-health",
    "title": "Visualize",
    "section": "Child health",
    "text": "Child health\n\nChild born on due date\n\n\nCode\nxtabs(formula = ~ child_sex + child_bornonduedate,\n      data = screen_df)\n\n\n         child_bornonduedate\nchild_sex  no yes\n   female   8 404\n   male     9 402\n\n\n\n\n\n\n\n\nNote\n\n\n\nThere are n=86 NAs.\n\n\n\n\nCode\nscreen_df |&gt;\n  dplyr::filter(is.na(child_bornonduedate)) |&gt;\n  dplyr::select(vol_id, participant_ID) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\n\nvol_id\nparticipant_ID\n\n\n\n\n1656\n001\n\n\n1656\n046\n\n\n1008\n013\n\n\n1008\n013\n\n\n1008\n013\n\n\n1008\n013\n\n\n1008\n020\n\n\n1576\n003\n\n\n1576\n006\n\n\n1576\n027\n\n\n1576\n028\n\n\n1576\n029\n\n\n1576\n030\n\n\n1481\n006\n\n\n954\n001\n\n\n954\n076\n\n\n954\n077\n\n\n954\n078\n\n\n1590\n015\n\n\n1590\n016\n\n\n1590\n017\n\n\n899\n088\n\n\n899\n089\n\n\n1103\n001\n\n\n1596\n013\n\n\n1596\n024\n\n\n1596\n025\n\n\n1596\n026\n\n\n1596\n027\n\n\n1596\n028\n\n\n1596\n030\n\n\n1596\n031\n\n\n1596\n032\n\n\n1596\n033\n\n\n1657\n003\n\n\n1657\n007\n\n\n1657\n008\n\n\n979\n026\n\n\n1696\n016\n\n\n1696\n017\n\n\n1696\n018\n\n\n1696\n019\n\n\n1696\n020\n\n\n1705\n023\n\n\n1705\n024\n\n\n1705\n025\n\n\n1705\n027\n\n\n1705\n026\n\n\n1705\n028\n\n\n1705\n029\n\n\n966\n026\n\n\n966\n027\n\n\n966\n028\n\n\n966\n029\n\n\n966\n030\n\n\n1422\n031\n\n\n1422\n032\n\n\n1422\n033\n\n\n1422\n034\n\n\n996\n015\n\n\n1459\n019\n\n\n1459\n020\n\n\n1459\n021\n\n\n1459\n022\n\n\n1459\n023\n\n\n1459\n024\n\n\n1459\n025\n\n\n1459\n026\n\n\n1459\n027\n\n\n1459\n028\n\n\n1459\n029\n\n\n1663\n033\n\n\n1663\n034\n\n\n1663\n035\n\n\n1663\n036\n\n\n1663\n037\n\n\n1663\n038\n\n\n1517\n056\n\n\n1517\n057\n\n\n1517\n058\n\n\n1517\n059\n\n\n1517\n060\n\n\n1517\n061\n\n\n1517\n062\n\n\n1517\n063\n\n\n1517\n064\n\n\n\n\n\n\n\n\n\nChild term\n\nCode\nxtabs(formula = ~ child_bornonduedate + child_onterm,\n      data = screen_df)\n\n\n\n\nTable 5.1\n\n\n\n                   child_onterm\nchild_bornonduedate  no yes\n                no    1  16\n                yes   1 697\n\n\n\n\n\n\nChild weight\nMust convert pounds and ounces to decimal pounds.\n\n\nCode\ndf &lt;- screen_df %&gt;%\n  dplyr::mutate(.,\n                birth_weight_lbs = child_weight_pounds + child_weight_ounces/16)\n\ndf |&gt;\n  dplyr::filter(!is.na(birth_weight_lbs), !is.na(child_sex)) |&gt;\n  dplyr::filter(birth_weight_lbs &gt; 0) |&gt;\n  ggplot() +\n  aes(x = birth_weight_lbs, fill = child_sex) +\n  geom_histogram(binwidth = 0.33) +\n  facet_grid(cols = vars(child_sex)) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\nFigure 5.4: Histogram of reported child birthweights in pounds.\n\n\n\n\n\n\n\nBirth complications\n\n\nCode\nxtabs(formula = ~ child_sex + child_birth_complications,\n      data = screen_df)\n\n\n         child_birth_complications\nchild_sex  no yes\n   female 374  38\n   male   379  28\n\n\n\n\n\n\n\n\nNote\n\n\n\nThere are some first names in the child_birth_complications_specify field, so it is not shown here.\n\n\n\n\nCode\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_birth_complications_specify)) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_birth_complications_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\nMajor illnesses or injuries\n\n\nCode\nxtabs(formula = ~ child_sex + child_major_illnesses_injuries,\n      data = screen_df)\n\n\n         child_major_illnesses_injuries\nchild_sex  no yes\n   female 398  14\n   male   393  14\n\n\n\n\nCode\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_illnesses_injuries_specify),\n                !stringr::str_detect(child_illnesses_injuries_specify, \"OK\")) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_illnesses_injuries_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\n\nchild_age_mos\nchild_sex\nchild_illnesses_injuries_specify\n\n\n\n\n11.40697\nfemale\nCOVID in January, no later complications.\n\n\n11.86719\nfemale\nRSV when she 3 months; was in hospital for 2 nights\n\n\n12.68902\nfemale\nfractured wrist when she was 9 months\n\n\n12.72189\nfemale\nAt 2 months got RSV viral infection and was in hospital for 4 days. At 5 months feel off the bed and hit her head. Ended up in the emergency room but exams showed she was okay. Neither of these events resulted in any motor, perceptual, or cognitive impairment or delay as a result.\n\n\n12.73285\nmale\nHe had Covid once.\n\n\n12.76162\nfemale\nRSV when 10 weeks old, hospitalized for 1 week\n\n\n13.01775\nmale\nCovid in December but this did NOT result in a visual, auditory, motor, or cognitive disability according to mom\n\n\n13.02186\nmale\nRespiratory failure and sepsis after birth that was resolved\n\n\n16.17494\nfemale\nChild had a fall but she was fine.\n\n\n17.81860\nfemale\n**bit by tick a couple months ago, took meds to prevent Lyme disease\n\n\n17.88160\nmale\nCovid in November\n\n\n18.04597\nfemale\nbroke leg in April - all healed now. slide accident, she was 16 months. in a cast for three weeks, and then a week phantom limping.\n\n\n18.18020\nfemale\nRespiratory Syncytial Virus(RSV)\n\n\n18.67330\nmale\ntibial stress factor\n\n\n18.70617\nmale\nRSV but did not need to be admitted. This illness did not result in an impairment or disability.\n\n\n18.77055\nmale\nChild had COVID twice (fever, etc.)\n\n\n20.67856\nmale\nAnaphylactic reaction to peanuts\n\n\n22.48658\nfemale\nChild was born with a heart murmur- cardiologist said she is unaffected and will likely grow out of it. Child also had an isolated febrile seizure short after 1st birthday. Has not experienced a seizure since.\n\n\n23.01118\nmale\nHe had RSV then COVID around 13-14 months old, but they were both very mild. No complications arose from either.\n\n\n23.20979\nfemale\nfebrile seizure- around 1 1/2 years\n\n\n23.33991\nmale\nsplit lip open in March after falling on hardwood -- preventative antibiotics, all clear\n\n\n24.03024\nmale\nhad COVID at 7 months\n\n\n24.06312\nfemale\nPneumonia , was in the hospital for one night, this did not result in anything\n\n\n24.91782\nfemale\nShe had COVID, and when she was little had an cardiac issue (her heart was \"working\" too hard) but she was okay soon after (this was first 2-3 months after birth). March of 2021 she had fully recovered from this, and received treatment\n\n\n25.70814\nmale\nhospital day 4 for hypothermia - then negative / no diagnosis\n\n\n26.76008\nmale\nHas had a fall, was a concussion but not diagnosed with any disabilities\n\n\n32.67724\nmale\nPneumonia at 5 months\n\n\n\n\n\n\n\n\n\nChild vision\n\n\nCode\nxtabs(formula = ~ child_sex + child_vision_disabilities,\n      data = screen_df)\n\n\n         child_vision_disabilities\nchild_sex  no yes\n   female 409   3\n   male   405   2\n\n\n\n\nCode\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_vision_disabilities_specify)) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_vision_disabilities_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\n\nchild_age_mos\nchild_sex\nchild_vision_disabilities_specify\n\n\n\n\n18.70617\nmale\nHe wears glasses to correct his far sighted vision. He does not have vision loss.\n\n\n18.90204\nfemale\nDuane's Syndrome in left eye\n\n\n22.35371\nfemale\nShe has a lazy eye, she wears an eye patch for part of the day.\n\n\n23.14267\nfemale\nStrabismus - wears glasses\n\n\n24.03024\nmale\nlazy eye but corrected\n\n\n\n\n\n\n\n\n\nChild hearing\n\n\nCode\nxtabs(formula = ~ child_sex + child_hearing_disabilities,\n      data = screen_df)\n\n\n         child_hearing_disabilities\nchild_sex  no yes\n   female 412   0\n   male   406   1\n\n\n\n\nCode\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_hearing_disabilities_specify)) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_hearing_disabilities_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\n\nchild_age_mos\nchild_sex\nchild_hearing_disabilities_specify\n\n\n\n\n32.67724\nmale\nTemporary hearing loss so tubes in his ears, one still remaining\n\n\n\n\n\n\n\n\n\nChild developmental delays\n\n\nCode\nxtabs(formula = ~ child_sex + child_developmentaldelays,\n      data = screen_df)\n\n\n         child_developmentaldelays\nchild_sex  no yes\n   female 350   3\n   male   349   5\n\n\n\n\n\n\n\n\nNote\n\n\n\nThere may be first names in the child_developmentaldelays_specify field, so it is not shown here.\n\n\n\n\nCode\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_developmentaldelays_specify)) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_developmentaldelays_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\nChild sleep\n\nThis is work yet-to-be-done. The time stamps need to be reformatted prior to visualization.\n\n\nBed time\n\n\nCode\nextract_sleep_hr &lt;- function(t) {\n  t |&gt;\n    stringr::str_extract(\"^[0-9]{2}\\\\:[0-9]{2}\\\\:[0-9]{2}\") |&gt;\n    hms::as_hms()\n}\n\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(child_sleep_time = extract_sleep_hr(child_sleep_time)) |&gt;\n  dplyr::filter(!is.na(child_sleep_time)) \n\ndf |&gt;\n  dplyr::filter(!is.na(child_sleep_time),\n                !is.na(child_sex),\n                !is.na(child_sleep_location)) |&gt;\n  ggplot() +\n  aes(child_sleep_time, fill = child_sex) +\n  geom_histogram(bins = 18) +\n  facet_grid(rows = vars(child_sex), cols = vars(child_sleep_location)) +\n  theme(legend.position = \"none\") +\n  theme(axis.text.x = element_text(angle = 90))\n\n\n\n\n\n\n\n\nFigure 5.5: Histogram of parent-reported child bedtimes (24 hr scale).\n\n\n\n\n\n\n\nCode\ndf |&gt;\n  dplyr::filter(!is.na(child_sleep_time),\n                !is.na(child_sex),\n                !is.na(child_sleep_location)) |&gt;\n  ggplot() +\n  aes(child_sleep_time, child_age_mos, color = child_sex) +\n  facet_grid(cols = vars(child_sex)) +\n  geom_point(alpha = .3) +\n  theme(legend.position = \"none\") +\n  theme(axis.text.x = element_text(angle = 90))\n\n\n\n\n\n\n\n\n\nSome of the bed times are probably not in correct 24 hr time.\n\n\nCode\ndf |&gt;\n  dplyr::filter(child_sleep_time &lt; hms::as_hms(\"16:00:00\")) |&gt;\n  dplyr::select(site_id, participant_ID, child_sleep_time) |&gt;\n  dplyr::arrange(site_id, participant_ID) |&gt;\n  knitr::kable('html')\n\n\n\n\n\nsite_id\nparticipant_ID\nchild_sleep_time\n\n\n\n\nCSUFL\n013\n07:00:00\n\n\nCSULB\n006\n07:30:00\n\n\nINDNA\n004\n09:00:00\n\n\nINDNA\n006\n07:45:00\n\n\nNYUNI\n082\n07:00:00\n\n\nOHIOS\n002\n10:00:00\n\n\nOHUNI\n020\n07:30:00\n\n\nPRINU\n001\n12:15:00\n\n\nPRINU\n018\n07:30:00\n\n\nPRINU\n027\n07:30:00\n\n\nPRINU\n043\n08:15:00\n\n\nPURDU\n020\n08:30:00\n\n\nPURDU\n021\n11:30:00\n\n\nUCSCR\n011\n07:30:00\n\n\nUGEOR\n016\n07:30:00\n\n\nUPITT\n013\n08:15:00\n\n\nUPITT\n016\n00:30:00\n\n\nUTAUS\n023\n08:00:00\n\n\n\n\n\n\n\n\n\nWake time\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(child_wake_time = extract_sleep_hr(child_wake_time)) |&gt;\n  dplyr::filter(!is.na(child_wake_time)) \n\ndf |&gt;\n  dplyr::filter(!is.na(child_wake_time),\n                !is.na(child_sex),\n                !is.na(child_sleep_location)) |&gt;\n  ggplot() +\n  aes(child_wake_time, fill = child_sex) +\n  geom_histogram(bins = 18) +\n  facet_grid(rows = vars(child_sex), cols = vars(child_sleep_location)) +\n  theme(legend.position = \"none\") +\n  theme(axis.text.x = element_text(angle = 90))\n\n\n\n\n\n\n\n\nFigure 5.6: Histogram of parent-reported child wake times (24 hr scale).\n\n\n\n\n\nThere are some unusual wake times, too.\n\n\nCode\ndf |&gt;\n  dplyr::filter(child_wake_time &gt; hms::as_hms(\"16:00:00\")) |&gt;\n  dplyr::select(site_id, participant_ID, child_wake_time) |&gt;\n  dplyr::arrange(site_id, participant_ID) |&gt;\n  knitr::kable('html')\n\n\n\n\n\nsite_id\nparticipant_ID\nchild_wake_time\n\n\n\n\nBOSTU\n001\n19:30:00\n\n\nCHOPH\n017\n19:30:00\n\n\nCORNL\n016\n19:50:00\n\n\nGEORG\n026\n19:00:00\n\n\nOHIOS\n009\n18:30:00\n\n\nOHIOS\n012\n19:30:00\n\n\nOHIOS\n014\n18:30:00\n\n\nOHIOS\n018\n18:45:00\n\n\nOHIOS\n019\n19:30:00\n\n\nOHIOS\n021\n19:30:00\n\n\nOHIOS\n029\n19:30:00\n\n\nOHIOS\n031\n19:30:00\n\n\nOHIOS\n035\n19:00:00\n\n\nOHIOS\n062\n18:30:00\n\n\nPRINU\n015\n19:00:00\n\n\nPRINU\n018\n19:45:00\n\n\nPRINU\n027\n20:00:00\n\n\nPRINU\n043\n19:00:00\n\n\nPURDU\n020\n21:30:00\n\n\nPURDU\n021\n23:30:00\n\n\nPURDU\n023\n23:00:00\n\n\nUALAB\n009\n18:00:00\n\n\nUALAB\n013\n20:00:00\n\n\nUCRIV\n007\n18:00:00\n\n\nUCSCR\n035\n18:30:00\n\n\nUGEOR\n002\n19:30:00\n\n\nUHOUS\n014\n19:00:00\n\n\nUMIAM\n013\n20:00:00\n\n\nUMIAM\n029\n19:30:00\n\n\nUMIAM\n041\n20:00:00\n\n\nUPITT\n018\n19:15:00\n\n\nUTAUS\n013\n18:00:00\n\n\nUTAUS\n020\n18:30:00\n\n\nUTAUS\n040\n19:00:00\n\n\nUTAUS\n043\n19:15:00\n\n\nVBLTU\n025\n19:15:00\n\n\n\n\n\n\n\n\n\nSleep duration\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(child_sleep_time = extract_sleep_hr(child_sleep_time),\n                  child_wake_time = extract_sleep_hr(child_wake_time)) |&gt;\n  dplyr::filter(!is.na(child_sleep_time),\n                !is.na(child_wake_time)) |&gt;\n  dplyr::mutate(child_sleep_secs = (child_sleep_time - child_wake_time))\n\ndf |&gt;\n  dplyr::filter(!is.na(child_sleep_secs),\n                !is.na(child_sleep_location)) |&gt;\n  dplyr::mutate(sleep_hrs = child_sleep_secs/(60*60)) |&gt;\n  ggplot() +\n  aes(sleep_hrs, fill = child_sex) +\n  geom_histogram(bins = 18) +\n  facet_grid(rows = vars(child_sex), cols = vars(child_sleep_location)) +\n  theme(legend.position = \"none\") +\n  theme(axis.text.x = element_text(angle = 90))\n\n\nDon't know how to automatically pick scale for object of type &lt;difftime&gt;.\nDefaulting to continuous.\n\n\n\n\n\n\n\n\nFigure 5.7: Sleep (hours) by location\n\n\n\n\n\n\n\nCode\ndf |&gt;\n  dplyr::filter(!is.na(child_sleep_secs),\n                !is.na(child_sleep_location)) |&gt;\n  dplyr::mutate(sleep_hrs = child_sleep_secs/(60*60)) |&gt;\n  ggplot() +\n  aes(child_age_mos, sleep_hrs, color = child_sex) +\n  geom_point(alpha = .2) +\n  facet_grid(rows = vars(child_sex), cols = vars(child_sleep_location)) +\n  theme(legend.position = \"none\") +\n  theme(axis.text.x = element_text(angle = 90))\n\n\nDon't know how to automatically pick scale for object of type &lt;difftime&gt;.\nDefaulting to continuous.\n\n\n\n\n\n\n\n\nFigure 5.8: Child sleep (hours) by location and age\n\n\n\n\n\nAgain, there are some unusual values.\n\n\nCode\ndf |&gt;\n  dplyr::filter(child_sleep_secs &lt; 12000) |&gt;\n  dplyr::select(site_id, participant_ID, child_sleep_time, child_wake_time, child_sleep_secs) |&gt;\n  dplyr::arrange(site_id, participant_ID) |&gt;\n  knitr::kable('html')\n\n\n\n\n\nsite_id\nparticipant_ID\nchild_sleep_time\nchild_wake_time\nchild_sleep_secs\n\n\n\n\nBOSTU\n001\n19:30:00\n19:30:00\n0 secs\n\n\nCHOPH\n017\n20:45:00\n19:30:00\n4500 secs\n\n\nCORNL\n016\n20:05:00\n19:50:00\n900 secs\n\n\nCSUFL\n013\n07:00:00\n06:00:00\n3600 secs\n\n\nCSULB\n006\n07:30:00\n07:30:00\n0 secs\n\n\nGEORG\n026\n19:45:00\n19:00:00\n2700 secs\n\n\nINDNA\n004\n09:00:00\n08:00:00\n3600 secs\n\n\nINDNA\n006\n07:45:00\n06:30:00\n4500 secs\n\n\nNYUNI\n082\n07:00:00\n06:15:00\n2700 secs\n\n\nOHIOS\n002\n10:00:00\n08:00:00\n7200 secs\n\n\nOHIOS\n009\n18:30:00\n18:30:00\n0 secs\n\n\nOHIOS\n012\n20:00:00\n19:30:00\n1800 secs\n\n\nOHIOS\n014\n20:00:00\n18:30:00\n5400 secs\n\n\nOHIOS\n018\n20:00:00\n18:45:00\n4500 secs\n\n\nOHIOS\n019\n20:30:00\n19:30:00\n3600 secs\n\n\nOHIOS\n021\n20:00:00\n19:30:00\n1800 secs\n\n\nOHIOS\n029\n20:45:00\n19:30:00\n4500 secs\n\n\nOHIOS\n031\n20:30:00\n19:30:00\n3600 secs\n\n\nOHIOS\n035\n20:30:00\n19:00:00\n5400 secs\n\n\nOHIOS\n062\n20:30:00\n18:30:00\n7200 secs\n\n\nOHUNI\n020\n07:30:00\n06:00:00\n5400 secs\n\n\nPRINU\n015\n19:00:00\n19:00:00\n0 secs\n\n\nPRINU\n018\n07:30:00\n19:45:00\n-44100 secs\n\n\nPRINU\n027\n07:30:00\n20:00:00\n-45000 secs\n\n\nPRINU\n043\n08:15:00\n19:00:00\n-38700 secs\n\n\nPURDU\n020\n08:30:00\n21:30:00\n-46800 secs\n\n\nPURDU\n021\n11:30:00\n23:30:00\n-43200 secs\n\n\nPURDU\n023\n22:30:00\n23:00:00\n-1800 secs\n\n\nUALAB\n009\n19:30:00\n18:00:00\n5400 secs\n\n\nUALAB\n013\n19:30:00\n20:00:00\n-1800 secs\n\n\nUCRIV\n007\n21:00:00\n18:00:00\n10800 secs\n\n\nUCSCR\n011\n07:30:00\n06:30:00\n3600 secs\n\n\nUCSCR\n035\n20:45:00\n18:30:00\n8100 secs\n\n\nUGEOR\n002\n20:00:00\n19:30:00\n1800 secs\n\n\nUGEOR\n016\n07:30:00\n08:00:00\n-1800 secs\n\n\nUHOUS\n014\n19:00:00\n19:00:00\n0 secs\n\n\nUMIAM\n013\n21:00:00\n20:00:00\n3600 secs\n\n\nUMIAM\n029\n20:00:00\n19:30:00\n1800 secs\n\n\nUMIAM\n041\n21:30:00\n20:00:00\n5400 secs\n\n\nUPITT\n013\n08:15:00\n07:15:00\n3600 secs\n\n\nUPITT\n016\n00:30:00\n11:00:00\n-37800 secs\n\n\nUPITT\n018\n19:15:00\n19:15:00\n0 secs\n\n\nUTAUS\n013\n19:30:00\n18:00:00\n5400 secs\n\n\nUTAUS\n020\n20:00:00\n18:30:00\n5400 secs\n\n\nUTAUS\n023\n08:00:00\n07:00:00\n3600 secs\n\n\nUTAUS\n040\n19:00:00\n19:00:00\n0 secs\n\n\nUTAUS\n043\n22:00:00\n19:15:00\n9900 secs\n\n\nVBLTU\n025\n19:30:00\n19:15:00\n900 secs\n\n\n\n\n\n\n\n\n\nNap hours\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(child_nap_hours = as.numeric(child_nap_hours)) |&gt;\n  dplyr::filter(!is.na(child_sleep_time)) \n\n\nWarning: There was 1 warning in `dplyr::mutate()`.\nℹ In argument: `child_nap_hours = as.numeric(child_nap_hours)`.\nCaused by warning:\n! NAs introduced by coercion\n\n\nCode\ndf |&gt;\n  dplyr::filter(!is.na(child_nap_hours),\n                !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(child_nap_hours, fill = child_sex) +\n  geom_histogram(bins = 18) +\n  facet_grid(cols = vars(child_sex)) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\nFigure 5.9\n\n\n\n\n\n\n\nCode\ndf |&gt;\n  dplyr::filter(!is.na(child_nap_hours),\n                !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(child_age_mos, child_nap_hours, color = child_sex) +\n  geom_point(alpha = .3) +\n  geom_smooth() +\n  facet_grid(cols = vars(child_sex)) +\n  theme(legend.position = \"none\")\n\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\n\nFigure 5.10: Nap hours by age and sex\n\n\n\n\n\nAnd there are some very long nappers or null values we need to capture.\n\n\nCode\ndf |&gt;\n  dplyr::filter(child_nap_hours &gt; 5) |&gt;\n  dplyr::select(site_id, participant_ID, child_nap_hours) |&gt;\n  dplyr::arrange(site_id, participant_ID) |&gt;\n  knitr::kable('html')\n\n\n\n\n\nsite_id\nparticipant_ID\nchild_nap_hours\n\n\n\n\nUMIAM\n003\n8\n\n\nUOREG\n012\n6\n\n\nUTAUS\n009\n6\n\n\n\n\n\n\n\n\n\nSleep location\n\n\nCode\nxtabs(formula = ~ child_sex + child_sleep_location,\n      data = screen_df)",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#mother",
    "href": "screen-viz.html#mother",
    "title": "Visualize",
    "section": "Mother",
    "text": "Mother\n\nBiological or adoptive\n\n\nCode\nxtabs(formula = ~ child_sex + mom_bio,\n      data = screen_df)\n\n\n         mom_bio\nchild_sex no_adoptive no_partnerchild yes\n   female           2               1 398\n   male             0               0 404\n\n\n\n\nAge at childbirth\n\n\nCode\nscreen_df |&gt;\n  dplyr::filter(!is.na(mom_childbirth_age), \n                !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(x = mom_childbirth_age, fill = child_sex) +\n  geom_histogram(bins = 25) +\n  facet_grid(cols = vars(child_sex)) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\nFigure 5.11: Mother’s age at childbirth (years)\n\n\n\n\n\nClearly, there are some impossible (erroneous) maternal ages &gt; 100. Here are details:\n\n\nCode\nold_moms &lt;- screen_df |&gt;\n  dplyr::filter(mom_childbirth_age &gt; 55)\n\nold_moms |&gt;\n  dplyr::select(submit_date, vol_id, participant_ID, mom_childbirth_age) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\n\nsubmit_date\nvol_id\nparticipant_ID\nmom_childbirth_age\n\n\n\n\n2022-07-07 15:03:20\n1391\n005\n121.22\n\n\n\n\n\n\n\n\n\nRace\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_race)) |&gt;\n  dplyr::mutate(mom_race = dplyr::recode(\n    mom_race,\n    morethanone = \"more_than_one\",\n    americanindian = \"american_indian\"))\n\nxtabs(~mom_race, df)\n\n\nmom_race\namerican_indian           asian           black   more_than_one  nativehawaiian \n              3              26              36              42               1 \n          other         refused           white \n             50               2             652 \n\n\n\n\nBirth country\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(mom_birth_country = dplyr::recode(\n    mom_birth_country, \n    unitedstates = \"US\",\n    united_states = \"US\",\n    othercountry = \"Other\",\n    other_country = \"Other\",\n    refused = \"Refused\"\n  ))\n\nxtabs(~ mom_birth_country, data = df)\n\n\nmom_birth_country\n     Other puertorico         US \n        89          3        720 \n\n\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(mom_birth_country_specify = stringr::str_to_title(mom_birth_country_specify)) |&gt;\n  dplyr::filter(!is.na(mom_birth_country_specify)) |&gt;\n  dplyr::select(child_sex, mom_birth_country_specify)\n\nunique(df$mom_birth_country_specify)\n\n\n [1] \"Mexico\"             \"South Korea\"        \"Argentina\"         \n [4] \"Spain\"              \"Zimbabwe\"           \"Canada\"            \n [7] \"Bolivia\"            \"Uk\"                 \"Refused\"           \n[10] \"United Kingdom\"     \"Liberia\"            \"Pakistan\"          \n[13] \"Australia\"          \"Venezuela\"          \"India\"             \n[16] \"Kenya\"              \"England\"            \"China\"             \n[19] \"Ireland\"            \"El Salvador\"        \"Colombia\"          \n[22] \"Chile\"              \"Haiti\"              \"Guatemala\"         \n[25] \"Ecuador\"            \"Guadalajara Mexico\" \"Costa Rica\"        \n[28] \"Italy\"              \"Malaysia\"           \"Phillipines\"       \n[31] \"Dominican Republic\" \"Nigeria\"            \"Honduras\"          \n[34] \"Colomobia\"          \"Columbia\"           \"Peru\"              \n[37] \"Panama\"            \n\n\n\n\nEducation\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_education)) |&gt;\n  dplyr::select(child_sex, mom_education)\n\nxtabs(~ mom_education, data = df)\n\n\nmom_education\n       associates    bachelor_s_deg         bachelors           diploma \n               28                 1               263                28 \n        doctorate          eleventh               ged graduate_nodegree \n              100                 1                 4                25 \n          masters             ninth      professional       somecollege \n              277                 1                36                43 \n      voc_diplima     voc_nodiplima \n                3                 1 \n\n\n\n\n\n\n\n\nNote\n\n\n\nThis requires some recoding work.\n\n\n\n\nEmployment\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_employment))\n\nxtabs(~ mom_employment, data = df)\n\n\nmom_employment\nfull_time        no part_time \n      460       193       158 \n\n\n\n\nOccupation\nThis information is available, but would need to be substantially recoded to be useful in summary form.\n\n\nJobs number\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_jobs_number))\n\nxtabs(~ mom_jobs_number, data = df)\n\n\nmom_jobs_number\n    0     1     2     3     4 5more \n    1   552    61     1     1     1 \n\n\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_jobs_number),\n                !is.na(mom_employment))\n\nxtabs(~ mom_jobs_number + mom_employment, data = df)\n\n\n               mom_employment\nmom_jobs_number full_time part_time\n          0             0         1\n          1           420       132\n          2            37        24\n          3             1         0\n          4             1         0\n          5more         1         0\n\n\n\n\nJob training\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_training))\n\nxtabs(~ mom_training, data = df)\n\n\nmom_training\n no yes \n789  20",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#biological-father",
    "href": "screen-viz.html#biological-father",
    "title": "Visualize",
    "section": "Biological father",
    "text": "Biological father\n\nRace\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::select(mom_childbirth_age, biodad_childbirth_age, biodad_race, child_sex) |&gt;\n  dplyr::mutate(\n    biodad_race =\n      dplyr::recode(\n        biodad_race,\n        americanindian_NA = \"american_indian\",\n        asian_NA = \"asian\",\n        NA_asian = \"asian\",\n        black_NA = \"black\",\n        donotknow_NA = \"do_not_know\",\n        NA_NA = \"NA\",\n        NA_white = \"white\",\n        other_NA = \"other\",\n        refused_NA = \"refused\",\n        white_NA = \"white\",\n        morethanone_NA = \"more_than_one\"\n      )\n  ) |&gt;\n  dplyr::mutate(biodad_childbirth_age = stringr::str_remove_all(biodad_childbirth_age, \"[_NA]\")) |&gt;\n  # dplyr::filter(!is.na(biodad_childbirth_age), !is.na(biodad_race)) |&gt;\n  dplyr::mutate(biodad_childbirth_age = as.numeric(biodad_childbirth_age))\n\n\nWarning: There was 1 warning in `dplyr::mutate()`.\nℹ In argument: `biodad_childbirth_age = as.numeric(biodad_childbirth_age)`.\nCaused by warning:\n! NAs introduced by coercion\n\n\nCode\nxtabs(~ biodad_race, df)\n\n\nbiodad_race\n  american_indian             asian             black       do_not_know \n                4                29                43                 5 \n    more_than_one                NA nativehawaiian_NA             other \n               36                32                 2                66 \n          refused             white \n                3               611 \n\n\n\n\nAge at child birth\n\n\nCode\ndf |&gt;\n  dplyr::filter(!is.na(biodad_childbirth_age), \n                !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(x = biodad_childbirth_age, fill = child_sex) +\n  geom_histogram(bins = 25) +\n  facet_grid(cols = vars(child_sex)) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\nFigure 5.12: Biological father’s age at childbirth (years)\n\n\n\n\n\n\n\nCode\ndf |&gt;\n  dplyr::filter(!is.na(biodad_childbirth_age),\n                !is.na(mom_childbirth_age),\n                !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(x = mom_childbirth_age, y = biodad_childbirth_age, color = child_sex) +\n  geom_point() +\n  facet_grid(cols = vars(child_sex)) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\nFigure 5.13: Mother’s and biological father’s age at childbirth (years)",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#childcare",
    "href": "screen-viz.html#childcare",
    "title": "Visualize",
    "section": "Childcare",
    "text": "Childcare\n\nTypes\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(childcare_types))\n                \nxtabs(~ childcare_types, data = df)\n\n\nchildcare_types\n                        childcare                             nanny \n                              231                                 1 \n                       nanny_home              nanny_home childcare \n                               42                                13 \n         nanny_home nanny_nothome nanny_home nanny_nothome relative \n                                3                                 1 \n              nanny_home relative                     nanny_nothome \n                                7                                15 \n          nanny_nothome childcare            nanny_nothome relative \n                                3                                 3 \n                             none                          relative \n                              191                                95 \n               relative childcare \n                               19 \n\n\n\n\n\n\n\n\nNote\n\n\n\nThis requires some cleaning.\n\n\n\n\nHours\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(childcare_hours)) |&gt;\n  dplyr::arrange(childcare_hours)\n\nunique(df$childcare_hours)\n\n\n [1] \"1\"                                           \n [2] \"10\"                                          \n [3] \"12\"                                          \n [4] \"13\"                                          \n [5] \"14\"                                          \n [6] \"14.5\"                                        \n [7] \"15\"                                          \n [8] \"15-20\"                                       \n [9] \"16\"                                          \n[10] \"16-20\"                                       \n[11] \"17\"                                          \n[12] \"17.5\"                                        \n[13] \"18\"                                          \n[14] \"19\"                                          \n[15] \"2\"                                           \n[16] \"2-3\"                                         \n[17] \"2-4\"                                         \n[18] \"20\"                                          \n[19] \"20 hours\"                                    \n[20] \"20 hours a week - maternal grandmother\"      \n[21] \"21\"                                          \n[22] \"21 (14 hr childcare center, 7 hr babysitter)\"\n[23] \"22\"                                          \n[24] \"24\"                                          \n[25] \"25\"                                          \n[26] \"25, 15 of those hours are at daycare\"        \n[27] \"26\"                                          \n[28] \"27\"                                          \n[29] \"28\"                                          \n[30] \"3\"                                           \n[31] \"30\"                                          \n[32] \"30-35\"                                       \n[33] \"30-40\"                                       \n[34] \"31\"                                          \n[35] \"32\"                                          \n[36] \"32-35\"                                       \n[37] \"33\"                                          \n[38] \"34\"                                          \n[39] \"35\"                                          \n[40] \"35-40\"                                       \n[41] \"36\"                                          \n[42] \"36; Grandpa watches one day a week\"          \n[43] \"37\"                                          \n[44] \"38\"                                          \n[45] \"4\"                                           \n[46] \"40\"                                          \n[47] \"40+\"                                         \n[48] \"40-45\"                                       \n[49] \"40-45 hours\"                                 \n[50] \"40-50\"                                       \n[51] \"42\"                                          \n[52] \"42.5\"                                        \n[53] \"43\"                                          \n[54] \"45\"                                          \n[55] \"45-50\"                                       \n[56] \"47\"                                          \n[57] \"5\"                                           \n[58] \"50\"                                          \n[59] \"52.5\"                                        \n[60] \"53\"                                          \n[61] \"6\"                                           \n[62] \"63\"                                          \n[63] \"7\"                                           \n[64] \"8\"                                           \n[65] \"8 hours with grandmother\"                    \n[66] \"8-16\"                                        \n[67] \"8-5 each day\"                                \n[68] \"8.5\"                                         \n[69] \"80\"                                          \n[70] \"9\"                                           \n\n\n\n\n\n\n\n\nNote\n\n\n\nThis requires some cleaning.\n\n\n\n\nLanguage\n\n\nCode\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(childcare_language))\n\nunique(df$childcare_language)\n\n\n [1] \"Spanish and English (half and half)\"                                       \n [2] \"English\"                                                                   \n [3] \"Spanish\"                                                                   \n [4] \"English and Spanish (50/50)\"                                               \n [5] \"english\"                                                                   \n [6] \"English when speaking with children, but Arabic when speaking to eachother\"\n [7] \"Mostly English, some Spanish\"                                              \n [8] \"Mandarin\"                                                                  \n [9] \"Spanish at the center\"                                                     \n[10] \"English (spanish around her)\"                                              \n[11] \"English and Spanish\"                                                       \n[12] \"English, Spanish\"                                                          \n[13] \"Usually English, sometimes arabic and french\"                              \n[14] \"Bangladeshi\"                                                               \n[15] \"English and speaks a little bit of Japanese but not directly to Lucas\"     \n[16] \"English and Creole\"                                                        \n[17] \"Spanish (sometimes English)\"                                               \n[18] \"English;Spanish\"                                                           \n[19] \"Spanish and English\"                                                       \n[20] \"spanish\"                                                                   \n[21] \"French only\"                                                               \n[22] \"English and some sign language\"                                            \n[23] \"Engish\"                                                                    \n[24] \"English, American Sign Language\"                                           \n[25] \"English and ASL\"                                                           \n[26] \"Ingles\"                                                                    \n[27] \"English/Spanish\"                                                           \n[28] \"English and some Spanish\"                                                  \n[29] \"english, has been exposed to Arabic\"                                       \n[30] \"Nanny in Spanish at home. At school both English and Spanish.\"             \n[31] \"English (majority of the time) and sometimes Spanish\"                      \n[32] \"English and Spanish 50/50\"                                                 \n[33] \"english, some spanish\"                                                     \n[34] \"English, Italian, Spanish\"                                                 \n[35] \"English, sometimes a little bit of Spanish\"                                \n[36] \"English &  Spanish\"                                                        \n[37] \"English and Portuguese\"                                                    \n\n\n\n\n\n\n\n\nNote\n\n\n\nThis requires some cleaning.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "screen-data-dictionary.html",
    "href": "screen-data-dictionary.html",
    "title": "Data dictionary",
    "section": "",
    "text": "Background\nWe make use of the datadictionary package here.\nThis is not a perfect solution. Among other challenges, this package throws many warnings. But we will use it for the time being.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Data dictionary</span>"
    ]
  },
  {
    "objectID": "screen-data-dictionary.html#background",
    "href": "screen-data-dictionary.html#background",
    "title": "Data dictionary",
    "section": "",
    "text": "Note\n\n\n\nThis data dictionary workflow does not include the questions that were asked. Adding that, and more descriptive information, is a high priority.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Data dictionary</span>"
    ]
  },
  {
    "objectID": "screen-data-dictionary.html#load-data-and-generate-dictionary",
    "href": "screen-data-dictionary.html#load-data-and-generate-dictionary",
    "title": "Data dictionary",
    "section": "Load data and generate dictionary",
    "text": "Load data and generate dictionary\n\n\n\n\n\n\nNote\n\n\n\nThis data dictionary workflow does not include the questions that were asked. Adding that, and more descriptive information, is a high priority.\n\n\n\n\nCode\nscr_df &lt;- readr::read_csv(paste0(here::here(), \"/data/csv/screening/agg/PLAY-screening-datab-latest.csv\"),\n                          show_col_types = FALSE)\n\nscr_dd &lt;- datadictionary::create_dictionary(scr_df)\n\nreadr::write_csv(scr_dd, paste0(here::here(), \"/data/csv/screening/dd/PLAY-screening-data-dictionary.csv\"))\n\n\nHere are the data this package provides:\n\n\nCode\nscr_dd |&gt;\n  kableExtra::kable() |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nitem\nlabel\nclass\nsummary\nvalue\n\n\n\n\n\n\n\nRows in dataset\n909\n\n\n\n\n\nColumns in dataset\n68\n\n\nsession_id\nNo label\nnumeric\nmean\n66685\n\n\n\n\n\nmedian\n67894\n\n\n\n\n\nmin\n38196\n\n\n\n\n\nmax\n75258\n\n\n\n\n\nmissing\n0\n\n\nsession_name\nNo label\ncharacter\nunique responses\n874\n\n\n\n\n\nmissing\n0\n\n\nsession_date\nNo label\nDate\nmean\n2023-07-30\n\n\n\n\n\nmode\n2023-08-13\n\n\n\n\n\nmin\n2019-06-09\n\n\n\n\n\nmax\n2024-12-06\n\n\n\n\n\nmissing\n0\n\n\nsession_release\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n0\n\n\nparticipant_ID\nNo label\ncharacter\nunique responses\n94\n\n\n\n\n\nmissing\n0\n\n\nparticipant_birthdate\nNo label\nDate\nmean\n2022-02-03\n\n\n\n\n\nmode\n2021-08-18\n\n\n\n\n\nmin\n2017-06-08\n\n\n\n\n\nmax\n2024-01-03\n\n\n\n\n\nmissing\n0\n\n\nparticipant_gender\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n0\n\n\nparticipant_race\nNo label\ncharacter\nunique responses\n11\n\n\n\n\n\nmissing\n0\n\n\nparticipant_ethnicity\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n0\n\n\nparticipant_language\nNo label\ncharacter\nunique responses\n13\n\n\n\n\n\nmissing\n0\n\n\nexclusion_reason\nNo label\ncharacter\nunique responses\n15\n\n\n\n\n\nmissing\n845\n\n\ngroup_name\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n0\n\n\ncontext_setting\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n8\n\n\ncontext_country\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n49\n\n\ncontext_state\nNo label\ncharacter\nunique responses\n19\n\n\n\n\n\nmissing\n38\n\n\nvol_id\nNo label\nnumeric\nmean\n1298\n\n\n\n\n\nmedian\n1376\n\n\n\n\n\nmin\n899\n\n\n\n\n\nmax\n1705\n\n\n\n\n\nmissing\n0\n\n\nparticipant_disability\nNo label\ncharacter\nunique responses\n5\n\n\n\n\n\nmissing\n747\n\n\npilot_pilot\nNo label\nlogical\nmissing\n909\n\n\nsubmit_date\nNo label\nPOSIXct POSIXt\nmean\n2023-06-09\n\n\n\n\n\nmode\n2024-02-09 2024-04-19\n\n\n\n\n\nmin\n2019-10-08\n\n\n\n\n\nmax\n2024-09-08\n\n\n\n\n\nmissing\n78\n\n\nsite_id\nNo label\ncharacter\nunique responses\n31\n\n\n\n\n\nmissing\n78\n\n\nplay_id\nNo label\ncharacter\nunique responses\n692\n\n\n\n\n\nmissing\n200\n\n\nchild_age_mos\nNo label\nnumeric\nmean\n18\n\n\n\n\n\nmedian\n18\n\n\n\n\n\nmin\n9.24\n\n\n\n\n\nmax\n42.6\n\n\n\n\n\nmissing\n80\n\n\nchild_sex\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n80\n\n\nchild_bornonduedate\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n86\n\n\nchild_onterm\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n194\n\n\nchild_birthage\nNo label\nnumeric\nmean\n5\n\n\n\n\n\nmedian\n3\n\n\n\n\n\nmin\n-20\n\n\n\n\n\nmax\n367\n\n\n\n\n\nmissing\n107\n\n\nchild_weight_pounds\nNo label\nnumeric\nmean\n7\n\n\n\n\n\nmedian\n7\n\n\n\n\n\nmin\n4\n\n\n\n\n\nmax\n100\n\n\n\n\n\nmissing\n90\n\n\nchild_weight_ounces\nNo label\nnumeric\nmean\n7\n\n\n\n\n\nmedian\n7\n\n\n\n\n\nmin\n0\n\n\n\n\n\nmax\n143\n\n\n\n\n\nmissing\n102\n\n\nchild_birth_complications\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n90\n\n\nchild_birth_complications_specify\nNo label\ncharacter\nunique responses\n67\n\n\n\n\n\nmissing\n843\n\n\nchild_hearing_disabilities\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n90\n\n\nchild_hearing_disabilities_specify\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n908\n\n\nchild_vision_disabilities\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n90\n\n\nchild_vision_disabilities_specify\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n904\n\n\nchild_major_illnesses_injuries\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n90\n\n\nchild_illnesses_injuries_specify\nNo label\ncharacter\nunique responses\n30\n\n\n\n\n\nmissing\n876\n\n\nchild_developmentaldelays\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n202\n\n\nchild_developmentaldelays_specify\nNo label\ncharacter\nunique responses\n9\n\n\n\n\n\nmissing\n901\n\n\nchild_sleep_time\nNo label\ncharacter\nunique responses\n99\n\n\n\n\n\nmissing\n91\n\n\nchild_wake_time\nNo label\ncharacter\nunique responses\n114\n\n\n\n\n\nmissing\n92\n\n\nchild_nap_hours\nNo label\ncharacter\nunique responses\n39\n\n\n\n\n\nmissing\n92\n\n\nchild_sleep_location\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n92\n\n\nmom_bio\nNo label\ncharacter\nunique responses\n4\n\n\n\n\n\nmissing\n104\n\n\nmom_childbirth_age\nNo label\nnumeric\nmean\n33\n\n\n\n\n\nmedian\n33\n\n\n\n\n\nmin\n20.22\n\n\n\n\n\nmax\n121.22\n\n\n\n\n\nmissing\n107\n\n\nmom_race\nNo label\ncharacter\nunique responses\n9\n\n\n\n\n\nmissing\n97\n\n\nmom_birth_country\nNo label\ncharacter\nunique responses\n5\n\n\n\n\n\nmissing\n97\n\n\nmom_birth_country_specify\nNo label\ncharacter\nunique responses\n39\n\n\n\n\n\nmissing\n821\n\n\nmom_education\nNo label\ncharacter\nunique responses\n15\n\n\n\n\n\nmissing\n98\n\n\nmom_employment\nNo label\ncharacter\nunique responses\n4\n\n\n\n\n\nmissing\n98\n\n\nmom_occupation\nNo label\ncharacter\nunique responses\n486\n\n\n\n\n\nmissing\n294\n\n\nmom_jobs_number\nNo label\ncharacter\nunique responses\n7\n\n\n\n\n\nmissing\n292\n\n\nmom_training\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n100\n\n\nbiodad_childbirth_age\nNo label\ncharacter\nunique responses\n639\n\n\n\n\n\nmissing\n78\n\n\nbiodad_race\nNo label\ncharacter\nunique responses\n13\n\n\n\n\n\nmissing\n78\n\n\nlanguage_spoken_mom\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n86\n\n\nlanguage_spoken_mom_comments\nNo label\ncharacter\nunique responses\n17\n\n\n\n\n\nmissing\n893\n\n\nlanguage_spoken_child\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n80\n\n\nlanguage_spoken_home_comments\nNo label\ncharacter\nunique responses\n832\n\n\n\n\n\nmissing\n78\n\n\nlanguage_spoken_child_comments\nNo label\ncharacter\nunique responses\n14\n\n\n\n\n\nmissing\n896\n\n\nlanguage_spoken_home\nNo label\ncharacter\nunique responses\n7\n\n\n\n\n\nmissing\n85\n\n\nlanguage_spoken_house_other\nNo label\ncharacter\nunique responses\n15\n\n\n\n\n\nmissing\n895\n\n\nlanguage_spoken_home_other\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n908\n\n\nchildcare_types\nNo label\ncharacter\nunique responses\n14\n\n\n\n\n\nmissing\n285\n\n\nchildcare_location\nNo label\ncharacter\nunique responses\n26\n\n\n\n\n\nmissing\n884\n\n\nchildcare_hours\nNo label\ncharacter\nunique responses\n71\n\n\n\n\n\nmissing\n476\n\n\nchildcare_number\nNo label\nnumeric\nmean\n6\n\n\n\n\n\nmedian\n6\n\n\n\n\n\nmin\n0\n\n\n\n\n\nmax\n25\n\n\n\n\n\nmissing\n479\n\n\nchildcare_age\nNo label\nnumeric\nmean\n7\n\n\n\n\n\nmedian\n5\n\n\n\n\n\nmin\n0\n\n\n\n\n\nmax\n45\n\n\n\n\n\nmissing\n589\n\n\nchildcare_language\nNo label\ncharacter\nunique responses\n38\n\n\n\n\n\nmissing\n475",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Data dictionary</span>"
    ]
  },
  {
    "objectID": "screen-data-dictionary.html#extracting-questions",
    "href": "screen-data-dictionary.html#extracting-questions",
    "title": "Data dictionary",
    "section": "Extracting questions",
    "text": "Extracting questions\nAn alternative approach to generating the data dictionary starts with the questionnaire files themselves.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Data dictionary</span>"
    ]
  },
  {
    "objectID": "home-visit-gather.html",
    "href": "home-visit-gather.html",
    "title": "Gather",
    "section": "",
    "text": "About\nThis page gathers KoBoToolbox files from the home visit questionnaires.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "home-visit-gather.html#setup",
    "href": "home-visit-gather.html#setup",
    "title": "Gather",
    "section": "Setup",
    "text": "Setup\nLoad helper functions and required package dependencies.\n\n\nCode\nfl &lt;-\n  list.files(\n    file.path(here::here(), \"R\"),\n    \"^load|^kobo_|^file_|^screen_|^ecbq_|^health_|^databrary|^home|^make|^export|^post_visit|CONSTANTS\",\n    full.names = TRUE\n  )\npurrr::walk(fl, source)\n\nsuppressPackageStartupMessages(library(tidyverse))\n\n\nData files for each of the language by age-group conditions are stored on KoBoToolbox (KBT).\nThe data files on KBT are stored in kb_df, a data frame that is generated as one of the workflow targets.\n\n\nCode\ntargets::tar_load(kb_df, store=file.path(here::here(), \"_targets\"))\nkb_df\n\n\n        id              id_string\n1   411456 a58ZhjX6M8WXtzLGvBaEaG\n2   920365 a6r99tj8RaULvzTM7MuWpi\n3   740625 a8HyzdxnVjK53dt4fX3Vup\n4  1129568 a9n2DWjJw3ayJmkijsAm7h\n5   331453 aae4wz2tpkSnAkea2PAzin\n6   363465 abYGMsrMvkGsnA4xm9kqC9\n7   363431 acCBJaRqBkSMPYdvaaWCSu\n8   334099 ad3NtS6TDPuKTUKCAyCuby\n9   363349 aEMERWLYQAdhaMKMt5QkD7\n10  307736 aeMJQLo56HWyVHkKX9oaJD\n11  334134 agChfbnGHc6fiUdfYUaZ2z\n12  346565 aGD5Q64T5zTQtakQaS8x55\n13  359546 aGLEqT7eRBhuPgizCQBeqA\n14  740631 ahYJ7XRUcit8gbFYwaxnAV\n15  361981 aJNWkgeX7c9jEFiNAgJspn\n16  738593 aJPU78BR3NfU9rm4LzRVLt\n17 1151489 aLqdPLTCZb8jvFkDxcFwzy\n18  920339 aLxPNje5yoeZijafFoVz5z\n19  738513 aM2ob4BdwFucdjjcUNTwms\n20 1136694 aMteoHisncRUStdyZfsjMB\n21  275882 anqhvxKtQieo7gc9uPqJ3y\n22  740623 aoLcmmN8KWG4N6A3XpUiRT\n23  740628 aRJW7SwKsVyZu8b4FighiM\n24  363466 asv7tL6CEYjiW2XCkLxhcX\n25  411469 aswcEAtxj24u9MfuBmS9AW\n26  740630 aThMD6zuEFjtTfptwcpZPg\n27  411388 aTyGBYk6HvRXmki9ksb29p\n28  740624 aUeYzPfq6WED4dDF28VT9D\n29  363381 aWd7wujF5d5HYaYMhT4jBZ\n30  740626 awMnFDna5kWR3LXKyGmFMd\n31  331848 axYbEbLcJxzUNFbqMVySjJ\n32  740629 axyJSgLRDeSk3BHB6cJmYk\n33  408149 ayhCy68ZTaDGc7tuGthQpJ\n34  740627 aYokcZAjTZ9JCyVXz4R5rh\n                                                                     title\n1              PLAY Home Questionaires - 12 Bilingual English (2020-03-04)\n2                                                 NYU_Pilot DLL-ES_Level_2\n3                                        PLAY_HomeQuestionaires_12_English\n4                                        Clone of NYU_Pilot DLL-ES_Level_1\n5                                    PLAY Home Questionnaires (24 English)\n6             PLAY Home Questionnaires - 24 Bilingual English (2020-03-04)\n7                       PLAY Home Questionnaires - 12 English (2020-03-04)\n8                        PLAY Home Questionnaires (12 Bilingual - English)\n9                       PLAY Home Questionnaires - 18 English (2020-03-04)\n10                                   PLAY Home Questionnaires (18 English)\n11                                PLAY Demographic Questionnaire (Spanish)\n12                                                   PLAY Post-Visit Notes\n13                                          PLAY Demographic Questionnaire\n14                             PLAY_HomeQuestionaires_24_Bilingual_English\n15                                                   PLAY Post-Visit Notes\n16                                                DLL-ES_Level_2 (English)\n17 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n18                                                NYU_Pilot DLL-ES_Level_1\n19                                               DLL-ES_Level_1_2021_07_30\n20             Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO TODAY\n21                                          PLAY Demographic Questionnaire\n22                             PLAY_HomeQuestionaires_12_Bilingual_English\n23                                      PLAY_HomeQuestionnaires_18_English\n24            PLAY Home Questionnaires - 18 Bilingual English (2020-03-04)\n25            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n26                             PLAY_HomeQuestionaires_24_Bilingual_Spanish\n27            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n28                             PLAY_HomeQuestionaires_12_Bilingual_Spanish\n29                      PLAY Home Questionnaires - 24 English (2020-03-04)\n30                             PLAY_HomeQuestionaires_18_Bilingual_English\n31                                   PLAY Home Questionnaires (12 English)\n32                                      PLAY_HomeQuestionnaires_24_English\n33            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-03-04)\n34                             PLAY_HomeQuestionaires_18_Bilingual_Spanish\n                                                               description\n1            PLAY Home Questionaires - 12 Bilingual (English) (2020-03-04)\n2                                                 NYU_Pilot DLL-ES_Level_2\n3                             PLAY_HomeQuestionaires_12_English-2021-07-29\n4                                        Clone of NYU_Pilot DLL-ES_Level_1\n5                                    PLAY Home Questionnaires (24 English)\n6             PLAY Home Questionnaires - 24 Bilingual English (2019-11-20)\n7                       PLAY Home Questionnaires - 12 English (2019-11-20)\n8                        PLAY Home Questionnaires (12 Bilingual - English)\n9                       PLAY Home Questionnaires - 18 English (2018-11-20)\n10                                   PLAY Home Questionnaires (18 English)\n11                                PLAY Demographic Questionnaire (Spanish)\n12                                              PLAY Cleanup Checklists v2\n13                                           New Demographic Questionnaire\n14                  PLAY_HomeQuestionaires_24_Bilingual_English-2021-07-30\n15                                      PLAY Post-Visit Notes (2019-11-18)\n16                                          DLL-ES_Level_2_KBTB_2021_07_28\n17 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n18                                                NYU_Pilot DLL-ES_Level_1\n19                                               DLL-ES_Level_1_2021_07_28\n20                             Clone of PLAY_HomeQuestionnaires_18_English\n21                                                PLAY Phone Questionnaire\n22                  PLAY_HomeQuestionaires_12_Bilingual_English-2021-07-29\n23                           PLAY_HomeQuestionnaires_18_English-2021-07-29\n24            PLAY Home Questionnaires - 18 Bilingual English (2019-11-20)\n25            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n26                  PLAY_HomeQuestionaires_24_Bilingual_Spanish-2021-07-30\n27            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n28                  PLAY_HomeQuestionaires_12_Bilingual_Spanish-2021-07-29\n29                      PLAY Home Questionnaires - 24 English (2019-11-20)\n30                  PLAY_HomeQuestionaires_18_Bilingual_English-2021-07-29\n31                                   PLAY Home Questionnaires (12 English)\n32                           PLAY_HomeQuestionnaires_24_English-2021-07-30\n33            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-02-27)\n34                  PLAY_HomeQuestionaires_18_Bilingual_Spanish-2021-07-29\n                                              url\n1   https://kc.kobotoolbox.org/api/v1/data/411456\n2   https://kc.kobotoolbox.org/api/v1/data/920365\n3   https://kc.kobotoolbox.org/api/v1/data/740625\n4  https://kc.kobotoolbox.org/api/v1/data/1129568\n5   https://kc.kobotoolbox.org/api/v1/data/331453\n6   https://kc.kobotoolbox.org/api/v1/data/363465\n7   https://kc.kobotoolbox.org/api/v1/data/363431\n8   https://kc.kobotoolbox.org/api/v1/data/334099\n9   https://kc.kobotoolbox.org/api/v1/data/363349\n10  https://kc.kobotoolbox.org/api/v1/data/307736\n11  https://kc.kobotoolbox.org/api/v1/data/334134\n12  https://kc.kobotoolbox.org/api/v1/data/346565\n13  https://kc.kobotoolbox.org/api/v1/data/359546\n14  https://kc.kobotoolbox.org/api/v1/data/740631\n15  https://kc.kobotoolbox.org/api/v1/data/361981\n16  https://kc.kobotoolbox.org/api/v1/data/738593\n17 https://kc.kobotoolbox.org/api/v1/data/1151489\n18  https://kc.kobotoolbox.org/api/v1/data/920339\n19  https://kc.kobotoolbox.org/api/v1/data/738513\n20 https://kc.kobotoolbox.org/api/v1/data/1136694\n21  https://kc.kobotoolbox.org/api/v1/data/275882\n22  https://kc.kobotoolbox.org/api/v1/data/740623\n23  https://kc.kobotoolbox.org/api/v1/data/740628\n24  https://kc.kobotoolbox.org/api/v1/data/363466\n25  https://kc.kobotoolbox.org/api/v1/data/411469\n26  https://kc.kobotoolbox.org/api/v1/data/740630\n27  https://kc.kobotoolbox.org/api/v1/data/411388\n28  https://kc.kobotoolbox.org/api/v1/data/740624\n29  https://kc.kobotoolbox.org/api/v1/data/363381\n30  https://kc.kobotoolbox.org/api/v1/data/740626\n31  https://kc.kobotoolbox.org/api/v1/data/331848\n32  https://kc.kobotoolbox.org/api/v1/data/740629\n33  https://kc.kobotoolbox.org/api/v1/data/408149\n34  https://kc.kobotoolbox.org/api/v1/data/740627\n                                                              form_url\n1  https://kf.kobotoolbox.org/api/v2/assets/a58ZhjX6M8WXtzLGvBaEaG.xls\n2  https://kf.kobotoolbox.org/api/v2/assets/a6r99tj8RaULvzTM7MuWpi.xls\n3  https://kf.kobotoolbox.org/api/v2/assets/a8HyzdxnVjK53dt4fX3Vup.xls\n4  https://kf.kobotoolbox.org/api/v2/assets/a9n2DWjJw3ayJmkijsAm7h.xls\n5  https://kf.kobotoolbox.org/api/v2/assets/aae4wz2tpkSnAkea2PAzin.xls\n6  https://kf.kobotoolbox.org/api/v2/assets/abYGMsrMvkGsnA4xm9kqC9.xls\n7  https://kf.kobotoolbox.org/api/v2/assets/acCBJaRqBkSMPYdvaaWCSu.xls\n8  https://kf.kobotoolbox.org/api/v2/assets/ad3NtS6TDPuKTUKCAyCuby.xls\n9  https://kf.kobotoolbox.org/api/v2/assets/aEMERWLYQAdhaMKMt5QkD7.xls\n10 https://kf.kobotoolbox.org/api/v2/assets/aeMJQLo56HWyVHkKX9oaJD.xls\n11 https://kf.kobotoolbox.org/api/v2/assets/agChfbnGHc6fiUdfYUaZ2z.xls\n12 https://kf.kobotoolbox.org/api/v2/assets/aGD5Q64T5zTQtakQaS8x55.xls\n13 https://kf.kobotoolbox.org/api/v2/assets/aGLEqT7eRBhuPgizCQBeqA.xls\n14 https://kf.kobotoolbox.org/api/v2/assets/ahYJ7XRUcit8gbFYwaxnAV.xls\n15 https://kf.kobotoolbox.org/api/v2/assets/aJNWkgeX7c9jEFiNAgJspn.xls\n16 https://kf.kobotoolbox.org/api/v2/assets/aJPU78BR3NfU9rm4LzRVLt.xls\n17 https://kf.kobotoolbox.org/api/v2/assets/aLqdPLTCZb8jvFkDxcFwzy.xls\n18 https://kf.kobotoolbox.org/api/v2/assets/aLxPNje5yoeZijafFoVz5z.xls\n19 https://kf.kobotoolbox.org/api/v2/assets/aM2ob4BdwFucdjjcUNTwms.xls\n20 https://kf.kobotoolbox.org/api/v2/assets/aMteoHisncRUStdyZfsjMB.xls\n21 https://kf.kobotoolbox.org/api/v2/assets/anqhvxKtQieo7gc9uPqJ3y.xls\n22 https://kf.kobotoolbox.org/api/v2/assets/aoLcmmN8KWG4N6A3XpUiRT.xls\n23 https://kf.kobotoolbox.org/api/v2/assets/aRJW7SwKsVyZu8b4FighiM.xls\n24 https://kf.kobotoolbox.org/api/v2/assets/asv7tL6CEYjiW2XCkLxhcX.xls\n25 https://kf.kobotoolbox.org/api/v2/assets/aswcEAtxj24u9MfuBmS9AW.xls\n26 https://kf.kobotoolbox.org/api/v2/assets/aThMD6zuEFjtTfptwcpZPg.xls\n27 https://kf.kobotoolbox.org/api/v2/assets/aTyGBYk6HvRXmki9ksb29p.xls\n28 https://kf.kobotoolbox.org/api/v2/assets/aUeYzPfq6WED4dDF28VT9D.xls\n29 https://kf.kobotoolbox.org/api/v2/assets/aWd7wujF5d5HYaYMhT4jBZ.xls\n30 https://kf.kobotoolbox.org/api/v2/assets/awMnFDna5kWR3LXKyGmFMd.xls\n31 https://kf.kobotoolbox.org/api/v2/assets/axYbEbLcJxzUNFbqMVySjJ.xls\n32 https://kf.kobotoolbox.org/api/v2/assets/axyJSgLRDeSk3BHB6cJmYk.xls\n33 https://kf.kobotoolbox.org/api/v2/assets/ayhCy68ZTaDGc7tuGthQpJ.xls\n34 https://kf.kobotoolbox.org/api/v2/assets/aYokcZAjTZ9JCyVXz4R5rh.xls",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "home-visit-gather.html#download-data",
    "href": "home-visit-gather.html#download-data",
    "title": "Gather",
    "section": "Download data",
    "text": "Download data\nList data forms specific to the home visit by filtering the files with names that contain “Home”.\n\n\nCode\nkb_home_df &lt;- kobo_list_data_filtered(kb_df, \"Home\")\nkb_home_df\n\n\n        id              id_string\n1   411456 a58ZhjX6M8WXtzLGvBaEaG\n2   740625 a8HyzdxnVjK53dt4fX3Vup\n3   331453 aae4wz2tpkSnAkea2PAzin\n4   363465 abYGMsrMvkGsnA4xm9kqC9\n5   363431 acCBJaRqBkSMPYdvaaWCSu\n6   334099 ad3NtS6TDPuKTUKCAyCuby\n7   363349 aEMERWLYQAdhaMKMt5QkD7\n8   307736 aeMJQLo56HWyVHkKX9oaJD\n9   740631 ahYJ7XRUcit8gbFYwaxnAV\n10 1151489 aLqdPLTCZb8jvFkDxcFwzy\n11 1136694 aMteoHisncRUStdyZfsjMB\n12  740623 aoLcmmN8KWG4N6A3XpUiRT\n13  740628 aRJW7SwKsVyZu8b4FighiM\n14  363466 asv7tL6CEYjiW2XCkLxhcX\n15  411469 aswcEAtxj24u9MfuBmS9AW\n16  740630 aThMD6zuEFjtTfptwcpZPg\n17  411388 aTyGBYk6HvRXmki9ksb29p\n18  740624 aUeYzPfq6WED4dDF28VT9D\n19  363381 aWd7wujF5d5HYaYMhT4jBZ\n20  740626 awMnFDna5kWR3LXKyGmFMd\n21  331848 axYbEbLcJxzUNFbqMVySjJ\n22  740629 axyJSgLRDeSk3BHB6cJmYk\n23  408149 ayhCy68ZTaDGc7tuGthQpJ\n24  740627 aYokcZAjTZ9JCyVXz4R5rh\n                                                                     title\n1              PLAY Home Questionaires - 12 Bilingual English (2020-03-04)\n2                                        PLAY_HomeQuestionaires_12_English\n3                                    PLAY Home Questionnaires (24 English)\n4             PLAY Home Questionnaires - 24 Bilingual English (2020-03-04)\n5                       PLAY Home Questionnaires - 12 English (2020-03-04)\n6                        PLAY Home Questionnaires (12 Bilingual - English)\n7                       PLAY Home Questionnaires - 18 English (2020-03-04)\n8                                    PLAY Home Questionnaires (18 English)\n9                              PLAY_HomeQuestionaires_24_Bilingual_English\n10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n11             Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO TODAY\n12                             PLAY_HomeQuestionaires_12_Bilingual_English\n13                                      PLAY_HomeQuestionnaires_18_English\n14            PLAY Home Questionnaires - 18 Bilingual English (2020-03-04)\n15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n16                             PLAY_HomeQuestionaires_24_Bilingual_Spanish\n17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n18                             PLAY_HomeQuestionaires_12_Bilingual_Spanish\n19                      PLAY Home Questionnaires - 24 English (2020-03-04)\n20                             PLAY_HomeQuestionaires_18_Bilingual_English\n21                                   PLAY Home Questionnaires (12 English)\n22                                      PLAY_HomeQuestionnaires_24_English\n23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-03-04)\n24                             PLAY_HomeQuestionaires_18_Bilingual_Spanish\n                                                               description\n1            PLAY Home Questionaires - 12 Bilingual (English) (2020-03-04)\n2                             PLAY_HomeQuestionaires_12_English-2021-07-29\n3                                    PLAY Home Questionnaires (24 English)\n4             PLAY Home Questionnaires - 24 Bilingual English (2019-11-20)\n5                       PLAY Home Questionnaires - 12 English (2019-11-20)\n6                        PLAY Home Questionnaires (12 Bilingual - English)\n7                       PLAY Home Questionnaires - 18 English (2018-11-20)\n8                                    PLAY Home Questionnaires (18 English)\n9                   PLAY_HomeQuestionaires_24_Bilingual_English-2021-07-30\n10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n11                             Clone of PLAY_HomeQuestionnaires_18_English\n12                  PLAY_HomeQuestionaires_12_Bilingual_English-2021-07-29\n13                           PLAY_HomeQuestionnaires_18_English-2021-07-29\n14            PLAY Home Questionnaires - 18 Bilingual English (2019-11-20)\n15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n16                  PLAY_HomeQuestionaires_24_Bilingual_Spanish-2021-07-30\n17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n18                  PLAY_HomeQuestionaires_12_Bilingual_Spanish-2021-07-29\n19                      PLAY Home Questionnaires - 24 English (2019-11-20)\n20                  PLAY_HomeQuestionaires_18_Bilingual_English-2021-07-29\n21                                   PLAY Home Questionnaires (12 English)\n22                           PLAY_HomeQuestionnaires_24_English-2021-07-30\n23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-02-27)\n24                  PLAY_HomeQuestionaires_18_Bilingual_Spanish-2021-07-29\n                                              url\n1   https://kc.kobotoolbox.org/api/v1/data/411456\n2   https://kc.kobotoolbox.org/api/v1/data/740625\n3   https://kc.kobotoolbox.org/api/v1/data/331453\n4   https://kc.kobotoolbox.org/api/v1/data/363465\n5   https://kc.kobotoolbox.org/api/v1/data/363431\n6   https://kc.kobotoolbox.org/api/v1/data/334099\n7   https://kc.kobotoolbox.org/api/v1/data/363349\n8   https://kc.kobotoolbox.org/api/v1/data/307736\n9   https://kc.kobotoolbox.org/api/v1/data/740631\n10 https://kc.kobotoolbox.org/api/v1/data/1151489\n11 https://kc.kobotoolbox.org/api/v1/data/1136694\n12  https://kc.kobotoolbox.org/api/v1/data/740623\n13  https://kc.kobotoolbox.org/api/v1/data/740628\n14  https://kc.kobotoolbox.org/api/v1/data/363466\n15  https://kc.kobotoolbox.org/api/v1/data/411469\n16  https://kc.kobotoolbox.org/api/v1/data/740630\n17  https://kc.kobotoolbox.org/api/v1/data/411388\n18  https://kc.kobotoolbox.org/api/v1/data/740624\n19  https://kc.kobotoolbox.org/api/v1/data/363381\n20  https://kc.kobotoolbox.org/api/v1/data/740626\n21  https://kc.kobotoolbox.org/api/v1/data/331848\n22  https://kc.kobotoolbox.org/api/v1/data/740629\n23  https://kc.kobotoolbox.org/api/v1/data/408149\n24  https://kc.kobotoolbox.org/api/v1/data/740627\n                                                              form_url\n1  https://kf.kobotoolbox.org/api/v2/assets/a58ZhjX6M8WXtzLGvBaEaG.xls\n2  https://kf.kobotoolbox.org/api/v2/assets/a8HyzdxnVjK53dt4fX3Vup.xls\n3  https://kf.kobotoolbox.org/api/v2/assets/aae4wz2tpkSnAkea2PAzin.xls\n4  https://kf.kobotoolbox.org/api/v2/assets/abYGMsrMvkGsnA4xm9kqC9.xls\n5  https://kf.kobotoolbox.org/api/v2/assets/acCBJaRqBkSMPYdvaaWCSu.xls\n6  https://kf.kobotoolbox.org/api/v2/assets/ad3NtS6TDPuKTUKCAyCuby.xls\n7  https://kf.kobotoolbox.org/api/v2/assets/aEMERWLYQAdhaMKMt5QkD7.xls\n8  https://kf.kobotoolbox.org/api/v2/assets/aeMJQLo56HWyVHkKX9oaJD.xls\n9  https://kf.kobotoolbox.org/api/v2/assets/ahYJ7XRUcit8gbFYwaxnAV.xls\n10 https://kf.kobotoolbox.org/api/v2/assets/aLqdPLTCZb8jvFkDxcFwzy.xls\n11 https://kf.kobotoolbox.org/api/v2/assets/aMteoHisncRUStdyZfsjMB.xls\n12 https://kf.kobotoolbox.org/api/v2/assets/aoLcmmN8KWG4N6A3XpUiRT.xls\n13 https://kf.kobotoolbox.org/api/v2/assets/aRJW7SwKsVyZu8b4FighiM.xls\n14 https://kf.kobotoolbox.org/api/v2/assets/asv7tL6CEYjiW2XCkLxhcX.xls\n15 https://kf.kobotoolbox.org/api/v2/assets/aswcEAtxj24u9MfuBmS9AW.xls\n16 https://kf.kobotoolbox.org/api/v2/assets/aThMD6zuEFjtTfptwcpZPg.xls\n17 https://kf.kobotoolbox.org/api/v2/assets/aTyGBYk6HvRXmki9ksb29p.xls\n18 https://kf.kobotoolbox.org/api/v2/assets/aUeYzPfq6WED4dDF28VT9D.xls\n19 https://kf.kobotoolbox.org/api/v2/assets/aWd7wujF5d5HYaYMhT4jBZ.xls\n20 https://kf.kobotoolbox.org/api/v2/assets/awMnFDna5kWR3LXKyGmFMd.xls\n21 https://kf.kobotoolbox.org/api/v2/assets/axYbEbLcJxzUNFbqMVySjJ.xls\n22 https://kf.kobotoolbox.org/api/v2/assets/axyJSgLRDeSk3BHB6cJmYk.xls\n23 https://kf.kobotoolbox.org/api/v2/assets/ayhCy68ZTaDGc7tuGthQpJ.xls\n24 https://kf.kobotoolbox.org/api/v2/assets/aYokcZAjTZ9JCyVXz4R5rh.xls\n\n\nThere are n= {r dim(kb_home_df)[1]} separate data files.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "home-visit-gather.html#retrieve-and-save-files",
    "href": "home-visit-gather.html#retrieve-and-save-files",
    "title": "Gather",
    "section": "Retrieve and save files",
    "text": "Retrieve and save files\nWe save the answer files in data/xlsx/home_visit/raw/ans and the question files in data/xlsx/home_visit/raw/qs. To extract the answer data only, we would set save_form = FALSE.\n\n\n\n\n\n\nNote\n\n\n\nThis process seems inefficient. Most of the time most of the files do not change. But, it ensures that if there are any upstream changes to the raw KoBoToolbox data forms that those get propagated to our local copies.\n\n\n\n\nCode\nkobo_retrieve_save_many_xlsx(\n  kb_home_df,\n  save_dir = file.path(here::here(), \"data/xlsx/home_visit/raw\"),\n  save_form = TRUE\n)\n\n\nRetrieving 24 files from KoBoToolbox site.\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/411456_PLAY_Home_Questionaires_-_12_Bilingual_English_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/411456_PLAY_Home_Questionaires_-_12_Bilingual_English_2020-03-04-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740625_PLAY_HomeQuestionaires_12_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740625_PLAY_HomeQuestionaires_12_English-forms.xlsx`\n\n\nKoBo files: ■■■                                8% |  ETA: 50s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/331453_PLAY_Home_Questionnaires_24_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/331453_PLAY_Home_Questionnaires_24_English-forms.xlsx`\n\n\nKoBo files: ■■■■■                             12% |  ETA: 38s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/363465_PLAY_Home_Questionnaires_-_24_Bilingual_English_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/363465_PLAY_Home_Questionnaires_-_24_Bilingual_English_2020-03-04-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/363431_PLAY_Home_Questionnaires_-_12_English_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/363431_PLAY_Home_Questionnaires_-_12_English_2020-03-04-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/334099_PLAY_Home_Questionnaires_12_Bilingual_-_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/334099_PLAY_Home_Questionnaires_12_Bilingual_-_English-forms.xlsx`\n\n\nKoBo files: ■■■■■■■■■                         25% |  ETA: 28s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/363349_PLAY_Home_Questionnaires_-_18_English_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/363349_PLAY_Home_Questionnaires_-_18_English_2020-03-04-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/307736_PLAY_Home_Questionnaires_18_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/307736_PLAY_Home_Questionnaires_18_English-forms.xlsx`\n\n\nKoBo files: ■■■■■■■■■■■                       33% |  ETA: 23s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740631_PLAY_HomeQuestionaires_24_Bilingual_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740631_PLAY_HomeQuestionaires_24_Bilingual_English-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/1151489_Clone_of_Clone_of_PLAY_HomeQuestionnaires_18_English_-_NO_AUTO_METADATA.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/1151489_Clone_of_Clone_of_PLAY_HomeQuestionnaires_18_English_-_NO_AUTO_METADATA-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/1136694_Clone_of_PLAY_HomeQuestionnaires_18_English_-_NO_AUTO_TODAY.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/1136694_Clone_of_PLAY_HomeQuestionnaires_18_English_-_NO_AUTO_TODAY-forms.xlsx`\n\n\nKoBo files: ■■■■■■■■■■■■■■■                   46% |  ETA: 18s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740623_PLAY_HomeQuestionaires_12_Bilingual_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740623_PLAY_HomeQuestionaires_12_Bilingual_English-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740628_PLAY_HomeQuestionnaires_18_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740628_PLAY_HomeQuestionnaires_18_English-forms.xlsx`\n\n\nKoBo files: ■■■■■■■■■■■■■■■■■                 54% |  ETA: 16s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/363466_PLAY_Home_Questionnaires_-_18_Bilingual_English_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/363466_PLAY_Home_Questionnaires_-_18_Bilingual_English_2020-03-04-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/411469_PLAY_Home_Questionnaires_-_12_Bilingual_Spanish_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/411469_PLAY_Home_Questionnaires_-_12_Bilingual_Spanish_2020-03-04-forms.xlsx`\n\n\nKoBo files: ■■■■■■■■■■■■■■■■■■■■              62% |  ETA: 13s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740630_PLAY_HomeQuestionaires_24_Bilingual_Spanish.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740630_PLAY_HomeQuestionaires_24_Bilingual_Spanish-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/411388_PLAY_Home_Questionnaires_-_18_Bilingual_Spanish_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/411388_PLAY_Home_Questionnaires_-_18_Bilingual_Spanish_2020-03-04-forms.xlsx`\n\n\nKoBo files: ■■■■■■■■■■■■■■■■■■■■■■            71% |  ETA: 10s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740624_PLAY_HomeQuestionaires_12_Bilingual_Spanish.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740624_PLAY_HomeQuestionaires_12_Bilingual_Spanish-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/363381_PLAY_Home_Questionnaires_-_24_English_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/363381_PLAY_Home_Questionnaires_-_24_English_2020-03-04-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740626_PLAY_HomeQuestionaires_18_Bilingual_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740626_PLAY_HomeQuestionaires_18_Bilingual_English-forms.xlsx`\n\n\nKoBo files: ■■■■■■■■■■■■■■■■■■■■■■■■■■        83% |  ETA:  5s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/331848_PLAY_Home_Questionnaires_12_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/331848_PLAY_Home_Questionnaires_12_English-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740629_PLAY_HomeQuestionnaires_24_English.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740629_PLAY_HomeQuestionnaires_24_English-forms.xlsx`\n\n\nKoBo files: ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■     92% |  ETA:  3s\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/408149_PLAY_Home_Questionnaires_-_24_Bilingual_Spanish_2020-03-04.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/408149_PLAY_Home_Questionnaires_-_24_Bilingual_Spanish_2020-03-04-forms.xlsx`\n\n\nRetrieving questionnaire responses...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/ans/740627_PLAY_HomeQuestionaires_18_Bilingual_Spanish.xlsx`\n\n\nRetrieving questions...\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/raw/qs/740627_PLAY_HomeQuestionaires_18_Bilingual_Spanish-forms.xlsx`\n\n\n[[1]]\nNULL\n\n[[2]]\nNULL\n\n[[3]]\nNULL\n\n[[4]]\nNULL\n\n[[5]]\nNULL\n\n[[6]]\nNULL\n\n[[7]]\nNULL\n\n[[8]]\nNULL\n\n[[9]]\nNULL\n\n[[10]]\nNULL\n\n[[11]]\nNULL\n\n[[12]]\nNULL\n\n[[13]]\nNULL\n\n[[14]]\nNULL\n\n[[15]]\nNULL\n\n[[16]]\nNULL\n\n[[17]]\nNULL\n\n[[18]]\nNULL\n\n[[19]]\nNULL\n\n[[20]]\nNULL\n\n[[21]]\nNULL\n\n[[22]]\nNULL\n\n[[23]]\nNULL\n\n[[24]]\nNULL\n\n\n\nNormalize file names\nSome of the form names are inconsistent, so we normalize them to fit the following pattern:\n&lt;form_id&gt;_PLAY_HomeQuestionnaires_&lt;age_group&gt;_&lt;lang_group&gt;.xlsx\n\n\nCode\nrename_home_xlsx(\n  fl = list.files(\n    file.path(here::here(), \"data/xlsx/home_visit/raw/ans\"),\n    \"\\\\.xlsx$\",\n    full.names = TRUE\n  ),\n  out_dir = file.path(here::here(), \"data/xlsx/home_visit/std_name\")\n)\n\n\n [1] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/1136694_PLAY_HomeQuestionnares_18_english.xlsx\"         \n [2] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/1151489_PLAY_HomeQuestionnares_18_english.xlsx\"         \n [3] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/307736_PLAY_HomeQuestionnares_18_english.xlsx\"          \n [4] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/331453_PLAY_HomeQuestionnares_24_english.xlsx\"          \n [5] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/331848_PLAY_HomeQuestionnares_12_english.xlsx\"          \n [6] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/334099_PLAY_HomeQuestionnares_12_bilingual_english.xlsx\"\n [7] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/363349_PLAY_HomeQuestionnares_18_english.xlsx\"          \n [8] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/363381_PLAY_HomeQuestionnares_24_english.xlsx\"          \n [9] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/363431_PLAY_HomeQuestionnares_12_english.xlsx\"          \n[10] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/363465_PLAY_HomeQuestionnares_24_bilingual_english.xlsx\"\n[11] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/363466_PLAY_HomeQuestionnares_18_bilingual_english.xlsx\"\n[12] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/408149_PLAY_HomeQuestionnares_24_bilingual_spanish.xlsx\"\n[13] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/411388_PLAY_HomeQuestionnares_18_bilingual_spanish.xlsx\"\n[14] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/411456_PLAY_HomeQuestionnares_12_bilingual_english.xlsx\"\n[15] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/411469_PLAY_HomeQuestionnares_12_bilingual_spanish.xlsx\"\n[16] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740623_PLAY_HomeQuestionnares_12_bilingual_english.xlsx\"\n[17] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740624_PLAY_HomeQuestionnares_12_bilingual_spanish.xlsx\"\n[18] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740625_PLAY_HomeQuestionnares_12_english.xlsx\"          \n[19] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740626_PLAY_HomeQuestionnares_18_bilingual_english.xlsx\"\n[20] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740627_PLAY_HomeQuestionnares_18_bilingual_spanish.xlsx\"\n[21] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740628_PLAY_HomeQuestionnares_18_english.xlsx\"          \n[22] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740629_PLAY_HomeQuestionnares_24_english.xlsx\"          \n[23] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740630_PLAY_HomeQuestionnares_24_bilingual_spanish.xlsx\"\n[24] \"/Users/rog1/rrr/KoBoToolbox/data/xlsx/home_visit/std_name/740631_PLAY_HomeQuestionnares_24_bilingual_english.xlsx\"\n\n\n\n\nSave renamed xlsx as csv\nWe save the (answer) CSVs in data/csv/home_visit/raw.\n\n\nCode\nfile_load_xlsx_save_many_csv(\n  in_dir = file.path(here::here(), \"data/xlsx/home_visit/std_name\"),\n  out_dir = file.path(here::here(), \"data/csv/home_visit/raw\"),\n  filter_str = \".*\"\n)\n\n\n [1] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/1136694_PLAY_HomeQuestionnares_18_english.csv\"         \n [2] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/1151489_PLAY_HomeQuestionnares_18_english.csv\"         \n [3] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/307736_PLAY_HomeQuestionnares_18_english.csv\"          \n [4] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/331453_PLAY_HomeQuestionnares_24_english.csv\"          \n [5] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/331848_PLAY_HomeQuestionnares_12_english.csv\"          \n [6] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/334099_PLAY_HomeQuestionnares_12_bilingual_english.csv\"\n [7] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/363349_PLAY_HomeQuestionnares_18_english.csv\"          \n [8] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/363381_PLAY_HomeQuestionnares_24_english.csv\"          \n [9] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/363431_PLAY_HomeQuestionnares_12_english.csv\"          \n[10] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/363465_PLAY_HomeQuestionnares_24_bilingual_english.csv\"\n[11] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/363466_PLAY_HomeQuestionnares_18_bilingual_english.csv\"\n[12] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/408149_PLAY_HomeQuestionnares_24_bilingual_spanish.csv\"\n[13] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/411388_PLAY_HomeQuestionnares_18_bilingual_spanish.csv\"\n[14] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/411456_PLAY_HomeQuestionnares_12_bilingual_english.csv\"\n[15] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/411469_PLAY_HomeQuestionnares_12_bilingual_spanish.csv\"\n[16] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740623_PLAY_HomeQuestionnares_12_bilingual_english.csv\"\n[17] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740624_PLAY_HomeQuestionnares_12_bilingual_spanish.csv\"\n[18] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740625_PLAY_HomeQuestionnares_12_english.csv\"          \n[19] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740626_PLAY_HomeQuestionnares_18_bilingual_english.csv\"\n[20] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740627_PLAY_HomeQuestionnares_18_bilingual_spanish.csv\"\n[21] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740628_PLAY_HomeQuestionnares_18_english.csv\"          \n[22] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740629_PLAY_HomeQuestionnares_24_english.csv\"          \n[23] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740630_PLAY_HomeQuestionnares_24_bilingual_spanish.csv\"\n[24] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/raw/740631_PLAY_HomeQuestionnares_24_bilingual_english.csv\"",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "home-visit-gather.html#split-mb-cdi-from-non",
    "href": "home-visit-gather.html#split-mb-cdi-from-non",
    "title": "Gather",
    "section": "Split MB-CDI from non",
    "text": "Split MB-CDI from non\nNext we import a CSV for a given form year, age group, and language group, and create two new CSV files: one with the MB-CDI data and one with all of the other survey questions.\nBy default, the document presumes that we want to convert all of the CSV files\nExtract the ‘non-mbcdi’ questions first and add ‘non_mbcdi’ to the filename.\n\n\nCode\nfile_split_non_mbcdi_csvs(\n  fl = list.files(\n    file.path(here::here(), \"data/csv/home_visit/raw\"),\n    \"\\\\.csv$\",\n    full.names = TRUE\n  ),\n  out_dir = file.path(here::here(), \"data/csv/home_visit/non_mbcdi/raw\")\n)\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/1136694_non_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/1151489_non_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/307736_non_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/331453_non_mbcdi_24_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/331848_non_mbcdi_12_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/334099_non_mbcdi_12_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363349_non_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363381_non_mbcdi_24_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363431_non_mbcdi_12_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363465_non_mbcdi_24_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363466_non_mbcdi_18_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/408149_non_mbcdi_24_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/411388_non_mbcdi_18_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/411456_non_mbcdi_12_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/411469_non_mbcdi_12_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740623_non_mbcdi_12_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740624_non_mbcdi_12_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740625_non_mbcdi_12_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740626_non_mbcdi_18_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740627_non_mbcdi_18_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740628_non_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740629_non_mbcdi_24_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740630_non_mbcdi_24_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740631_non_mbcdi_24_bilingual_english.csv\n\n\n [1] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/1136694_non_mbcdi_18_english.csv\"         \n [2] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/1151489_non_mbcdi_18_english.csv\"         \n [3] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/307736_non_mbcdi_18_english.csv\"          \n [4] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/331453_non_mbcdi_24_english.csv\"          \n [5] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/331848_non_mbcdi_12_english.csv\"          \n [6] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/334099_non_mbcdi_12_bilingual_english.csv\"\n [7] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363349_non_mbcdi_18_english.csv\"          \n [8] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363381_non_mbcdi_24_english.csv\"          \n [9] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363431_non_mbcdi_12_english.csv\"          \n[10] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363465_non_mbcdi_24_bilingual_english.csv\"\n[11] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/363466_non_mbcdi_18_bilingual_english.csv\"\n[12] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/408149_non_mbcdi_24_bilingual_spanish.csv\"\n[13] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/411388_non_mbcdi_18_bilingual_spanish.csv\"\n[14] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/411456_non_mbcdi_12_bilingual_english.csv\"\n[15] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/411469_non_mbcdi_12_bilingual_spanish.csv\"\n[16] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740623_non_mbcdi_12_bilingual_english.csv\"\n[17] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740624_non_mbcdi_12_bilingual_spanish.csv\"\n[18] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740625_non_mbcdi_12_english.csv\"          \n[19] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740626_non_mbcdi_18_bilingual_english.csv\"\n[20] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740627_non_mbcdi_18_bilingual_spanish.csv\"\n[21] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740628_non_mbcdi_18_english.csv\"          \n[22] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740629_non_mbcdi_24_english.csv\"          \n[23] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740630_non_mbcdi_24_bilingual_spanish.csv\"\n[24] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/raw/740631_non_mbcdi_24_bilingual_english.csv\"\n\n\nCreating a separate MBCDI CSV relies on a very similar function file_split_mbcdi_csvs.\n\n\nCode\nfile_split_mbcdi_csvs(\n  fl = list.files(\n    file.path(here::here(), \"data/csv/home_visit/raw\"),\n    \"\\\\.csv$\",\n    full.names = TRUE\n  ),\n  out_dir = file.path(here::here(), \"data/csv/home_visit/mbcdi\")\n)\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/1136694_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/1151489_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/307736_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/331453_mbcdi_24_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/331848_mbcdi_12_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/334099_mbcdi_12_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363349_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363381_mbcdi_24_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363431_mbcdi_12_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363465_mbcdi_24_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363466_mbcdi_18_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/408149_mbcdi_24_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/411388_mbcdi_18_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/411456_mbcdi_12_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/411469_mbcdi_12_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740623_mbcdi_12_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740624_mbcdi_12_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740625_mbcdi_12_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740626_mbcdi_18_bilingual_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740627_mbcdi_18_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740628_mbcdi_18_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740629_mbcdi_24_english.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740630_mbcdi_24_bilingual_spanish.csv\n\n\nSaved /Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740631_mbcdi_24_bilingual_english.csv\n\n\n [1] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/1136694_mbcdi_18_english.csv\"         \n [2] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/1151489_mbcdi_18_english.csv\"         \n [3] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/307736_mbcdi_18_english.csv\"          \n [4] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/331453_mbcdi_24_english.csv\"          \n [5] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/331848_mbcdi_12_english.csv\"          \n [6] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/334099_mbcdi_12_bilingual_english.csv\"\n [7] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363349_mbcdi_18_english.csv\"          \n [8] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363381_mbcdi_24_english.csv\"          \n [9] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363431_mbcdi_12_english.csv\"          \n[10] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363465_mbcdi_24_bilingual_english.csv\"\n[11] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/363466_mbcdi_18_bilingual_english.csv\"\n[12] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/408149_mbcdi_24_bilingual_spanish.csv\"\n[13] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/411388_mbcdi_18_bilingual_spanish.csv\"\n[14] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/411456_mbcdi_12_bilingual_english.csv\"\n[15] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/411469_mbcdi_12_bilingual_spanish.csv\"\n[16] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740623_mbcdi_12_bilingual_english.csv\"\n[17] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740624_mbcdi_12_bilingual_spanish.csv\"\n[18] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740625_mbcdi_12_english.csv\"          \n[19] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740626_mbcdi_18_bilingual_english.csv\"\n[20] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740627_mbcdi_18_bilingual_spanish.csv\"\n[21] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740628_mbcdi_18_english.csv\"          \n[22] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740629_mbcdi_24_english.csv\"          \n[23] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740630_mbcdi_24_bilingual_spanish.csv\"\n[24] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/mbcdi/740631_mbcdi_24_bilingual_english.csv\"",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html",
    "href": "home-visit-aggregate.html",
    "title": "Aggregate",
    "section": "",
    "text": "About\nThis page documents the process for combining separate files into aggregate files containing data from many participants.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Aggregate</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#setup",
    "href": "home-visit-aggregate.html#setup",
    "title": "Aggregate",
    "section": "Setup",
    "text": "Setup\n\n\nCode\nfl &lt;-\n  list.files(\n    file.path(here::here(), \"R\"),\n    \"^load|^kobo_|^file_|^screen_|^ecbq_|^health_|^databrary|^home|^make|^export|^post_visit|CONSTANTS|utils\",\n    full.names = TRUE\n  )\npurrr::walk(fl, source)\n\nsuppressPackageStartupMessages(library(tidyverse))",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Aggregate</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#remove-identifiers",
    "href": "home-visit-aggregate.html#remove-identifiers",
    "title": "Aggregate",
    "section": "Remove identifiers",
    "text": "Remove identifiers\nThe non-MBCDI file contains the identifiers, so that is the target of this removal process.\n\nNote that we have added data to .gitignore in protocol/, the root directory for the HTML protocol, so none of the data files should be made available via git or GitHub. This also means that there is no version control being done on raw data files themselves.\n\ntar_target(\n  home_visit_remove_identifiers,\n  purrr::map_chr(\n    home_visit_non_mbcdi,\n    open_deidentify_save,\n    csv_save_dir = \"data/csv/home_visit/non_mbcdi/deid\",\n      these_questions = 'non_mbcdi'\n  )\n)\n\n\nCode\nhome_visit_non_mbcdi &lt;- list.files(file.path(here::here(), \"data/csv/home_visit/non_mbcdi/raw\"),\n                 \"\\\\.csv$\", full.names = TRUE)\npurrr::map_chr(\n    home_visit_non_mbcdi,\n    file_open_deidentify_save,\n    csv_save_dir = file.path(here::here(), \"data/csv/home_visit/non_mbcdi/deid\"),\n      these_questions = 'non_mbcdi'\n  )\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/1136694_non_mbcdi_18_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/1151489_non_mbcdi_18_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363465_non_mbcdi_24_bilingual_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363466_non_mbcdi_18_bilingual_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411388_non_mbcdi_18_bilingual_spanish_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv`\n\n\nSaved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv`\n\n\n [1] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/1136694_non_mbcdi_18_english_deidentified.csv\"         \n [2] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/1151489_non_mbcdi_18_english_deidentified.csv\"         \n [3] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv\"          \n [4] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv\"          \n [5] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv\"          \n [6] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv\"\n [7] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv\"          \n [8] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv\"          \n [9] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv\"          \n[10] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363465_non_mbcdi_24_bilingual_english_deidentified.csv\"\n[11] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363466_non_mbcdi_18_bilingual_english_deidentified.csv\"\n[12] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv\"\n[13] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411388_non_mbcdi_18_bilingual_spanish_deidentified.csv\"\n[14] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv\"\n[15] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv\"\n[16] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv\"\n[17] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv\"\n[18] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv\"          \n[19] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv\"\n[20] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv\"\n[21] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv\"          \n[22] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv\"          \n[23] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv\"\n[24] \"/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv\"",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Aggregate</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#quality-assurance-qa-reviews",
    "href": "home-visit-aggregate.html#quality-assurance-qa-reviews",
    "title": "Aggregate",
    "section": "Quality assurance (QA) reviews",
    "text": "Quality assurance (QA) reviews\n\nMB-CDI files\n\n\n\n\n\n\nNote\n\n\n\nTo be completed.\n\n\n\n\nNon-MB-CDI files\nCreate a helper function to create a data set with summary information about the data files.\n\n\nCode\nsummarize_non_mbcdi_qs &lt;- function(fn) {\n  stopifnot(is.character(fn))\n  \n  if (!file.exists(fn)) {\n    stop('File not found `', fn, '`')\n  } else {\n    df &lt;- readr::read_csv(fn, show_col_types = FALSE)\n    if (!is.data.frame(df)) {\n      stop('Error reading data frame')\n    } else {\n      out_df &lt;-\n        tibble(\n          file_name = basename(fn),\n          n_rows = dim(df)[1],\n          n_vars = dim(df)[2]\n        )\n      dplyr::arrange(out_df, file_name)\n    }\n  }\n}\n\n\nSelect the de-identified CSVs to examine.\n\n\nCode\nfl &lt;-\n  list.files(\n    file.path(here::here(), \"data/csv/home_visit/non_mbcdi/deid\"),\n    '^[0-9]+_non_mbcdi_[12|18|24].*deidentified',\n    full.names = TRUE\n  )\n\nPLAY_forms &lt;- purrr::map_df(fl, summarize_non_mbcdi_qs)\n\nPLAY_forms %&gt;%\n  knitr::kable(., format = 'html') %&gt;%\n  kableExtra::kable_classic()\n\n\n\n\n\nfile_name\nn_rows\nn_vars\n\n\n\n\n1136694_non_mbcdi_18_english_deidentified.csv\n0\n288\n\n\n1151489_non_mbcdi_18_english_deidentified.csv\n0\n286\n\n\n307736_non_mbcdi_18_english_deidentified.csv\n4\n274\n\n\n331453_non_mbcdi_24_english_deidentified.csv\n3\n274\n\n\n331848_non_mbcdi_12_english_deidentified.csv\n4\n267\n\n\n334099_non_mbcdi_12_bilingual_english_deidentified.csv\n1\n267\n\n\n363349_non_mbcdi_18_english_deidentified.csv\n9\n280\n\n\n363381_non_mbcdi_24_english_deidentified.csv\n8\n280\n\n\n363431_non_mbcdi_12_english_deidentified.csv\n10\n281\n\n\n363465_non_mbcdi_24_bilingual_english_deidentified.csv\n0\n280\n\n\n363466_non_mbcdi_18_bilingual_english_deidentified.csv\n0\n280\n\n\n408149_non_mbcdi_24_bilingual_spanish_deidentified.csv\n1\n280\n\n\n411388_non_mbcdi_18_bilingual_spanish_deidentified.csv\n0\n280\n\n\n411456_non_mbcdi_12_bilingual_english_deidentified.csv\n1\n280\n\n\n411469_non_mbcdi_12_bilingual_spanish_deidentified.csv\n1\n280\n\n\n740623_non_mbcdi_12_bilingual_english_deidentified.csv\n49\n288\n\n\n740624_non_mbcdi_12_bilingual_spanish_deidentified.csv\n5\n288\n\n\n740625_non_mbcdi_12_english_deidentified.csv\n251\n288\n\n\n740626_non_mbcdi_18_bilingual_english_deidentified.csv\n63\n287\n\n\n740627_non_mbcdi_18_bilingual_spanish_deidentified.csv\n8\n287\n\n\n740628_non_mbcdi_18_english_deidentified.csv\n234\n288\n\n\n740629_non_mbcdi_24_english_deidentified.csv\n195\n287\n\n\n740630_non_mbcdi_24_bilingual_spanish_deidentified.csv\n4\n287\n\n\n740631_non_mbcdi_24_bilingual_english_deidentified.csv\n49\n287\n\n\n\n\n\n\n\nThe later forms (with higher form numbers–the leading integers in the file names) are the newer ones. These generally have the largest number of entries and have similar numbers of columns–either 287 or 288. Accordingly, we focus our cleaning efforts here first.\nWe start with the data files that have \\(n=288\\) columns.\n\n\nCode\ndf740623 &lt;-\n  readr::read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\ndf740624 &lt;-\n  readr::read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\nsum(names(df740623) == names(df740624))\n\n\n[1] 288\n\n\n\n\nCode\ndf740625 &lt;-\n  readr::read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\nsum(names(df740623) == names(df740625))\n\n\n[1] 288\n\n\n\n\nCode\ndf740628 &lt;-\n  readr::read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\nsum(names(df740623) == names(df740628))\n\n\n[1] 288\n\n\nSo, four of the most recent data files with \\(n=288\\) columns can be aggregated without modification.\nLet’s turn to the more recent files with \\(n=287\\) columns.\n\n\nCode\ndf740626 &lt;-\n  readr::read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\ndf740627 &lt;-\n  readr::read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\nsum(names(df740626) == names(df740627))\n\n\n[1] 100\n\n\nWhere does the misalignment arise?\n\n\nCode\nnames(df740626) == names(df740627)\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nThe misalignment arises somewhere near column 92.\n\n\nCode\ndf740629 &lt;-\n  readr::read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\nsum(names(df740626) == names(df740629))\n\n\n[1] 287\n\n\nSo, df740626 and df740629 are aligned and can be merged.\n\n\nCode\ndf740630 &lt;-\n  readr::read_csv(\n    file.path(here::here(), \"data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv\"),\n    show_col_types = FALSE\n  )\n\nsum(names(df740626) == names(df740630))\n\n\n[1] 100\n\n\nCode\nnames(df740626) == names(df740630)\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nThese files also fall out of alignment near column 92.\n\n\nCode\ndf740631 &lt;-\n  readr::read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\nsum(names(df740626) == names(df740631))\n\n\n[1] 100\n\n\nCode\nnames(df740626) == names(df740631)\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nAnd these files fall out of alignment near column 92.\nLet’s see if df740627, df740630, and df740631 are aligned with one another.\n\n\nCode\nsum(names(df740627) == names(df740630))\n\n\n[1] 287\n\n\nCode\nsum(names(df740627) == names(df740631))\n\n\n[1] 287\n\n\nYes, they are. So, these three can be merged. We do that first, then address the discrepancies between aggregates.\n\n\n‘Older’ forms\nThe “older” forms have varied numbers of columns. We focus on thos with data (n_vars &gt; 0)\n\n\nCode\ndf307736 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\ndf331453 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv\"\n    )\n    ,\n    show_col_types = FALSE\n  )\n\ndf331848 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv\"\n    )\n    ,\n    show_col_types = FALSE\n  )\n\ndf334099 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\ndf363349 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv\"\n    )\n    ,\n    show_col_types = FALSE\n  )\n\ndf363381 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv\"\n    )\n    ,\n    show_col_types = FALSE\n  )\n\ndf363431 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv\"\n    )\n    ,\n    show_col_types = FALSE\n  )\n\ndf408149 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv\"\n    )\n    ,\n    show_col_types = FALSE\n  )\n\ndf411456 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv\"\n    )\n    ,\n    show_col_types = FALSE\n  )\n\ndf411469 &lt;-\n  read_csv(\n    file.path(\n      here::here(),\n      \"data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv\"\n    ),\n    show_col_types = FALSE\n  )\n\n\nLet’s look at the two forms that have the same number of columns, \\(n=274\\), 307736 and 331453.\n\n\nCode\nnames(df307736) == names(df331453)\n\n\n  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[181] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[196] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[211] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[226] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[241] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[271] TRUE TRUE TRUE TRUE\n\n\nCode\nlength(names(df307736) == names(df331453)) == length(names(df307736))\n\n\n[1] TRUE\n\n\nSo, these two are identical and could be merged.\n\n\nCode\nhv_deid_fl &lt;- list.files(file.path(here::here(), \"data/csv/home_visit/non_mbcdi/deid\"), \"\\\\.csv$\", full.names = TRUE)\n\nfiles_274_cols &lt;- stringr::str_detect(hv_deid_fl, \"/(307736|331453)\")\n\ndf_merge_274_cols &lt;- file_make_aggregate_from_csvs(hv_deid_fl[files_274_cols])\n\n\nHow about the files with \\(n=267\\) columns, 331848 and 334099?\n\n\nCode\nnames(df331848) == names(df334099)\n\n\n  [1] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[265]  TRUE  TRUE  TRUE\n\n\nCode\nlength(names(df331848) == names(df334099)) == length(names(df331848))\n\n\n[1] TRUE\n\n\n\n\nCode\nnames(df331848) |&gt; head()\n\n\n[1] \"group_combinedquestionnaires/participant_id\"             \n[2] \"start\"                                                   \n[3] \"end\"                                                     \n[4] \"group_combinedquestionnaires/note_fillthisoutbeforestudy\"\n[5] \"group_combinedquestionnaires/site_id\"                    \n[6] \"group_combinedquestionnaires/subject_number\"             \n\n\nCode\nnames(df334099) |&gt; head()\n\n\n[1] \"group_jo84c13/participant_id\"             \n[2] \"start\"                                    \n[3] \"end\"                                      \n[4] \"group_jo84c13/note_fillthisoutbeforestudy\"\n[5] \"group_jo84c13/site_id\"                    \n[6] \"group_jo84c13/subject_number\"             \n\n\nThere is an odd difference in the group label, group_combinedquestionnaires vs. group_jo84c13.\nLet’s try deleting the initial group labels and compare again.\n\n\nCode\nn1 &lt;- names(df331848)\nn2 &lt;- names(df334099)\n\nnames(df331848) %&gt;% stringr::str_remove(\"group_combinedquestionnaires/\") |&gt; head()\n\n\n[1] \"participant_id\"              \"start\"                      \n[3] \"end\"                         \"note_fillthisoutbeforestudy\"\n[5] \"site_id\"                     \"subject_number\"             \n\n\nCode\nnames(df334099) %&gt;% stringr::str_remove(\"group_jo84c13/\") |&gt; head()\n\n\n[1] \"participant_id\"              \"start\"                      \n[3] \"end\"                         \"note_fillthisoutbeforestudy\"\n[5] \"site_id\"                     \"subject_number\"             \n\n\nThat looks promising.\n\n\nCode\nnames(df331848) %&gt;% stringr::str_remove(\"group_combinedquestionnaires/\") -&gt; n1\nnames(df334099) %&gt;% stringr::str_remove(\"group_jo84c13/\") -&gt; n2\nn1 == n2\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE\n [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[265]  TRUE  TRUE  TRUE\n\n\n\n\nCode\ncbind(n1[8:15], n2[8:15])\n\n\n     [,1]                     [,2]                    \n[1,] \"test_date\"              \"test_date\"             \n[2,] \"child_sex\"              \"child_birth_date\"      \n[3,] \"age_group\"              \"child_sex\"             \n[4,] \"language_child\"         \"age_group\"             \n[5,] \"language_child/english\" \"language_child\"        \n[6,] \"language_child/spanish\" \"language_child/english\"\n[7,] \"language_instruction\"   \"language_child/spanish\"\n[8,] \"acknowledge_site\"       \"language_instruction\"  \n\n\nn2 or df334099 has a child_birth_date field in position 9 that the other data frame does not have.\n\n\nCode\nn1 |&gt; str_detect(\"child_birth_date\") |&gt; sum()\n\n\n[1] 0\n\n\nIf we delete that variable, the data frames will no longer have the same number of columns. Let’s explore that anyway.\n\n\nCode\nn2_2 &lt;- n2[-9]\n\nn1 == n2_2\n\n\nWarning in n1 == n2_2: longer object length is not a multiple of shorter object\nlength\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE\n [37]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [49] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE\n\n\nThat helps a bit, but we diverge around column 29.\n\n\nCode\ncbind(n1[28:51], n2_2[28:51])\n\n\n      [,1]                                                                                                \n [1,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested\"              \n [2,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/birthhospital\"\n [3,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/afterhome\"    \n [4,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no\"           \n [5,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused\"      \n [6,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/donotknow\"    \n [7,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested\"               \n [8,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/birthhospital\" \n [9,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/afterhome\"     \n[10,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no\"            \n[11,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused\"       \n[12,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow\"     \n[13,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies\"       \n[14,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection\"   \n[15,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma\"          \n[16,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory\"     \n[17,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal\"\n[18,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc\"              \n[19,] \"group_homevisitquestionnaires/group_health/group_general_health/child_injury_times\"                \n[20,] \"group_homevisitquestionnaires/group_health/group_general_health/comment_injury\"                    \n[21,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_general_health\"           \n[22,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"                   \n[23,] \"group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care\"                           \n[24,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"                       \n      [,2]                                                                                                                                  \n [1,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested\"                                                \n [2,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__in_the_bi\"                                 \n [3,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__after_goi\"                                 \n [4,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no\"                                             \n [5,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused\"                                        \n [6,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/don_t_know\"                                     \n [7,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested\"                                                 \n [8,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__in_the_bi\"                                  \n [9,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__after_goi\"                                  \n[10,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no\"                                              \n[11,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused\"                                         \n[12,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/don_t_know\"                                      \n[13,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/child_allergies_infections_ill_header\"\n[14,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies\"                            \n[15,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection\"                        \n[16,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma\"                               \n[17,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory\"                          \n[18,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal\"                     \n[19,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc\"                                                \n[20,] \"group_homevisitquestionnaires/group_health/group_general_health/child_injury_times\"                                                  \n[21,] \"group_homevisitquestionnaires/group_health/group_general_health/comment_injury\"                                                      \n[22,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_general_health\"                                             \n[23,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"                                                     \n[24,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"                                                         \n\n\nThese question labels looks very similar. There are just some minor changes in the variable names. n2_2 has an extra variable in column 40.\n\n\nCode\nn2_3 &lt;- n2_2[-40]\n\n\nThen, we can rename some of the columns in n2_3 using corresponding names from n1.\n\n\nCode\nn2_3 |&gt; stringr::str_replace(\"yes__in_the_bi\", \"birthhospital\") |&gt; stringr::str_replace(\"yes__after_goi\", \"afterhome\") |&gt; stringr::str_replace(\"don_t_know\", \"donotknow\") -&gt; n2_4\n\nn1 == n2_4\n\n\nWarning in n1 == n2_4: longer object length is not a multiple of shorter object\nlength\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE\n[229]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE\n\n\n\n\nCode\ncbind(n1[39:51], n2_4[39:51])\n\n\n      [,1]                                                                                                \n [1,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow\"     \n [2,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies\"       \n [3,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection\"   \n [4,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma\"          \n [5,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory\"     \n [6,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal\"\n [7,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc\"              \n [8,] \"group_homevisitquestionnaires/group_health/group_general_health/child_injury_times\"                \n [9,] \"group_homevisitquestionnaires/group_health/group_general_health/comment_injury\"                    \n[10,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_general_health\"           \n[11,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"                   \n[12,] \"group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care\"                           \n[13,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"                       \n      [,2]                                                                                                             \n [1,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow\"                  \n [2,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies\"       \n [3,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection\"   \n [4,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma\"          \n [5,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory\"     \n [6,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal\"\n [7,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc\"                           \n [8,] \"group_homevisitquestionnaires/group_health/group_general_health/child_injury_times\"                             \n [9,] \"group_homevisitquestionnaires/group_health/group_general_health/comment_injury\"                                 \n[10,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_general_health\"                        \n[11,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"                                \n[12,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"                                    \n[13,] \"group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking\"                                      \n\n\nn1 has a group_medicalprof label from allergies through gastrointestinal; n2_4 has child_allergies_infections_ill for the same questions.\n\n\nCode\nn2_4 |&gt; stringr::str_replace(\"child_allergies_infections_ill\", \"group_medicalprof\") -&gt; n2_5\nn1 == n2_5\n\n\nWarning in n1 == n2_5: longer object length is not a multiple of shorter object\nlength\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE\n[229]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE\n\n\n\n\nCode\ncbind(n1[49:60], n2_5[49:60])\n\n\n      [,1]                                                                             \n [1,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"\n [2,] \"group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care\"        \n [3,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"    \n [4,] \"group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking\"      \n [5,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1\"   \n [6,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2\"   \n [7,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3\"   \n [8,] \"group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now\"       \n [9,] \"group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount\"\n[10,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_house\"         \n[11,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_car\"           \n[12,] \"group_homevisitquestionnaires/group_health/group_smoking/comments_smoking\"      \n      [,2]                                                                             \n [1,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"\n [2,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"    \n [3,] \"group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking\"      \n [4,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1\"   \n [5,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2\"   \n [6,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3\"   \n [7,] \"group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now\"       \n [8,] \"group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount\"\n [9,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_house\"         \n[10,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_car\"           \n[11,] \"group_homevisitquestionnaires/group_health/group_smoking/comments_smoking\"      \n[12,] \"group_homevisitquestionnaires/group_health/group_drinking/pregnant_drinking\"    \n\n\nIt looks like these could be reconciled by deleting prenatal_care from n1.\n\n\nCode\nn1_2 &lt;- n1[-50]\nn1_2 == n2_5\n\n\nWarning in n1_2 == n2_5: longer object length is not a multiple of shorter\nobject length\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE\n\n\n\n\nCode\ncbind(n1_2[64:75], n2_5[64:75])\n\n\n      [,1]                                                                                                          \n [1,] \"group_homevisitquestionnaires/group_health/group_drinking/comments_drinking\"                                 \n [2,] \"group_homevisitquestionnaires/group_health/group_phq4/note_phq4\"                                             \n [3,] \"group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_nervous\"                           \n [4,] \"group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_worrying\"                          \n [5,] \"group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_littleinterest\"                    \n [6,] \"group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_down\"                              \n [7,] \"group_homevisitquestionnaires/group_health/group_phq4/comments_phq4\"                                         \n [8,] \"group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions1\"              \n [9,] \"group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions2\"              \n[10,] \"group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_unfamiliarperson\"\n[11,] \"group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_troubletask\"     \n[12,] \"group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_companyofchild\"  \n      [,2]                                                                                                       \n [1,] \"group_homevisitquestionnaires/group_health/group_drinking/comments_drinking\"                              \n [2,] \"group_homevisitquestionnaires/group_health/group_phq4/Experimenter_These_stions_are_about_you\"            \n [3,] \"group_homevisitquestionnaires/group_health/group_phq4/comments_phq4\"                                      \n [4,] \"group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructor_rothbart\"                           \n [5,] \"group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructions_rothbart2\"                        \n [6,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/rothbart_questions_header\"                \n [7,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_approached_by_a_ld_cling_to_a_parent\"\n [8,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_having_trouble_get_easily_irritated\"\n [9,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_a_familiar_chil_company_of_the_child\"\n[10,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_offered_a_choic_uickly_and_go_for_it\"\n[11,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/During_daily_or_even_eing_quietly_sung_to\"\n[12,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_playing_outdoo_and_excitement_of_it\"\n\n\nIt looks like the phq4 is not in n2_5.\nLet’s check.\n\n\nCode\nn2_5 |&gt; stringr::str_detect(\"phq4\") |&gt; sum()\n\n\n[1] 2\n\n\nYes, there are only two PHQ4-related questions in df334099.\n\n\nCode\ndf334099 |&gt; names() |&gt; stringr::str_detect(\"phq4\") |&gt; sum()\n\n\n[1] 2\n\n\nThis path of reconciliation does not appear fruitful.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Aggregate</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#make-aggregate-files",
    "href": "home-visit-aggregate.html#make-aggregate-files",
    "title": "Aggregate",
    "section": "Make aggregate files",
    "text": "Make aggregate files\n\nnon-MB-CDI files with \\(n=288\\) columns\n\n\nCode\nfiles_288_cols &lt;- stringr::str_detect(hv_deid_fl, \"2[3458]_non_mbcdi.*_deidentified\\\\.csv\")\n\ndf_merge_288_cols &lt;- file_make_aggregate_from_csvs(hv_deid_fl[files_288_cols])\n\n\n\n\nnon-MB-CDI files with \\(n=287\\) columns\n\n\nCode\nfiles_287_cols_1 &lt;- stringr::str_detect(hv_deid_fl, \"2[69]_non_mbcdi.*_deidentified\\\\.csv\")\n\nfiles_287_cols_2 &lt;- stringr::str_detect(hv_deid_fl, \"(740627|740630|740631)_non.*_deidentified\\\\.csv\")\n\ndf_merge_287_cols_1 &lt;- file_make_aggregate_from_csvs(hv_deid_fl[files_287_cols_1])\n\ndf_merge_287_cols_2 &lt;- file_make_aggregate_from_csvs(hv_deid_fl[files_287_cols_2])\n\n\n\n\nExamine groups with \\(n=287\\) cols\nWe focus on the starting column where the column names diverge, column 92.\n\n\nCode\n# targets::tar_load(df_merge_287_cols_1, store=\"../_targets\")\n# targets::tar_load(df_merge_287_cols_2, store=\"../_targets\")\nnames(df_merge_287_cols_1)[92]\n\n\n[1] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_feeding_nutrition.instructions_feeding\"\n\n\nCode\nnames(df_merge_287_cols_2)[92]\n\n\n[1] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_locomotor_milestones.group_health.group_feeding_nutrition.instructions_feeding\"\n\n\nThere is an erroneous group_locomotor_milestones. in the df_merge_287_cols_2 column name.\nA bit of sleuthing determines that this group_locomotor_milestones. label is characteristic of columns 92 to 273.\n\n\nCode\nnames(df_merge_287_cols_2)[92:273] |&gt; stringr::str_detect(pattern = \"group_locomotor_milestones\")\n\n\n  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[181] TRUE TRUE\n\n\nThe following should fix this.\n\n\nCode\nold_names &lt;- names(df_merge_287_cols_2)\nnew_names &lt;- old_names\nnew_names[92:273] &lt;-\n  stringr::str_remove(new_names[92:273], \"group_locomotor_milestones\\\\.\")\nnames(df_merge_287_cols_2) &lt;- new_names\n\n\n\n\nCode\nnames(df_merge_287_cols_2) == names(df_merge_287_cols_1)\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE\n[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE\n[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nWe have a second problem with columns from 114 to 210.\n\n\nCode\nrbind(names(df_merge_287_cols_1)[113:115], names(df_merge_287_cols_2)[113:115])\n\n\n     [,1]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow\"\n     [,2]                                                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"      \n     [,3]                                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection\"\n\n\nOne of the problems has to do with column 114. There is a question ending doctor_told_you in names(df_merge_287_cols_1) but not in names(df_merge_287_cols_2).\n\n\nCode\nnames(df_merge_287_cols_1) |&gt; stringr::str_detect(pattern = \"doctor_told_you\") |&gt; sum()\n\n\n[1] 1\n\n\nCode\nnames(df_merge_287_cols_2) |&gt; stringr::str_detect(pattern = \"doctor_told_you\") |&gt; sum()\n\n\n[1] 0\n\n\nDeleting this question would create additional misalignments and further problems. We cannot proceed without further discussion with our team.\nFor now, let’s generate an array with all of the remaining differences in column names.\n\n\nCode\nnames_differ &lt;- (names(df_merge_287_cols_2) != names(df_merge_287_cols_1))\nsum(names_differ)\n\n\n[1] 103\n\n\n\n\nCode\nrbind(names(df_merge_287_cols_1)[names_differ], names(df_merge_287_cols_2)[names_differ])\n\n\n     [,1]                                                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"      \n     [,2]                                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection\"\n     [,3]                                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma\"       \n     [,4]                                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory\"\n     [,5]                                                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal\"\n     [,6]                                                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc\"                           \n     [,7]                                                                                                               \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times\"  \n     [,8]                                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury\"    \n     [,9]                                                                                                                  \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury\"         \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health\"\n     [,10]                                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal\"        \n     [,11]                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care\"        \n     [,12]                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal\"\n     [,13]                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking\"  \n     [,14]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1\"\n     [,15]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2\"\n     [,16]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3\"\n     [,17]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now\"    \n     [,18]                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now\"       \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount\"\n     [,19]                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house\"         \n     [,20]                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car\"  \n     [,21]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking\"\n     [,22]                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking\"\n     [,23]                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1\"\n     [,24]                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2\"\n     [,25]                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3\"\n     [,26]                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking\"   \n     [,27]                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4\"            \n     [,28]                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4\"        \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4\"\n     [,29]                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous\"     \n     [,30]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying\"\n     [,31]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying\"      \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest\"\n     [,32]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down\"          \n     [,33]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4\"\n     [,34]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1\"\n     [,35]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2\"\n     [,36]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2\"                        \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3\"\n     [,37]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson\"\n     [,38]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask\"     \n     [,39]                                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild\"\n     [,40]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities\"\n     [,41]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung\"     \n     [,42]                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors\"\n     [,43]                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10\"     \n     [,44]                                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10\"       \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks\"\n     [,45]                                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults\"\n     [,46]                                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair\"        \n     [,47]                                                                                                                  \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy\"\n     [,48]                                                                                                                    \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged\"\n     [,49]                                                                                                                           \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged\"       \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity\"\n     [,50]                                                                                                                           \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly\"        \n     [,51]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention\"\n     [,52]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags\"         \n     [,53]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags\"            \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment\"\n     [,54]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy\"          \n     [,55]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles\"\n     [,56]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active\"  \n     [,57]                                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden\"\n     [,58]                                                                                                                    \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful\"\n     [,59]                                                                                                                    \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue\"    \n     [,60]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse\"\n     [,61]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent\"\n     [,62]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum\"\n     [,63]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently\"\n     [,64]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile\"  \n     [,65]                                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold\"       \n     [,66]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold\"         \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult\"\n     [,67]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful\"      \n     [,68]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful\"      \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace\"\n     [,69]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3\" \n     [,70]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed\"\n     [,71]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother\"    \n     [,72]                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother\"      \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople\"\n     [,73]                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart\"                               \n     [,74]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1\"\n     [,75]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology\"       \n     [,76]                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv\"\n     [,77]                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd\"\n     [,78]                                                                                               \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer\"\n     [,79]                                                                                               \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad\"    \n     [,80]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad\"           \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame\"\n     [,81]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame\"      \n     [,82]                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv\"      \n     [,83]                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how\"             \n     [,84]                                                                                           \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how\"              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd\"\n     [,85]                                                                                           \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how\"             \n     [,86]                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how\"                  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer\"\n     [,87]                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how\"             \n     [,88]                                                                                            \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how\"         \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad\"\n     [,89]                                                                                            \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how\"             \n     [,90]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how\"                    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational\"\n     [,91]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how\"             \n     [,92]                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how\"           \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame\"\n     [,93]                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how\"             \n     [,94]                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day\"\n     [,95]                                                                                            \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day\"\n     [,96]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day\"                    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use\"\n     [,97]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale\"       \n     [,98]                                                                                                  \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day\"\n     [,99]                                                                                            \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel1\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1\"\n     [,100]                                                                                           \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel2\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2\"\n     [,101]                                                                                           \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel3\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3\"\n     [,102]                                                                                            \n[1,] \"group_combinedquestionnaires.group_databrary.acknowledge_databrary\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.acknowledge_databrary\"\n     [,103]                                                                                       \n[1,] \"group_combinedquestionnaires.group_databrary.note_saveasdraft\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_saveasdraft\"\n\n\nVisual inspection suggests that these are similar with the following deviations:\n\nAs noted, df_merge_287_cols_1 has a column ending doctor_told_you that is not present in df_merge_287_cols_2.\ndf_merge_287_cols_2 has a column ending technology_use_scale that is not present in the df_merge_287_cols_1\nThere are a set of fields in group_databrary that do not align exactly. We will almost certainly delete these, so the misalignment is not a huge problem.\n\nAs an exploration, let’s see if we can reconcile these by deleting the non-aligning columns.\n\n\nCode\ndf1 &lt;- df_merge_287_cols_1\ndf2 &lt;- df_merge_287_cols_2\n\ndf1 &lt;- df1 %&gt;%\n  dplyr::select(., -contains('doctor_told_you'))\n\ndf2 &lt;- df2 %&gt;%\n  dplyr::select(., -contains('technology_use_scale'))\n\nold_names &lt;- names(df2)\nnew_names &lt;- old_names\nnew_names[92:273] &lt;- stringr::str_remove(new_names[92:273], \"group_locomotor_milestones\\\\.\")\nnames(df2) &lt;- new_names\n\nnames(df1) == names(df2)\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE\n[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE\n[277] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nThis looks promising.\n\n\nCode\nrbind(names(df1)[263], names(df2)[263])\n\n\n     [,1]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day\"\n\n\nThis is easily fixed.\n\n\nCode\nnames(df1)[263] &lt;- names(df2)[263]\n\n\n\n\nCode\nrbind(names(df1)[273:275], names(df2)[273:275])\n\n\n     [,1]                                                                                             \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel1\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1\"\n     [,2]                                                                                             \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel2\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2\"\n     [,3]                                                                                             \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel3\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3\"\n\n\nThe last misalignments relate to Databrary fields.\n\n\nCode\ndf1 &lt;- df1 %&gt;%\n  dplyr::select(., -contains('group_databrary'))\n\ndf2 &lt;- df2 %&gt;%\n  dplyr::select(., -contains('group_databrary'))\n\nnames(df1) == names(df2)\n\n\n  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[181] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[196] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[211] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[226] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[241] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[271] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\nSuccess!",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Aggregate</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#combining-the-two-groups-of-datasets",
    "href": "home-visit-aggregate.html#combining-the-two-groups-of-datasets",
    "title": "Aggregate",
    "section": "Combining the two groups of datasets",
    "text": "Combining the two groups of datasets\nNow, let’s go back to the data frame with 288 cols and see if we can bring these into alignment.\n\n\nCode\ndf3 &lt;- df_merge_288_cols\n\ndf3 &lt;- df3 %&gt;%\n  dplyr::select(., -contains('group_databrary'))\n\nc(dim(df1), dim(df2), dim(df3))\n\n\n[1] 258 281  61 281 539 283\n\n\nCode\nnames(df1) == names(df3)\n\n\nWarning in names(df1) == names(df3): longer object length is not a multiple of\nshorter object length\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n\n\nCode\nrbind(names(df1)[114:115], names(df3)[114:115])\n\n\n     [,1]                                                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"      \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you\"\n     [,2]                                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"    \n\n\nOnce again, there appears to be a problem with the ‘doctor_told_you’ field. We’ll delete it to see if this fixes one of the problems.\n\n\nCode\ndf3 &lt;- df3 %&gt;%\n  dplyr::select(., -contains('doctor_told_you'))\n\nnames(df1) == names(df3)\n\n\nWarning in names(df1) == names(df3): longer object length is not a multiple of\nshorter object length\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[205]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE FALSE FALSE FALSE FALSE\n\n\nWe still have misalignments at column 210.\n\n\nCode\nrbind(names(df1)[210:213], names(df3)[210:213])\n\n\n     [,1]                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals\"               \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale\"\n     [,2]                                                                                              \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals\"   \n     [,3]                                                                                              \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime\"\n     [,4]                                                                                                    \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.transportation\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime\"       \n\n\nThe ’technology_use_scale` exists in one but not the other.\n\n\nCode\ndf3 &lt;- df3 %&gt;%\n  dplyr::select(., -contains('technology_use_scale'))\n\nrbind(dim(df1), dim(df3))\n\n\n     [,1] [,2]\n[1,]  258  281\n[2,]  539  281\n\n\nCode\nnames(df1) == names(df3)\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE\n[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[277]  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\n\nFuture versions of the workflow will need to handle this more elegantly.\nOption 1: Fix the underlying forms.\nOption 2: Add the ‘missing’ columns as NA in post-processing.\n\nFor now, I’m going to create functions that align these data frames. These are incorporated into R/utils.R so we do not source them again here.\n\n\nCode\nremove_technology_use_scale &lt;- function(df) {\n  dplyr::select(df, -contains('technology_use_scale'))\n}\n\nremove_doctor_told_you &lt;- function(df) {\n  dplyr::select(df, -contains('doctor_told_you'))\n}\n\nremove_databrary_fields &lt;- function(df) {\n  dplyr::select(df, -contains('group_databrary'))\n}\n\nreconcile_typicalday &lt;- function(df) {\n  names(df) &lt;- stringr::str_replace_all(names(df), 'typicalday', 'typical_day')\n  df\n}\n\nremove_permissive_locomotor_milestones_label &lt;- function(df) {\n  old_names &lt;- names(df)\n  new_names &lt;- old_names\n  contains_locomotor &lt;-\n    stringr::str_detect(new_names, pattern = \"locomotor_milestones.*health|division|rothbart|mediause|pets|typical|acknowledge\")\n  new_names[contains_locomotor] &lt;-\n    stringr::str_remove(new_names[contains_locomotor], \"group_locomotor_milestones\\\\.\")\n  names(df) &lt;- new_names\n  df\n}\n\nremove_X_meta_cols &lt;- function(df) {\n  dplyr::select(df, -contains(\"X_\"), -contains(\"meta.instanceID\"))\n}\n\nremove_redundant_group_labels &lt;- function(df) {\n  names(df) &lt;- stringr::str_remove_all(names(df), 'group_homevisitquestionnaires\\\\.')\n  names(df) &lt;- stringr::str_remove_all(names(df), 'group_combinedquestionnaires\\\\.')\n  df\n}\n\nclean_dfs &lt;- function(df) {\n  df %&gt;%\n    reconcile_typicalday() %&gt;%\n    remove_technology_use_scale() %&gt;%\n    remove_doctor_told_you() %&gt;%\n    remove_permissive_locomotor_milestones_label() %&gt;%\n    remove_databrary_fields() %&gt;%\n    remove_X_meta_cols() %&gt;%\n    remove_redundant_group_labels()\n}\n\n\nLet’s test this workflow with the unmodified files.\n\n\nCode\ndf1m &lt;- clean_dfs(df_merge_287_cols_1)\ndim(df1m)\n\n\n[1] 258 272\n\n\nCode\ndf2m &lt;- clean_dfs(df_merge_287_cols_2)\ndim(df2m)\n\n\n[1]  61 272\n\n\nCode\ndf3m &lt;- clean_dfs(df_merge_288_cols)\ndim(df3m)\n\n\n[1] 539 272\n\n\nCode\n(names(df1m) == names(df2m)) |&gt; sum()\n\n\n[1] 272\n\n\nCode\n(names(df1m) == names(df3m)) |&gt; sum()\n\n\n[1] 272",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Aggregate</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#merging-and-exporting",
    "href": "home-visit-aggregate.html#merging-and-exporting",
    "title": "Aggregate",
    "section": "Merging and exporting",
    "text": "Merging and exporting\n\n\nCode\ndf &lt;- rbind(df1m, df2m, df3m)\n\n\nSave exported aggregate file.\n\n\nCode\nreadr::write_csv(df, file = file.path(here::here(), \"data/csv/home_visit/agg\", \"PLAY-non-mcdi-raw-latest.csv\"))",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Aggregate</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html",
    "href": "home-visit-clean.html",
    "title": "Clean",
    "section": "",
    "text": "About\nThis page describes how the aggregate home visit survey files are cleaned, measure by measure.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#setup",
    "href": "home-visit-clean.html#setup",
    "title": "Clean",
    "section": "Setup",
    "text": "Setup\n\n\nCode\nsuppressPackageStartupMessages(library(tidyverse))",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#file-wide-changes",
    "href": "home-visit-clean.html#file-wide-changes",
    "title": "Clean",
    "section": "File-wide changes",
    "text": "File-wide changes\n\n\n\n\n\n\nNote\n\n\n\nThis is not elegant, but it does what needs to be done.\n\n\n“Split” ranking levels in Rothbart ECBQ.\n\n\nCode\nxfun::gsub_file(file = file.path(\n    here::here(),\n    \"data/csv/home_visit/agg\",\n    \"PLAY-non-mcdi-raw-latest.csv\"), \"veryrarely\", \"very_rarely\")\n\nxfun::gsub_file(file = file.path(\n    here::here(),\n    \"data/csv/home_visit/agg\",\n    \"PLAY-non-mcdi-raw-latest.csv\"), \"lessthanhalf\", \"less_than_half\")\n\n\nxfun::gsub_file(file = file.path(\n    here::here(),\n    \"data/csv/home_visit/agg\",\n    \"PLAY-non-mcdi-raw-latest.csv\"), \"abouthalf\", \"about_half\")\n\nxfun::gsub_file(file = file.path(\n    here::here(),\n    \"data/csv/home_visit/agg\",\n    \"PLAY-non-mcdi-raw-latest.csv\"), \"morethanhalf\", \"more_than_half\")\n\nxfun::gsub_file(file = file.path(\n    here::here(),\n    \"data/csv/home_visit/agg\",\n    \"PLAY-non-mcdi-raw-latest.csv\"), \"almostalways\", \"almost_always\")",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#load-data-file",
    "href": "home-visit-clean.html#load-data-file",
    "title": "Clean",
    "section": "Load data file",
    "text": "Load data file\n\n\nCode\n# if (!('home_visit_df' %in% ls())) {\n#   targets::tar_load(home_visit_df, store=\"../_targets\")\n# }\nhome_visit_df &lt;- readr::read_csv(\n  file.path(\n    here::here(),\n    \"data/csv/home_visit/agg\",\n    \"PLAY-non-mcdi-raw-latest.csv\"\n  ),\n  col_types = cols(.default = \"c\"),\n  show_col_types = FALSE\n)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#remove-metadata-variables",
    "href": "home-visit-clean.html#remove-metadata-variables",
    "title": "Clean",
    "section": "Remove metadata variables",
    "text": "Remove metadata variables\n\n\nCode\nmetadata_cols &lt;- stringr::str_detect(names(home_visit_df), \"note|instructions|acknowledge\")\n\nno_metadata_cols_index &lt;- seq_along(home_visit_df)[!metadata_cols]\n\nhome_visit_df_trim &lt;- home_visit_df |&gt;\n  dplyr::select(all_of(no_metadata_cols_index)) |&gt;\n  dplyr::select(-start,\n                -end)\n\n\nThe untrimmed data frame had 272 variables. The trimmed data frame has 216 variables.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#change-variable-names",
    "href": "home-visit-clean.html#change-variable-names",
    "title": "Clean",
    "section": "Change variable names",
    "text": "Change variable names\nWe change some variable names to conform with later stages of processing when we merge the KoBoToolbox data with those from the Databrary session spreadsheet.\n\n\nCode\nhome_visit_df_trim &lt;- home_visit_df_trim |&gt;\n  dplyr::rename(participant_guid = participant_id,\n                participant_ID = subject_number)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#language-variables",
    "href": "home-visit-clean.html#language-variables",
    "title": "Clean",
    "section": "Language variables",
    "text": "Language variables\nThe raw file contains separate variables indicating whether the child is exposed to English and Spanish at home. We leave those for now.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#locomotion-variables",
    "href": "home-visit-clean.html#locomotion-variables",
    "title": "Clean",
    "section": "Locomotion variables",
    "text": "Locomotion variables\n\n\nCode\nloco_admin_cols &lt;- names(home_visit_df_trim) %in% c(\n  \"locomotor_milestones.date_format\",\n  \"locomotor_milestones.calc_5mo\",\n  \"locomotor_milestones.calc_6mo\",\n  \"locomotor_milestones.calc_7mo\",\n  \"locomotor_milestones.calc_8mo\",\n  \"locomotor_milestones.calc_9mo\",\n  \"locomotor_milestones.calc_10mo\",\n  \"locomotor_milestones.calc_11mo\",\n  \"locomotor_milestones.calc_12mo\",\n  \"locomotor_milestones.calc_13mo\",\n  \"locomotor_milestones.calc_14mo\",\n  \"locomotor_milestones.calc_15mo\",\n  \"locomotor_milestones.calc_16mo\",\n  \"locomotor_milestones.who_walk.walk_onset_check\",\n  \"locomotor_milestones.holiday1.holiday_jan\",\n  \"locomotor_milestones.holiday1.holiday_feb\",\n  \"locomotor_milestones.holiday1.holiday_marchapril\",\n  \"locomotor_milestones.holiday1.holiday_may\",\n  \"locomotor_milestones.holiday1.holiday_june\",\n  \"locomotor_milestones.holiday1.holiday_july\",\n  \"locomotor_milestones.holiday1.holiday_sep\",\n  \"locomotor_milestones.holiday1.holiday_oct\",\n  \"locomotor_milestones.holiday1.holiday_nov\",\n  \"locomotor_milestones.holiday1.holiday_dec\",\n  \"locomotor_milestones.holiday1.memorable_events\",\n  \"locomotor_milestones.k_walk.k_walk_onset_check\",\n  \"locomotor_milestones.crawl_onset.crawl_onset_check\",\n  \"locomotor_milestones.holiday2.holiday_jan2\",\n  \"locomotor_milestones.holiday2.holiday_feb2\",\n  \"locomotor_milestones.holiday2.holiday_marchapril2\",\n  \"locomotor_milestones.holiday2.holiday_may2\",\n  \"locomotor_milestones.holiday2.holiday_june2\",\n  \"locomotor_milestones.holiday2.holiday_july2\",\n  \"locomotor_milestones.holiday2.holiday_sep2\",\n  \"locomotor_milestones.holiday2.holiday_oct2\",\n  \"locomotor_milestones.holiday2.holiday_nov2\",\n  \"locomotor_milestones.holiday2.holiday_dec2\",\n  \"locomotor_milestones.holiday2.memorable_events2\"\n)\n\nloco_admin_index &lt;- seq_along(home_visit_df_trim)[!loco_admin_cols]\n\nhome_visit_df_loco &lt;- home_visit_df_trim |&gt;\n  dplyr::select(all_of(loco_admin_index)) |&gt;\n  dplyr::rename(\n    walk_mos_who = locomotor_milestones.who_walk.who_walk_onset_mo,\n    walk_mos_kea = locomotor_milestones.k_walk.k_walk_onset_mo,\n    crawl_mos = locomotor_milestones.crawl_onset.crawl_onset_mo,\n    walk_onset_date_kea = locomotor_milestones.k_walk.k_walk_onset_date,\n    walk_onset_date_who = locomotor_milestones.who_walk.who_walk_onset_date,\n    walk_onset_comments_who = locomotor_milestones.who_walk.comments_who_walk_onset,\n    walk_onset_comments_kea = locomotor_milestones.k_walk.comments_k_walk_onset,\n    crawl_onset_date = locomotor_milestones.crawl_onset.crawl_onset_date,\n    crawl_onset_comments = locomotor_milestones.crawl_onset.comments_crawl_onset\n  ) |&gt;\n  dplyr::mutate(\n    walk_mos_who = as.numeric(walk_mos_who),\n    walk_mos_kea = as.numeric(walk_mos_kea),\n    crawl_mos = as.numeric(crawl_mos)\n  )",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#health-variables",
    "href": "home-visit-clean.html#health-variables",
    "title": "Clean",
    "section": "Health variables",
    "text": "Health variables\n\n\nCode\nhealth_admin_cols &lt;- names(home_visit_df_loco) %in% c('instructions',\n                                                      'note',\n                                                      'doctor_told_you')\n\nhealth_admin_index &lt;- seq_along(home_visit_df_loco)[!health_admin_cols]\n\nhome_visit_df_health &lt;- home_visit_df_loco |&gt;\n   dplyr::select(all_of(health_admin_index)) |&gt;\n  dplyr::rename(\n    feeding_breastfeed = health.feeding_nutrition.breastfeed,\n    feeding_solidfood_age = health.feeding_nutrition.solidfood_age,\n    feeding_comments = health.feeding_nutrition.comments_feeding,\n    child_sleeping_position = health.general_health.child_sleeping_position,\n    child_health = health.general_health.child_health,\n    child_recent_vaccination = health.general_health.child_vaccination,\n    child_medical_specialist = health.general_health.child_medical_specialist,\n    child_medical_specialist_comments = health.general_health.comments_child_medical_special,\n    child_hearing_tested = health.general_health.child_hearing_tested,\n    child_vision_tested = health.general_health.child_vision_tested,\n    child_allergies = health.general_health.child_allergies_infections_ill.allergies,\n    child_ear_infection = health.general_health.child_allergies_infections_ill.ear_infection,\n    child_asthma = health.general_health.child_allergies_infections_ill.asthma,\n    child_respiratory = health.general_health.child_allergies_infections_ill.respiratory,\n    child_gastrointestinal = health.general_health.child_allergies_infections_ill.gastrointestinal,\n    child_allergy_illness_comments = health.general_health.comments_allergy_etc,\n    child_injury_times = health.general_health.child_injury_times,\n    child_injury_comments = health.general_health.comment_injury,\n    child_health_comments = health.general_health.comments_general_health,\n    mom_prenatal_care = health.prenatal.prenatal_care,\n    mom_prenatal_care_comments = health.prenatal.comments_prenatal,\n    mom_pregnant_smoking = health.smoking.pregnant_smoking,\n    mom_pregnant_smoking_trimester_1 = health.smoking.smoking_trimester_1,\n    mom_pregnant_smoking_trimester_2 = health.smoking.smoking_trimester_2,\n    mom_pregnant_smoking_trimester_3 = health.smoking.smoking_trimester_3,\n    mom_smoking_now = health.smoking.mom_smoking_now,\n    mom_smoking_now_amount = health.smoking.mom_smoking_now_amount,\n    smoking_house = health.smoking.smoking_house,\n    smoking_car = health.smoking.smoking_car,\n    smoking_comments = health.smoking.comments_smoking,\n    mom_pregnant_drinking = health.drinking.pregnant_drinking,\n    mom_drinking_trimester_1 = health.drinking.drinking_trimester_1,\n    mom_drinking_trimester_2 = health.drinking.drinking_trimester_2,\n    mom_drinking_trimester_3 = health.drinking.drinking_trimester_3,\n    mom_drinking_comments = health.drinking.comments_drinking,\n    phq4_nervous = health.phq4.phq4_nervous,\n    phq4_worrying = health.phq4.phq4_worrying,\n    phq4_littleinterest = health.phq4.phq4_littleinterest,\n    phq4_down = health.phq4.phq4_down,\n    phq4_comments = health.phq4.comments_phq4\n  ) |&gt;\n  # Remove duplicating variables\n  dplyr::select(-health.general_health.child_hearing_tested.birthhospital,\n                -health.general_health.child_hearing_tested.afterhome,\n                -health.general_health.child_hearing_tested.no,\n                -health.general_health.child_hearing_tested.refused,\n                -health.general_health.child_hearing_tested.donotknow,\n                -health.general_health.child_vision_tested.birthhospital,\n                -health.general_health.child_vision_tested.afterhome,\n                -health.general_health.child_vision_tested.no,\n                -health.general_health.child_vision_tested.refused,\n                -health.general_health.child_vision_tested.donotknow)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#rothbart-ecbq",
    "href": "home-visit-clean.html#rothbart-ecbq",
    "title": "Clean",
    "section": "Rothbart ECBQ",
    "text": "Rothbart ECBQ\n\n\nCode\nrothbart_vars &lt;- stringr::str_detect(names(home_visit_df_health), 'rothbart')\n\nnew_rothbart_var_names &lt;- stringr::str_replace(names(home_visit_df_health)[rothbart_vars],\n                                               \"rothbart\\\\.rothbartquestions\\\\.\",\n                                               \"\") |&gt;\n  stringr::str_replace(\"rothbart_\", \"ecbq_\")\n\nnames(home_visit_df_health)[rothbart_vars] &lt;- new_rothbart_var_names\n\nhome_visit_ecbq &lt;- home_visit_df_health |&gt;\n  dplyr::rename(ecbq_comments = rothbart.comments_rothbart)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#media-use",
    "href": "home-visit-clean.html#media-use",
    "title": "Clean",
    "section": "Media use",
    "text": "Media use\n\n\nCode\nhome_visit_mediause &lt;- home_visit_ecbq |&gt;\n  dplyr::rename(mediause_home_technology = mediause.home_technology,\n                mediause_technology_child_tv = mediause.technology_child_tv,\n                mediause_technology_child_computer = mediause.technology_child_computer,\n                mediause_technology_child_ipad = mediause.technology_child_ipad,\n                mediause_technology_child_dvd = mediause.technology_child_dvd,\n                mediause_technology_child_educational = mediause.technology_child_educational,\n                mediause_technology_child_videogame = mediause.technology_child_videogame,\n                mediause_tv_how = mediause.tv_how,\n                mediause_dvd_how = mediause.dvd_how,\n                mediause_computer_how = mediause.computer_how,\n                mediause_ipad_how = mediause.ipad_how,\n                mediause_educational_how = mediause.educational_how,\n                mediause_videogame_how = mediause.videogame_how,\n                mediause_tv_hrs_per_day = mediause.tv_hours_per_day,\n                mediause_techuse_meals = mediause.techuse.meals,\n                mediause_techuse_playtime = mediause.techuse.playtime,\n                mediause_techuse_bedtime = mediause.techuse.bedtime,\n                mediause_techuse_transportation = mediause.techuse.transportation,\n                mediause_comments = mediause.comments_technology)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#pets",
    "href": "home-visit-clean.html#pets",
    "title": "Clean",
    "section": "Pets",
    "text": "Pets\n\n\nCode\nhome_visit_pets &lt;- home_visit_mediause |&gt;\n  dplyr::rename(pets_at_home = pets.pets_at_home,\n                pets_types_number = pets.pets_types_number,\n                pets_indoors_outdoors = pets.pets_indoors_outdoors,\n                comments_pets = pets.comments_pets)\n\nunique(home_visit_pets$pets_types_number) |&gt; head(20)\n\n\n [1] \"1 dog\"                                                                                                    \n [2] \"1 cat\"                                                                                                    \n [3] NA                                                                                                         \n [4] \"1 Turtle\"                                                                                                 \n [5] \"2 dogs\"                                                                                                   \n [6] \"2 pugs and 2 fish\"                                                                                        \n [7] \"2 Dogs\"                                                                                                   \n [8] \"3 cats\"                                                                                                   \n [9] \"2 Cats, 1 bearded dragon, 1 snake, 1 tarantula and 1 frog - (just had a fish but it recently passed away)\"\n[10] \"2 cats\"                                                                                                   \n[11] \"7 rabbits\"                                                                                                \n[12] \"3 dogs\"                                                                                                   \n[13] \"1 dog, 1 cat\"                                                                                             \n[14] \"1 dog; 1 cat\"                                                                                             \n[15] \"1 dog and 2 cats\"                                                                                         \n[16] \"1 dog 2 cats\"                                                                                             \n[17] \"dog\"                                                                                                      \n[18] \"One dog\"                                                                                                  \n[19] \"1 dog Dalmatian\"                                                                                          \n[20] \"One cat\"",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#division-of-labor",
    "href": "home-visit-clean.html#division-of-labor",
    "title": "Clean",
    "section": "Division of labor",
    "text": "Division of labor\n\n\nCode\nhome_visit_labor &lt;- home_visit_pets\n\nnames(home_visit_labor) &lt;- stringr::str_remove(names(home_visit_labor), \"division_labor\\\\.\") |&gt;\n  stringr::str_remove(\"laundry\\\\.\") |&gt;\n  stringr::str_remove(\"cleaning\\\\.\") |&gt;\n  stringr::str_remove(\"dishwashing\\\\.\") |&gt;\n  stringr::str_remove(\"cooking\\\\.\") |&gt;\n  stringr::str_remove(\"feeding\\\\.\") |&gt;\n  stringr::str_remove(\"droppick\\\\.\") |&gt;\n  stringr::str_remove(\"bed\\\\.\") |&gt;\n  stringr::str_remove(\"disciplining\\\\.\")",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#typical-day",
    "href": "home-visit-clean.html#typical-day",
    "title": "Clean",
    "section": "Typical day",
    "text": "Typical day\n\n\nCode\nhome_visit_clean &lt;- home_visit_labor\nnames(home_visit_clean) &lt;- stringr::str_remove(names(home_visit_clean), \"typical_day\\\\.\")\nnames(home_visit_clean)\n\n\n  [1] \"participant_guid\"                        \n  [2] \"date_today\"                              \n  [3] \"site_id\"                                 \n  [4] \"participant_ID\"                          \n  [5] \"test_date\"                               \n  [6] \"child_sex\"                               \n  [7] \"age_group\"                               \n  [8] \"language_child\"                          \n  [9] \"language_child.english\"                  \n [10] \"language_child.spanish\"                  \n [11] \"language_instruction\"                    \n [12] \"walk_onset_date_who\"                     \n [13] \"walk_mos_who\"                            \n [14] \"walk_onset_comments_who\"                 \n [15] \"walk_onset_date_kea\"                     \n [16] \"walk_mos_kea\"                            \n [17] \"walk_onset_comments_kea\"                 \n [18] \"crawl_onset_date\"                        \n [19] \"crawl_mos\"                               \n [20] \"crawl_onset_comments\"                    \n [21] \"feeding_breastfeed\"                      \n [22] \"feeding_solidfood_age\"                   \n [23] \"feeding_comments\"                        \n [24] \"child_sleeping_position\"                 \n [25] \"child_health\"                            \n [26] \"child_recent_vaccination\"                \n [27] \"child_medical_specialist\"                \n [28] \"child_medical_specialist_comments\"       \n [29] \"child_hearing_tested\"                    \n [30] \"child_vision_tested\"                     \n [31] \"child_allergies\"                         \n [32] \"child_ear_infection\"                     \n [33] \"child_asthma\"                            \n [34] \"child_respiratory\"                       \n [35] \"child_gastrointestinal\"                  \n [36] \"child_allergy_illness_comments\"          \n [37] \"child_injury_times\"                      \n [38] \"child_injury_comments\"                   \n [39] \"child_health_comments\"                   \n [40] \"mom_prenatal_care\"                       \n [41] \"mom_prenatal_care_comments\"              \n [42] \"mom_pregnant_smoking\"                    \n [43] \"mom_pregnant_smoking_trimester_1\"        \n [44] \"mom_pregnant_smoking_trimester_2\"        \n [45] \"mom_pregnant_smoking_trimester_3\"        \n [46] \"mom_smoking_now\"                         \n [47] \"mom_smoking_now_amount\"                  \n [48] \"smoking_house\"                           \n [49] \"smoking_car\"                             \n [50] \"smoking_comments\"                        \n [51] \"mom_pregnant_drinking\"                   \n [52] \"mom_drinking_trimester_1\"                \n [53] \"mom_drinking_trimester_2\"                \n [54] \"mom_drinking_trimester_3\"                \n [55] \"mom_drinking_comments\"                   \n [56] \"phq4_nervous\"                            \n [57] \"phq4_worrying\"                           \n [58] \"phq4_littleinterest\"                     \n [59] \"phq4_down\"                               \n [60] \"phq4_comments\"                           \n [61] \"ecbq_unfamiliarperson\"                   \n [62] \"ecbq_troubletask\"                        \n [63] \"ecbq_companyofchild\"                     \n [64] \"ecbq_choiceactivities\"                   \n [65] \"ecbq_quietlysung\"                        \n [66] \"ecbq_playingoutdoors\"                    \n [67] \"ecbq_morethan10\"                         \n [68] \"ecbq_respondingremarks\"                  \n [69] \"ecbq_excitedlovedadults\"                 \n [70] \"ecbq_fiddlehair\"                         \n [71] \"ecbq_roughrowdy\"                         \n [72] \"ecbq_rockedhugged\"                       \n [73] \"ecbq_involvednewactivity\"                \n [74] \"ecbq_tirequickly\"                        \n [75] \"ecbq_callattention\"                      \n [76] \"ecbq_tags\"                               \n [77] \"ecbq_noisyenvironment\"                   \n [78] \"ecbq_energy\"                             \n [79] \"ecbq_vehicles\"                           \n [80] \"ecbq_active\"                             \n [81] \"ecbq_forbidden\"                          \n [82] \"ecbq_sadlytearful\"                       \n [83] \"ecbq_downblue\"                           \n [84] \"ecbq_runhouse\"                           \n [85] \"ecbq_excitingevent\"                      \n [86] \"ecbq_tempertantrum\"                      \n [87] \"ecbq_waitpatiently\"                      \n [88] \"ecbq_rockedsmile\"                        \n [89] \"ecbq_mold\"                               \n [90] \"ecbq_interactadult\"                      \n [91] \"ecbq_careful\"                            \n [92] \"ecbq_enternewplace\"                      \n [93] \"ecbq_crymorethan3\"                       \n [94] \"ecbq_easilysoothed\"                      \n [95] \"ecbq_busyother\"                          \n [96] \"ecbq_differentpeople\"                    \n [97] \"ecbq_comments\"                           \n [98] \"mediause_home_technology\"                \n [99] \"mediause.home_technology.tv\"             \n[100] \"mediause.home_technology.dvd\"            \n[101] \"mediause.home_technology.computer\"       \n[102] \"mediause.home_technology.ipad\"           \n[103] \"mediause.home_technology.educationalgame\"\n[104] \"mediause.home_technology.videogame\"      \n[105] \"mediause_technology_child_tv\"            \n[106] \"mediause_tv_how\"                         \n[107] \"mediause_technology_child_dvd\"           \n[108] \"mediause_dvd_how\"                        \n[109] \"mediause_technology_child_computer\"      \n[110] \"mediause_computer_how\"                   \n[111] \"mediause_technology_child_ipad\"          \n[112] \"mediause_ipad_how\"                       \n[113] \"mediause_technology_child_educational\"   \n[114] \"mediause_educational_how\"                \n[115] \"mediause_technology_child_videogame\"     \n[116] \"mediause_videogame_how\"                  \n[117] \"mediause_tv_hrs_per_day\"                 \n[118] \"mediause_techuse_meals\"                  \n[119] \"mediause_techuse_playtime\"               \n[120] \"mediause_techuse_bedtime\"                \n[121] \"mediause_techuse_transportation\"         \n[122] \"mediause_comments\"                       \n[123] \"pets_at_home\"                            \n[124] \"pets_types_number\"                       \n[125] \"pets_indoors_outdoors\"                   \n[126] \"comments_pets\"                           \n[127] \"laundry_self\"                            \n[128] \"laundry_partner\"                         \n[129] \"laundry_otherperson\"                     \n[130] \"labor_laundry_otherperson\"               \n[131] \"cleaning_self\"                           \n[132] \"cleaning_partner\"                        \n[133] \"cleaning_otherperson\"                    \n[134] \"labor_cleaning_otherperson\"              \n[135] \"instruction_dishes\"                      \n[136] \"dishes_self\"                             \n[137] \"dishes_partner\"                          \n[138] \"dishes_otherperson\"                      \n[139] \"labor_dishes_otherperson\"                \n[140] \"cooking_self\"                            \n[141] \"cooking_partner\"                         \n[142] \"cooking_otherperson\"                     \n[143] \"labor_cooking_otherperson\"               \n[144] \"feeding_self\"                            \n[145] \"feeding_partner\"                         \n[146] \"feeding_otherperson\"                     \n[147] \"labor_feeding_otherperson\"               \n[148] \"droppick_self\"                           \n[149] \"droppick_partner\"                        \n[150] \"droppick_otherperson\"                    \n[151] \"labor_droppick_otherperson\"              \n[152] \"bed_self\"                                \n[153] \"bed_partner\"                             \n[154] \"bed_otherperson\"                         \n[155] \"labor_bed_otherperson\"                   \n[156] \"disciplining_self\"                       \n[157] \"disciplining_partner\"                    \n[158] \"disciplining_otherperson\"                \n[159] \"labor_disciplining_otherperson\"          \n[160] \"comments_division_labor\"                 \n[161] \"typical_behavior\"                        \n[162] \"typical_behavior_specifics\"              \n[163] \"typical_activities\"                      \n[164] \"typical_activities_specifics\"            \n[165] \"typical_nightmorning\"                    \n[166] \"typical_nightmorning_specifics\"          \n[167] \"typical_otherthanme\"                     \n[168] \"typical_otherthanme_specifics\"",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#save-cleaned-file",
    "href": "home-visit-clean.html#save-cleaned-file",
    "title": "Clean",
    "section": "Save cleaned file",
    "text": "Save cleaned file\nSave with “latest” label.\n\n\nCode\nreadr::write_csv(home_visit_clean, \"../data/csv/home_visit/agg/PLAY-non-mcdi-kobo-latest.csv\")\n\n\nSave with date-stamp for quality control.\n\n\nCode\nfn &lt;- paste0(\"../data/csv/home_visit/agg/PLAY-non-mcdi-kobo-\", Sys.Date(), \".csv\")\nreadr::write_csv(home_visit_clean, fn)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html",
    "href": "home-visit-viz.html",
    "title": "Visualize",
    "section": "",
    "text": "About\nThis page shows some simple visualizations of the cleaned aggregate home visit questionnaire data file.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#setup",
    "href": "home-visit-viz.html#setup",
    "title": "Visualize",
    "section": "Setup",
    "text": "Setup\nLoad dependencies.\n\n\nCode\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(wordcloud))\nsuppressPackageStartupMessages(library(RColorBrewer))\n\nsource(\"../R/mcdi_viz_wordcloud.R\")\nsource(\"../R/ecbq_plot.R\")\nsource(\"../R/ecbq_plot_chunk.R\")\n\n\nLoad saved “latest” data file.\n\n\nCode\nhv &lt;- readr::read_csv(\"../data/csv/home_visit/agg/PLAY-non-mcdi-kobo-latest.csv\", show_col_types = FALSE)\n\n\n\nChild age\nChild age in months (age_group) by child_sex.\nNote: The child’s exact age in months is part of the Databrary-related data. That is on the work plan.\n\n\nCode\nhome_visit_filtered &lt;- hv |&gt;\n  dplyr::filter(!is.na(age_group),\n                !is.na(child_sex))\n\n\n\n\nCode\nxtabs(formula = ~ age_group + child_sex, \n      data = home_visit_filtered)\n\n\n         child_sex\nage_group female male\n     12mo    165  140\n     18mo    141  164\n     24mo    125  123\n\n\nA total of \\(n=\\) 858 mother-infant dyads have been tested. This includes training and pilot visits.\n\n\nCode\nhome_visit_filtered |&gt;\n  ggplot() +\n  aes(age_group, fill = child_sex) +\n  geom_bar() +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\n\nFigure 10.1: Participants by age group and sex\n\n\n\n\n\n\n\nTime series\nTo calculate cumulative visits, we have to add an index variable\n\n\nCode\ndf &lt;- home_visit_filtered |&gt;\n  dplyr::select(test_date, site_id) |&gt;\n  dplyr::mutate(test_date = as.Date(test_date)) |&gt;\n  dplyr::arrange(test_date) |&gt;\n  dplyr::mutate(n_visits = seq_along(test_date))\n\n\n\n\nCode\ndf |&gt;\n  dplyr::filter(!is.na(test_date),\n                !is.na(n_visits),\n                !is.na(site_id)) |&gt;\n  ggplot() +\n  aes(test_date, n_visits) +\n  geom_point()\n\n\n\n\n\n\n\n\nFigure 10.2: Cumulative home visits by year",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#language-exposure",
    "href": "home-visit-viz.html#language-exposure",
    "title": "Visualize",
    "section": "Language exposure",
    "text": "Language exposure\n\n\nCode\ndf &lt;- hv |&gt;\n  dplyr::mutate(language_child = stringr::str_replace_all(language_child, \" \", \"_\"))\nxtabs(formula = ~ child_sex + language_child, data = df)\n\n\n         language_child\nchild_sex english english_spanish\n   female     347              84\n   male       333              94\n\n\n\n\n\n\n\n\nNote\n\n\n\nThe current workflow seems to omit Spanish-only families. This must be investigated further.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#mb-cdi",
    "href": "home-visit-viz.html#mb-cdi",
    "title": "Visualize",
    "section": "MB-CDI",
    "text": "MB-CDI\n\n\n\n\n\n\nWarning\n\n\n\nWe have temporarily disabled these visualizations while we conform them to a newer workflow.\n\n\n\n12-mo-old English speakers\n\n\nCode\neng_12 &lt;-\n  readr::read_csv(\n    file.path(here::here(), \"data/csv/home_visit/agg/mcdi_english_12_combined.csv\"),\n    col_types = readr::cols(.default = 'c'),\n    show_col_types = FALSE\n  )\n\n\nThere are some duplicate columns we must merge.\n\n\nCode\neng_12_long &lt;- eng_12 |&gt;\n  dplyr::mutate(bath = case_when(!is.na(bath_1) ~ bath_1,\n                                 !is.na(bath_2) ~ bath_2,\n                                 !is.na(bath_3) ~ bath_3,\n                                 !is.na(bath_4) ~ bath_4)) |&gt;\n  dplyr::select(-contains(\"bath_\")) |&gt;\n  dplyr::mutate(choo_choo = case_when(!is.na(choo_choo) ~ choo_choo,\n                                      !is.na(choochoo) ~ choochoo)) |&gt;\n  dplyr::select(-choochoo) |&gt;\n  dplyr::mutate(I = case_when(!is.na(I) ~ I,\n                              !is.na(i) ~ i)) |&gt;\n  dplyr::select(-i) |&gt;\n  dplyr::mutate(mommy = case_when(!is.na(mommy_1) ~ mommy_1,\n                                  !is.na(mommy_2) ~ mommy_2)) |&gt;\n  dplyr::select(-contains(\"mommy_\")) |&gt;\n  dplyr::mutate(outside = case_when(!is.na(outside_1) ~ outside_1,\n                                    !is.na(outside_2) ~ outside_2)) |&gt;\n  dplyr::select(-contains(\"outside_\")) |&gt;\n  dplyr::mutate(please = case_when(!is.na(please_1) ~ please_1,\n                                   !is.na(please_2) ~ please_2)) |&gt;\n  dplyr::select(-contains(\"please_\")) |&gt;\n  dplyr::mutate(telephone = case_when(!is.na(telephone) ~ telephone,\n                                      !is.na(telelphone) ~ telelphone)) |&gt;\n  dplyr::select(-telelphone) |&gt;\n  tidyr::pivot_longer(cols = !(play_id | site_id | subject_number),\n                        names_to = \"word\",\n                        values_to = \"understands_or_says\")\n\nxtabs(~ word + understands_or_says, eng_12_long)\n\n\n                understands_or_says\nword             understands understands_says\n  a                        8                0\n  airplane                26                0\n  allgone                 85               11\n  also                     3                0\n  animal                  19                0\n  apple                    2                0\n  arms                    33                0\n  away                     8                0\n  baabaa                  15               20\n  baby                    84                9\n  babysitter               3                0\n  ball                    89               25\n  balloon                 30                7\n  banana                   2                0\n  bath                   109                7\n  be                       1                0\n  bear                    24                5\n  bed                     58                1\n  beepbeep                 0                0\n  bellybutton              2                0\n  bib                     60                0\n  bicycle                 17                1\n  big                     22                2\n  bird                    32                0\n  bite                    46                1\n  blanket                 37                1\n  blow                    29                0\n  book                   101               17\n  boots                    5                0\n  bottle                  78               36\n  box                     26                1\n  boy                     14                0\n  bread                   19                0\n  break                    2                0\n  broken                   4                0\n  broom                   11                1\n  brother                 24                8\n  brush                   36                1\n  bunny                   34                0\n  button                  11                1\n  bye                     91               57\n  cake                    10                1\n  candy                    3                0\n  car                     59                7\n  cat                     49               17\n  cereal                  11                1\n  chair                   29                0\n  cheese                   1                0\n  chicken                 24                1\n  choo_choo               12                4\n  church                   9                0\n  clockwatch              17                1\n  close                   47                0\n  cockadoodledoo          11                2\n  comb                    14                0\n  cookie                  18                3\n  couch                   32                0\n  cow                     29                5\n  crib                     3                0\n  cry                     42                0\n  cup                     59                4\n  daddy                   38              110\n  dance                   80                0\n  dark                     9                0\n  diaper                  89                3\n  dirty                   26                1\n  dish                     3                0\n  dog                     66               34\n  doll                    26                1\n  dont                    62                2\n  door                    42                2\n  draw                     8                0\n  drawer                   2                0\n  dress                   13                0\n  drum                    31                0\n  duck                    33                4\n  ears                     0                0\n  eat                    109                4\n  egg                     45                2\n  elephant                35                0\n  eye                     37                3\n  face                     1                0\n  fall                    20                0\n  family                  19                0\n  fast                    15                0\n  feed                    25                0\n  finger                  37                0\n  finish                  23                4\n  firetruck               17                0\n  flower                  25                0\n  foot                    55                0\n  for                      4                0\n  frog                    22                0\n  girl                    11                0\n  give                     1                0\n  glass                    2                0\n  glasses                 38                2\n  go                      46                7\n  goodmorning             68                0\n  grandma                 73               15\n  grandpa                 62               16\n  hair                    53                1\n  hammer                   4                0\n  hand                    56                0\n  hat                     30                4\n  have                    16                1\n  head                    43                0\n  help                    37                1\n  here                    34                1\n  hi                      82               62\n  hisher                   8                0\n  hit                     29                0\n  home                    46                0\n  horse                   23                0\n  hot                     48                4\n  how                      0                0\n  hurry                    2                0\n  hurt                    24                1\n  I                       12                1\n  icecream                17                0\n  in                      59                2\n  juice                    4                0\n  jump                    26                0\n  keys                    38                0\n  kick                    22                1\n  kiss                    98                1\n  kitchen                 31                0\n  kitty                   52               13\n  lady                     4                0\n  lamp                     6                0\n  leg                     21                0\n  light                   41                5\n  lion                    23                1\n  look                    77                1\n  man                      2                1\n  many                     6                0\n  me                      16                2\n  meat                    10                0\n  medicine                19                0\n  meow                    43               13\n  milk                    93               12\n  mine                    27                0\n  mommy                   52               99\n  money                    4                0\n  monkey                  33                0\n  moo                      1                0\n  moon                    11                2\n  more                    73               20\n  mouse                    9                0\n  mouth                   53                3\n  nap                      3                0\n  necklace                10                0\n  new                      2                0\n  night                   33                3\n  nightnight              69                9\n  none                    12                0\n  nose                    52                3\n  now                     13                0\n  on                      41                3\n  onetwothree             39                1\n  open                    69                0\n  other                    3                0\n  ouch                    48                5\n  out                     35                1\n  outside                 80                0\n  pajamas                 42                0\n  pants                   33                1\n  paper                   17                0\n  party                    8                0\n  pattycake               45                0\n  pen                     14                0\n  penguin                 11                0\n  picture                 34                0\n  pillow                  25                0\n  plant                   16                0\n  play                    66                1\n  please                  32                2\n  pretty                  11                1\n  purse                    7                0\n  push                    34                0\n  put                     61                0\n  quackquack              21               14\n  radio                    1                0\n  rain                    10                0\n  refrigerator            25                0\n  rock                    12                1\n  say                     21                0\n  scissors                 1                0\n  see                     46                0\n  shh                     76               10\n  shirt                    3                0\n  shoe                    59                2\n  sing                    30                0\n  sink                    12                0\n  sister                  19                2\n  sit                     61                0\n  sky                     22                0\n  sleep                   71                0\n  smile                   49                1\n  soap                    19                0\n  sock                    51                3\n  soft                    34                0\n  some                     5                0\n  spoon                   57                0\n  squirrel                18                0\n  stairs                  50                0\n  stop                     4                0\n  store                   13                0\n  street                   8                0\n  stroller                41                0\n  sun                     21                1\n  swing                    1                0\n  table                   27                0\n  take                    27                0\n  teddybear               30                3\n  telephone               48                0\n  television              23                0\n  thankyou                56                9\n  them                     3                0\n  there                   26                1\n  this                    22                5\n  throw                   52                0\n  tickle                  49                2\n  tiger                   15                2\n  tired                   57                0\n  toast                    6                0\n  today                    4                0\n  tomorrow                 3                0\n  tongue                  31                0\n  tooth                   29                1\n  touch                   48                0\n  towel                   26                1\n  toy                     83                0\n  train                   20                1\n  trash                   25                1\n  tree                    31                5\n  truck                   41                2\n  turtle                  17                2\n  uh_oh                   69               34\n  uhoh                     7                2\n  vroom                   19               25\n  wait                    50                0\n  walk                    65                0\n  want                    34                0\n  wash                    30                0\n  water                   95               13\n  where                   57                1\n  who                     20                1\n  window                  34                0\n  woofwoof                51               26\n  write                    2                0\n  yes                     83               13\n  yumyum                  65               19\n\n\n\n\nCode\nword_ct &lt;- eng_12_long |&gt;\n  dplyr::filter(!is.na(understands_or_says)) |&gt;\n  dplyr::filter(understands_or_says == \"understands\") |&gt;\n  dplyr::count(word, sort = TRUE)\n\nxtabs(~ word + understands_or_says, eng_12_long)\n\n\n                understands_or_says\nword             understands understands_says\n  a                        8                0\n  airplane                26                0\n  allgone                 85               11\n  also                     3                0\n  animal                  19                0\n  apple                    2                0\n  arms                    33                0\n  away                     8                0\n  baabaa                  15               20\n  baby                    84                9\n  babysitter               3                0\n  ball                    89               25\n  balloon                 30                7\n  banana                   2                0\n  bath                   109                7\n  be                       1                0\n  bear                    24                5\n  bed                     58                1\n  beepbeep                 0                0\n  bellybutton              2                0\n  bib                     60                0\n  bicycle                 17                1\n  big                     22                2\n  bird                    32                0\n  bite                    46                1\n  blanket                 37                1\n  blow                    29                0\n  book                   101               17\n  boots                    5                0\n  bottle                  78               36\n  box                     26                1\n  boy                     14                0\n  bread                   19                0\n  break                    2                0\n  broken                   4                0\n  broom                   11                1\n  brother                 24                8\n  brush                   36                1\n  bunny                   34                0\n  button                  11                1\n  bye                     91               57\n  cake                    10                1\n  candy                    3                0\n  car                     59                7\n  cat                     49               17\n  cereal                  11                1\n  chair                   29                0\n  cheese                   1                0\n  chicken                 24                1\n  choo_choo               12                4\n  church                   9                0\n  clockwatch              17                1\n  close                   47                0\n  cockadoodledoo          11                2\n  comb                    14                0\n  cookie                  18                3\n  couch                   32                0\n  cow                     29                5\n  crib                     3                0\n  cry                     42                0\n  cup                     59                4\n  daddy                   38              110\n  dance                   80                0\n  dark                     9                0\n  diaper                  89                3\n  dirty                   26                1\n  dish                     3                0\n  dog                     66               34\n  doll                    26                1\n  dont                    62                2\n  door                    42                2\n  draw                     8                0\n  drawer                   2                0\n  dress                   13                0\n  drum                    31                0\n  duck                    33                4\n  ears                     0                0\n  eat                    109                4\n  egg                     45                2\n  elephant                35                0\n  eye                     37                3\n  face                     1                0\n  fall                    20                0\n  family                  19                0\n  fast                    15                0\n  feed                    25                0\n  finger                  37                0\n  finish                  23                4\n  firetruck               17                0\n  flower                  25                0\n  foot                    55                0\n  for                      4                0\n  frog                    22                0\n  girl                    11                0\n  give                     1                0\n  glass                    2                0\n  glasses                 38                2\n  go                      46                7\n  goodmorning             68                0\n  grandma                 73               15\n  grandpa                 62               16\n  hair                    53                1\n  hammer                   4                0\n  hand                    56                0\n  hat                     30                4\n  have                    16                1\n  head                    43                0\n  help                    37                1\n  here                    34                1\n  hi                      82               62\n  hisher                   8                0\n  hit                     29                0\n  home                    46                0\n  horse                   23                0\n  hot                     48                4\n  how                      0                0\n  hurry                    2                0\n  hurt                    24                1\n  I                       12                1\n  icecream                17                0\n  in                      59                2\n  juice                    4                0\n  jump                    26                0\n  keys                    38                0\n  kick                    22                1\n  kiss                    98                1\n  kitchen                 31                0\n  kitty                   52               13\n  lady                     4                0\n  lamp                     6                0\n  leg                     21                0\n  light                   41                5\n  lion                    23                1\n  look                    77                1\n  man                      2                1\n  many                     6                0\n  me                      16                2\n  meat                    10                0\n  medicine                19                0\n  meow                    43               13\n  milk                    93               12\n  mine                    27                0\n  mommy                   52               99\n  money                    4                0\n  monkey                  33                0\n  moo                      1                0\n  moon                    11                2\n  more                    73               20\n  mouse                    9                0\n  mouth                   53                3\n  nap                      3                0\n  necklace                10                0\n  new                      2                0\n  night                   33                3\n  nightnight              69                9\n  none                    12                0\n  nose                    52                3\n  now                     13                0\n  on                      41                3\n  onetwothree             39                1\n  open                    69                0\n  other                    3                0\n  ouch                    48                5\n  out                     35                1\n  outside                 80                0\n  pajamas                 42                0\n  pants                   33                1\n  paper                   17                0\n  party                    8                0\n  pattycake               45                0\n  pen                     14                0\n  penguin                 11                0\n  picture                 34                0\n  pillow                  25                0\n  plant                   16                0\n  play                    66                1\n  please                  32                2\n  pretty                  11                1\n  purse                    7                0\n  push                    34                0\n  put                     61                0\n  quackquack              21               14\n  radio                    1                0\n  rain                    10                0\n  refrigerator            25                0\n  rock                    12                1\n  say                     21                0\n  scissors                 1                0\n  see                     46                0\n  shh                     76               10\n  shirt                    3                0\n  shoe                    59                2\n  sing                    30                0\n  sink                    12                0\n  sister                  19                2\n  sit                     61                0\n  sky                     22                0\n  sleep                   71                0\n  smile                   49                1\n  soap                    19                0\n  sock                    51                3\n  soft                    34                0\n  some                     5                0\n  spoon                   57                0\n  squirrel                18                0\n  stairs                  50                0\n  stop                     4                0\n  store                   13                0\n  street                   8                0\n  stroller                41                0\n  sun                     21                1\n  swing                    1                0\n  table                   27                0\n  take                    27                0\n  teddybear               30                3\n  telephone               48                0\n  television              23                0\n  thankyou                56                9\n  them                     3                0\n  there                   26                1\n  this                    22                5\n  throw                   52                0\n  tickle                  49                2\n  tiger                   15                2\n  tired                   57                0\n  toast                    6                0\n  today                    4                0\n  tomorrow                 3                0\n  tongue                  31                0\n  tooth                   29                1\n  touch                   48                0\n  towel                   26                1\n  toy                     83                0\n  train                   20                1\n  trash                   25                1\n  tree                    31                5\n  truck                   41                2\n  turtle                  17                2\n  uh_oh                   69               34\n  uhoh                     7                2\n  vroom                   19               25\n  wait                    50                0\n  walk                    65                0\n  want                    34                0\n  wash                    30                0\n  water                   95               13\n  where                   57                1\n  who                     20                1\n  window                  34                0\n  woofwoof                51               26\n  write                    2                0\n  yes                     83               13\n  yumyum                  65               19\n\n\n\n\nCode\n# rcb_color_paired &lt;- RColorBrewer::brewer.pal(12, 'Paired')\n# wordcloud::wordcloud(words = word_ct$word, freq = word_ct$n, min.freq = quant_25, colors = rcb_color_paired)\n\nmcdi_viz_wordcloud(word_ct, n_participants = dim(eng_12)[1], quantile = .50)\n\n\n\n\n\n\n\n\n\n\n\n18-mo-old English speakers\n\n\nCode\neng_18 &lt;-\n  readr::read_csv(\n    file.path(here::here(), \"data/csv/home_visit/agg/mcdi_english_18_combined.csv\"),\n    col_types = readr::cols(.default = 'c'),\n    show_col_types = FALSE\n  )\n\n\n\n\nCode\nword_ct &lt;- eng_18 |&gt;\n  dplyr::mutate(wet = case_when(!is.na(wet_1) ~ wet_1,\n                                !is.na(wet_2) ~ wet_2)) |&gt;\n  dplyr::select(-contains(\"wet_\")) |&gt;\n  dplyr::mutate(rain = case_when(!is.na(rain_1) ~ rain_1,\n                                !is.na(rain_2) ~ rain_2,\n                                !is.na(rain_3) ~ rain_3)) |&gt;\n  dplyr::select(-contains(\"rain_\")) |&gt;\n  dplyr::mutate(leg = case_when(!is.na(leg_1) ~ leg_1,\n                                !is.na(leg_2) ~ leg_2)) |&gt;\n  dplyr::rename(candy = candy_1) |&gt;\n  tidyr::pivot_longer(cols = !(play_id | site_id | subject_number),\n                        names_to = \"word\",\n                        values_to = \"says\") |&gt;\n  dplyr::filter(!is.na(says)) |&gt;\n  dplyr::filter(says == TRUE) |&gt;\n  dplyr::count(word, sort = TRUE)\n\nword_ct\n\n\n# A tibble: 354 × 2\n   word         n\n   &lt;chr&gt;    &lt;int&gt;\n 1 daddy      136\n 2 mommy      133\n 3 bye        127\n 4 uhoh       122\n 5 ball       118\n 6 hi         118\n 7 no         117\n 8 banana     106\n 9 woofwoof   106\n10 yes        100\n# ℹ 344 more rows\n\n\n\n\nCode\n#wordcloud::wordcloud(words = word_ct$word, freq = word_ct$n, min.freq = quant_25, colors = rcb_color_paired)\nmcdi_viz_wordcloud(word_ct, n_participants = dim(eng_18)[1], quantile = .50)\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : quackquack could not be fit on page. It will not be plotted.\n\n\n\n\n\n\n\n\n\n\n\n24-mo-old English speakers\n\n\nCode\neng_24 &lt;-\n  readr::read_csv(\n    file.path(here::here(), \"data/csv/home_visit/agg/mcdi_english_24_combined.csv\"),\n    col_types = readr::cols(.default = 'c'),\n    show_col_types = FALSE\n  )\n\n\n\n\nCode\nword_ct &lt;- eng_24 |&gt;\n  tidyr::pivot_longer(cols = !(play_id | site_id | subject_number),\n                        names_to = \"word\",\n                        values_to = \"says\") |&gt;\n  dplyr::filter(!is.na(says)) |&gt;\n  dplyr::filter(says == TRUE) |&gt;\n  dplyr::count(word, sort = TRUE)\n\n\n\n\nCode\nmcdi_viz_wordcloud(word_ct, n_participants = dim(eng_24)[1], quantile = .50)\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : icecream could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : choochoo could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cow could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : juice could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : please could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : wet_1 could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : eat could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : kiss could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : no could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : bye could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : book could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : shoe could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : apple could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : pants could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : yumyum could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : walk could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : brush could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : tooth could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : woofwoof could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : buttocks could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : balloon could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : monkey could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : egg could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : bird could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : plate could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : baby could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : mommy could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cracker could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : telephone could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : here could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : airplane could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : on could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : ouch could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : frog could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : bottle could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : more could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : uhoh could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : door could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : two could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : ear could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : stairs could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : shh could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : toothbrush could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : foot could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cup could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : hot could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : ball could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : blanket could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : dance could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : go could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : couch could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : mine could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cheek could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : orange could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : wash could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : circle could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : diaper could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : knee could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : eye could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : one could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : baabaa could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : spoon could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : letsgo could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : meow could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : horse could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : rock could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : star could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : face could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : yucky could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : big could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : butterfly could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : towel could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : bathtub could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : vroom could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : daddy could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : where could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : down could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : arm could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : tummy could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : nightnight could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : leg_1 could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : four could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : fast could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : tree could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : trash could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : bellybutton could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : hand could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : keys could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : allgone could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : help could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : milk could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : you could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : flower could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : open could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : fall could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : happy could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : yes could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : pillow could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : rain_2 could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : paper could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : rain_1 could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : sock could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : off could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : drink could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : inside could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : sun could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : see could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : duck could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cat could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : thankyou could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : mouth could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : moon could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : boat could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : bug could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : quackquack could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : dirty could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : chair could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : banana could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : shirt could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cake could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : potty could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : strawberry could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : play could not be fit on page. It will not be plotted.\n\n\n\n\n\n\n\n\n\nHere are some rare words (quantile &lt; 0.20).\n\n\nCode\nrare_word_ct &lt;- word_ct |&gt;\n  dplyr::filter(n &lt; dim(eng_24)[1]*.25)\n# \n# wordcloud::wordcloud(words = rare_word_ct$word, freq = rare_word_ct$n)\nmcdi_viz_wordcloud(rare_word_ct, n_participants = dim(eng_24)[1], quantile = .20)\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : know could not be fit on page. It will not be plotted.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#locomotion",
    "href": "home-visit-viz.html#locomotion",
    "title": "Visualize",
    "section": "Locomotion",
    "text": "Locomotion\n\nCheck for anomalous values\n\n\nCode\ncrawl_mos_min &lt;- 4\nwalk_mos_min &lt;- 6\n\n\n\nAnomalous crawling onset\n\n\nCode\nhv |&gt;\n  dplyr::select(site_id, participant_ID, crawl_mos) |&gt;\n  dplyr::filter(crawl_mos &lt; crawl_mos_min) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nsite_id\nparticipant_ID\ncrawl_mos\n\n\n\n\nCHOPH\n003\n3.72\n\n\nPRINU\n020\n-5.69\n\n\n\n\n\n\n\n\n\nAnomalous walking onset (KEA criteria)\n\n\nCode\nhv |&gt;\n  dplyr::select(site_id, participant_ID, walk_mos_kea) |&gt;\n  dplyr::filter(walk_mos_kea &lt; walk_mos_min) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nsite_id\nparticipant_ID\nwalk_mos_kea\n\n\n\n\nCSUFL\n011\n0.76\n\n\nUMIAM\n018\n2.76\n\n\nPRINU\n020\n-2.93\n\n\n\n\n\n\n\n\n\nAnomalous walking onset (WHO criteria)\n\n\nCode\nhv |&gt;\n  dplyr::select(site_id, participant_ID, walk_mos_who) |&gt;\n  dplyr::filter(walk_mos_who &lt; walk_mos_min) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nsite_id\nparticipant_ID\nwalk_mos_who\n\n\n\n\nPRINU\n020\n-3.29\n\n\n\n\n\n\n\n\n\n\nCrawl onset\n\n\nCode\nhv |&gt;\n  dplyr::filter(crawl_mos &gt; crawl_mos_min, !is.na(crawl_mos)) |&gt;\n  ggplot() +\n  aes(crawl_mos, fill = child_sex) +\n  geom_histogram(bins = 12) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\n\nFigure 10.3: Age of crawling onset (mos) by sex\n\n\n\n\n\n\n\nWalk onset\n\n\nCode\nhv |&gt;\n  dplyr::filter(walk_mos_kea &gt; walk_mos_min, !is.na(walk_mos_kea)) |&gt;\n  ggplot() +\n  aes(walk_mos_kea, fill = child_sex) +\n  theme(legend.position=\"bottom\") +\n  geom_histogram(bins = 10)\n\nmessage(\"Tukey's five number summary (minimum, lower-hinge, median, upper-hinge, maximum): \")\n\n\nTukey's five number summary (minimum, lower-hinge, median, upper-hinge, maximum): \n\n\nCode\nhv$walk_mos_kea |&gt; fivenum()\n\n\n[1] -2.93 11.70 12.72 14.30 19.00\n\n\n\n\n\n\n\n\nFigure 10.4: Age (mos) of walking onset (KEA criteria) by sex\n\n\n\n\n\n\n\nCode\nhv |&gt;\n  dplyr::filter(walk_mos_who &gt; walk_mos_min, !is.na(walk_mos_who)) |&gt;\n  ggplot() +\n  aes(walk_mos_who, fill = child_sex) +\n  geom_histogram(bins=12) +\n  theme(legend.position=\"bottom\") +\n  theme(legend.title = element_blank())\n\nmessage(\"Tukey's five number summary (minimum, lower-hinge, median, upper-hinge, maximum): \")\n\n\nTukey's five number summary (minimum, lower-hinge, median, upper-hinge, maximum): \n\n\nCode\nhv$walk_mos_who |&gt; fivenum()\n\n\n[1] -3.29 11.11 12.13 13.58 25.08\n\n\n\n\n\n\n\n\nFigure 10.5: Age (mos) of walking onset (WHO criteria) by sex\n\n\n\n\n\n\n\nCode\nfiltered_walk_mos &lt;- hv |&gt;\n  dplyr::filter(walk_mos_who &gt; walk_mos_min, !is.na(walk_mos_who), \n                walk_mos_kea &gt; walk_mos_min, !is.na(walk_mos_kea)) \n\nfiltered_walk_mos |&gt;\n  ggplot() +\n  aes(walk_mos_who, walk_mos_kea, color = child_sex) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  xlim(8, 18) +\n  ylim(8, 18) +\n  theme(legend.position = \"bottom\") +\n  theme(aspect.ratio = 1) +\n  theme(legend.title = element_blank()) -&gt; walk_p\n\nggExtra::ggMarginal(\n  walk_p,\n  play_loco,\n  walk_mos_who,\n  walk_mos_kea,\n  type = \"density\",\n  margins = \"both\",\n  groupColour = TRUE,\n  groupFill = TRUE\n)\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\nWarning: Removed 9 rows containing non-finite outside the scale range\n(`stat_smooth()`).\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\nWarning: Removed 9 rows containing non-finite outside the scale range\n(`stat_smooth()`).\n\n\nWarning: Removed 9 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 1 row containing missing values or values outside the scale range\n(`geom_smooth()`).\n\n\nCode\ncor.test(filtered_walk_mos$walk_mos_who, filtered_walk_mos$walk_mos_kea)\n\n\n\n    Pearson's product-moment correlation\n\ndata:  filtered_walk_mos$walk_mos_who and filtered_walk_mos$walk_mos_kea\nt = 55.618, df = 644, p-value &lt; 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.8954770 0.9221932\nsample estimates:\n      cor \n0.9097726 \n\n\n\n\n\n\n\n\nFigure 10.6: Walking onset by WHO vs. KEA criteria\n\n\n\n\n\n\n\nCode\nfiltered_walk_crawl_mos &lt;- hv |&gt;\n  dplyr::filter(crawl_mos &gt; crawl_mos_min, !is.na(crawl_mos), \n                walk_mos_kea &gt; walk_mos_min, !is.na(walk_mos_kea))\n\nfiltered_walk_crawl_mos |&gt;\n  ggplot() +\n  aes(crawl_mos, walk_mos_kea, color = child_sex) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  theme(legend.position = \"bottom\") +\n  theme(aspect.ratio = 1) +\n  theme(legend.title = element_blank()) -&gt; walk_crawl_p\n\nggExtra::ggMarginal(\n  walk_crawl_p,\n  filtered_walk_crawl_mos,\n  crawl_mos,\n  walk_mos_kea,\n  type = \"density\",\n  margins = \"both\",\n  groupColour = TRUE,\n  groupFill = TRUE\n)\n\n\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n\n\nCode\ncor.test(filtered_walk_crawl_mos$crawl_mos, filtered_walk_crawl_mos$walk_mos_kea)\n\n\n\n    Pearson's product-moment correlation\n\ndata:  filtered_walk_crawl_mos$crawl_mos and filtered_walk_crawl_mos$walk_mos_kea\nt = 15.113, df = 612, p-value &lt; 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.4612237 0.5766625\nsample estimates:\n     cor \n0.521324 \n\n\n\n\n\n\n\n\nFigure 10.7: Walking onset vs. Crawling",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#health",
    "href": "home-visit-viz.html#health",
    "title": "Visualize",
    "section": "Health",
    "text": "Health\n\nFeeding\n\nCode\nxtabs(formula = ~ age_group + feeding_breastfeed, data = hv)\n\n\n\n\nTable 10.1: Breastfeeding by age group\n\n\n\n         feeding_breastfeed\nage_group donotknow  no refused yes\n     12mo         0  16       0 289\n     18mo         1  15       0 289\n     24mo         0  12       1 230\n\n\n\n\n\n\nCode\nhv %&gt;%\n  dplyr::select(child_sex, feeding_solidfood_age) |&gt;\n  dplyr::filter(feeding_solidfood_age &lt; 12) |&gt;\n  ggplot() +\n  aes(x = feeding_solidfood_age, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  xlab(\"Introduction of solid foods (mos)\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\n\nFigure 10.8: Age at introduction of solid foods\n\n\n\n\n\nThere are some unlikely values here.\n\n\nCode\nhv |&gt;\n  dplyr::select(participant_ID, \n                feeding_solidfood_age) |&gt;\n  dplyr::filter(feeding_solidfood_age &gt; 12 | feeding_solidfood_age &lt; 3) %&gt;%\n  knitr::kable(format = 'html')\n\n\n\n\n\nparticipant_ID\nfeeding_solidfood_age\n\n\n\n\n996\n999\n\n\n006\n990\n\n\n012\n990\n\n\n031\n995\n\n\n001\n0\n\n\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nA preliminary look at feeding_comments shows that there are some names mentioned. So, we do not view them here.\nWe should consider flagging these in the QA process.\n\n\n\n\nSleeping position\nThese data only focus on child_sleeping_position. Other sleeping data are in the screening questionnaire.\n\nCode\nxtabs(formula = ~ child_sleeping_position + age_group, data = hv)\n\n\n\n\nTable 10.2: Child sleeping position by age group\n\n\n\n                       age_group\nchild_sleeping_position 12mo 18mo 24mo\n           back          280  290  226\n           changed         4    3    3\n           donotknow       0    1    0\n           other           4    1    1\n           refused         0    0    1\n           side            5    3    6\n           sitting         2    0    1\n           stomach_down    1    1    2\n           stomach_side    9    6    3\n\n\n\n\n\n\nChild health\n\nOverall rating\n\nCode\nchild_health_rating &lt;- hv |&gt;\n  # dplyr::select(child_sex, age_group, child_health) |&gt;\n  dplyr::filter(!is.na(child_health)) |&gt;\n  dplyr::mutate(child_health = factor(child_health,\n                                      c(\"poor\",\n                                        \"fair\",\n                                        \"good\",\n                                        \"verygood\",\n                                        \"excellent\",\n                                        \"donotknow\",\n                                        \"refused\"),\n                                      ordered = TRUE))\n\nxtabs(formula = ~ child_health + age_group, data = child_health_rating)\n\n\n\n\nTable 10.3: Parent-report of overall child health\n\n\n\n            age_group\nchild_health 12mo 18mo 24mo\n   poor         0    0    0\n   fair         2    2    1\n   good        13   19   16\n   verygood    79   70   63\n   excellent  211  213  162\n   donotknow    0    1    0\n   refused      0    0    1\n\n\n\n\n\n\nRecent vaccination\n\nCode\nrecent_vax &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_recent_vaccination) |&gt;\n  dplyr::filter(!is.na(child_recent_vaccination))\n\nxtabs(formula = ~ child_recent_vaccination + age_group, data = recent_vax)\n\n\n\n\nTable 10.4\n\n\n\n                        age_group\nchild_recent_vaccination 12mo 18mo 24mo\n               donotknow    0    2    4\n               no         168  209  189\n               yes        137   94   50\n\n\n\n\n\n\nSeen medical specialist\n\nCode\nseen_specialist &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_medical_specialist) |&gt;\n  dplyr::filter(!is.na(child_medical_specialist))\n\nxtabs(formula = ~ child_medical_specialist + age_group, data = seen_specialist)\n\n\n\n\nTable 10.5: Children who have seen a medical specialist\n\n\n\n                        age_group\nchild_medical_specialist 12mo 18mo 24mo\n               donotknow    0    1    2\n               no         156  134  108\n               refused      0    0    1\n               yes        149  170  132\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nManual inspection shows some possible identifying information (names) in child_medical_specialist_comments.\n\n\n\n\nHearing tested\n\nCode\nhearing_tested &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_hearing_tested) |&gt;\n  dplyr::filter(!is.na(child_hearing_tested))\n\nxtabs(formula = ~ child_hearing_tested + age_group, data = hearing_tested)\n\n\n\n\nTable 10.6: Hearing test and context\n\n\n\n                         age_group\nchild_hearing_tested      12mo 18mo 24mo\n  afterhome                  7   18   12\n  birthhospital            249  227  168\n  birthhospital afterhome   39   48   46\n  birthhospital donotknow    1    1    1\n  donotknow                  1    5    6\n  no                         8    6    9\n  refused                    0    0    1\n\n\n\n\n\n\nVision tested\n\nCode\nvision_tested &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_vision_tested) |&gt;\n  dplyr::filter(!is.na(child_vision_tested))\n\nxtabs(formula = ~ child_vision_tested + age_group, data = vision_tested)\n\n\n\n\nTable 10.7: Vision test and context\n\n\n\n                         age_group\nchild_vision_tested       12mo 18mo 24mo\n  afterhome                 48   56   51\n  afterhome donotknow        0    1    0\n  birthhospital             72   81   60\n  birthhospital afterhome   29   33   30\n  birthhospital donotknow    1    1    1\n  donotknow                 39   42   28\n  no                       115   89   70\n  no donotknow               1    2    2\n  refused                    0    0    1\n\n\n\n\n\n\nIllnesses and allergies\n\n\nCode\nillness_allergy &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(c(\"allergies\", \"ear_infection\", \n                                                 \"asthma\",\n                                                 \"respiratory\",\n                                                 \"gastrointestinal\")))\n\nillness_allergy |&gt;\n  tidyr::pivot_longer(!c('child_sex', 'age_group'),\n                      names_to = \"type\",\n                      values_to = \"response\") |&gt;\n  dplyr::filter(!is.na(response)) |&gt;\n  dplyr::mutate(response = factor(response,\n                                  c(\"no\", \"yes\", \"donotknow\", \"refused\"))) |&gt;\n  ggplot() +\n  aes(x = response, fill = child_sex) +\n  geom_bar() +\n  facet_grid(cols = vars(type), rows = vars(age_group)) +\n  scale_x_discrete(guide = guide_axis(angle = 90)) +\n  xlab(\"\") +\n  theme(legend.position = \"bottom\", legend.title = element_blank())\n\n\n\n\n\n\n\n\nFigure 10.9: Parent reports of child illnesses or allergies.\n\n\n\n\n\n\n\nInjuries\n\nCode\nxtabs(formula = ~ child_injury_times + age_group, data = hv)\n\n\n\n\nTable 10.8: Child injuries\n\n\n\n                  age_group\nchild_injury_times 12mo 18mo 24mo\n         donotknow    1    2    1\n         never      275  264  176\n         once        23   31   56\n         refused      0    0    1\n         threemore    3    0    1\n         twice        3    8    8\n\n\n\n\n\n\n\nMom health\n\nSmoking & drinking\n\nCode\nsmoking_drinking &lt;- hv |&gt;\n  dplyr::select(age_group,\n    child_sex,\n    contains(\"smoking\"),\n    contains(\"drinking\")\n  )\n\nxtabs(formula = ~ mom_pregnant_smoking + mom_pregnant_drinking, smoking_drinking)\n\n\n\n\nTable 10.9: Smoking or drinking during pregancy\n\n\n\n                    mom_pregnant_drinking\nmom_pregnant_smoking donotknow  no refused yes\n           donotknow         2   1       0   0\n           no                0 707       1 135\n           refused           0   0       1   0\n           yes               0   1       0   2\n\n\n\n\n\n\nCode\nxtabs(formula = ~ smoking_house + smoking_car, smoking_drinking)\n\n\n             smoking_car\nsmoking_house donotknow  no refused yes\n    donotknow         1   1       0   0\n    no                1 828       0   3\n    refused           0   4       1   0\n    yes               0  11       0   3\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.10\n\n\n\nCode\nsmoking_drinking |&gt;\n  dplyr::select(smoking_comments) |&gt;\n  dplyr::filter(!is.na(smoking_comments)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nCode\nxtabs(formula = ~ mom_smoking_now, smoking_drinking)\n\n\n\n\nTable 10.11: Smoking currently\n\n\n\nmom_smoking_now\ndonotknow        no   refused       yes \n        1       844         4         4 \n\n\n\n\n\nCode\nsmoking_drinking$mom_smoking_now_amount[!is.na(smoking_drinking$mom_smoking_now_amount)]\n\n\n\n\nTable 10.12: Amount if smoking currently\n\n\n\n[1]  4  3  1 10\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.13: Drinking comments\n\n\n\nCode\nsmoking_drinking |&gt;\n  dplyr::select(mom_drinking_comments) |&gt;\n  dplyr::filter(!is.na(mom_drinking_comments)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nPatient Health Questionnaire (PHQ-4)\n\n\nCode\nphq4 &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(\"phq4_\")) |&gt;\n  dplyr::select(-contains(\"comments\"))\n\nnames(phq4) &lt;- gsub(pattern = \"phq4_\", replacement = \"\", names(phq4))\n\nphq4 |&gt;\n  tidyr::pivot_longer(!c('child_sex', 'age_group'),\n                      names_to = \"question\",\n                      values_to = \"response\") |&gt;\n  dplyr::filter(!is.na(response)) |&gt;\n  dplyr::mutate(response = factor(\n    response,\n    c(\"notatall\", \"severaldays\", \"morethanhalf\", \"nearly\")\n  ), ordered = TRUE) |&gt;\n  ggplot() +\n  aes(x = response, fill = child_sex) +\n  geom_bar() +\n  facet_grid(cols = vars(question), rows = vars(age_group)) +\n  scale_x_discrete(guide = guide_axis(angle = 90)) +\n  xlab(\"\") +\n  theme(legend.position = \"bottom\", legend.title = element_blank())\n\n\n\n\n\n\n\n\nFigure 10.10: PHQ4 responses by age group and child sex",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#rothbart-ecbq",
    "href": "home-visit-viz.html#rothbart-ecbq",
    "title": "Visualize",
    "section": "Rothbart ECBQ",
    "text": "Rothbart ECBQ\nThe next section provides visualizations of the Rothbart Early Childhood Behavior Questionnaire (ECBQ) data related to child temperament.\n\n\nCode\necbq &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(\"ecbq\"))\n\necbq_complete &lt;- ecbq |&gt;\n  tidyr::complete() |&gt;\n  dplyr::select(-ecbq_comments)\n\necbq_vars &lt;- names(ecbq)[stringr::str_detect(names(ecbq_complete),\"ecbq_\")]\n# Drop comments\necbq_vars &lt;- ecbq_vars[!stringr::str_detect(ecbq_vars, \"ecbq_comments\")]\n\n# Read questions CSV\necbq_qs_all &lt;- readr::read_csv(file = file.path(here::here(), \"data/csv/_meta\", \"ecbq_questions.csv\"), show_col_types = FALSE)\n\n# Make questions data frame\necbq_qs_df &lt;- ecbq_qs_all |&gt;\n  dplyr::mutate(var_name = ecbq_vars)\n\n\nDefine helper functions.\n\n\nCode\n# Helper function to retrieve long question given short variable name\nretrieve_long_q &lt;- function(this_var= \"rothbart_unfamiliarperson\", data_dict = ecbq_qs_df) {\n  assertthat::is.string(this_var)\n  data_dict |&gt;\n    filter(var_name == this_var) |&gt;\n    select(question) |&gt;\n    as.character()\n}\n\n# Helper plot function\nmy_ecbq_plot &lt;- function(var_lbl = \"rothbart_unfamiliarperson\", df) {\n  stopifnot(is.data.frame(df))\n  stopifnot(is.character(var_lbl))\n  \n  df &lt;- df |&gt; dplyr::select(child_sex, age_group, {{ var_lbl }})\n  \n  df &lt;- df |&gt;\n    dplyr::filter(!is.na(.data[[var_lbl]])) |&gt;\n    dplyr::mutate(rating = factor(\n      .data[[var_lbl]],\n      c(\n        \"never\",\n        \"very_rarely\",\n        \"less_than_half\",\n        \"about_half\",\n        \"more_than_half\",\n        \"almost_always\",\n        \"always\"\n      ),\n      ordered = TRUE\n    ))\n  \n  ggplot(df) +\n    aes(x = rating, fill = child_sex) +\n    geom_bar() +\n    facet_grid(cols = vars(age_group), rows = vars(child_sex)) +\n    # https://stackoverflow.com/questions/1330989/rotating-and-spacing-axis-labels-in-ggplot2\n    scale_x_discrete(guide = guide_axis(angle = 90)) +\n    theme(legend.position = \"none\") +\n    ggtitle(paste0(\"Ratings of '\", {{var_lbl}}, \"'\")) +\n    xlab(\"\")\n}\n\n# Helper chunk function\nreturn_section &lt;- function(var, data) {\n  chunk_hdr &lt;- knitr::knit_expand(text = c(\"### Responses for: `{this_var}`\", \"\\n\"),\n                                  this_var = var)\n  \n  # Build fig.cap from ground up\n  fig_name &lt;- paste0(\"fig-dist-\", var)\n  fig_cap &lt;- paste0(\"'Distribution of responses to `\", var, \"`'\")\n  fig_caption &lt;- paste0(\"fig.cap = \", fig_cap)\n  \n  plot_chunk_hdr &lt;- paste0(\"```{r \",\n                           fig_name,\n                           \", echo = FALSE, warning = FALSE, \",\n                           fig_caption,\n                           \"}\")\n  \n  plot_chunk &lt;- c(plot_chunk_hdr, \"print(my_ecbq_plot(var, data))\", \"```\")\n  \n  question_long &lt;-\n    paste0(\"\\n**Q**: '\", retrieve_long_q(var), \"'\", \"\\n\")\n  \n  knitr::knit_child(\n    text = c(chunk_hdr, question_long, plot_chunk),\n    envir = environment(),\n    quiet = TRUE\n  )\n}\n\n\n\nCode\nthese_vars &lt;- names(df)\n\nres &lt;- invisible(lapply(ecbq_vars, return_section, data = ecbq_complete))\ncat(unlist(res), sep = \"\\n\")\n\n\nResponses for: ecbq_unfamiliarperson\nQ: ‘When approached by an unfamiliar person in a public space (for example, the grocery store), how often did your child cling to a parent?’\n\n\n\n\n\n\n\n\nFigure 10.11: Distribution of responses to ecbq_unfamiliarperson\n\n\n\n\n\n\n\nResponses for: ecbq_troubletask\nQ: ‘While having trouble completing a task (e.g. building, drawing, dressing), how often did your child get easily irritated?’\n\n\n\n\n\n\n\n\nFigure 10.12: Distribution of responses to ecbq_troubletask\n\n\n\n\n\n\n\nResponses for: ecbq_companyofchild\nQ: ‘When a familiar child came to your home, how often did your child seek out the company of the child?’\n\n\n\n\n\n\n\n\nFigure 10.13: Distribution of responses to ecbq_companyofchild\n\n\n\n\n\n\n\nResponses for: ecbq_choiceactivities\nQ: ‘When offered a choice of activities, how often did your child decide what to do very quickly and go for it?’\n\n\n\n\n\n\n\n\nFigure 10.14: Distribution of responses to ecbq_choiceactivities\n\n\n\n\n\n\n\nResponses for: ecbq_quietlysung\nQ: ‘During daily or evening quiet time with you and your child, how often did your child enjoy just being quietly sung to?’\n\n\n\n\n\n\n\n\nFigure 10.15: Distribution of responses to ecbq_quietlysung\n\n\n\n\n\n\n\nResponses for: ecbq_playingoutdoors\nQ: ‘While playing outdoors, how often did your child choose to take chances for the fun and excitement of it?’\n\n\n\n\n\n\n\n\nFigure 10.16: Distribution of responses to ecbq_playingoutdoors\n\n\n\n\n\n\n\nResponses for: ecbq_morethan10\nQ: ‘While engaged in play with his/her favorite toy, how often did your child play for more than 10 minutes?’\n\n\n\n\n\n\n\n\nFigure 10.17: Distribution of responses to ecbq_morethan10\n\n\n\n\n\n\n\nResponses for: ecbq_respondingremarks\nQ: ‘While engaged in play with his/her favorite toy, how often did your child continue to play while at the same time responding to your remarks or questions?’\n\n\n\n\n\n\n\n\nFigure 10.18: Distribution of responses to ecbq_respondingremarks\n\n\n\n\n\n\n\nResponses for: ecbq_excitedlovedadults\nQ: ‘When told that loved adults would visit, how often did your child get very excited?’\n\n\n\n\n\n\n\n\nFigure 10.19: Distribution of responses to ecbq_excitedlovedadults\n\n\n\n\n\n\n\nResponses for: ecbq_fiddlehair\nQ: ‘During quiet activities, such as reading a story, how often did your child fiddle with his/her hair, clothing, etc.?’\n\n\n\n\n\n\n\n\nFigure 10.20: Distribution of responses to ecbq_fiddlehair\n\n\n\n\n\n\n\nResponses for: ecbq_roughrowdy\nQ: ‘While playing indoors, how often did your child like rough and rowdy games?’\n\n\n\n\n\n\n\n\nFigure 10.21: Distribution of responses to ecbq_roughrowdy\n\n\n\n\n\n\n\nResponses for: ecbq_rockedhugged\nQ: ‘When being gently rocked or hugged, how often did your child seem eager to get away?’\n\n\n\n\n\n\n\n\nFigure 10.22: Distribution of responses to ecbq_rockedhugged\n\n\n\n\n\n\n\nResponses for: ecbq_involvednewactivity\nQ: ‘When encountering a new activity, how often did your child get involved immediately?’\n\n\n\n\n\n\n\n\nFigure 10.23: Distribution of responses to ecbq_involvednewactivity\n\n\n\n\n\n\n\nResponses for: ecbq_tirequickly\nQ: ‘When engaged in an activity requiring attention, such as building with blocks, how often did your child tire of the activity relatively quickly?’\n\n\n\n\n\n\n\n\nFigure 10.24: Distribution of responses to ecbq_tirequickly\n\n\n\n\n\n\n\nResponses for: ecbq_callattention\nQ: ‘During everyday activities, how often did your child pay attention to you right away when you called to him/her?’\n\n\n\n\n\n\n\n\nFigure 10.25: Distribution of responses to ecbq_callattention\n\n\n\n\n\n\n\nResponses for: ecbq_tags\nQ: ‘During everyday activities, how often did your child seem to be irritated by tags in his/her clothes?’\n\n\n\n\n\n\n\n\nFigure 10.26: Distribution of responses to ecbq_tags\n\n\n\n\n\n\n\nResponses for: ecbq_noisyenvironment\nQ: ‘During everyday activities, how often did your child become bothered by sound while in a noisy environment?’\n\n\n\n\n\n\n\n\nFigure 10.27: Distribution of responses to ecbq_noisyenvironment\n\n\n\n\n\n\n\nResponses for: ecbq_energy\nQ: ‘During everyday activities, how often did your child seem full of energy, even in the evening?’\n\n\n\n\n\n\n\n\nFigure 10.28: Distribution of responses to ecbq_energy\n\n\n\n\n\n\n\nResponses for: ecbq_vehicles\nQ: ‘While in a public place, how often did your child seem afraid of large, noisy vehicles?’\n\n\n\n\n\n\n\n\nFigure 10.29: Distribution of responses to ecbq_vehicles\n\n\n\n\n\n\n\nResponses for: ecbq_active\nQ: ‘When playing outdoors with other children, how often did your child seem to be one of the most active children?’\n\n\n\n\n\n\n\n\nFigure 10.30: Distribution of responses to ecbq_active\n\n\n\n\n\n\n\nResponses for: ecbq_forbidden\nQ: ‘When told no, how often did your child stop the forbidden activity?’\n\n\n\n\n\n\n\n\nFigure 10.31: Distribution of responses to ecbq_forbidden\n\n\n\n\n\n\n\nResponses for: ecbq_sadlytearful\nQ: ‘When told no, how often did your child become sadly tearful?’\n\n\n\n\n\n\n\n\nFigure 10.32: Distribution of responses to ecbq_sadlytearful\n\n\n\n\n\n\n\nResponses for: ecbq_downblue\nQ: ‘Following an exciting activity or event, how often did your child seem to feel down or blue?’\n\n\n\n\n\n\n\n\nFigure 10.33: Distribution of responses to ecbq_downblue\n\n\n\n\n\n\n\nResponses for: ecbq_runhouse\nQ: ‘When playing indoors, how often did your child run through the house?’\n\n\n\n\n\n\n\n\nFigure 10.34: Distribution of responses to ecbq_runhouse\n\n\n\n\n\n\n\nResponses for: ecbq_excitingevent\nQ: ‘Before an exciting event (such as receiving a new toy), how often did your child get very excited about getting it?’\n\n\n\n\n\n\n\n\nFigure 10.35: Distribution of responses to ecbq_excitingevent\n\n\n\n\n\n\n\nResponses for: ecbq_tempertantrum\nQ: ‘When he/she asked for something and you said no, how often did your child have a temper tantrum?’\n\n\n\n\n\n\n\n\nFigure 10.36: Distribution of responses to ecbq_tempertantrum\n\n\n\n\n\n\n\nResponses for: ecbq_waitpatiently\nQ: ‘When asked to wait for a desirable item (such as ice cream), how often did your child wait patiently?’\n\n\n\n\n\n\n\n\nFigure 10.37: Distribution of responses to ecbq_waitpatiently\n\n\n\n\n\n\n\nResponses for: ecbq_rockedsmile\nQ: ‘When being gently rocked, how often did your child smile?’\n\n\n\n\n\n\n\n\nFigure 10.38: Distribution of responses to ecbq_rockedsmile\n\n\n\n\n\n\n\nResponses for: ecbq_mold\nQ: ‘While being held on your lap, how often did your child mold to your body?’\n\n\n\n\n\n\n\n\nFigure 10.39: Distribution of responses to ecbq_mold\n\n\n\n\n\n\n\nResponses for: ecbq_interactadult\nQ: ‘When a familiar adult, such as a relative or a friend, visited your home, how often did your child want to interact with the adult?’\n\n\n\n\n\n\n\n\nFigure 10.40: Distribution of responses to ecbq_interactadult\n\n\n\n\n\n\n\nResponses for: ecbq_careful\nQ: ‘When asked to do so, how often was your child able to be careful with something breakable?’\n\n\n\n\n\n\n\n\nFigure 10.41: Distribution of responses to ecbq_careful\n\n\n\n\n\n\n\nResponses for: ecbq_enternewplace\nQ: ‘When visiting a new place, how often did your child not want to enter?’\n\n\n\n\n\n\n\n\nFigure 10.42: Distribution of responses to ecbq_enternewplace\n\n\n\n\n\n\n\nResponses for: ecbq_crymorethan3\nQ: ‘When he/she was upset, how often did your child cry for more than 3 minutes, even when being comforted?’\n\n\n\n\n\n\n\n\nFigure 10.43: Distribution of responses to ecbq_crymorethan3\n\n\n\n\n\n\n\nResponses for: ecbq_easilysoothed\nQ: ‘When he/she was upset, how often did your child become easily soothed?’\n\n\n\n\n\n\n\n\nFigure 10.44: Distribution of responses to ecbq_easilysoothed\n\n\n\n\n\n\n\nResponses for: ecbq_busyother\nQ: ‘When you were busy, how often did your child find another activity to do when asked?’\n\n\n\n\n\n\n\n\nFigure 10.45: Distribution of responses to ecbq_busyother\n\n\n\n\n\n\n\nResponses for: ecbq_differentpeople\nQ: ‘When around large gatherings of familiar adults or children, how often did your child enjoy playing with a number of different people?’\n\n\n\n\n\n\n\n\nFigure 10.46: Distribution of responses to ecbq_differentpeople\n\n\n\n\n\n\n\nCross correlation\nWe make use of the ggcorrplot package for some simple visualizations of the ECBQ data.\n\n\nCode\ndrop_rothbart_lbl &lt;- function(x) {\n  stringr::str_remove(x, \"rothbart_\")\n}\n\nmake_ecbq_lvls_numeric &lt;- function(x) {\n  nas &lt;- stringr::str_detect(x, \"na\")\n  x[nas] &lt;- NA\n  x |&gt;\n    stringr::str_replace_all(\"never\", \"1\") |&gt;\n    stringr::str_replace_all(\"very_rarely\", \"2\") |&gt;\n    stringr::str_replace_all(\"less_than_half\", \"3\") |&gt;\n    stringr::str_replace_all(\"about_half\", \"4\") |&gt;\n    stringr::str_replace_all(\"more_than_half\", \"5\") |&gt;\n    stringr::str_replace_all(\"almost_always\", \"6\") |&gt;\n    stringr::str_replace_all(\"always\", \"7\") |&gt;\n    as.numeric()\n}\n\nrecode_ecbq_lvls &lt;- function(df_col, df) {\n  df |&gt;\n    dplyr::case_match(.data[[df_col]], \"never\" ~ 1,\n                      \"very_rarely\" ~ 2,\n                      \"less_than_half\" ~ 3,\n                      \"about_half\" ~ 4,\n                      \"more_than_half\" ~ 5,\n                      \"almost_always\" ~ 6,\n                      \"always\" ~ 7,\n                      \"na\" ~ NA)\n}\n\nmake_ecbq_lvls_nonNA &lt;- function(x) {\n  these_na_rows &lt;- stringr::str_detect(x, \"na\")\n  x[these_na_rows] &lt;- NA\n  x\n}\n\nclean_ecbq_var &lt;- function(x) {\n  x |&gt; \n    make_ecbq_lvls_numeric() |&gt;\n    make_ecbq_lvls_nonNA() |&gt;\n    as.numeric()\n}\n\necbq_only &lt;- ecbq_complete |&gt;\n  dplyr::select(-child_sex, -age_group) |&gt;\n  dplyr::rename_with(drop_rothbart_lbl)\n\nmake_numeric_ecbq &lt;- function(var_lbl, df) {\n  stopifnot(is.data.frame(df))\n  stopifnot(is.character(var_lbl))\n  \n  df &lt;- df |&gt; \n    dplyr::select({{ var_lbl }})\n  df\n}\n\n# ecbq_only &lt;- ecbq_only |&gt;\n#   purrr::map(names(ecbq), make_rothbart_lvls_numeric)\n  \n# ecbq_corr &lt;- round(cor(ecbq_only), 1)\n\n\n\n\nComments\n\n\n\n\n\n\nWarning\n\n\n\nManual inspection shows that the comments field has some names. We omit printing the comments here until we can be assured that there is no identifiying information in the comments.\n\n\n\n\nCode\necbq |&gt;\n  dplyr::select(comments_rothbart) |&gt;\n  dplyr::filter(!is.na(comments_rothbart)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#media-use",
    "href": "home-visit-viz.html#media-use",
    "title": "Visualize",
    "section": "Media use",
    "text": "Media use\n\nHome technology\n\nCode\nxtabs(formula = ~ mediause.home_technology.tv, hv)\n\n\n\n\nTable 10.14: Use of TV at home\n\n\n\nmediause.home_technology.tv\nFALSE  TRUE \n   26   824 \n\n\n\n\n\nCode\nxtabs(formula = ~ mediause.home_technology.dvd, hv)\n\n\n\n\nTable 10.15: Use of DVD at home\n\n\n\nmediause.home_technology.dvd\nFALSE  TRUE \n  563   287 \n\n\n\n\n\nCode\nxtabs(formula = ~ mediause.home_technology.computer, hv)\n\n\n\n\nTable 10.16: Use of computer at home\n\n\n\nmediause.home_technology.computer\nFALSE  TRUE \n   33   817 \n\n\n\n\n\nCode\nxtabs(formula = ~ mediause.home_technology.ipad, hv)\n\n\n\n\nTable 10.17: Use of iPad/tablet at home\n\n\n\nmediause.home_technology.ipad\nFALSE  TRUE \n  229   621 \n\n\n\n\n\nCode\nxtabs(formula = ~ mediause.home_technology.educationalgame, hv)\n\n\n\n\nTable 10.18: Use of educational games at home\n\n\n\nmediause.home_technology.educationalgame\nFALSE  TRUE \n  658   192 \n\n\n\n\n\nCode\nxtabs(formula = ~ mediause.home_technology.videogame, hv)\n\n\n\n\nTable 10.19: Use of video games at home\n\n\n\nmediause.home_technology.videogame\nFALSE  TRUE \n  351   499 \n\n\n\n\n\n\nChild TV\n\nCode\nxtabs(formula = ~ mediause_technology_child_tv, hv)\n\n\n\n\nTable 10.20: Use of TV by child\n\n\n\nmediause_technology_child_tv\n no yes \n121 701 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.21\n\n\n\nCode\nhv |&gt;\n  dplyr::select(mediause_tv_how) |&gt;\n  dplyr::filter(!is.na(mediause_tv_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nChild DVD\n\nCode\nxtabs(formula = ~ mediause_technology_child_dvd, hv)\n\n\n\n\nTable 10.22: Use of DVD by child\n\n\n\nmediause_technology_child_dvd\n no yes \n245  42 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.23\n\n\n\nCode\nhv |&gt;\n  dplyr::select(mediause_dvd_how) |&gt;\n  dplyr::filter(!is.na(mediause_dvd_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nChild computer\n\nCode\nxtabs(formula = ~ mediause_technology_child_computer, hv)\n\n\n\n\nTable 10.24: Use of computer by child\n\n\n\nmediause_technology_child_computer\n no yes \n585 231 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.25\n\n\n\nCode\nhv |&gt;\n  dplyr::select(mediause_computer_how) |&gt;\n  dplyr::filter(!is.na(mediause_computer_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nChild iPad\n\nCode\nxtabs(formula = ~ mediause_technology_child_ipad, hv)\n\n\n\n\nTable 10.26: Use of iPad/tablet by child\n\n\n\nmediause_technology_child_ipad\n no yes \n347 274 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.27\n\n\n\nCode\nhv |&gt;\n  dplyr::select(mediause_ipad_how) |&gt;\n  dplyr::filter(!is.na(mediause_ipad_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nChild educational\n\nCode\nxtabs(formula = ~ mediause_technology_child_educational, hv)\n\n\n\n\nTable 10.28: Use of educational games by child\n\n\n\nmediause_technology_child_educational\n no yes \n 57 135 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.29\n\n\n\nCode\nhv |&gt;\n  dplyr::select(mediause_educational_how) |&gt;\n  dplyr::filter(!is.na(mediause_educational_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nChild videogame\n\nCode\nxtabs(formula = ~ mediause_technology_child_videogame, hv)\n\n\n\n\nTable 10.30: Use of video games by child\n\n\n\nmediause_technology_child_videogame\n no yes \n430  69 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.31\n\n\n\nCode\nhv |&gt;\n  dplyr::select(mediause_videogame_how) |&gt;\n  dplyr::filter(!is.na(mediause_videogame_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nTV hrs/day\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\nMoreover, this is a free-text field that requires further processing to be visualized.\n\n\n\n\n\nTable 10.32\n\n\n\nCode\nhv |&gt;\n  dplyr::select(mediause_tv_hrs_per_day) |&gt;\n  dplyr::filter(!is.na(mediause_tv_hrs_per_day)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nUse meals\n\nCode\nxtabs(formula = ~ mediause_techuse_meals, hv)\n\n\n\n\nTable 10.33: Use of technology at meals\n\n\n\nmediause_techuse_meals\n       likely       neutral   neverdothis notverylikely    verylikely \n          131           107           138           412            61 \n\n\n\n\n\n\nUse playtime\n\nCode\nxtabs(formula = ~ mediause_techuse_playtime, hv)\n\n\n\n\nTable 10.34: Use of technology at playtime\n\n\n\nmediause_techuse_playtime\n       likely       neutral   neverdothis notverylikely    verylikely \n          282           260            26           233            48 \n\n\n\n\n\n\nUse bedtime\n\nCode\nxtabs(formula = ~ mediause_techuse_bedtime, hv)\n\n\n\n\nTable 10.35: Use of technology at bedtime\n\n\n\nmediause_techuse_bedtime\n       likely       neutral   neverdothis notverylikely    verylikely \n           54            50           465           247            30 \n\n\n\n\n\n\nUse transportation\n\nCode\nxtabs(formula = ~ mediause_techuse_transportation, hv)\n\n\n\n\nTable 10.36: Use of technology during transportation\n\n\n\nmediause_techuse_transportation\n       likely       neutral   neverdothis notverylikely    verylikely \n          117            84           373           235            37 \n\n\n\n\n\n\nMedia use comments\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.37\n\n\n\nCode\nhv |&gt;\n  dplyr::select(mediause_comments) |&gt;\n  dplyr::filter(!is.na(mediause_comments)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#pets",
    "href": "home-visit-viz.html#pets",
    "title": "Visualize",
    "section": "Pets",
    "text": "Pets\n\nCode\nxtabs(formula = ~ pets_at_home, hv)\n\n\n\n\nTable 10.38: Pets at home\n\n\n\npets_at_home\n no yes \n304 547 \n\n\n\n\n\n\nCode\nhv$pets_types_number[!is.na(hv$pets_types_number)] |&gt; head(20)\n\n\n [1] \"1 dog\"                                                                                                    \n [2] \"1 cat\"                                                                                                    \n [3] \"1 Turtle\"                                                                                                 \n [4] \"2 dogs\"                                                                                                   \n [5] \"2 dogs\"                                                                                                   \n [6] \"2 pugs and 2 fish\"                                                                                        \n [7] \"1 cat\"                                                                                                    \n [8] \"2 Dogs\"                                                                                                   \n [9] \"1 dog\"                                                                                                    \n[10] \"3 cats\"                                                                                                   \n[11] \"2 Cats, 1 bearded dragon, 1 snake, 1 tarantula and 1 frog - (just had a fish but it recently passed away)\"\n[12] \"2 cats\"                                                                                                   \n[13] \"7 rabbits\"                                                                                                \n[14] \"2 cats\"                                                                                                   \n[15] \"1 dog\"                                                                                                    \n[16] \"3 dogs\"                                                                                                   \n[17] \"1 dog, 1 cat\"                                                                                             \n[18] \"2 dogs\"                                                                                                   \n[19] \"1 dog, 1 cat\"                                                                                             \n[20] \"1 cat\"                                                                                                    \n\n\nThese data need further cleaning to be visualized properly.\n\n\nCode\nhv_pets &lt;- hv |&gt;\n  dplyr::mutate(dogs = stringr::str_detect(pets_types_number, \"[dD]og\"),\n                cats = stringr::str_detect(pets_types_number, \"[cC]at\"))\n\n\n\nCode\nxtabs(formula = ~ dogs + cats, hv_pets)\n\n\n\n\nTable 10.39: Dogs and/or cats\n\n\n\n       cats\ndogs    FALSE TRUE\n  FALSE    21  148\n  TRUE    292   85\n\n\n\n\n\nCode\nxtabs(formula = ~ pets_indoors_outdoors, hv)\n\n\n\n\nTable 10.40: Pets indoors or out\n\n\n\npets_indoors_outdoors\n indoors outdoors \n     515       30 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere are some identifiable elements in the comments_pets field.\n\n\n\n\n\nTable 10.41\n\n\n\nCode\nhv |&gt;\n  dplyr::select(comments_pets) |&gt;\n  dplyr::filter(!is.na(comments_pets)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#division-of-labor",
    "href": "home-visit-viz.html#division-of-labor",
    "title": "Visualize",
    "section": "Division of Labor",
    "text": "Division of Labor\n\n\nCode\ndiv_labor_levels &lt;- c(0:4)\ndiv_labor_lbls &lt;- c(\"never\", \"some_of_the_time\", \"about_half_the_time\", \"most_of_the_time\", \"all_of_the_time\")\nsource(\"../R/div_labor_plot.R\")\n\n\n\nLaundry\n\n\nCode\ndiv_labor_plot(\"laundry_self\", hv)\n\n\n\n\n\n\n\n\nFigure 10.47: Laundry self\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"laundry_partner\", hv)\n\n\n\n\n\n\n\n\nFigure 10.48: Laundry partner\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"laundry_otherperson\", hv)\n\n\n\n\n\n\n\n\nFigure 10.49: Laundry other person\n\n\n\n\n\n\n\nCode\ndiv_labor_plot_by_person(\"laundry\", hv)\n\n\n\n\n\n\n\n\nFigure 10.50\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.42\n\n\n\nCode\nhv |&gt;\n  dplyr::select(labor_laundry_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_laundry_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\n\nCleaning\n\n\nCode\ndiv_labor_plot(\"cleaning_self\", hv)\n\n\n\n\n\n\n\n\nFigure 10.51: Cleaning self\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"cleaning_partner\", hv)\n\n\n\n\n\n\n\n\nFigure 10.52: Cleaning partner\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"cleaning_otherperson\", hv)\n\n\n\n\n\n\n\n\nFigure 10.53: Cleaning other person\n\n\n\n\n\n\n\nCode\ndiv_labor_plot_by_person(\"cleaning\", hv)\n\n\n\n\n\n\n\n\nFigure 10.54\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.43\n\n\n\nCode\nhv |&gt;\n  dplyr::select(labor_cleaning_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_cleaning_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\n\nDishes\n\n\nCode\ndiv_labor_plot(\"dishes_self\", hv)\n\n\n\n\n\n\n\n\nFigure 10.55: Dishes self\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"dishes_partner\", hv)\n\n\n\n\n\n\n\n\nFigure 10.56: Dishes partner\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"dishes_otherperson\", hv)\n\n\n\n\n\n\n\n\nFigure 10.57: Dishes other person\n\n\n\n\n\n\n\nCode\ndiv_labor_plot_by_person(\"dishes\", hv)\n\n\n\n\n\n\n\n\nFigure 10.58\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.44\n\n\n\nCode\nhv |&gt;\n  dplyr::select(labor_dishes_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_dishes_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\n\nCooking\n\n\nCode\ndiv_labor_plot(\"cooking_self\", hv)\n\n\n\n\n\n\n\n\nFigure 10.59: Cooking self\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"cooking_partner\", hv)\n\n\n\n\n\n\n\n\nFigure 10.60: Cooking partner\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"cooking_otherperson\", hv)\n\n\n\n\n\n\n\n\nFigure 10.61: Cooking other person\n\n\n\n\n\n\n\nCode\ndiv_labor_plot_by_person(\"cooking\", hv)\n\n\n\n\n\n\n\n\nFigure 10.62\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.45\n\n\n\nCode\nhv |&gt;\n  dplyr::select(labor_cooking_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_cooking_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\n\nFeeding\n\n\nCode\ndiv_labor_plot(\"feeding_self\", hv)\n\n\n\n\n\n\n\n\nFigure 10.63: Feeding self\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"feeding_partner\", hv)\n\n\n\n\n\n\n\n\nFigure 10.64: Feeding partner\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"feeding_otherperson\", hv)\n\n\n\n\n\n\n\n\nFigure 10.65: Feeding other person\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe call to div_labor_plot_by_person() fails with “feeding” because that string is found in other non-division-of-labor variables.\n\n\n\n\nCode\ndiv_labor_plot_by_person(\"feeding\", hv)\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.46\n\n\n\nCode\nhv |&gt;\n  dplyr::select(labor_feeding_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_feeding_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\n\nDrop-off/pick-up\n\n\nCode\ndiv_labor_plot(\"droppick_self\", hv)\n\n\n\n\n\n\n\n\nFigure 10.66: Drop-off/pick-up self\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"droppick_partner\", hv)\n\n\n\n\n\n\n\n\nFigure 10.67: Drop-off/pick-up partner\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"droppick_otherperson\", hv)\n\n\n\n\n\n\n\n\nFigure 10.68: Drop-off/pick-up other person\n\n\n\n\n\n\n\nCode\ndiv_labor_plot_by_person(\"droppick\", hv)\n\n\n\n\n\n\n\n\nFigure 10.69\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.47\n\n\n\nCode\ndiv_labor_plot(\"dishes_self\", hv)hv |&gt;\n  dplyr::select(labor_feeding_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_feeding_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\n\nBedtime\n\n\nCode\ndiv_labor_plot(\"bed_self\", hv)\n\n\n\n\n\n\n\n\nFigure 10.70: Bed self\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"bed_partner\", hv)\n\n\n\n\n\n\n\n\nFigure 10.71: Bed partner\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"bed_otherperson\", hv)\n\n\n\n\n\n\n\n\nFigure 10.72: Bed other person\n\n\n\n\n\n\n\nCode\ndiv_labor_plot_by_person(\"bed\", hv)\n\n\n\n\n\n\n\n\nFigure 10.73\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.48\n\n\n\nCode\nhv |&gt;\n  dplyr::select(labor_bed_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_bed_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\n\nDisciplining\n\n\nCode\ndiv_labor_plot(\"disciplining_self\", hv)\n\n\n\n\n\n\n\n\nFigure 10.74: Disciplining self\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"disciplining_partner\", hv)\n\n\n\n\n\n\n\n\nFigure 10.75: Disciplining partner\n\n\n\n\n\n\n\nCode\ndiv_labor_plot(\"disciplining_otherperson\", hv)\n\n\n\n\n\n\n\n\nFigure 10.76: Disciplining other person\n\n\n\n\n\n\n\nCode\ndiv_labor_plot_by_person(\"disciplining\", hv)\n\n\n\n\n\n\n\n\nFigure 10.77\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.49: Disciplining other person\n\n\n\nCode\nhv |&gt;\n  dplyr::select(labor_disciplining_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_disciplining_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\n\nComments\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.50\n\n\n\nCode\nhv |&gt;\n  dplyr::select(comments_division_labor) |&gt;\n  dplyr::filter(!is.na(comments_division_labor)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#typical-day",
    "href": "home-visit-viz.html#typical-day",
    "title": "Visualize",
    "section": "Typical day",
    "text": "Typical day\n\nCode\nxtabs(formula = ~ typical_behavior, hv)\n\n\n\n\nTable 10.51: Typical behavior\n\n\n\ntypical_behavior\n no yes \n101 747 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following code will permit visualization of the comments, but the data should be checked for identifiable information before putting it in this document.\n\n\n\n\n\nTable 10.52\n\n\n\nCode\nhv |&gt;\n  dplyr::select(typical_behavior_specifics) |&gt;\n  dplyr::filter(!is.na(typical_behavior_specifics)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nCode\nxtabs(formula = ~ typical_activities, hv)\n\n\n\n\nTable 10.53: Typical activities\n\n\n\ntypical_activities\n no yes \n137 714 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following code will permit visualization of the comments, but the data should be checked for identifiable information before putting it in this document.\n\n\n\n\n\nTable 10.54\n\n\n\nCode\nhv |&gt;\n  dplyr::select(typical_activities_specifics) |&gt;\n  dplyr::filter(!is.na(typical_activities_specifics)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nCode\nxtabs(formula = ~ typical_nightmorning, hv)\n\n\n\n\nTable 10.55: Typical night and morning\n\n\n\ntypical_nightmorning\n no yes \n206 643 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following code will permit visualization of the comments, but the data should be checked for identifiable information before putting it in this document.\n\n\n\n\n\nTable 10.56\n\n\n\nCode\nhv |&gt;\n  dplyr::select(typical_nightmorning_specifics) |&gt;\n  dplyr::filter(!is.na(typical_nightmorning_specifics)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nCode\nxtabs(formula = ~ typical_otherthanme, hv)\n\n\n\n\nTable 10.57: Typical other than me\n\n\n\ntypical_otherthanme\n no yes \n113 738 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following code will permit visualization of the comments, but the data should be checked for identifiable information before putting it in this document.\n\n\n\n\n\nTable 10.58\n\n\n\nCode\nhv |&gt;\n  dplyr::select(typical_otherthanme_specifics) |&gt;\n  dplyr::filter(!is.na(typical_otherthanme_specifics)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "home-visit-data-dictionary.html",
    "href": "home-visit-data-dictionary.html",
    "title": "Data dictionary",
    "section": "",
    "text": "Extracting questions\nAn alternative approach to generating the data dictionary starts with the questionnaire files themselves.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Data dictionary</span>"
    ]
  },
  {
    "objectID": "post-visit-gather.html",
    "href": "post-visit-gather.html",
    "title": "Gather",
    "section": "",
    "text": "Background\nThis page describes the process for “gathering” the post-visit data. Most of the work is done via specific targets.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "post-visit-gather.html#select-download-save-csvs",
    "href": "post-visit-gather.html#select-download-save-csvs",
    "title": "Gather",
    "section": "Select, download, save CSVs",
    "text": "Select, download, save CSVs\nThree targets handle selecting the post-visit files, downloading .xlsx files and saving the CSVs.\n  tar_target(\n    kb_post_visit_df,\n    kobo_list_data_filtered(kb_df, \"Post\\\\-Visit\"),\n    cue = tarchetypes::tar_cue_age(\n      name = kb_post_visit,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\n  tar_target(\n    post_visit_download,\n    kobo_retrieve_save_many_xlsx(kb_post_visit_df, \"data/xlsx/post_visit\"),\n    cue = tarchetypes::tar_cue_age(\n      name = screen_df,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\n  tar_target(\n    post_visit_csvs,\n    load_xlsx_save_many_csvs(\"data/xlsx/post_visit\", \"data/csv/post_visit\", \"PLAY_Post\"),\n    cue = tarchetypes::tar_cue_age(\n      name = post_visit_csvs,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Gather</span>"
    ]
  },
  {
    "objectID": "post-visit-clean.html",
    "href": "post-visit-clean.html",
    "title": "Clean",
    "section": "",
    "text": "Background\nThis page describes the process of cleaning the post-visit survey data.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "post-visit-clean.html#import",
    "href": "post-visit-clean.html#import",
    "title": "Clean",
    "section": "Import",
    "text": "Import\nWe import the two CSVs in data/csv/post_visit.\n\n\nCode\nfl &lt;- list.files(file.path(here::here(), \"data\", \"csv\", \"post_visit\"), \n                 \"\\\\.csv$\", full.names = TRUE)\n\npvs &lt;- purrr::map(fl, readr::read_csv, col_types = readr::cols(.default = \"c\"),\n                      show_col_types = FALSE)",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "post-visit-clean.html#examine",
    "href": "post-visit-clean.html#examine",
    "title": "Clean",
    "section": "Examine",
    "text": "Examine\n\n\nCode\nnames(pvs[[1]])\n\n\n  [1] \"start\"                                                                                                 \n  [2] \"end\"                                                                                                   \n  [3] \"group_postvisitnotes/last_update\"                                                                      \n  [4] \"group_postvisitnotes/note_cleanup\"                                                                     \n  [5] \"group_postvisitnotes/site_id\"                                                                          \n  [6] \"group_postvisitnotes/date_today\"                                                                       \n  [7] \"group_postvisitnotes/child_first_name\"                                                                 \n  [8] \"group_postvisitnotes/child_middle_name\"                                                                \n  [9] \"group_postvisitnotes/child_last_name\"                                                                  \n [10] \"group_postvisitnotes/child_birthdate\"                                                                  \n [11] \"group_postvisitnotes/child_birth_city\"                                                                 \n [12] \"group_postvisitnotes/testdate\"                                                                         \n [13] \"group_postvisitnotes/child_sex\"                                                                        \n [14] \"group_postvisitnotes/child_agegroup\"                                                                   \n [15] \"group_postvisitnotes/subject_number\"                                                                   \n [16] \"group_postvisitnotes/city1\"                                                                            \n [17] \"group_postvisitnotes/city2\"                                                                            \n [18] \"group_postvisitnotes/last1\"                                                                            \n [19] \"group_postvisitnotes/first1\"                                                                           \n [20] \"group_postvisitnotes/year\"                                                                             \n [21] \"group_postvisitnotes/year2\"                                                                            \n [22] \"group_postvisitnotes/day\"                                                                              \n [23] \"group_postvisitnotes/day2\"                                                                             \n [24] \"group_postvisitnotes/day1\"                                                                             \n [25] \"group_postvisitnotes/month\"                                                                            \n [26] \"group_postvisitnotes/month2\"                                                                           \n [27] \"group_postvisitnotes/play_id\"                                                                          \n [28] \"group_postvisitnotes/play_id_test\"                                                                     \n [29] \"group_postvisitnotes/participant_id\"                                                                   \n [30] \"group_postvisitnotes/protocol_date\"                                                                    \n [31] \"group_postvisitnotes/languange_spoken_child\"                                                           \n [32] \"group_postvisitnotes/languange_spoken_child/english\"                                                   \n [33] \"group_postvisitnotes/languange_spoken_child/spanish\"                                                   \n [34] \"group_postvisitnotes/acknowledge_geninfo\"                                                              \n [35] \"group_postvisitnotes/group_housingchecklist/rooms\"                                                     \n [36] \"group_postvisitnotes/group_housingchecklist/rooms/basement\"                                            \n [37] \"group_postvisitnotes/group_housingchecklist/rooms/kitchen\"                                             \n [38] \"group_postvisitnotes/group_housingchecklist/rooms/eatingarea\"                                          \n [39] \"group_postvisitnotes/group_housingchecklist/rooms/bathroom\"                                            \n [40] \"group_postvisitnotes/group_housingchecklist/rooms/bedroom\"                                             \n [41] \"group_postvisitnotes/group_housingchecklist/rooms/livingroom\"                                          \n [42] \"group_postvisitnotes/group_housingchecklist/rooms/familyroom\"                                          \n [43] \"group_postvisitnotes/group_housingchecklist/rooms/studyroom\"                                           \n [44] \"group_postvisitnotes/group_housingchecklist/group_basement/basement_access\"                            \n [45] \"group_postvisitnotes/group_housingchecklist/group_basement/group_accessiblebasement/basement_use\"      \n [46] \"group_postvisitnotes/group_housingchecklist/group_basement/group_accessiblebasement/basement_playspace\"\n [47] \"group_postvisitnotes/group_housingchecklist/group_basement/group_accessiblebasement/basement_odors\"    \n [48] \"group_postvisitnotes/group_housingchecklist/group_kitchen/kitchen_odors\"                               \n [49] \"group_postvisitnotes/group_housingchecklist/group_bathroom/number_bathroom\"                            \n [50] \"group_postvisitnotes/group_housingchecklist/group_bathroom/note_bathroomsep\"                           \n [51] \"group_postvisitnotes/group_housingchecklist/group_bathroom/group_bathroomsep_count\"                    \n [52] \"group_postvisitnotes/group_housingchecklist/group_childroom/childroom_whoseroom\"                       \n [53] \"group_postvisitnotes/group_housingchecklist/group_childroom/childroom_inhabitants\"                     \n [54] \"group_postvisitnotes/group_housingchecklist/group_bedroom/number_bedrooms\"                             \n [55] \"group_postvisitnotes/group_housingchecklist/group_bedroom/note_bedrooms\"                               \n [56] \"group_postvisitnotes/group_housingchecklist/group_bedroom/group_bedrooomsep_count\"                     \n [57] \"group_postvisitnotes/group_housingchecklist/group_livingroom/living_couchcondition\"                    \n [58] \"group_postvisitnotes/group_housingchecklist/group_familyroom/family_couchcondition\"                    \n [59] \"group_postvisitnotes/group_housingchecklist/group_houseinside/frontdoorlock\"                           \n [60] \"group_postvisitnotes/group_housingchecklist/group_houseinside/number_insidestairs\"                     \n [61] \"group_postvisitnotes/group_housingchecklist/group_houseinside/group_insidestairs_count\"                \n [62] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/front_maintenance\"                      \n [63] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/outside_playarea\"                       \n [64] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/front_exteriorwall\"                     \n [65] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/house_type\"                             \n [66] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/building_floors\"                        \n [67] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/home_floor\"                             \n [68] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/number_outsidestairs\"                   \n [69] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/group_outsidestairs/outstairs_handrail\" \n [70] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/neighbor_distance\"                      \n [71] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/group_street/busy_street\"               \n [72] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/group_street/number_streetlanes\"        \n [73] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/sidewalk_condition\"                     \n [74] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/litter\"                                 \n [75] \"group_postvisitnotes/group_housingchecklist/acknowledge_housingchecklist\"                              \n [76] \"group_postvisitnotes/group_cleanupnotes/group_timerecording/actual_time_start\"                         \n [77] \"group_postvisitnotes/group_cleanupnotes/group_timerecording/total_record_time\"                         \n [78] \"group_postvisitnotes/group_cleanupnotes/study_parts\"                                                   \n [79] \"group_postvisitnotes/group_cleanupnotes/study_parts/natural\"                                           \n [80] \"group_postvisitnotes/group_cleanupnotes/study_parts/housewalkthrough\"                                  \n [81] \"group_postvisitnotes/group_cleanupnotes/study_parts/structured\"                                        \n [82] \"group_postvisitnotes/group_cleanupnotes/study_parts/mcdi\"                                              \n [83] \"group_postvisitnotes/group_cleanupnotes/study_parts/health\"                                            \n [84] \"group_postvisitnotes/group_cleanupnotes/study_parts/rothbart\"                                          \n [85] \"group_postvisitnotes/group_cleanupnotes/study_parts/locomotor\"                                         \n [86] \"group_postvisitnotes/group_cleanupnotes/study_parts/media\"                                             \n [87] \"group_postvisitnotes/group_cleanupnotes/study_parts/pets\"                                              \n [88] \"group_postvisitnotes/group_cleanupnotes/study_parts/division\"                                          \n [89] \"group_postvisitnotes/group_cleanupnotes/study_parts/typical_day\"                                       \n [90] \"group_postvisitnotes/group_cleanupnotes/group_decibel/tablet_location\"                                 \n [91] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/housewalk_completion\"                          \n [92] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/room_missing\"                                  \n [93] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/notes_missing\"                                 \n [94] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/room_refuse\"                                   \n [95] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/notes_why\"                                     \n [96] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers\"                                       \n [97] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/configuration\"                         \n [98] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/items\"                                 \n [99] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/position\"                              \n[100] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/other\"                                 \n[101] \"group_postvisitnotes/group_cleanupnotes/group_barriers/notes_barriers\"                                 \n[102] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior\"                                  \n[103] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/talk\"                             \n[104] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/engage\"                           \n[105] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/perform\"                          \n[106] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/exp_care\"                         \n[107] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/other\"                            \n[108] \"group_postvisitnotes/group_cleanupnotes/group_mother/notes_mother\"                                     \n[109] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior\"                                    \n[110] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/talk\"                               \n[111] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/engage\"                             \n[112] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/perform\"                            \n[113] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/other\"                              \n[114] \"group_postvisitnotes/group_cleanupnotes/group_child/notes_child\"                                       \n[115] \"group_postvisitnotes/group_cleanupnotes/group_violations/criteria_deviations\"                          \n[116] \"group_postvisitnotes/group_cleanupnotes/group_violations/note_criteria_deviations\"                     \n[117] \"group_postvisitnotes/group_cleanupnotes/group_violations/equipment_issues\"                             \n[118] \"group_postvisitnotes/group_cleanupnotes/group_violations/notes_equipment_issues\"                       \n[119] \"group_postvisitnotes/group_cleanupnotes/group_violations/breaks_pauses\"                                \n[120] \"group_postvisitnotes/group_cleanupnotes/group_violations/notes_breaks_pauses\"                          \n[121] \"group_postvisitnotes/group_cleanupnotes/group_violations/incorrect_protocol\"                           \n[122] \"group_postvisitnotes/group_cleanupnotes/group_violations/notes_incorrect_protocol\"                     \n[123] \"group_postvisitnotes/group_cleanupnotes/group_violations/questionnaire_mother\"                         \n[124] \"group_postvisitnotes/group_cleanupnotes/group_violations/notes_questionnaire_mother\"                   \n[125] \"group_postvisitnotes/group_cleanupnotes/group_safetyexp/experimenter_safety\"                           \n[126] \"group_postvisitnotes/group_cleanupnotes/group_safetypart/injured_upset\"                                \n[127] \"group_postvisitnotes/group_cleanupnotes/notes_othercomments\"                                           \n[128] \"group_postvisitnotes/group_cleanupnotes/acknowledge_cleanup\"                                           \n[129] \"__version__\"                                                                                           \n[130] \"_version_\"                                                                                             \n[131] \"_version__001\"                                                                                         \n[132] \"meta/instanceID\"                                                                                       \n[133] \"_id\"                                                                                                   \n[134] \"_uuid\"                                                                                                 \n[135] \"_submission_time\"                                                                                      \n[136] \"_index\"                                                                                                \n[137] \"_parent_table_name\"                                                                                    \n[138] \"_parent_index\"                                                                                         \n[139] \"_tags\"                                                                                                 \n[140] \"_notes\"                                                                                                \n\n\nCode\ndim(pvs[[1]])\n\n\n[1]   6 140\n\n\n\n\nCode\nnames(pvs[[2]])\n\n\n  [1] \"start\"                                                                                                 \n  [2] \"end\"                                                                                                   \n  [3] \"group_postvisitnotes/last_update\"                                                                      \n  [4] \"group_postvisitnotes/note_cleanup\"                                                                     \n  [5] \"group_postvisitnotes/site_id\"                                                                          \n  [6] \"group_postvisitnotes/subject_number\"                                                                   \n  [7] \"group_postvisitnotes/testdate\"                                                                         \n  [8] \"group_postvisitnotes/date_today\"                                                                       \n  [9] \"group_postvisitnotes/experimenter_name\"                                                                \n [10] \"group_postvisitnotes/child_first_name\"                                                                 \n [11] \"group_postvisitnotes/child_middle_name\"                                                                \n [12] \"group_postvisitnotes/child_last_name\"                                                                  \n [13] \"group_postvisitnotes/child_birthdate\"                                                                  \n [14] \"group_postvisitnotes/child_birth_city\"                                                                 \n [15] \"group_postvisitnotes/child_sex\"                                                                        \n [16] \"group_postvisitnotes/child_agegroup\"                                                                   \n [17] \"group_postvisitnotes/city1\"                                                                            \n [18] \"group_postvisitnotes/city2\"                                                                            \n [19] \"group_postvisitnotes/last1\"                                                                            \n [20] \"group_postvisitnotes/first1\"                                                                           \n [21] \"group_postvisitnotes/year\"                                                                             \n [22] \"group_postvisitnotes/year2\"                                                                            \n [23] \"group_postvisitnotes/day\"                                                                              \n [24] \"group_postvisitnotes/day2\"                                                                             \n [25] \"group_postvisitnotes/day1\"                                                                             \n [26] \"group_postvisitnotes/month\"                                                                            \n [27] \"group_postvisitnotes/month2\"                                                                           \n [28] \"group_postvisitnotes/play_id\"                                                                          \n [29] \"group_postvisitnotes/db_session\"                                                                       \n [30] \"group_postvisitnotes/db_naturalplay\"                                                                   \n [31] \"group_postvisitnotes/db_housewalkthrough\"                                                              \n [32] \"group_postvisitnotes/db_structuredplay\"                                                                \n [33] \"group_postvisitnotes/db_questionnaires\"                                                                \n [34] \"group_postvisitnotes/db_decibel\"                                                                       \n [35] \"group_postvisitnotes/databrary/note_upload\"                                                            \n [36] \"group_postvisitnotes/databrary/databrary_session\"                                                      \n [37] \"group_postvisitnotes/databrary/databrary_naturalplay\"                                                  \n [38] \"group_postvisitnotes/databrary/databrary_housewalkthrough\"                                             \n [39] \"group_postvisitnotes/databrary/databrary_structuredplay\"                                               \n [40] \"group_postvisitnotes/databrary/databrary_questionnaires\"                                               \n [41] \"group_postvisitnotes/decibel/note_decibel\"                                                             \n [42] \"group_postvisitnotes/protocol_date\"                                                                    \n [43] \"group_postvisitnotes/languange_spoken_child\"                                                           \n [44] \"group_postvisitnotes/languange_spoken_child/english\"                                                   \n [45] \"group_postvisitnotes/languange_spoken_child/spanish\"                                                   \n [46] \"group_postvisitnotes/acknowledge_geninfo\"                                                              \n [47] \"group_postvisitnotes/group_housingchecklist/rooms\"                                                     \n [48] \"group_postvisitnotes/group_housingchecklist/rooms/basement\"                                            \n [49] \"group_postvisitnotes/group_housingchecklist/rooms/kitchen\"                                             \n [50] \"group_postvisitnotes/group_housingchecklist/rooms/eatingarea\"                                          \n [51] \"group_postvisitnotes/group_housingchecklist/rooms/bathroom\"                                            \n [52] \"group_postvisitnotes/group_housingchecklist/rooms/bedroom\"                                             \n [53] \"group_postvisitnotes/group_housingchecklist/rooms/livingroom\"                                          \n [54] \"group_postvisitnotes/group_housingchecklist/rooms/familyroom\"                                          \n [55] \"group_postvisitnotes/group_housingchecklist/rooms/studyroom\"                                           \n [56] \"group_postvisitnotes/group_housingchecklist/group_basement/basement_access\"                            \n [57] \"group_postvisitnotes/group_housingchecklist/group_basement/group_accessiblebasement/basement_use\"      \n [58] \"group_postvisitnotes/group_housingchecklist/group_basement/group_accessiblebasement/basement_playspace\"\n [59] \"group_postvisitnotes/group_housingchecklist/group_basement/group_accessiblebasement/basement_odors\"    \n [60] \"group_postvisitnotes/group_housingchecklist/group_kitchen/kitchen_odors\"                               \n [61] \"group_postvisitnotes/group_housingchecklist/group_bathroom/number_bathroom\"                            \n [62] \"group_postvisitnotes/group_housingchecklist/group_bathroom/note_bathroomsep\"                           \n [63] \"group_postvisitnotes/group_housingchecklist/group_bathroom/group_bathroomsep_count\"                    \n [64] \"group_postvisitnotes/group_housingchecklist/group_childroom/childroom_whoseroom\"                       \n [65] \"group_postvisitnotes/group_housingchecklist/group_childroom/childroom_inhabitants\"                     \n [66] \"group_postvisitnotes/group_housingchecklist/group_bedroom/number_bedrooms\"                             \n [67] \"group_postvisitnotes/group_housingchecklist/group_bedroom/note_bedrooms\"                               \n [68] \"group_postvisitnotes/group_housingchecklist/group_bedroom/group_bedrooomsep_count\"                     \n [69] \"group_postvisitnotes/group_housingchecklist/group_livingroom/living_couchcondition\"                    \n [70] \"group_postvisitnotes/group_housingchecklist/group_familyroom/family_couchcondition\"                    \n [71] \"group_postvisitnotes/group_housingchecklist/group_houseinside/frontdoorlock\"                           \n [72] \"group_postvisitnotes/group_housingchecklist/group_houseinside/number_insidestairs\"                     \n [73] \"group_postvisitnotes/group_housingchecklist/group_houseinside/group_insidestairs_count\"                \n [74] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/front_maintenance\"                      \n [75] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/outside_playarea\"                       \n [76] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/front_exteriorwall\"                     \n [77] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/house_type\"                             \n [78] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/building_floors\"                        \n [79] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/home_floor\"                             \n [80] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/number_outsidestairs\"                   \n [81] \"group_postvisitnotes/group_housingchecklist/group_houseoutside/group_outsidestairs/outstairs_handrail\" \n [82] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/neighbor_distance\"                      \n [83] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/group_street/busy_street\"               \n [84] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/group_street/number_streetlanes\"        \n [85] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/sidewalk_condition\"                     \n [86] \"group_postvisitnotes/group_housingchecklist/group_neighborhood/litter\"                                 \n [87] \"group_postvisitnotes/group_housingchecklist/acknowledge_housingchecklist\"                              \n [88] \"group_postvisitnotes/group_cleanupnotes/group_timerecording/actual_time_start\"                         \n [89] \"group_postvisitnotes/group_cleanupnotes/group_timerecording/total_record_time\"                         \n [90] \"group_postvisitnotes/group_cleanupnotes/study_parts\"                                                   \n [91] \"group_postvisitnotes/group_cleanupnotes/study_parts/natural\"                                           \n [92] \"group_postvisitnotes/group_cleanupnotes/study_parts/housewalkthrough\"                                  \n [93] \"group_postvisitnotes/group_cleanupnotes/study_parts/structured\"                                        \n [94] \"group_postvisitnotes/group_cleanupnotes/study_parts/locomotor\"                                         \n [95] \"group_postvisitnotes/group_cleanupnotes/study_parts/mcdi_short_eng\"                                    \n [96] \"group_postvisitnotes/group_cleanupnotes/study_parts/mcdi_short_spa\"                                    \n [97] \"group_postvisitnotes/group_cleanupnotes/study_parts/dlles_short_eng\"                                   \n [98] \"group_postvisitnotes/group_cleanupnotes/study_parts/dlles_short_spa\"                                   \n [99] \"group_postvisitnotes/group_cleanupnotes/study_parts/dlles_extended\"                                    \n[100] \"group_postvisitnotes/group_cleanupnotes/study_parts/spacial_math_tech\"                                 \n[101] \"group_postvisitnotes/group_cleanupnotes/study_parts/health\"                                            \n[102] \"group_postvisitnotes/group_cleanupnotes/study_parts/rothbart\"                                          \n[103] \"group_postvisitnotes/group_cleanupnotes/study_parts/media\"                                             \n[104] \"group_postvisitnotes/group_cleanupnotes/study_parts/pets\"                                              \n[105] \"group_postvisitnotes/group_cleanupnotes/study_parts/division\"                                          \n[106] \"group_postvisitnotes/group_cleanupnotes/study_parts/typical_day\"                                       \n[107] \"group_postvisitnotes/group_cleanupnotes/zoom\"                                                          \n[108] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires\"                                           \n[109] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/locomotor\"                                 \n[110] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/mcdi_short_eng\"                            \n[111] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/mcdi_short_spa\"                            \n[112] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/dlles_short_eng\"                           \n[113] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/dlles_short_spa\"                           \n[114] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/dlles_extended\"                            \n[115] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/spacial_math_tech\"                         \n[116] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/health\"                                    \n[117] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/rothbart\"                                  \n[118] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/media\"                                     \n[119] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/pets\"                                      \n[120] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/division\"                                  \n[121] \"group_postvisitnotes/group_cleanupnotes/zoom_questionnaires/typical_day\"                               \n[122] \"group_postvisitnotes/group_cleanupnotes/comments_zoom_questionnaires\"                                  \n[123] \"group_postvisitnotes/group_cleanupnotes/group_decibel/tablet_location\"                                 \n[124] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/housewalk_completion\"                          \n[125] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/room_missing\"                                  \n[126] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/comments_missing\"                              \n[127] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/room_refuse\"                                   \n[128] \"group_postvisitnotes/group_cleanupnotes/group_housewalk/comments_why\"                                  \n[129] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers\"                                       \n[130] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/configuration\"                         \n[131] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/items\"                                 \n[132] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/position\"                              \n[133] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/other\"                                 \n[134] \"group_postvisitnotes/group_cleanupnotes/group_barriers/barriers/doesnotapply\"                          \n[135] \"group_postvisitnotes/group_cleanupnotes/group_barriers/comments_barriers\"                              \n[136] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior\"                                  \n[137] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/talk\"                             \n[138] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/engage\"                           \n[139] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/perform\"                          \n[140] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/exp_care\"                         \n[141] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/other\"                            \n[142] \"group_postvisitnotes/group_cleanupnotes/group_mother/mother_behavior/doesnotapply\"                     \n[143] \"group_postvisitnotes/group_cleanupnotes/group_mother/comments_mother\"                                  \n[144] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior\"                                    \n[145] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/talk\"                               \n[146] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/engage\"                             \n[147] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/perform\"                            \n[148] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/other\"                              \n[149] \"group_postvisitnotes/group_cleanupnotes/group_child/child_behavior/doesnotapply\"                       \n[150] \"group_postvisitnotes/group_cleanupnotes/group_child/comments_child\"                                    \n[151] \"group_postvisitnotes/group_cleanupnotes/group_violations/criteria_deviations\"                          \n[152] \"group_postvisitnotes/group_cleanupnotes/group_violations/comments_criteria_deviations\"                 \n[153] \"group_postvisitnotes/group_cleanupnotes/group_violations/equipment_issues\"                             \n[154] \"group_postvisitnotes/group_cleanupnotes/group_violations/comments_equipment_issues\"                    \n[155] \"group_postvisitnotes/group_cleanupnotes/group_violations/breaks_pauses\"                                \n[156] \"group_postvisitnotes/group_cleanupnotes/group_violations/comments_breaks_pauses\"                       \n[157] \"group_postvisitnotes/group_cleanupnotes/group_violations/incorrect_protocol\"                           \n[158] \"group_postvisitnotes/group_cleanupnotes/group_violations/comments_incorrect_protocol\"                  \n[159] \"group_postvisitnotes/group_cleanupnotes/group_violations/questionnaire_mother\"                         \n[160] \"group_postvisitnotes/group_cleanupnotes/group_violations/comments_questionnaire_mother\"                \n[161] \"group_postvisitnotes/group_cleanupnotes/group_safetyexp/experimenter_safety\"                           \n[162] \"group_postvisitnotes/group_cleanupnotes/group_safetyexp/comments_experimenter_safety\"                  \n[163] \"group_postvisitnotes/group_cleanupnotes/group_safetypart/adverse_event\"                                \n[164] \"group_postvisitnotes/group_cleanupnotes/group_safetypart/comments_adverse_event\"                       \n[165] \"group_postvisitnotes/group_cleanupnotes/notes_othercomments\"                                           \n[166] \"group_postvisitnotes/group_cleanupnotes/acknowledge_cleanup\"                                           \n[167] \"group_postvisitnotes/note_submission\"                                                                  \n[168] \"group_postvisitnotes/note_googleform\"                                                                  \n[169] \"__version__\"                                                                                           \n[170] \"meta/instanceID\"                                                                                       \n[171] \"_id\"                                                                                                   \n[172] \"_uuid\"                                                                                                 \n[173] \"_submission_time\"                                                                                      \n[174] \"_index\"                                                                                                \n[175] \"_parent_table_name\"                                                                                    \n[176] \"_parent_index\"                                                                                         \n[177] \"_tags\"                                                                                                 \n[178] \"_notes\"                                                                                                \n\n\nCode\ndim(pvs[[2]])\n\n\n[1] 900 178\n\n\nMost of the entries are in the second form, so we start there.\n\n\nCode\npv &lt;- pvs[[2]]",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "post-visit-clean.html#remove-metadata-variables",
    "href": "post-visit-clean.html#remove-metadata-variables",
    "title": "Clean",
    "section": "Remove metadata variables",
    "text": "Remove metadata variables\nThe following variables are metadata variables that can be removed from the dataset:\n\n\nCode\nmetadata_vars &lt;- c(\"start\",\n                   \"end\",\n                   \"__version__\", \n                   \"meta/instanceID\",\n                   \"_id\",\n                   \"_uuid\",\n                   \"_submission_time\",\n                   \"_index\",\n                   \"_parent_table_name\",\n                   \"_parent_index\",\n                   \"_tags\",\n                   \"_notes\")\n\n\nWe omit these.\n\n\nCode\npv &lt;- pv |&gt;\n  dplyr::select(-metadata_vars)\n\n\nWarning: Using an external vector in selections was deprecated in tidyselect 1.1.0.\nℹ Please use `all_of()` or `any_of()` instead.\n  # Was:\n  data %&gt;% select(metadata_vars)\n\n  # Now:\n  data %&gt;% select(all_of(metadata_vars))\n\nSee &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "post-visit-clean.html#remove-administrative-variables",
    "href": "post-visit-clean.html#remove-administrative-variables",
    "title": "Clean",
    "section": "Remove administrative variables",
    "text": "Remove administrative variables\nSome variables are intended for project staff only.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "post-visit-clean.html#clean-housing-checklist",
    "href": "post-visit-clean.html#clean-housing-checklist",
    "title": "Clean",
    "section": "Clean housing checklist",
    "text": "Clean housing checklist\nThe housing checklist items are in group_postvisitnotes/group_housingchecklist.\nWe select them.\n\n\nCode\nhousing_checklist &lt;- pv |&gt;\n  dplyr::select(contains(\"group_housingchecklist\"))\n\n\nRemove the variable header (group_postvisitnotes/group_housingchecklist).\n\n\nCode\n(names(housing_checklist) &lt;- stringr::str_remove(string = names(housing_checklist), \"group_postvisitnotes\\\\/group_housingchecklist\\\\/\"))\n\n\n [1] \"rooms\"                                                     \n [2] \"rooms/basement\"                                            \n [3] \"rooms/kitchen\"                                             \n [4] \"rooms/eatingarea\"                                          \n [5] \"rooms/bathroom\"                                            \n [6] \"rooms/bedroom\"                                             \n [7] \"rooms/livingroom\"                                          \n [8] \"rooms/familyroom\"                                          \n [9] \"rooms/studyroom\"                                           \n[10] \"group_basement/basement_access\"                            \n[11] \"group_basement/group_accessiblebasement/basement_use\"      \n[12] \"group_basement/group_accessiblebasement/basement_playspace\"\n[13] \"group_basement/group_accessiblebasement/basement_odors\"    \n[14] \"group_kitchen/kitchen_odors\"                               \n[15] \"group_bathroom/number_bathroom\"                            \n[16] \"group_bathroom/note_bathroomsep\"                           \n[17] \"group_bathroom/group_bathroomsep_count\"                    \n[18] \"group_childroom/childroom_whoseroom\"                       \n[19] \"group_childroom/childroom_inhabitants\"                     \n[20] \"group_bedroom/number_bedrooms\"                             \n[21] \"group_bedroom/note_bedrooms\"                               \n[22] \"group_bedroom/group_bedrooomsep_count\"                     \n[23] \"group_livingroom/living_couchcondition\"                    \n[24] \"group_familyroom/family_couchcondition\"                    \n[25] \"group_houseinside/frontdoorlock\"                           \n[26] \"group_houseinside/number_insidestairs\"                     \n[27] \"group_houseinside/group_insidestairs_count\"                \n[28] \"group_houseoutside/front_maintenance\"                      \n[29] \"group_houseoutside/outside_playarea\"                       \n[30] \"group_houseoutside/front_exteriorwall\"                     \n[31] \"group_houseoutside/house_type\"                             \n[32] \"group_houseoutside/building_floors\"                        \n[33] \"group_houseoutside/home_floor\"                             \n[34] \"group_houseoutside/number_outsidestairs\"                   \n[35] \"group_houseoutside/group_outsidestairs/outstairs_handrail\" \n[36] \"group_neighborhood/neighbor_distance\"                      \n[37] \"group_neighborhood/group_street/busy_street\"               \n[38] \"group_neighborhood/group_street/number_streetlanes\"        \n[39] \"group_neighborhood/sidewalk_condition\"                     \n[40] \"group_neighborhood/litter\"                                 \n[41] \"acknowledge_housingchecklist\"                              \n\n\n\n\n\n\n\n\nNote\n\n\n\nDiscuss further cleaning with Kasey before proceeding further.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Clean</span>"
    ]
  },
  {
    "objectID": "post-visit-viz.html",
    "href": "post-visit-viz.html",
    "title": "Visualize",
    "section": "",
    "text": "Warning\n\n\n\nThis page is under construction.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>Visualize</span>"
    ]
  },
  {
    "objectID": "post-visit-data-dictionary.html",
    "href": "post-visit-data-dictionary.html",
    "title": "Data dictionary",
    "section": "",
    "text": "Warning\n\n\n\nThis page is under construction.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>Data dictionary</span>"
    ]
  },
  {
    "objectID": "merge.html",
    "href": "merge.html",
    "title": "Merge files",
    "section": "",
    "text": "Background\nThis page describes the process of merging data files.",
    "crumbs": [
      "Export",
      "<span class='chapter-number'>16</span>  <span class='chapter-title'>Merge files</span>"
    ]
  },
  {
    "objectID": "merge.html#home-visit-with-databrary",
    "href": "merge.html#home-visit-with-databrary",
    "title": "Merge files",
    "section": "Home visit with Databrary",
    "text": "Home visit with Databrary\n\n\n\n\n\nflowchart TD\n  A[Home_visit] --&gt; C[Home_all]\n  B[Databrary] --&gt; C\n\n\n\n\n\n\nFirst, we load the latest home visit CSV.\n\n\nCode\nfn &lt;- file.path(here::here(), \"data\", \"csv\", \"home_visit\", \"agg\",\n                \"PLAY-non-mcdi-kobo-latest.csv\")\n\nhv &lt;- readr::read_csv(fn,\n                      col_types = readr::cols(.default = \"c\"),\n                      show_col_types = FALSE)\n\n\nWe create a helper function for the site_session data.\n\n\nCode\nmake_augmented_sess_df &lt;- function(fn) {\n  df &lt;- readr::read_csv(fn, col_types = readr::cols(.default = \"c\"))\n  \n  this_site &lt;- basename(fn) |&gt;\n    stringr::str_remove(\"\\\\.csv\")\n  \n  dplyr::mutate(df, site_id = this_site)\n}\n\n\nWe then map the helper function across the list of session CSVs in data/csv/site_sessions and combine the results into a single aggregate data frame, db_agg.\n\n\nCode\nf_path &lt;- file.path(here::here(), \"data\", \"csv\", \"site_sessions\")\nsession_fl &lt;- list.files(f_path, \"\\\\.csv$\", full.names = TRUE)\n\nif (is.null(length(session_fl))) {\n  warning(\"No session file data\")\n} else {\n  db &lt;- purrr::map(session_fl, make_augmented_sess_df)\n  \n  db_agg &lt;- db |&gt;\n    purrr::list_rbind() |&gt;\n    # Omit NA in session_date\n    dplyr::filter(!is.na(session_date))\n  \n  message(dim(db_agg)[1], \" rows imported.\")\n}\n\n\n932 rows imported.\n\n\nFinally, we join the KoBoToolbox data with the Databrary session data.\n\n\nCode\nhv_db &lt;- dplyr::full_join(hv,\n                          db_agg,\n                          by = dplyr::join_by(site_id == site_id, \n                                              participant_ID == participant_ID))\n\n\nWe export this merged file.\n\nSave files\nSave the file in data/csv/home_visit/agg/ with the name PLAY-non-mcdi-kobo-db-merged-latest.csv.\n\n\nCode\nfn &lt;- file.path(here::here(), \"data\", \"csv\", \"home_visit\", \"agg\",\n                \"PLAY-non-mcdi-kobo-db-merged-latest.csv\")\n\nreadr::write_csv(hv_db, fn)\n\n\nSave with date-stamp for quality control, e.g., PLAY-non-mcdi-db-merged-2024-09-13.csv.\n\n\nCode\nfn &lt;- file.path(here::here(), \"data\", \"csv\", \"home_visit\", \"agg\",\n                paste0(\"PLAY-non-mcdi-kobo-db-merged-\", Sys.Date(), \".csv\"))\n\nreadr::write_csv(hv_db, fn)",
    "crumbs": [
      "Export",
      "<span class='chapter-number'>16</span>  <span class='chapter-title'>Merge files</span>"
    ]
  },
  {
    "objectID": "site-specific.html",
    "href": "site-specific.html",
    "title": "Site-specific files",
    "section": "",
    "text": "About\nThis page produces site-specific files.",
    "crumbs": [
      "Export",
      "<span class='chapter-number'>17</span>  <span class='chapter-title'>Site-specific files</span>"
    ]
  },
  {
    "objectID": "site-specific.html#set-up",
    "href": "site-specific.html#set-up",
    "title": "Site-specific files",
    "section": "Set-up",
    "text": "Set-up\n\n\nCode\nsuppressPackageStartupMessages(library(tidyverse))\n\ndeps &lt;- c(\"screen_select_site_data\", \"home_select_site_data\", \n            \"home_mbcdi_select_site_data\" )\nunsourced_deps &lt;- deps[!(deps %in% ls())]\nsource_fns &lt;- paste0(\"../R/\", unsourced_deps, \".R\")\npurrr::walk(source_fns, source)\n\n\n\n\nCode\nplay_vols_df &lt;- readr::read_csv(file.path(here::here(), \"data/csv/_meta/play_site_vols.csv\"),\n                              show_col_types = FALSE)",
    "crumbs": [
      "Export",
      "<span class='chapter-number'>17</span>  <span class='chapter-title'>Site-specific files</span>"
    ]
  },
  {
    "objectID": "site-specific.html#screening",
    "href": "site-specific.html#screening",
    "title": "Site-specific files",
    "section": "Screening",
    "text": "Screening\n\n\n\n\n\n\nWarning\n\n\n\nThis section is under construction.",
    "crumbs": [
      "Export",
      "<span class='chapter-number'>17</span>  <span class='chapter-title'>Site-specific files</span>"
    ]
  },
  {
    "objectID": "site-specific.html#home-visit",
    "href": "site-specific.html#home-visit",
    "title": "Site-specific files",
    "section": "Home visit",
    "text": "Home visit\n\nNon-MBCDI data\n\n\nCode\npurrr::walk(play_vols_df$site_id, home_select_site_data, \n            in_dir = file.path(here::here(), \"data/csv/home_visit/agg\"), \n            out_dir = file.path(here::here(), \"data/csv/home_visit/agg/by-site\"),\n            vb = FALSE,\n            .progress = \"Export site home visit CSVs\")\n\n\n\n\nMB-CDI data\n\n\nCode\npurrr::walk(play_vols_df$site_id, home_mbcdi_select_site_data, \n            in_dir = file.path(here::here(), \"data/csv/home_visit/agg\"), \n            out_dir = file.path(here::here(), \"data/csv/home_visit/agg/by-site\"),\n            vb = FALSE,\n            .progress = \"Export site home visit CSVs\")",
    "crumbs": [
      "Export",
      "<span class='chapter-number'>17</span>  <span class='chapter-title'>Site-specific files</span>"
    ]
  },
  {
    "objectID": "site-specific.html#post-visit",
    "href": "site-specific.html#post-visit",
    "title": "Site-specific files",
    "section": "Post-visit",
    "text": "Post-visit\n\n\n\n\n\n\nWarning\n\n\n\nThis section is under construction.",
    "crumbs": [
      "Export",
      "<span class='chapter-number'>17</span>  <span class='chapter-title'>Site-specific files</span>"
    ]
  }
]