[{"path":"index.html","id":"about","chapter":"About","heading":"About","text":"","code":""},{"path":"index.html","id":"purpose","chapter":"About","heading":"Purpose","text":"PLAY project researchers use KoBoToolbox collect data participant families.\nData sessions PLAY data collection sites pushed common set files KoBoToolbox server.document describes process ) downloading, ii) parsing, iii) cleaning, iv) exporting files forms suitable data analysis.","code":""},{"path":"index.html","id":"overview-of-data-sets","chapter":"About","heading":"Overview of data sets","text":"two sets data collected using KoBoToolbox.\nOne set collected recruiting screening calls study.\nsecond set collected home visit.","code":""},{"path":"index.html","id":"data-access-and-processing","chapter":"About","heading":"Data access and processing","text":"data downloaded manipulated locally synched GitHub.\naccomplished adding data protocol/.gitignore.separate processes detecting deleting personal identifiers specific data files exporting ‘cleaned’ versions may shared Databrary.","code":""},{"path":"index.html","id":"home-visit-data","chapter":"About","heading":"Home visit data","text":"three (3) age groups (12-, 18-, 24-month-olds) four (4) different language environment groups (English-, Spanish-, Bilingual-English-dominant, Bilingual-Spanish-dominant).\nSince language questions specific questions vary age group language environment group, \\(3*4=12\\) different KoBoToolbox survey form files must processed.","code":""},{"path":"setup.html","id":"setup","chapter":"1 Setup","heading":"1 Setup","text":"section describes setup procedure.","code":""},{"path":"setup.html","id":"authentication","chapter":"1 Setup","heading":"Authentication","text":"data stored account https://kf.kobotoolbox.org.\nlogin credentials account shared among PLAY Project staff.\naccess site’s API programmatically, API key downloaded added local ~/.Renviron file.KoBoToolBox API key synched GitHub.","code":""},{"path":"setup.html","id":"set-up","chapter":"1 Setup","heading":"Set-up","text":"test whether local system API key installed, run command Sys.getenv(\"KOBO_API_KEY\").","code":""},{"path":"setup.html","id":"check-kobo-api-key","chapter":"1 Setup","heading":"Check KoBo API Key","text":"","code":"\nkb_api <- Sys.getenv(\"KOBO_API_KEY\")\nif ((length(kb_api) != 1) || (!is.character(kb_api))) {\n  stop(\"`KOBO_API_KEY` not installed in .Renviron\")\n} else {\n  message(\"`KOBO_API_KEY` installed.\")\n}## `KOBO_API_KEY` installed."},{"path":"setup.html","id":"loadsource-helper-functions","chapter":"1 Setup","heading":"Load/source helper functions","text":"API key installed, several custom functions R/kobo_export.R can run.","code":"\nif (file.exists(\"R/kobo_export.R\")) {\n  source(file.path(\"R/kobo_export.R\"))\n} else {\n  stop(\"File not found: 'R/kobo_export.R'\")\n}"},{"path":"setup.html","id":"install-dependencies","chapter":"1 Setup","heading":"Install dependencies","text":"helper functions require several external packages. confirm installed, run following chunk.","code":"\ninstall_kobo_packages()## Loading required package: koboloadeR## Warning in library(package, lib.loc = lib.loc, character.only = TRUE,\n## logical.return = TRUE, : there is no package called 'koboloadeR'## Loading required package: devtools## Loading required package: usethis## Downloading GitHub repo unhcr/koboloadeR@HEAD## These packages have more recent versions available.\n## It is recommended to update all of them.\n## Which would you like to update?\n## \n##  1: All                                        \n##  2: CRAN packages only                         \n##  3: None                                       \n##  4: RcppEigen   (0.3.3.9.2 -> 0.3.3.9.3) [CRAN]\n##  5: vctrs       (0.5.0     -> 0.5.1    ) [CRAN]\n##  6: ps          (1.7.1     -> 1.7.2    ) [CRAN]\n##  7: sass        (0.4.2     -> 0.4.4    ) [CRAN]\n##  8: bslib       (0.4.0     -> 0.4.1    ) [CRAN]\n##  9: xfun        (0.34      -> 0.35     ) [CRAN]\n## 10: evaluate    (0.17      -> 0.18     ) [CRAN]\n## 11: processx    (3.7.0     -> 3.8.0    ) [CRAN]\n## 12: rmarkdown   (2.17      -> 2.18     ) [CRAN]\n## 13: knitr       (1.40      -> 1.41     ) [CRAN]\n## 14: callr       (3.7.2     -> 3.7.3    ) [CRAN]\n## 15: data.table  (1.14.4    -> 1.14.6   ) [CRAN]\n## 16: pkgload     (1.3.0     -> 1.3.2    ) [CRAN]\n## 17: minqa       (1.2.4     -> 1.2.5    ) [CRAN]\n## 18: lme4        (1.1-30    -> 1.1-31   ) [CRAN]\n## 19: sp          (1.5-0     -> 1.5-1    ) [CRAN]\n## 20: car         (3.1-0     -> 3.1-1    ) [CRAN]\n## 21: fontawesome (0.3.0     -> 0.4.0    ) [CRAN]\n## 22: shiny       (1.7.2     -> 1.7.3    ) [CRAN]\n## 23: bit         (4.0.4     -> 4.0.5    ) [CRAN]\n## 24: plyr        (1.8.7     -> 1.8.8    ) [CRAN]\n## 25: lubridate   (1.8.0     -> 1.9.0    ) [CRAN]\n## 26: modelr      (0.1.9     -> 0.1.10   ) [CRAN]## Installing 1 packages: glmnet## \n## The downloaded binary packages are in\n##  /var/folders/hz/j_rrw69j3pz2xfp4m2jgj__h0000gp/T//RtmpmUnW91/downloaded_packages\n##   \n   checking for file ‘/private/var/folders/hz/j_rrw69j3pz2xfp4m2jgj__h0000gp/T/RtmpmUnW91/remotes15ecc3481aa36/unhcr-koboloadeR-93f0d63/DESCRIPTION’ ...\n  \n✔  checking for file ‘/private/var/folders/hz/j_rrw69j3pz2xfp4m2jgj__h0000gp/T/RtmpmUnW91/remotes15ecc3481aa36/unhcr-koboloadeR-93f0d63/DESCRIPTION’\n## \n  \n─  preparing ‘koboloadeR’:\n##    checking DESCRIPTION meta-information ...\n  \n✔  checking DESCRIPTION meta-information\n## \n  \n─  checking for LF line-endings in source and make files and shell scripts\n## \n  \n─  checking for empty or unneeded directories\n## \n  \n   Omitted ‘LazyData’ from DESCRIPTION\n## \n  \n─  building ‘koboloadeR_0.1.9.tar.gz’\n## \n  \n   \n## ## Warning in i.p(...): installation of package '/var/folders/hz/\n## j_rrw69j3pz2xfp4m2jgj__h0000gp/T//RtmpmUnW91/file15ecc7ead8f12/\n## koboloadeR_0.1.9.tar.gz' had non-zero exit status## Loading required package: getPass## Loading required package: httr## Loading required package: readr## Loading required package: jsonlite## Loading required package: knitr## Loading required package: magrittr## Loading required package: readxl"},{"path":"screening-call.html","id":"screening-call","chapter":"Screening call","heading":"Screening call","text":"","code":""},{"path":"screening-call.html","id":"collection-protocol","chapter":"Screening call","heading":"Collection protocol","text":"Details data collection protocol participant screening recruiting can found PLAY Project website.","code":""},{"path":"screening-call.html","id":"retrieve-files-from-kobotoolbox","chapter":"Screening call","heading":"Retrieve files from KoBoToolbox","text":"relevant KoBoToolbox data files ‘Demographic Questionnaire’ title.","code":"\nkb_df <- list_kobo_data()\nif ((dim(kb_df)[1] < 1) || (!is.data.frame(kb_df))) {\n  stop(\"Error in selecting surveys from KoBoToolbox.\")\n}\n\n# Restrict to surveys collected at home\nkb_demog <- kb_df %>%\n  dplyr::filter(., stringr::str_detect(title, \"Demographic\"))\n\nif ((dim(kb_demog)[1] < 1) || (!is.data.frame(kb_demog))) {\n  stop(\"Error in selecting demographics surveys from KoBoToolbox.\")\n}"},{"path":"screening-call.html","id":"save-selected-raw-files-to-local-directory","chapter":"Screening call","heading":"Save selected raw files to local directory","text":"Prepare retrieve demographic data files.","code":"\nif (!dir.exists('data/xlsx/screening')) {\n  stop(\"Directory not found: 'data/xlsx/screening'\")\n}\nn_files <- dim(kb_demog)[1]\npurrr::map(1:n_files, retrieve_save_xls_export, kb_df = kb_demog, save_dir = \"data/xlsx/screening\")## Loading required package: stringr## Saved `data/xlsx/screening/334134_PLAY_Demographic_Questionnaire_Spanish.xlsx`## Saved `data/xlsx/screening/359546_PLAY_Demographic_Questionnaire.xlsx`## Saved `data/xlsx/screening/275882_PLAY_Demographic_Questionnaire.xlsx`## [[1]]\n## [1] \"data/xlsx/screening/334134_PLAY_Demographic_Questionnaire_Spanish.xlsx\"\n## \n## [[2]]\n## [1] \"data/xlsx/screening/359546_PLAY_Demographic_Questionnaire.xlsx\"\n## \n## [[3]]\n## [1] \"data/xlsx/screening/275882_PLAY_Demographic_Questionnaire.xlsx\""},{"path":"screening-call.html","id":"convert-to-csvs","chapter":"Screening call","heading":"Convert to CSVs","text":"default, presume want convert XLSX files data/xlxs/screening CSVs.","code":""},{"path":"screening-call.html","id":"open-files-and-process","chapter":"Screening call","heading":"Open file(s) and process","text":"strictly necessary, filter downloaded filename ensure includes ‘Demographic_Questionnaire’.\nleading 6-digit integer unique ‘form’ identifier, extract .Create helper function handle import, renaming, exporting.Import xlsx save csv version.","code":"\ndemog_fns <- list.files(file.path(\"data/xlsx/screening\"), pattern = \"Demographic_Questionnaire\", full.names = TRUE)\n\ndemog_fns_trimmed <- basename(stringr::str_replace(demog_fns, pattern = \"\\\\.xlsx\", replacement = \"\\\\.csv\"))\n\nform_ids <- stringr::str_extract(demog_fns_trimmed, pattern = \"[0-9]{6}\")\nload_xlsx_save_csv <- function(i, fl) {\n  xl <- readxl::read_xlsx(fl[i])\n  fn_csv <- stringr::str_replace(fl[i], pattern = \"\\\\.xlsx\", replacement = \"\\\\.csv\")\n  fn_csv <- stringr::str_replace(fn_csv, pattern = \"/xlsx/\", \"/csv/\")\n  if (dir.exists(dirname(fn_csv))) {\n    readr::write_csv(xl, fn_csv)    \n  } else {\n    warning(\"Directory not found: '\", dirname(fn_csv), \"'\")\n  }\n}\npurrr::map(1:length(demog_fns), load_xlsx_save_csv, demog_fns)## [[1]]\n## # A tibble: 20 × 168\n##    start        end   c_today play_…¹ play_…² play_…³ play_…⁴ play_…⁵\n##    <chr>        <chr> <chr>   <lgl>   <lgl>   <chr>   <chr>   <lgl>  \n##  1 2019-10-08T… 2020… 2020-0… NA      NA      (917) … michel… NA     \n##  2 2019-04-25T… 2019… <NA>    NA      NA      <NA>    <NA>    NA     \n##  3 2019-06-05T… 2019… 2019-0… NA      NA      <NA>    <NA>    NA     \n##  4 2019-06-10T… 2019… 2019-0… NA      NA      <NA>    <NA>    NA     \n##  5 2019-06-29T… 2019… 2019-0… NA      NA      <NA>    <NA>    NA     \n##  6 2019-09-05T… 2019… 2019-0… NA      NA      201-20… mavi75… NA     \n##  7 2019-09-11T… 2019… 2019-0… NA      NA      Pilot   Pilot   NA     \n##  8 2019-09-13T… 2019… 2019-0… NA      NA      808255… raethe… NA     \n##  9 2019-09-16T… 2019… 2019-0… NA      NA      (929) … lisafa… NA     \n## 10 2019-10-03T… 2019… 2019-1… NA      NA      202321… donyal… NA     \n## 11 2019-10-03T… 2019… 2019-1… NA      NA      917-69… jessic… NA     \n## 12 2019-10-04T… 2019… 2019-1… NA      NA      NA      NA      NA     \n## 13 2019-10-10T… 2019… 2019-1… NA      NA      917-36… ceped6… NA     \n## 14 2019-10-16T… 2020… 2020-0… NA      NA      (646) … akss.s… NA     \n## 15 2019-11-05T… 2019… 2019-1… NA      NA      (703) … briane… NA     \n## 16 2019-11-08T… 2020… 2020-0… NA      NA      202966… alison… NA     \n## 17 2019-11-12T… 2019… 2019-1… NA      NA      (415) … miraco… NA     \n## 18 2019-11-26T… 2019… 2019-1… NA      NA      202394… kateco… NA     \n## 19 2019-12-02T… 2019… 2019-1… NA      NA      717521… saraha… NA     \n## 20 2019-12-10T… 2019… 2019-1… NA      NA      (202) … julie.… NA     \n## # … with 160 more variables:\n## #   `play_phone_questionnaire/group_contact_info/group_address/parent_address_1` <chr>,\n## #   `play_phone_questionnaire/group_contact_info/group_address/parent_address_2` <chr>,\n## #   `play_phone_questionnaire/group_contact_info/group_address/city` <chr>,\n## #   `play_phone_questionnaire/group_contact_info/group_address/state` <chr>,\n## #   `play_phone_questionnaire/group_contact_info/acknowledge_contact_info` <chr>,\n## #   `play_phone_questionnaire/instructions_guid` <lgl>, …\n## \n## [[2]]\n## # A tibble: 1 × 236\n##   start end   c_today play_…¹ play_…² play_…³ play_…⁴ play_…⁵ play_…⁶\n##   <chr> <chr> <chr>   <lgl>   <lgl>   <chr>   <chr>   <chr>   <lgl>  \n## 1 2022… 2022… 2022-1… NA      NA      UTAUS   001     Tamara… NA     \n## # … with 227 more variables:\n## #   `play_demo_questionnaire/group_contact_info/parent_phone` <chr>,\n## #   `play_demo_questionnaire/group_contact_info/parent_email` <chr>,\n## #   `play_demo_questionnaire/group_contact_info/group_address/note_parent_address` <lgl>,\n## #   `play_demo_questionnaire/group_contact_info/group_address/parent_address_1` <chr>,\n## #   `play_demo_questionnaire/group_contact_info/group_address/parent_address_2` <chr>,\n## #   `play_demo_questionnaire/group_contact_info/group_address/city` <chr>, …\n## \n## [[3]]\n## # A tibble: 224 × 239\n##    start        end   c_today play_…¹ play_…² play_…³ play_…⁴ play_…⁵\n##    <chr>        <chr> <chr>   <lgl>   <lgl>   <chr>   <chr>   <chr>  \n##  1 2020-02-27T… 2020… 2020-0… NA      NA      NYUNI   230     <NA>   \n##  2 2020-02-27T… 2020… 2020-0… NA      NA      NYUNI   229     <NA>   \n##  3 2019-12-18T… 2020… 2020-0… NA      NA      VCOMU   002     <NA>   \n##  4 2020-01-01T… 2020… 2020-0… NA      NA      GEORG   010     <NA>   \n##  5 2020-01-15T… 2020… 2020-0… NA      NA      NYUNI   008     <NA>   \n##  6 2020-01-15T… 2020… 2020-0… NA      NA      NYUNI   009     <NA>   \n##  7 2020-01-24T… 2020… 2020-0… NA      NA      GEORG   011     <NA>   \n##  8 2020-01-30T… 2020… 2020-0… NA      NA      NYUNI   010     <NA>   \n##  9 2020-02-03T… 2020… 2020-0… NA      NA      NYUNI   011     <NA>   \n## 10 2020-02-05T… 2020… 2020-0… NA      NA      VCOMU   003     <NA>   \n## # … with 214 more rows, 231 more variables:\n## #   `play_demo_questionnaire/group_contact_info/instructions_contactinfo` <lgl>,\n## #   `play_demo_questionnaire/group_contact_info/parent_phone` <chr>,\n## #   `play_demo_questionnaire/group_contact_info/parent_email` <chr>,\n## #   `play_demo_questionnaire/group_contact_info/group_address/note_parent_address` <lgl>,\n## #   `play_demo_questionnaire/group_contact_info/group_address/parent_address_1` <chr>,\n## #   `play_demo_questionnaire/group_contact_info/group_address/parent_address_2` <chr>, …"},{"path":"screening-call.html","id":"merge-files","chapter":"Screening call","heading":"Merge files","text":"","code":""},{"path":"screening-call.html","id":"compare-the-files","chapter":"Screening call","heading":"Compare the files","text":"merging, examine fields compare.Open first file: ‘275882_PLAY_Demographic_Questionnaire.csv’.\\(n=\\) 20 data records \\(n=\\) 168 fields.Open second file: ‘334134_PLAY_Demographic_Questionnaire_Spanish.csv’.\\(n=\\) 1 data records \\(n=\\) 236 fields.Open third file: ‘359546_PLAY_Demographic_Questionnaire.csv’.\\(n=\\) 224 data records \\(n=\\) 239 fields.files different numbers columns, need careful creating merged data file.","code":"\ncsv_fns <- list.files(\"data/csv/screening\", pattern = \"\\\\.csv\", full.names = TRUE)\ndemog_1 <- readr::read_csv(csv_fns[1], show_col_types = FALSE)\ndemog_2 <- readr::read_csv(csv_fns[2], show_col_types = FALSE)\ndemog_3 <- readr::read_csv(csv_fns[3], show_col_types = FALSE)"},{"path":"screening-call.html","id":"extract-column-names","chapter":"Screening call","heading":"Extract column names","text":"Compare 1 2.Compare 1 3.Compare 2 3.second third data files overlap.","code":"\ndemog_1_names <- names(demog_1)\ndemog_2_names <- names(demog_2)\ndemog_3_names <- names(demog_3)\nsum(demog_1_names == demog_2_names)## Warning in demog_1_names == demog_2_names: longer object length is\n## not a multiple of shorter object length## [1] 3\nsum(demog_1_names == demog_3_names)## Warning in demog_1_names == demog_3_names: longer object length is\n## not a multiple of shorter object length## [1] 3\nsum(demog_2_names == demog_3_names)## Warning in demog_2_names == demog_3_names: longer object length is\n## not a multiple of shorter object length## [1] 131"},{"path":"home-visit.html","id":"home-visit","chapter":"Home visit","heading":"Home visit","text":"","code":""},{"path":"data-dictionary.html","id":"data-dictionary","chapter":"Data dictionary","heading":"Data dictionary","text":"","code":""},{"path":"visualization.html","id":"visualization","chapter":"Visualization","heading":"Visualization","text":"","code":""}]
