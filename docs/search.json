[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "PLAY Survey Data",
    "section": "",
    "text": "Purpose\nPLAY project researchers use KoBoToolbox to collect data from participant families. Data from all sessions at all PLAY data collection sites are pushed to a common set of files on the KoBoToolbox server.\nThis document describes the process of i) downloading, ii) parsing, iii) cleaning, and iv) exporting these files into forms more suitable for data analysis.\nFor details about the PLAY Project data collection protocol, see https://PLAY-behaviorome.github.io/protocol/.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Overview</span>"
    ]
  },
  {
    "objectID": "index.html#overview-of-data-sets",
    "href": "index.html#overview-of-data-sets",
    "title": "PLAY Survey Data",
    "section": "Overview of data sets",
    "text": "Overview of data sets\nThere are three sets of data collected using KoBoToolbox.\nOne set is collected during the recruiting and screening calls for the study. This is called the screening or demographic data.\nThe second set is collected during the home visit. This is called the home visit data.\nThe third set consists of notes generated by the experimenter after the visit. This data is called the post-visit data.\n\nData access and processing\nAll data are downloaded and manipulated locally but are not synched to GitHub. This is accomplished by adding data to .gitignore.\nThere are separate processes for detecting and deleting personal identifiers from specific data files and exporting ‘cleaned’ versions that may be shared on Databrary.\n\n\nHome visit data\nThere are three (3) age groups (12-, 18-, and 24-month-olds) and four (4) different language environment groups (English-only, Spanish-only, Bilingual-English-dominant, Bilingual-Spanish-dominant). Since the language of the questions and some of the specific questions vary by age group and by language environment group, there multiple KoBoToolbox survey form files that must be processed.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Overview</span>"
    ]
  },
  {
    "objectID": "setup.html",
    "href": "setup.html",
    "title": "Authentication",
    "section": "",
    "text": "Set-up\nTo test whether the local system has the API key installed, we can run the command Sys.getenv(\"KOBO_API_KEY\").",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Setup</span>"
    ]
  },
  {
    "objectID": "setup.html#set-up",
    "href": "setup.html#set-up",
    "title": "Authentication",
    "section": "",
    "text": "Check KoBo API Key\n\nkb_api &lt;- Sys.getenv(\"KOBO_API_KEY\")\nif ((length(kb_api) != 1) || (!is.character(kb_api))) {\n  stop(\"'KOBO_API_KEY' not installed in .Renviron\")\n} else {\n  message(\"'KOBO_API_KEY' installed.\")\n}\n\n'KOBO_API_KEY' installed.\n\n\n\n\nDatabrary credentials\nThe databraryr package handles authenticating to Databrary. For scripting access to Databrary that require authentication, it is useful to store the user’s Databrary login (email) in .Renviron using the R command Sys.setenv(DATABRARY_LOGIN = \"&lt;email@provider.com&gt;\") where you substitute your Databrary login (email) for &lt;email@provider.com&gt;.\nHere, we check that .Renviron contains DATABRARY_LOGIN.\n\ndb_api &lt;- Sys.getenv(\"DATABRARY_LOGIN\")\nif ((length(kb_api) != 1) || (!is.character(db_api))) {\n  stop(\"'DATABRARY_LOGIN' not installed in .Renviron\")\n} else {\n  message(\"'DATABRARY_LOGIN' installed.\")\n}\n\n'DATABRARY_LOGIN' installed.\n\n\n\n\nInstall dependencies\nWe use the renv package to manage package dependencies.\n\n\nLoad/source helper functions\nMost of the work is contained in functions located in R/. The functions in this directory are sourced when tar_make() from the {targets} package is sourced.\n\n\n\n\n\n\nNote\n\n\n\nThe update_report_render.R function handles updating all data targets and rendering the report. So, the typical workflow to update the report is as follows;\nsource(\"R/update_report_render.R\")\nupdate_report_render()\n\n\n\n\n\n\n\n\nImportant\n\n\n\nNone of the data outputs are synched to GitHub.\nWe have .gitignore files in the data/ directories and subdirectories that keep all data out of the version control database.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Setup</span>"
    ]
  },
  {
    "objectID": "setup.html#approach",
    "href": "setup.html#approach",
    "title": "Authentication",
    "section": "Approach",
    "text": "Approach\nTo make the workflow more robust and reproducible, much of the work is embedded in functions and extensive use is made of the {targets} package mentioned previously.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Setup</span>"
    ]
  },
  {
    "objectID": "screen-gather.html",
    "href": "screen-gather.html",
    "title": "Screening: Gathering",
    "section": "",
    "text": "Collection protocol\nDetails about the data collection protocol for participant screening and recruiting can be found on the PLAY Project website.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Screening: Gathering</span>"
    ]
  },
  {
    "objectID": "screen-gather.html#collection-protocol",
    "href": "screen-gather.html#collection-protocol",
    "title": "Screening: Gathering",
    "section": "",
    "text": "Setup\nWe load functions needed to download KBT screening/demographic questionnaire files.\n\nfl &lt;- list.files(file.path(here::here(), \"R\"), \"^kobo_|^file_|^screen_|CONSTANTS\", full.names = TRUE)\npurrr::walk(fl, source)\n\nlibrary(tidyverse) # for the `magrittr` pipe `%&gt;%`\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Screening: Gathering</span>"
    ]
  },
  {
    "objectID": "screen-gather.html#retrieve-from-kobotoolbox-kbt",
    "href": "screen-gather.html#retrieve-from-kobotoolbox-kbt",
    "title": "Screening: Gathering",
    "section": "Retrieve from KoBoToolbox (KBT)",
    "text": "Retrieve from KoBoToolbox (KBT)\nWe make use of the targets package for downloading data files from KoBoToolbox and for saving local XLSX and CSV copies. This allows us to download and process those files on a regular basis.\nThis excerpt from _targets.R shows two of these ‘targets’:\n  # Download screening/demographic survey\n  tar_target(\n    kb_screen_df,\n    kobo_list_data_filtered(kb_df, \"[Dd]emographic\"),\n    cue = tarchetypes::tar_cue_age(\n      name = kb_screen,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\n  tar_target(\n    screen_download,\n    screen_download_convert(kb_screen_df, \"data/xlsx/screening\", \"data/csv/screening\"),\n    cue = tarchetypes::tar_cue_age(\n      name = screen_df,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\nThe kb_df data frame is input to the first target kb_screen_df. kb_df is generated when the following target is generated (by kobo_list_data()).\n  tar_target(\n    kb_df,\n    kobo_list_data(),\n    cue = tarchetypes::tar_cue_age(\n      name = kb_df,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\n\nDownload\nWe have two targets specified in _targets.R that handle the regular downloading of screening data files.\nFirst, we generate a data frame of KoBoToolbox forms that contain the screening (“Demographic”) data. Here is the target for that process:\n# Not evaluated\n  tar_target(\n    kb_screen_df,\n    kobo_list_data_filtered(\"[Dd]emographic\"),\n    cue = tarchetypes::tar_cue_age(\n      name = kb_screen,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\nThen we download and save the raw XLSX files to ../data/xlsx/screening using kobo_retrieve_save_many_xlsx(kb_screen_df, save_dir = \"../data/xlsx/screening\"). Finally, we convert the XLSX files to CSVs via file_load_xlsx_save_many_csv(\"../data/xlsx/screening\", \"../data/csv/screening\", \"Demographic\"). The latter two steps are handled by the wrapper function screen_download_convert(kb_screen_df, \"data/xlsx/screening\", \"data/csv/screening\"). Here is the accompanying target:\n# Download screening/demographic survey\n  tar_target(\n    screen_download,\n    screen_download_convert(kb_screen_df, \"data/xlsx/screening\", \"data/csv/screening\"),\n    cue = tarchetypes::tar_cue_age(\n      name = screen_df,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  ),\nWe can confirm that these functions have run properly, as follows:\n\nscreening_fl &lt;- list.files(\"../data/csv/screening/\", pattern = \"*.csv$\")\n\n\n\nSurvey questions\nThere are n=3 screening/demographic data files.\nThe KoBoToolbox API enables us to download a table with the questions, as follows.\n\ntargets::tar_load(kb_screen_df, store=\"../_targets\")\nkb_screen_df\n\n      id              id_string                                    title\n1 334134 agChfbnGHc6fiUdfYUaZ2z PLAY Demographic Questionnaire (Spanish)\n2 359546 aGLEqT7eRBhuPgizCQBeqA           PLAY Demographic Questionnaire\n3 275882 anqhvxKtQieo7gc9uPqJ3y           PLAY Demographic Questionnaire\n                               description\n1 PLAY Demographic Questionnaire (Spanish)\n2            New Demographic Questionnaire\n3                 PLAY Phone Questionnaire\n                                            url\n1 https://kc.kobotoolbox.org/api/v1/data/334134\n2 https://kc.kobotoolbox.org/api/v1/data/359546\n3 https://kc.kobotoolbox.org/api/v1/data/275882\n                                                             form_url\n1 https://kf.kobotoolbox.org/api/v2/assets/agChfbnGHc6fiUdfYUaZ2z.xls\n2 https://kf.kobotoolbox.org/api/v2/assets/aGLEqT7eRBhuPgizCQBeqA.xls\n3 https://kf.kobotoolbox.org/api/v2/assets/anqhvxKtQieo7gc9uPqJ3y.xls\n\n\nBased on this information, we know that the questionnaires may be downloaded from the following URLs:\n\npaste0(\"https://kf.kobotoolbox.org/api/v2/assets/\", kb_screen_df$id_string, \".xls\")\n\n[1] \"https://kf.kobotoolbox.org/api/v2/assets/agChfbnGHc6fiUdfYUaZ2z.xls\"\n[2] \"https://kf.kobotoolbox.org/api/v2/assets/aGLEqT7eRBhuPgizCQBeqA.xls\"\n[3] \"https://kf.kobotoolbox.org/api/v2/assets/anqhvxKtQieo7gc9uPqJ3y.xls\"\n\n\nWe import and clean the screening/demographic data in the next section.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Screening: Gathering</span>"
    ]
  },
  {
    "objectID": "screen-clean.html",
    "href": "screen-clean.html",
    "title": "Screening: Cleaning",
    "section": "",
    "text": "Setup\nWe source a set of cleaning functions have the screen_ prefix.\npurrr::walk(list.files(file.path(here::here(), \"R\"), \n                    \"^screen_\", full.names = TRUE), source)\nThere are three CSV files to clean:\n(fn &lt;- list.files(\"../data/csv/screening\", \"[Dd]emographic\", full.names = TRUE))\n\n[1] \"../data/csv/screening/275882_PLAY_Demographic_Questionnaire.csv\"        \n[2] \"../data/csv/screening/334134_PLAY_Demographic_Questionnaire_Spanish.csv\"\n[3] \"../data/csv/screening/359546_PLAY_Demographic_Questionnaire.csv\"\nWe clean them separately, as needed, then merge them.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Screening: Cleaning</span>"
    ]
  },
  {
    "objectID": "screen-clean.html#merge",
    "href": "screen-clean.html#merge",
    "title": "Screening: Cleaning",
    "section": "Merge",
    "text": "Merge\nLet’s add the Databrary volume ID info.\n\nscr_df &lt;- scr_df |&gt;\n  screen_add_db_vol_id()\n\nThen filter out rows that do not have valid volume IDs.\n\nvalid_db_vol &lt;- !is.na(scr_df$vol_id)\n\nscr_df &lt;- scr_df[valid_db_vol,]\n\nThere are n=977 valid Databrary volume IDs out of a total of n=986 screening records.\nNext, we add a play_status field based on the group-name field from Databrary. We use group-name for indicating “Gold”, “Silver”, or “Not run.”\nTwo targets in _targets.R are relevant for this operation:\n  tar_target(\n    play_vols_df,\n    readr::read_csv(\"data/csv/_meta/play_site_vols.csv\",\n                    show_col_types = FALSE)\n  ),\n  tar_target(\n    databrary_session_csvs,\n    purrr::map(play_vols_df$site_id, databrary_get_save_session_csv),\n    cue = tarchetypes::tar_cue_age(\n      name = databrary_session_csvs,\n      age = as.difftime(update_interval, units = update_interval_units)\n    )\n  )\n\nThese targets generate site-specific CSVs in data/csv/site_sessions based on the database of PLAY sites contained in data/csv/_meta/play_site_vols.csv. We load these CSVs into a single data frame.\n\nLoad site session data\n\nsession_fns &lt;-\n  list.files(\"../data/csv/site_sessions\", \"\\\\.csv$\", full.names = TRUE)\n\ndf_sessions &lt;-\n  purrr::map(\n    session_fns,\n    readr::read_csv,\n    col_types = readr::cols(.default = 'c'),\n    show_col_types = FALSE\n  ) |&gt;\n  purrr::list_rbind()\n\nThe group_name variable contains status information about the sessions.\n\nxtabs(~ group_name, data=df_sessions)\n\ngroup_name\n   No visit    No_visit    No_Visit   PLAY_Gold PLAY_Silver \n          1          43          86         670         113 \n\n\nWe note that there are three different versions of no visit: “No visit”, “No_visit”, and “No_Visit”. In addition, there are n=41 sessions with NA in the group_name.\nLet’s modify those values that specify no visit on one of these forms to conform with one another.\n\ndf_sessions &lt;- df_sessions |&gt;\n  dplyr::mutate(group_name = stringr::str_replace(group_name, \"No.*isit\", \"No_visit\"))\n\nThese could be sessions that are still in QA or which are scheduled, or there could be some other anomaly. Here, we want to select only those sessions that occurred and which have passed QA–those sessions for which group_name is either ‘PLAY_Gold’ or ‘PLAY_Silver’.\n\ndf_sessions &lt;- df_sessions |&gt;\n  dplyr::filter(stringr::str_detect(group_name, \"PLAY_\"))\n\n\n\nSharing by session status\nHere is information about the sharing status.\n\nxtabs(~ group_name + session_release, df_sessions)\n\n             session_release\ngroup_name    EXCERPTS PRIVATE SHARED\n  PLAY_Gold        529       0    141\n  PLAY_Silver       81       4     28\n\n\nThere was one session marked PRIVATE.\n\ndf_sessions |&gt;\n  dplyr::filter(session_release == \"PRIVATE\") |&gt;\n  dplyr::select(vol_id, session_id, session_name, group_name)\n\n# A tibble: 4 × 4\n  vol_id session_id session_name   group_name \n  &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;      \n1 1656   70116      PLAY_ASUNI_001 PLAY_Silver\n2 979    66932      PLAY_PRINU_024 PLAY_Silver\n3 1397   70234      PLAY_UHOUS_035 PLAY_Silver\n4 1422   72657      PLAY_UIOWA_025 PLAY_Silver\n\n\nNow, we join the screening data with the Databrary session data.\n\nscreen_datab_df &lt;- dplyr::left_join(df_sessions, scr_df, by = c('vol_id', 'participant_ID'))\n\nLet’s do some additional cleaning of redundant column names, e.g., exclusion.\n\nscreen_datab_df &lt;- screen_datab_df |&gt;\n  tidyr::unite(exclusion_reason, c(\"exclusion1_reason\", \"exclusion2_reason\", \"exclusion_reason\")) |&gt;\n  dplyr::mutate(exclusion_reason = stringr::str_remove_all(exclusion_reason, \"NA|_\"))",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Screening: Cleaning</span>"
    ]
  },
  {
    "objectID": "screen-clean.html#export-cleaned-file",
    "href": "screen-clean.html#export-cleaned-file",
    "title": "Screening: Cleaning",
    "section": "Export cleaned file",
    "text": "Export cleaned file\nWe date-stamp the exported file so we can monitor progress as this workflow develops.\n\nsfn &lt;- paste0(\"PLAY-screening-datab-\", Sys.Date(), \".csv\")\nreadr::write_csv(screen_datab_df, file.path(here::here(), \"data/csv/screening/agg/\", sfn))\n\nWe also save a copy with “latest”.\n\nsfn &lt;- \"PLAY-screening-datab-latest.csv\"\nreadr::write_csv(screen_datab_df, file.path(here::here(), \"data/csv/screening/agg/\", sfn))",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Screening: Cleaning</span>"
    ]
  },
  {
    "objectID": "screen-viz.html",
    "href": "screen-viz.html",
    "title": "Screening: Visualizations",
    "section": "",
    "text": "Setup\nlibrary(targets)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(forcats)\nscreen_df &lt;- readr::read_csv(file.path(here::here(), \"data/csv/screening/agg/PLAY-screening-datab-latest.csv\"))\n\nRows: 824 Columns: 68\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (55): session_name, session_release, participant_ID, participant_gender...\ndbl   (9): session_id, vol_id, child_age_mos, child_birthage, child_weight_p...\nlgl   (1): pilot_pilot\ndttm  (1): submit_date\ndate  (2): session_date, participant_birthdate\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#sharing-permission",
    "href": "screen-viz.html#sharing-permission",
    "title": "Screening: Visualizations",
    "section": "Sharing permission",
    "text": "Sharing permission\n\n(s &lt;- xtabs(~ session_release + group_name, screen_df))\n\n               group_name\nsession_release PLAY_Gold PLAY_Silver\n       EXCERPTS       547          87\n       PRIVATE          0           4\n       SHARED         155          31\n\n\nOf the n=824 sessions so far, 76.9% have agreed to EXCERPTS or “Learning Audiences” sharing. Conversely, only n=4 or 0.5% have declined to share at all.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#dates-times",
    "href": "screen-viz.html#dates-times",
    "title": "Screening: Visualizations",
    "section": "Dates & times",
    "text": "Dates & times\nTo calculate cumulative screening/recruiting calls by site, we have to add an index variable\n\ndf &lt;- screen_df |&gt;\n  dplyr::arrange(submit_date) %&gt;%\n  dplyr::mutate(n_calls = seq_along(submit_date))\n\n\nCalls across time\n\ndf |&gt;\n    dplyr::filter(!is.na(submit_date), !is.na(n_calls), !is.na(site_id)) %&gt;%\n    ggplot() +\n    aes(submit_date, n_calls, color = site_id) +\n    geom_point()\n\n\n\n\n\n\n\nFigure 5.1: Cumulative screening calls by year and site\n\n\n\n\n\n\n\nCalls by site\n\ncalls_by_site_plot &lt;- function(df) {\n  df |&gt;\n    filter(!is.na(site_id)) %&gt;%\n    ggplot() +\n    aes(fct_infreq(site_id), fill = site_id) +\n    geom_bar() +\n    theme(axis.text.x = element_text(\n      angle = 90,\n      vjust = 0.5,\n      hjust = 1\n    )) + # Rotate text\n    labs(x = \"site\") +\n    theme(legend.position = \"none\")\n}\n\ncalls_by_site_plot(df)\n\n\n\n\n\n\n\nFigure 5.2: Cumulative screening calls by site",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#demographics",
    "href": "screen-viz.html#demographics",
    "title": "Screening: Visualizations",
    "section": "Demographics",
    "text": "Demographics\n\nChild age\nChild age in months (child_age_mos) by child_sex.\n\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_age_mos), !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(child_age_mos, fill = child_sex) +\n  geom_histogram(bins = 50)\n\n\n\n\n\n\n\nFigure 5.3: Histogram of child age at time of recruiting call.\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nSome of the code to clean the screen_df variables could be incorporated into an earlier stage of the workflow.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#language",
    "href": "screen-viz.html#language",
    "title": "Screening: Visualizations",
    "section": "Language",
    "text": "Language\n\nTo child\nLanguage(s) spoken to child by child_sex.\n\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(\n    language_spoken_child = stringr::str_replace_all(language_spoken_child, \" \", \"_\"),\n    language_spoken_home = stringr::str_replace_all(language_spoken_home, \" \", \"_\")\n  )\n\nxtabs(formula = ~ child_sex + language_spoken_child,\n      data = df)\n\n         language_spoken_child\nchild_sex english english_other english_spanish english_spanish_other spanish\n   female     327             3              59                     3      19\n   male       318             6              65                     1      15\n\n\n\n\nAt home\n\nxtabs(formula = ~ language_spoken_home + child_sex, data = df)\n\n                       child_sex\nlanguage_spoken_home    female male\n  english                  333  301\n  english_other              5    4\n  english_spanish           49   80\n  english_spanish_other      1    2\n  other                      1    3\n  spanish                   18   14\n\n\n\n\nTo child vs. at home\n\nxtabs(formula = ~ language_spoken_child + language_spoken_home, data = df)\n\n                       language_spoken_home\nlanguage_spoken_child   english english_other english_spanish\n  english                   608             3              25\n  english_other               3             6               0\n  english_spanish            18             0              93\n  english_spanish_other       3             0               1\n  spanish                     2             0              10\n                       language_spoken_home\nlanguage_spoken_child   english_spanish_other other spanish\n  english                                   2     2       4\n  english_other                             0     0       0\n  english_spanish                           1     2       6\n  english_spanish_other                     0     0       0\n  spanish                                   0     0      22",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#child-health",
    "href": "screen-viz.html#child-health",
    "title": "Screening: Visualizations",
    "section": "Child health",
    "text": "Child health\n\nChild born on due date\n\nxtabs(formula = ~ child_sex + child_bornonduedate,\n      data = screen_df)\n\n         child_bornonduedate\nchild_sex  no yes\n   female   8 398\n   male     9 395\n\n\n\n\n\n\n\n\nNote\n\n\n\nThere are n=14 NAs.\n\n\n\nscreen_df |&gt;\n  dplyr::filter(is.na(child_bornonduedate)) |&gt;\n  dplyr::select(vol_id, participant_ID) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\nvol_id\nparticipant_ID\n\n\n\n\n1656\n001\n\n\n1008\n013\n\n\n1008\n013\n\n\n1008\n013\n\n\n1008\n013\n\n\n1576\n003\n\n\n1576\n006\n\n\n1481\n006\n\n\n954\n001\n\n\n1103\n001\n\n\n1596\n013\n\n\n1657\n003\n\n\n979\n026\n\n\n996\n015\n\n\n\n\n\n\n\n\n\nChild term\n\n\n\nTable 5.1\n\n\nxtabs(formula = ~ child_bornonduedate + child_onterm,\n      data = screen_df)\n\n                   child_onterm\nchild_bornonduedate  no yes\n                no    1  16\n                yes   1 678\n\n\n\n\n\n\nChild weight\nMust convert pounds and ounces to decimal pounds.\n\ndf &lt;- screen_df %&gt;%\n  dplyr::mutate(.,\n                birth_weight_lbs = child_weight_pounds + child_weight_ounces/16)\n\ndf |&gt;\n  dplyr::filter(!is.na(birth_weight_lbs), !is.na(child_sex)) |&gt;\n  dplyr::filter(birth_weight_lbs &gt; 0) |&gt;\n  ggplot() +\n  aes(x = birth_weight_lbs, fill = child_sex) +\n  geom_histogram(binwidth = 0.33) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 5.4: Histogram of reported child birthweights in pounds.\n\n\n\n\n\n\n\nBirth complications\n\nxtabs(formula = ~ child_sex + child_birth_complications,\n      data = screen_df)\n\n         child_birth_complications\nchild_sex  no yes\n   female 367  39\n   male   372  28\n\n\n\n\n\n\n\n\nNote\n\n\n\nThere are some first names in the child_birth_complications_specify field, so it is not shown here.\n\n\n\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_birth_complications_specify)) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_birth_complications_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\nMajor illnesses or injuries\n\nxtabs(formula = ~ child_sex + child_major_illnesses_injuries,\n      data = screen_df)\n\n         child_major_illnesses_injuries\nchild_sex  no yes\n   female 393  13\n   male   386  14\n\n\n\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_illnesses_injuries_specify),\n                !stringr::str_detect(child_illnesses_injuries_specify, \"OK\")) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_illnesses_injuries_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\nchild_age_mos\nchild_sex\nchild_illnesses_injuries_specify\n\n\n\n\n11.40697\nfemale\nCOVID in January, no later complications.\n\n\n11.86719\nfemale\nRSV when she 3 months; was in hospital for 2 nights\n\n\n12.68902\nfemale\nfractured wrist when she was 9 months\n\n\n12.72189\nfemale\nAt 2 months got RSV viral infection and was in hospital for 4 days. At 5 months feel off the bed and hit her head. Ended up in the emergency room but exams showed she was okay. Neither of these events resulted in any motor, perceptual, or cognitive impairment or delay as a result.\n\n\n12.73285\nmale\nHe had Covid once.\n\n\n12.76162\nfemale\nRSV when 10 weeks old, hospitalized for 1 week\n\n\n13.01775\nmale\nCovid in December but this did NOT result in a visual, auditory, motor, or cognitive disability according to mom\n\n\n13.02186\nmale\nRespiratory failure and sepsis after birth that was resolved\n\n\n16.17494\nfemale\nChild had a fall but she was fine.\n\n\n17.81860\nfemale\n**bit by tick a couple months ago, took meds to prevent Lyme disease\n\n\n17.88160\nmale\nCovid in November\n\n\n18.04597\nfemale\nbroke leg in April - all healed now. slide accident, she was 16 months. in a cast for three weeks, and then a week phantom limping.\n\n\n18.18020\nfemale\nRespiratory Syncytial Virus(RSV)\n\n\n18.67330\nmale\ntibial stress factor\n\n\n18.70617\nmale\nRSV but did not need to be admitted. This illness did not result in an impairment or disability.\n\n\n18.77055\nmale\nChild had COVID twice (fever, etc.)\n\n\n20.67856\nmale\nAnaphylactic reaction to peanuts\n\n\n22.48658\nfemale\nChild was born with a heart murmur- cardiologist said she is unaffected and will likely grow out of it. Child also had an isolated febrile seizure short after 1st birthday. Has not experienced a seizure since.\n\n\n23.01118\nmale\nHe had RSV then COVID around 13-14 months old, but they were both very mild. No complications arose from either.\n\n\n23.20979\nfemale\nfebrile seizure- around 1 1/2 years\n\n\n23.33991\nmale\nsplit lip open in March after falling on hardwood -- preventative antibiotics, all clear\n\n\n24.03024\nmale\nhad COVID at 7 months\n\n\n24.91782\nfemale\nShe had COVID, and when she was little had an cardiac issue (her heart was \"working\" too hard) but she was okay soon after (this was first 2-3 months after birth). March of 2021 she had fully recovered from this, and received treatment\n\n\n25.70814\nmale\nhospital day 4 for hypothermia - then negative / no diagnosis\n\n\n26.76008\nmale\nHas had a fall, was a concussion but not diagnosed with any disabilities\n\n\n32.67724\nmale\nPneumonia at 5 months\n\n\n\n\n\n\n\n\n\nChild vision\n\nxtabs(formula = ~ child_sex + child_vision_disabilities,\n      data = screen_df)\n\n         child_vision_disabilities\nchild_sex  no yes\n   female 403   3\n   male   398   2\n\n\n\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_vision_disabilities_specify)) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_vision_disabilities_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\nchild_age_mos\nchild_sex\nchild_vision_disabilities_specify\n\n\n\n\n18.70617\nmale\nHe wears glasses to correct his far sighted vision. He does not have vision loss.\n\n\n18.90204\nfemale\nDuane's Syndrome in left eye\n\n\n22.35371\nfemale\nShe has a lazy eye, she wears an eye patch for part of the day.\n\n\n23.14267\nfemale\nStrabismus - wears glasses\n\n\n24.03024\nmale\nlazy eye but corrected\n\n\n\n\n\n\n\n\n\nChild hearing\n\nxtabs(formula = ~ child_sex + child_hearing_disabilities,\n      data = screen_df)\n\n         child_hearing_disabilities\nchild_sex  no yes\n   female 406   0\n   male   399   1\n\n\n\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_hearing_disabilities_specify)) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_hearing_disabilities_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\nchild_age_mos\nchild_sex\nchild_hearing_disabilities_specify\n\n\n\n\n32.67724\nmale\nTemporary hearing loss so tubes in his ears, one still remaining\n\n\n\n\n\n\n\n\n\nChild developmental delays\n\nxtabs(formula = ~ child_sex + child_developmentaldelays,\n      data = screen_df)\n\n         child_developmentaldelays\nchild_sex  no yes\n   female 340   3\n   male   340   5\n\n\n\n\n\n\n\n\nNote\n\n\n\nThere may be first names in the child_developmentaldelays_specify field, so it is not shown here.\n\n\n\nscreen_df |&gt;\n  dplyr::filter(!is.na(child_developmentaldelays_specify)) |&gt;\n  dplyr::select(child_age_mos, child_sex, child_developmentaldelays_specify) |&gt;\n  dplyr::arrange(child_age_mos) |&gt;\n  knitr::kable(format = 'html')\n\n\n\nChild sleep\n\nThis is work yet-to-be-done. The time stamps need to be reformatted prior to visualization.\n\n\nBed time\n\nextract_sleep_hr &lt;- function(t) {\n  t |&gt;\n    stringr::str_extract(\"^[0-9]{2}\\\\:[0-9]{2}\\\\:[0-9]{2}\") |&gt;\n    hms::as_hms()\n}\n\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(child_sleep_time = extract_sleep_hr(child_sleep_time)) |&gt;\n  dplyr::filter(!is.na(child_sleep_time)) \n\ndf |&gt;\n  dplyr::filter(!is.na(child_sleep_time),\n                !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(child_sleep_time, fill = child_sex) +\n  geom_histogram(bins = 18) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 5.5: Histogram of parent-reported child bedtimes (24 hr scale).\n\n\n\n\n\nSome of the bed times are probably not in correct 24 hr time.\n\ndf |&gt;\n  dplyr::filter(child_sleep_time &lt; hms::as_hms(\"16:00:00\")) |&gt;\n  dplyr::select(site_id, participant_ID, child_sleep_time) |&gt;\n  dplyr::arrange(site_id, participant_ID) |&gt;\n  knitr::kable('html')\n\n\n\n\nsite_id\nparticipant_ID\nchild_sleep_time\n\n\n\n\nCSUFL\n013\n07:00:00\n\n\nCSULB\n006\n07:30:00\n\n\nINDNA\n004\n09:00:00\n\n\nINDNA\n006\n07:45:00\n\n\nNYUNI\n082\n07:00:00\n\n\nOHIOS\n002\n10:00:00\n\n\nOHUNI\n020\n07:30:00\n\n\nPRINU\n001\n12:15:00\n\n\nPRINU\n018\n07:30:00\n\n\nPRINU\n027\n07:30:00\n\n\nPRINU\n043\n08:15:00\n\n\nPURDU\n020\n08:30:00\n\n\nPURDU\n021\n11:30:00\n\n\nUCSCR\n011\n07:30:00\n\n\nUGEOR\n016\n07:30:00\n\n\nUPITT\n013\n08:15:00\n\n\nUPITT\n016\n00:30:00\n\n\nUTAUS\n023\n08:00:00\n\n\n\n\n\n\n\n\n\nWake time\n\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(child_wake_time = extract_sleep_hr(child_wake_time)) |&gt;\n  dplyr::filter(!is.na(child_wake_time)) \n\ndf |&gt;\n  dplyr::filter(!is.na(child_wake_time),\n                !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(child_wake_time, fill = child_sex) +\n  geom_histogram(bins = 18) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 5.6: Histogram of parent-reported child wake times (24 hr scale).\n\n\n\n\n\nThere are some unusual wake times, too.\n\ndf |&gt;\n  dplyr::filter(child_wake_time &gt; hms::as_hms(\"16:00:00\")) |&gt;\n  dplyr::select(site_id, participant_ID, child_wake_time) |&gt;\n  dplyr::arrange(site_id, participant_ID) |&gt;\n  knitr::kable('html')\n\n\n\n\nsite_id\nparticipant_ID\nchild_wake_time\n\n\n\n\nBOSTU\n001\n19:30:00\n\n\nCHOPH\n017\n19:30:00\n\n\nGEORG\n026\n19:00:00\n\n\nOHIOS\n009\n18:30:00\n\n\nOHIOS\n012\n19:30:00\n\n\nOHIOS\n014\n18:30:00\n\n\nOHIOS\n018\n18:45:00\n\n\nOHIOS\n019\n19:30:00\n\n\nOHIOS\n021\n19:30:00\n\n\nOHIOS\n029\n19:30:00\n\n\nOHIOS\n031\n19:30:00\n\n\nOHIOS\n035\n19:00:00\n\n\nOHIOS\n062\n18:30:00\n\n\nPRINU\n015\n19:00:00\n\n\nPRINU\n018\n19:45:00\n\n\nPRINU\n027\n20:00:00\n\n\nPRINU\n043\n19:00:00\n\n\nPURDU\n020\n21:30:00\n\n\nPURDU\n021\n23:30:00\n\n\nPURDU\n023\n23:00:00\n\n\nUALAB\n009\n18:00:00\n\n\nUALAB\n013\n20:00:00\n\n\nUCRIV\n007\n18:00:00\n\n\nUCSCR\n035\n18:30:00\n\n\nUGEOR\n002\n19:30:00\n\n\nUHOUS\n014\n19:00:00\n\n\nUMIAM\n013\n20:00:00\n\n\nUMIAM\n029\n19:30:00\n\n\nUPITT\n018\n19:15:00\n\n\nUTAUS\n013\n18:00:00\n\n\nUTAUS\n020\n18:30:00\n\n\nUTAUS\n040\n19:00:00\n\n\nUTAUS\n043\n19:15:00\n\n\nVBLTU\n025\n19:15:00\n\n\n\n\n\n\n\n\n\nSleep duration\n\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(child_sleep_time = extract_sleep_hr(child_sleep_time),\n                  child_wake_time = extract_sleep_hr(child_wake_time)) |&gt;\n  dplyr::filter(!is.na(child_sleep_time),\n                !is.na(child_wake_time)) |&gt;\n  dplyr::mutate(child_sleep_secs = (child_sleep_time - child_wake_time))\n\ndf |&gt;\n  dplyr::filter(!is.na(child_sleep_secs)) |&gt;\n  ggplot() +\n  aes(child_sleep_secs, fill = child_sex) +\n  geom_histogram(bins = 18) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\nDon't know how to automatically pick scale for object of type &lt;difftime&gt;.\nDefaulting to continuous.\n\n\n\n\n\n\n\n\nFigure 5.7\n\n\n\n\n\nAgain, there are some unusual values.\n\ndf |&gt;\n  dplyr::filter(child_sleep_secs &lt; 12000) |&gt;\n  dplyr::select(site_id, participant_ID, child_sleep_time, child_wake_time, child_sleep_secs) |&gt;\n  dplyr::arrange(site_id, participant_ID) |&gt;\n  knitr::kable('html')\n\n\n\n\nsite_id\nparticipant_ID\nchild_sleep_time\nchild_wake_time\nchild_sleep_secs\n\n\n\n\nBOSTU\n001\n19:30:00\n19:30:00\n0 secs\n\n\nCHOPH\n017\n20:45:00\n19:30:00\n4500 secs\n\n\nCSUFL\n013\n07:00:00\n06:00:00\n3600 secs\n\n\nCSULB\n006\n07:30:00\n07:30:00\n0 secs\n\n\nGEORG\n026\n19:45:00\n19:00:00\n2700 secs\n\n\nINDNA\n004\n09:00:00\n08:00:00\n3600 secs\n\n\nINDNA\n006\n07:45:00\n06:30:00\n4500 secs\n\n\nNYUNI\n082\n07:00:00\n06:15:00\n2700 secs\n\n\nOHIOS\n002\n10:00:00\n08:00:00\n7200 secs\n\n\nOHIOS\n009\n18:30:00\n18:30:00\n0 secs\n\n\nOHIOS\n012\n20:00:00\n19:30:00\n1800 secs\n\n\nOHIOS\n014\n20:00:00\n18:30:00\n5400 secs\n\n\nOHIOS\n018\n20:00:00\n18:45:00\n4500 secs\n\n\nOHIOS\n019\n20:30:00\n19:30:00\n3600 secs\n\n\nOHIOS\n021\n20:00:00\n19:30:00\n1800 secs\n\n\nOHIOS\n029\n20:45:00\n19:30:00\n4500 secs\n\n\nOHIOS\n031\n20:30:00\n19:30:00\n3600 secs\n\n\nOHIOS\n035\n20:30:00\n19:00:00\n5400 secs\n\n\nOHIOS\n062\n20:30:00\n18:30:00\n7200 secs\n\n\nOHUNI\n020\n07:30:00\n06:00:00\n5400 secs\n\n\nPRINU\n015\n19:00:00\n19:00:00\n0 secs\n\n\nPRINU\n018\n07:30:00\n19:45:00\n-44100 secs\n\n\nPRINU\n027\n07:30:00\n20:00:00\n-45000 secs\n\n\nPRINU\n043\n08:15:00\n19:00:00\n-38700 secs\n\n\nPURDU\n020\n08:30:00\n21:30:00\n-46800 secs\n\n\nPURDU\n021\n11:30:00\n23:30:00\n-43200 secs\n\n\nPURDU\n023\n22:30:00\n23:00:00\n-1800 secs\n\n\nUALAB\n009\n19:30:00\n18:00:00\n5400 secs\n\n\nUALAB\n013\n19:30:00\n20:00:00\n-1800 secs\n\n\nUCRIV\n007\n21:00:00\n18:00:00\n10800 secs\n\n\nUCSCR\n011\n07:30:00\n06:30:00\n3600 secs\n\n\nUCSCR\n035\n20:45:00\n18:30:00\n8100 secs\n\n\nUGEOR\n002\n20:00:00\n19:30:00\n1800 secs\n\n\nUGEOR\n016\n07:30:00\n08:00:00\n-1800 secs\n\n\nUHOUS\n014\n19:00:00\n19:00:00\n0 secs\n\n\nUMIAM\n013\n21:00:00\n20:00:00\n3600 secs\n\n\nUMIAM\n029\n20:00:00\n19:30:00\n1800 secs\n\n\nUPITT\n013\n08:15:00\n07:15:00\n3600 secs\n\n\nUPITT\n016\n00:30:00\n11:00:00\n-37800 secs\n\n\nUPITT\n018\n19:15:00\n19:15:00\n0 secs\n\n\nUTAUS\n013\n19:30:00\n18:00:00\n5400 secs\n\n\nUTAUS\n020\n20:00:00\n18:30:00\n5400 secs\n\n\nUTAUS\n023\n08:00:00\n07:00:00\n3600 secs\n\n\nUTAUS\n040\n19:00:00\n19:00:00\n0 secs\n\n\nUTAUS\n043\n22:00:00\n19:15:00\n9900 secs\n\n\nVBLTU\n025\n19:30:00\n19:15:00\n900 secs\n\n\n\n\n\n\n\n\n\nNap hours\n\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(child_nap_hours = as.numeric(child_nap_hours)) |&gt;\n  dplyr::filter(!is.na(child_sleep_time)) \n\nWarning: There was 1 warning in `dplyr::mutate()`.\nℹ In argument: `child_nap_hours = as.numeric(child_nap_hours)`.\nCaused by warning:\n! NAs introduced by coercion\n\ndf |&gt;\n  dplyr::filter(!is.na(child_nap_hours),\n                !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(child_nap_hours, fill = child_sex) +\n  geom_histogram(bins = 18) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 5.8\n\n\n\n\n\nAnd there are some very long nappers or null values we need to capture.\n\ndf |&gt;\n  dplyr::filter(child_nap_hours &gt; 5) |&gt;\n  dplyr::select(site_id, participant_ID, child_nap_hours) |&gt;\n  dplyr::arrange(site_id, participant_ID) |&gt;\n  knitr::kable('html')\n\n\n\n\nsite_id\nparticipant_ID\nchild_nap_hours\n\n\n\n\nUMIAM\n003\n8\n\n\nUOREG\n012\n6\n\n\nUTAUS\n009\n6\n\n\n\n\n\n\n\n\n\nSleep location\n\nxtabs(formula = ~ child_sex + child_sleep_location,\n      data = screen_df)",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#mother",
    "href": "screen-viz.html#mother",
    "title": "Screening: Visualizations",
    "section": "Mother",
    "text": "Mother\n\nBiological or adoptive\n\nxtabs(formula = ~ child_sex + mom_bio,\n      data = screen_df)\n\n         mom_bio\nchild_sex no_adoptive no_partnerchild yes\n   female           2               1 388\n   male             0               0 395\n\n\n\n\nAge at childbirth\n\nscreen_df |&gt;\n  dplyr::filter(!is.na(mom_childbirth_age), !is.na(child_sex)) |&gt;\n  ggplot() +\n  aes(x = mom_childbirth_age, fill = child_sex) +\n  geom_histogram(bins = 25) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 5.9\n\n\n\n\n\nClearly, there are some impossible (erroneous) maternal ages &gt; 100. Here are details:\n\nold_moms &lt;- screen_df |&gt;\n  dplyr::filter(mom_childbirth_age &gt; 55)\n\nold_moms |&gt;\n  dplyr::select(submit_date, vol_id, participant_ID, mom_childbirth_age) |&gt;\n  knitr::kable(format = 'html')\n\n\n\n\nsubmit_date\nvol_id\nparticipant_ID\nmom_childbirth_age\n\n\n\n\n2022-07-07 15:03:20\n1391\n005\n121.22\n\n\n\n\n\n\n\n\n\nRace\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_race)) |&gt;\n  dplyr::mutate(mom_race = dplyr::recode(\n    mom_race,\n    morethanone = \"more_than_one\",\n    americanindian = \"american_indian\"))\n\nxtabs(~mom_race, df)\n\nmom_race\namerican_indian           asian           black   more_than_one  nativehawaiian \n              3              26              36              43               1 \n          other         refused           white \n             48               2             640 \n\n\n\n\nBirth country\n\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(mom_birth_country = dplyr::recode(\n    mom_birth_country, \n    unitedstates = \"US\",\n    united_states = \"US\",\n    othercountry = \"Other\",\n    other_country = \"Other\",\n    refused = \"Refused\"\n  ))\n\nxtabs(~ mom_birth_country, data = df)\n\nmom_birth_country\n     Other puertorico         US \n        89          3        707 \n\n\n\ndf &lt;- screen_df |&gt;\n  dplyr::mutate(mom_birth_country_specify = stringr::str_to_title(mom_birth_country_specify)) |&gt;\n  dplyr::filter(!is.na(mom_birth_country_specify)) |&gt;\n  dplyr::select(child_sex, mom_birth_country_specify)\n\nunique(df$mom_birth_country_specify)\n\n [1] \"South Korea\"        \"Argentina\"          \"Spain\"             \n [4] \"Zimbabwe\"           \"Mexico\"             \"Canada\"            \n [7] \"Bolivia\"            \"Uk\"                 \"Refused\"           \n[10] \"United Kingdom\"     \"Liberia\"            \"Pakistan\"          \n[13] \"Australia\"          \"Venezuela\"          \"India\"             \n[16] \"Kenya\"              \"England\"            \"China\"             \n[19] \"Ireland\"            \"El Salvador\"        \"Colombia\"          \n[22] \"Chile\"              \"Haiti\"              \"Guatemala\"         \n[25] \"Ecuador\"            \"Guadalajara Mexico\" \"Costa Rica\"        \n[28] \"Italy\"              \"Malaysia\"           \"Phillipines\"       \n[31] \"Dominican Republic\" \"Nigeria\"            \"Honduras\"          \n[34] \"Colomobia\"          \"Columbia\"           \"Peru\"              \n[37] \"Panama\"            \n\n\n\n\nEducation\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_education)) |&gt;\n  dplyr::select(child_sex, mom_education)\n\nxtabs(~ mom_education, data = df)\n\nmom_education\n       associates    bachelor_s_deg         bachelors           diploma \n               27                 3               256                28 \n        doctorate          eleventh               ged graduate_nodegree \n               99                 1                 3                25 \n   master_s_degre           masters             ninth      professional \n                2               270                 1                35 \n   professional_d       somecollege       voc_diplima     voc_nodiplima \n                2                42                 3                 1 \n\n\n\n\n\n\n\n\nNote\n\n\n\nThis requires some recoding work.\n\n\n\n\nEmployment\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_employment))\n\nxtabs(~ mom_employment, data = df)\n\nmom_employment\nfull_time        no part_time \n      454       187       157 \n\n\n\n\nOccupation\nThis information is available, but would need to be substantially recoded to be useful in summary form.\n\n\nJobs number\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_jobs_number))\n\nxtabs(~ mom_jobs_number, data = df)\n\nmom_jobs_number\n    0     1     2     3     4 5more \n    1   546    60     1     1     1 \n\n\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_jobs_number),\n                !is.na(mom_employment))\n\nxtabs(~ mom_jobs_number + mom_employment, data = df)\n\n               mom_employment\nmom_jobs_number full_time part_time\n          0             0         1\n          1           416       130\n          2            35        25\n          3             1         0\n          4             1         0\n          5more         1         0\n\n\n\n\nJob training\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(mom_training))\n\nxtabs(~ mom_training, data = df)\n\nmom_training\n no yes \n776  20",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#biological-father",
    "href": "screen-viz.html#biological-father",
    "title": "Screening: Visualizations",
    "section": "Biological father",
    "text": "Biological father\n\nRace\n\ndf &lt;- screen_df |&gt;\n  dplyr::select(biodad_childbirth_age, biodad_race, child_sex) |&gt;\n  dplyr::mutate(\n    biodad_race =\n      dplyr::recode(\n        biodad_race,\n        americanindian_NA = \"american_indian\",\n        asian_NA = \"asian\",\n        NA_asian = \"asian\",\n        black_NA = \"black\",\n        donotknow_NA = \"do_not_know\",\n        NA_NA = \"NA\",\n        NA_white = \"white\",\n        other_NA = \"other\",\n        refused_NA = \"refused\",\n        white_NA = \"white\",\n        morethanone_NA = \"more_than_one\"\n      )\n  ) |&gt;\n  dplyr::mutate(biodad_childbirth_age = stringr::str_remove_all(biodad_childbirth_age, \"[_NA]\")) |&gt;\n  # dplyr::filter(!is.na(biodad_childbirth_age), !is.na(biodad_race)) |&gt;\n  dplyr::mutate(biodad_childbirth_age = as.numeric(biodad_childbirth_age))\n\nWarning: There was 1 warning in `dplyr::mutate()`.\nℹ In argument: `biodad_childbirth_age = as.numeric(biodad_childbirth_age)`.\nCaused by warning:\n! NAs introduced by coercion\n\nxtabs(~ biodad_race, df)\n\nbiodad_race\n  american_indian             asian             black       do_not_know \n                4                29                43                 5 \n    more_than_one                NA nativehawaiian_NA             other \n               35                32                 2                65 \n          refused             white \n                3               600 \n\n\n\n\nAge at child birth\n\ndf |&gt;\n  dplyr::filter(!is.na(biodad_childbirth_age)) |&gt;\n  ggplot() +\n  aes(x = biodad_childbirth_age, fill = child_sex) +\n  geom_histogram(bins = 25) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 5.10",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-viz.html#childcare",
    "href": "screen-viz.html#childcare",
    "title": "Screening: Visualizations",
    "section": "Childcare",
    "text": "Childcare\n\nTypes\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(childcare_types))\n                \nxtabs(~ childcare_types, data = df)\n\nchildcare_types\n                        childcare                    childcare_cent \n                              225                                 2 \n                            nanny                    nanny_babysitt \n                                4                                 1 \n                       nanny_home              nanny_home childcare \n                               41                                13 \n         nanny_home nanny_nothome nanny_home nanny_nothome relative \n                                2                                 1 \n              nanny_home relative                     nanny_nothome \n                                6                                15 \n          nanny_nothome childcare            nanny_nothome relative \n                                3                                 3 \n                             none                          relative \n                              182                                94 \n               relative childcare \n                               19 \n\n\n\n\n\n\n\n\nNote\n\n\n\nThis requires some cleaning.\n\n\n\n\nHours\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(childcare_hours)) |&gt;\n  dplyr::arrange(childcare_hours)\n\nunique(df$childcare_hours)\n\n [1] \"1\"                                           \n [2] \"10\"                                          \n [3] \"12\"                                          \n [4] \"13\"                                          \n [5] \"14\"                                          \n [6] \"14.5\"                                        \n [7] \"15\"                                          \n [8] \"15-20\"                                       \n [9] \"16\"                                          \n[10] \"16-20\"                                       \n[11] \"17\"                                          \n[12] \"17.5\"                                        \n[13] \"18\"                                          \n[14] \"19\"                                          \n[15] \"2\"                                           \n[16] \"2-3\"                                         \n[17] \"2-4\"                                         \n[18] \"20\"                                          \n[19] \"20 hours\"                                    \n[20] \"20 hours a week - maternal grandmother\"      \n[21] \"21\"                                          \n[22] \"21 (14 hr childcare center, 7 hr babysitter)\"\n[23] \"22\"                                          \n[24] \"24\"                                          \n[25] \"25\"                                          \n[26] \"25, 15 of those hours are at daycare\"        \n[27] \"26\"                                          \n[28] \"27\"                                          \n[29] \"28\"                                          \n[30] \"3\"                                           \n[31] \"30\"                                          \n[32] \"30-35\"                                       \n[33] \"30-40\"                                       \n[34] \"31\"                                          \n[35] \"32\"                                          \n[36] \"33\"                                          \n[37] \"34\"                                          \n[38] \"35\"                                          \n[39] \"35-40\"                                       \n[40] \"36\"                                          \n[41] \"36; Grandpa watches one day a week\"          \n[42] \"37\"                                          \n[43] \"38\"                                          \n[44] \"4\"                                           \n[45] \"40\"                                          \n[46] \"40+\"                                         \n[47] \"40-45\"                                       \n[48] \"40-45 hours\"                                 \n[49] \"40-50\"                                       \n[50] \"42\"                                          \n[51] \"42.5\"                                        \n[52] \"43\"                                          \n[53] \"45\"                                          \n[54] \"45-50\"                                       \n[55] \"47\"                                          \n[56] \"5\"                                           \n[57] \"50\"                                          \n[58] \"52.5\"                                        \n[59] \"53\"                                          \n[60] \"6\"                                           \n[61] \"63\"                                          \n[62] \"7\"                                           \n[63] \"8\"                                           \n[64] \"8 hours with grandmother\"                    \n[65] \"8-16\"                                        \n[66] \"8-5 each day\"                                \n[67] \"8.5\"                                         \n[68] \"80\"                                          \n[69] \"9\"                                           \n\n\n\n\n\n\n\n\nNote\n\n\n\nThis requires some cleaning.\n\n\n\n\nLanguage\n\ndf &lt;- screen_df |&gt;\n  dplyr::filter(!is.na(childcare_language))\n\nunique(df$childcare_language)\n\n [1] \"Spanish and English (half and half)\"                                       \n [2] \"English\"                                                                   \n [3] \"Spanish\"                                                                   \n [4] \"English and Spanish (50/50)\"                                               \n [5] \"english\"                                                                   \n [6] \"English when speaking with children, but Arabic when speaking to eachother\"\n [7] \"Mostly English, some Spanish\"                                              \n [8] \"Mandarin\"                                                                  \n [9] \"Spanish at the center\"                                                     \n[10] \"English and Spanish\"                                                       \n[11] \"English, Spanish\"                                                          \n[12] \"Usually English, sometimes arabic and french\"                              \n[13] \"English and speaks a little bit of Japanese but not directly to Lucas\"     \n[14] \"English and Creole\"                                                        \n[15] \"Spanish (sometimes English)\"                                               \n[16] \"English;Spanish\"                                                           \n[17] \"Spanish and English\"                                                       \n[18] \"spanish\"                                                                   \n[19] \"French only\"                                                               \n[20] \"English and some sign language\"                                            \n[21] \"Engish\"                                                                    \n[22] \"English, American Sign Language\"                                           \n[23] \"English and ASL\"                                                           \n[24] \"Ingles\"                                                                    \n[25] \"English/Spanish\"                                                           \n[26] \"English and some Spanish\"                                                  \n[27] \"english, has been exposed to Arabic\"                                       \n[28] \"Nanny in Spanish at home. At school both English and Spanish.\"             \n[29] \"English (majority of the time) and sometimes Spanish\"                      \n[30] \"English and Spanish 50/50\"                                                 \n[31] \"english, some spanish\"                                                     \n[32] \"English, Italian, Spanish\"                                                 \n[33] \"English, sometimes a little bit of Spanish\"                                \n[34] \"English &  Spanish\"                                                        \n[35] \"English and Portuguese\"                                                    \n\n\n\n\n\n\n\n\nNote\n\n\n\nThis requires some cleaning.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Screening: Visualizations</span>"
    ]
  },
  {
    "objectID": "screen-data-dictionary.html",
    "href": "screen-data-dictionary.html",
    "title": "Screening: Data dictionary",
    "section": "",
    "text": "Background\nWe make use of the datadictionary package here.\nThis is not a perfect solution. Among other challenges, this package throws many warnings. But we will use it for the time being.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Screening: Data dictionary</span>"
    ]
  },
  {
    "objectID": "screen-data-dictionary.html#background",
    "href": "screen-data-dictionary.html#background",
    "title": "Screening: Data dictionary",
    "section": "",
    "text": "Note\n\n\n\nThis data dictionary workflow does not include the questions that were asked. Adding that, and more descriptive information, is a high priority.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Screening: Data dictionary</span>"
    ]
  },
  {
    "objectID": "screen-data-dictionary.html#load-data-and-generate-dictionary",
    "href": "screen-data-dictionary.html#load-data-and-generate-dictionary",
    "title": "Screening: Data dictionary",
    "section": "Load data and generate dictionary",
    "text": "Load data and generate dictionary\n\n\n\n\n\n\nNote\n\n\n\nThis data dictionary workflow does not include the questions that were asked. Adding that, and more descriptive information, is a high priority.\n\n\n\nscr_df &lt;- readr::read_csv(paste0(here::here(), \"/data/csv/screening/agg/PLAY-screening-datab-latest.csv\"),\n                          show_col_types = FALSE)\n\nscr_dd &lt;- datadictionary::create_dictionary(scr_df)\n\nreadr::write_csv(scr_dd, paste0(here::here(), \"/data/csv/screening/dd/PLAY-screening-data-dictionary.csv\"))\n\nHere are the data this package provides:\n\nscr_dd |&gt;\n  kableExtra::kable() |&gt;\n  kableExtra::kable_classic()\n\n\n\n\nitem\nlabel\nclass\nsummary\nvalue\n\n\n\n\n\n\n\nRows in dataset\n824\n\n\n\n\n\nColumns in dataset\n68\n\n\nsession_id\nNo label\nnumeric\nmean\n65650\n\n\n\n\n\nmedian\n66698\n\n\n\n\n\nmin\n38196\n\n\n\n\n\nmax\n73841\n\n\n\n\n\nmissing\n0\n\n\nsession_name\nNo label\ncharacter\nunique responses\n783\n\n\n\n\n\nmissing\n0\n\n\nsession_date\nNo label\nDate\nmean\n2023-06-01\n\n\n\n\n\nmode\n2023-08-13\n\n\n\n\n\nmin\n2019-06-09\n\n\n\n\n\nmax\n2024-09-04\n\n\n\n\n\nmissing\n0\n\n\nsession_release\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n0\n\n\nparticipant_ID\nNo label\ncharacter\nunique responses\n92\n\n\n\n\n\nmissing\n0\n\n\nparticipant_birthdate\nNo label\nDate\nmean\n2021-12-05\n\n\n\n\n\nmode\n2021-08-18\n\n\n\n\n\nmin\n2017-06-08\n\n\n\n\n\nmax\n2023-09-24\n\n\n\n\n\nmissing\n0\n\n\nparticipant_gender\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n0\n\n\nparticipant_race\nNo label\ncharacter\nunique responses\n10\n\n\n\n\n\nmissing\n0\n\n\nparticipant_ethnicity\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n0\n\n\nparticipant_language\nNo label\ncharacter\nunique responses\n13\n\n\n\n\n\nmissing\n0\n\n\nexclusion_reason\nNo label\ncharacter\nunique responses\n15\n\n\n\n\n\nmissing\n766\n\n\ngroup_name\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n0\n\n\ncontext_setting\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n9\n\n\ncontext_country\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n50\n\n\ncontext_state\nNo label\ncharacter\nunique responses\n19\n\n\n\n\n\nmissing\n34\n\n\nvol_id\nNo label\nnumeric\nmean\n1277\n\n\n\n\n\nmedian\n1370\n\n\n\n\n\nmin\n899\n\n\n\n\n\nmax\n1705\n\n\n\n\n\nmissing\n0\n\n\nparticipant_disability\nNo label\ncharacter\nunique responses\n5\n\n\n\n\n\nmissing\n664\n\n\npilot_pilot\nNo label\nlogical\nmissing\n824\n\n\nsubmit_date\nNo label\nPOSIXct POSIXt\nmean\n2023-05-21\n\n\n\n\n\nmode\n2024-02-09 2024-04-19\n\n\n\n\n\nmin\n2019-09-05\n\n\n\n\n\nmax\n2024-09-04\n\n\n\n\n\nmissing\n6\n\n\nsite_id\nNo label\ncharacter\nunique responses\n31\n\n\n\n\n\nmissing\n6\n\n\nplay_id\nNo label\ncharacter\nunique responses\n673\n\n\n\n\n\nmissing\n134\n\n\nchild_age_mos\nNo label\nnumeric\nmean\n18\n\n\n\n\n\nmedian\n18\n\n\n\n\n\nmin\n9.24\n\n\n\n\n\nmax\n42.6\n\n\n\n\n\nmissing\n8\n\n\nchild_sex\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n8\n\n\nchild_bornonduedate\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n14\n\n\nchild_onterm\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n128\n\n\nchild_birthage\nNo label\nnumeric\nmean\n5\n\n\n\n\n\nmedian\n3\n\n\n\n\n\nmin\n-20\n\n\n\n\n\nmax\n367\n\n\n\n\n\nmissing\n35\n\n\nchild_weight_pounds\nNo label\nnumeric\nmean\n7\n\n\n\n\n\nmedian\n7\n\n\n\n\n\nmin\n4\n\n\n\n\n\nmax\n100\n\n\n\n\n\nmissing\n18\n\n\nchild_weight_ounces\nNo label\nnumeric\nmean\n7\n\n\n\n\n\nmedian\n7\n\n\n\n\n\nmin\n0\n\n\n\n\n\nmax\n143\n\n\n\n\n\nmissing\n30\n\n\nchild_birth_complications\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n18\n\n\nchild_birth_complications_specify\nNo label\ncharacter\nunique responses\n66\n\n\n\n\n\nmissing\n757\n\n\nchild_hearing_disabilities\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n18\n\n\nchild_hearing_disabilities_specify\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n823\n\n\nchild_vision_disabilities\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n18\n\n\nchild_vision_disabilities_specify\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n819\n\n\nchild_major_illnesses_injuries\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n18\n\n\nchild_illnesses_injuries_specify\nNo label\ncharacter\nunique responses\n29\n\n\n\n\n\nmissing\n786\n\n\nchild_developmentaldelays\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n136\n\n\nchild_developmentaldelays_specify\nNo label\ncharacter\nunique responses\n9\n\n\n\n\n\nmissing\n816\n\n\nchild_sleep_time\nNo label\ncharacter\nunique responses\n97\n\n\n\n\n\nmissing\n19\n\n\nchild_wake_time\nNo label\ncharacter\nunique responses\n113\n\n\n\n\n\nmissing\n20\n\n\nchild_nap_hours\nNo label\ncharacter\nunique responses\n38\n\n\n\n\n\nmissing\n20\n\n\nchild_sleep_location\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n20\n\n\nmom_bio\nNo label\ncharacter\nunique responses\n4\n\n\n\n\n\nmissing\n38\n\n\nmom_childbirth_age\nNo label\nnumeric\nmean\n33\n\n\n\n\n\nmedian\n33\n\n\n\n\n\nmin\n20.22\n\n\n\n\n\nmax\n121.22\n\n\n\n\n\nmissing\n35\n\n\nmom_race\nNo label\ncharacter\nunique responses\n10\n\n\n\n\n\nmissing\n25\n\n\nmom_birth_country\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n25\n\n\nmom_birth_country_specify\nNo label\ncharacter\nunique responses\n39\n\n\n\n\n\nmissing\n736\n\n\nmom_education\nNo label\ncharacter\nunique responses\n17\n\n\n\n\n\nmissing\n26\n\n\nmom_employment\nNo label\ncharacter\nunique responses\n4\n\n\n\n\n\nmissing\n26\n\n\nmom_occupation\nNo label\ncharacter\nunique responses\n478\n\n\n\n\n\nmissing\n216\n\n\nmom_jobs_number\nNo label\ncharacter\nunique responses\n7\n\n\n\n\n\nmissing\n214\n\n\nmom_training\nNo label\ncharacter\nunique responses\n3\n\n\n\n\n\nmissing\n28\n\n\nbiodad_childbirth_age\nNo label\ncharacter\nunique responses\n628\n\n\n\n\n\nmissing\n6\n\n\nbiodad_race\nNo label\ncharacter\nunique responses\n13\n\n\n\n\n\nmissing\n6\n\n\nlanguage_spoken_mom\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n20\n\n\nlanguage_spoken_mom_comments\nNo label\ncharacter\nunique responses\n17\n\n\n\n\n\nmissing\n808\n\n\nlanguage_spoken_child\nNo label\ncharacter\nunique responses\n6\n\n\n\n\n\nmissing\n8\n\n\nlanguage_spoken_home_comments\nNo label\ncharacter\nunique responses\n819\n\n\n\n\n\nmissing\n6\n\n\nlanguage_spoken_child_comments\nNo label\ncharacter\nunique responses\n14\n\n\n\n\n\nmissing\n811\n\n\nlanguage_spoken_home\nNo label\ncharacter\nunique responses\n7\n\n\n\n\n\nmissing\n13\n\n\nlanguage_spoken_house_other\nNo label\ncharacter\nunique responses\n15\n\n\n\n\n\nmissing\n810\n\n\nlanguage_spoken_home_other\nNo label\ncharacter\nunique responses\n2\n\n\n\n\n\nmissing\n823\n\n\nchildcare_types\nNo label\ncharacter\nunique responses\n16\n\n\n\n\n\nmissing\n213\n\n\nchildcare_location\nNo label\ncharacter\nunique responses\n25\n\n\n\n\n\nmissing\n800\n\n\nchildcare_hours\nNo label\ncharacter\nunique responses\n70\n\n\n\n\n\nmissing\n398\n\n\nchildcare_number\nNo label\nnumeric\nmean\n6\n\n\n\n\n\nmedian\n6\n\n\n\n\n\nmin\n0\n\n\n\n\n\nmax\n25\n\n\n\n\n\nmissing\n401\n\n\nchildcare_age\nNo label\nnumeric\nmean\n7\n\n\n\n\n\nmedian\n5\n\n\n\n\n\nmin\n0\n\n\n\n\n\nmax\n45\n\n\n\n\n\nmissing\n510\n\n\nchildcare_language\nNo label\ncharacter\nunique responses\n36\n\n\n\n\n\nmissing\n397",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Screening: Data dictionary</span>"
    ]
  },
  {
    "objectID": "screen-data-dictionary.html#extracting-questions",
    "href": "screen-data-dictionary.html#extracting-questions",
    "title": "Screening: Data dictionary",
    "section": "Extracting questions",
    "text": "Extracting questions\nAn alternative approach to generating the data dictionary starts with the questionnaire files themselves.",
    "crumbs": [
      "Screening",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Screening: Data dictionary</span>"
    ]
  },
  {
    "objectID": "home-visit-gather.html",
    "href": "home-visit-gather.html",
    "title": "Home visit: Gathering",
    "section": "",
    "text": "Download data\nData files for each of the language by age-group conditions are stored on KoBoToolbox (KBT).\nStore all of the data files on KBT in kb_df.\nlibrary(targets)\ntargets::tar_load(kb_df, store=\"../_targets\")\nkb_df\nList data forms specific to the home visit by filtering the files with names that contain “Home”.\ntargets::tar_load(kb_home, store=\"../_targets\")\nkb_home\n\n        id              id_string\n1   411456 a58ZhjX6M8WXtzLGvBaEaG\n2   740625 a8HyzdxnVjK53dt4fX3Vup\n3   331453 aae4wz2tpkSnAkea2PAzin\n4   363465 abYGMsrMvkGsnA4xm9kqC9\n5   363431 acCBJaRqBkSMPYdvaaWCSu\n6   334099 ad3NtS6TDPuKTUKCAyCuby\n7   363349 aEMERWLYQAdhaMKMt5QkD7\n8   307736 aeMJQLo56HWyVHkKX9oaJD\n9   740631 ahYJ7XRUcit8gbFYwaxnAV\n10 1151489 aLqdPLTCZb8jvFkDxcFwzy\n11 1136694 aMteoHisncRUStdyZfsjMB\n12  740623 aoLcmmN8KWG4N6A3XpUiRT\n13  740628 aRJW7SwKsVyZu8b4FighiM\n14  363466 asv7tL6CEYjiW2XCkLxhcX\n15  411469 aswcEAtxj24u9MfuBmS9AW\n16  740630 aThMD6zuEFjtTfptwcpZPg\n17  411388 aTyGBYk6HvRXmki9ksb29p\n18  740624 aUeYzPfq6WED4dDF28VT9D\n19  363381 aWd7wujF5d5HYaYMhT4jBZ\n20  740626 awMnFDna5kWR3LXKyGmFMd\n21  331848 axYbEbLcJxzUNFbqMVySjJ\n22  740629 axyJSgLRDeSk3BHB6cJmYk\n23  408149 ayhCy68ZTaDGc7tuGthQpJ\n24  740627 aYokcZAjTZ9JCyVXz4R5rh\n                                                                     title\n1              PLAY Home Questionaires - 12 Bilingual English (2020-03-04)\n2                                        PLAY_HomeQuestionaires_12_English\n3                                    PLAY Home Questionnaires (24 English)\n4             PLAY Home Questionnaires - 24 Bilingual English (2020-03-04)\n5                       PLAY Home Questionnaires - 12 English (2020-03-04)\n6                        PLAY Home Questionnaires (12 Bilingual - English)\n7                       PLAY Home Questionnaires - 18 English (2020-03-04)\n8                                    PLAY Home Questionnaires (18 English)\n9                              PLAY_HomeQuestionaires_24_Bilingual_English\n10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n11             Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO TODAY\n12                             PLAY_HomeQuestionaires_12_Bilingual_English\n13                                      PLAY_HomeQuestionnaires_18_English\n14            PLAY Home Questionnaires - 18 Bilingual English (2020-03-04)\n15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n16                             PLAY_HomeQuestionaires_24_Bilingual_Spanish\n17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n18                             PLAY_HomeQuestionaires_12_Bilingual_Spanish\n19                      PLAY Home Questionnaires - 24 English (2020-03-04)\n20                             PLAY_HomeQuestionaires_18_Bilingual_English\n21                                   PLAY Home Questionnaires (12 English)\n22                                      PLAY_HomeQuestionnaires_24_English\n23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-03-04)\n24                             PLAY_HomeQuestionaires_18_Bilingual_Spanish\n                                                               description\n1            PLAY Home Questionaires - 12 Bilingual (English) (2020-03-04)\n2                             PLAY_HomeQuestionaires_12_English-2021-07-29\n3                                    PLAY Home Questionnaires (24 English)\n4             PLAY Home Questionnaires - 24 Bilingual English (2019-11-20)\n5                       PLAY Home Questionnaires - 12 English (2019-11-20)\n6                        PLAY Home Questionnaires (12 Bilingual - English)\n7                       PLAY Home Questionnaires - 18 English (2018-11-20)\n8                                    PLAY Home Questionnaires (18 English)\n9                   PLAY_HomeQuestionaires_24_Bilingual_English-2021-07-30\n10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n11                             Clone of PLAY_HomeQuestionnaires_18_English\n12                  PLAY_HomeQuestionaires_12_Bilingual_English-2021-07-29\n13                           PLAY_HomeQuestionnaires_18_English-2021-07-29\n14            PLAY Home Questionnaires - 18 Bilingual English (2019-11-20)\n15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n16                  PLAY_HomeQuestionaires_24_Bilingual_Spanish-2021-07-30\n17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n18                  PLAY_HomeQuestionaires_12_Bilingual_Spanish-2021-07-29\n19                      PLAY Home Questionnaires - 24 English (2019-11-20)\n20                  PLAY_HomeQuestionaires_18_Bilingual_English-2021-07-29\n21                                   PLAY Home Questionnaires (12 English)\n22                           PLAY_HomeQuestionnaires_24_English-2021-07-30\n23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-02-27)\n24                  PLAY_HomeQuestionaires_18_Bilingual_Spanish-2021-07-29\n                                              url\n1   https://kc.kobotoolbox.org/api/v1/data/411456\n2   https://kc.kobotoolbox.org/api/v1/data/740625\n3   https://kc.kobotoolbox.org/api/v1/data/331453\n4   https://kc.kobotoolbox.org/api/v1/data/363465\n5   https://kc.kobotoolbox.org/api/v1/data/363431\n6   https://kc.kobotoolbox.org/api/v1/data/334099\n7   https://kc.kobotoolbox.org/api/v1/data/363349\n8   https://kc.kobotoolbox.org/api/v1/data/307736\n9   https://kc.kobotoolbox.org/api/v1/data/740631\n10 https://kc.kobotoolbox.org/api/v1/data/1151489\n11 https://kc.kobotoolbox.org/api/v1/data/1136694\n12  https://kc.kobotoolbox.org/api/v1/data/740623\n13  https://kc.kobotoolbox.org/api/v1/data/740628\n14  https://kc.kobotoolbox.org/api/v1/data/363466\n15  https://kc.kobotoolbox.org/api/v1/data/411469\n16  https://kc.kobotoolbox.org/api/v1/data/740630\n17  https://kc.kobotoolbox.org/api/v1/data/411388\n18  https://kc.kobotoolbox.org/api/v1/data/740624\n19  https://kc.kobotoolbox.org/api/v1/data/363381\n20  https://kc.kobotoolbox.org/api/v1/data/740626\n21  https://kc.kobotoolbox.org/api/v1/data/331848\n22  https://kc.kobotoolbox.org/api/v1/data/740629\n23  https://kc.kobotoolbox.org/api/v1/data/408149\n24  https://kc.kobotoolbox.org/api/v1/data/740627",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Home visit: Gathering</span>"
    ]
  },
  {
    "objectID": "home-visit-gather.html#download-data",
    "href": "home-visit-gather.html#download-data",
    "title": "Home visit: Gathering",
    "section": "",
    "text": "tar_target(kb_df, list_kobo_data()),\n\n\ntar_target(kb_home, dplyr::filter(kb_df, stringr::str_detect(title, \"Home\")))\n\n\nSave selected raw files to local directory\nPrepare to retrieve all home visit files.\n\nn_files &lt;- dim(kb_home)[1]\n\nThere are \\(n=\\) 24 home visit data files.\ntar_target(\n  home_visit_downloads,\n  retrieve_kobo_xlsx(kb_home, \n    \"data/xlsx/home_visit/raw\"),\n  cue = tarchetypes::tar_cue_age(\n    name = home_visit_downloads,\n    age = as.difftime(update_interval, \n      units = update_interval_units)\n  )\n)\n\n\nNormalize file names\nSome of the form names are inconsistent, so we normalize them to fit the following pattern:\n&lt;form_id&gt;_PLAY_HomeQuestionnaires_&lt;age_group&gt;_&lt;lang_group&gt;.xlsx\ntar_target(\n  home_visit_renamed,\n  rename_home_xlsx(home_visit_downloads,\n                     \"data/xlsx/home_visit/std_name\"),\n  cue = tarchetypes::tar_cue_age(\n    name = home_visit_renamed,\n    age = as.difftime(update_interval, \n      units = update_interval_units)\n  )\n)\n\n\nSave xlsx as csv\ntar_target(\n  home_visit_xlsx_to_csv,\n  load_xlsx_save_many_csvs_2(home_visit_renamed, \n    \"data/csv/home_visit/raw\")\n)\n\n\nSplit MB-CDI from other questions\nNext we import a CSV for a given form year, age group, and language group, and create two new CSV files: one with the MB-CDI data and one with all of the other survey questions.\nBy default, the document presumes that we want to convert all of the CSV files\nExtract the ‘non-mbcdi’ questions first and add ‘non_mbcdi’ to the filename.\ntar_target(\n  home_visit_non_mbcdi,\n  split_non_mbcdi_csvs(home_visit_xlsx_to_csv,\n                        \"data/csv/home_visit/non_mbcdi\")\n)\nExtracting the MB-CDI data has nearly the same function call, but the these_questions parameter is set to ‘mbcdi’.\ntar_target(\n  home_visit_mbcdi,\n  split_mbcdi_csvs(home_visit_xlsx_to_csv,\n                    \"data/csv/home_visit/mbcdi\")\n)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Home visit: Gathering</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html",
    "href": "home-visit-aggregate.html",
    "title": "Home visit: Create aggregates",
    "section": "",
    "text": "Background\nThis page documents the process for combining separate files into aggregate files containing data from many participants.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Home visit: Create aggregates</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#setup",
    "href": "home-visit-aggregate.html#setup",
    "title": "Home visit: Create aggregates",
    "section": "Setup",
    "text": "Setup\n\nsuppressPackageStartupMessages(library(\"tidyverse\"))",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Home visit: Create aggregates</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#remove-identifiers",
    "href": "home-visit-aggregate.html#remove-identifiers",
    "title": "Home visit: Create aggregates",
    "section": "Remove identifiers",
    "text": "Remove identifiers\nThe function remove_identifiers() in R/kobo_export detects the presence of names, addresses, phone numbers, email, and dates in the field names for an input file and removes these fields. It also modifies the file name by appending _deidentified.\nThe remove_identifiers() function detects these fields For clarity, we print it here.\n\nsource(\"~/rrr/KoBoToolbox/R/_OLD/functions.R\", echo = FALSE, print.eval = FALSE)\nremove_identifiers\n\nfunction (df) \n{\n    require(stringr)\n    stopifnot(is.data.frame(df))\n    contains_name &lt;- stringr::str_detect(names(df), \"name\")\n    contains_address &lt;- stringr::str_detect(names(df), \"address\")\n    contains_phone &lt;- stringr::str_detect(names(df), \"phone\")\n    contains_email &lt;- stringr::str_detect(names(df), \"email\")\n    contains_birthdate &lt;- stringr::str_detect(names(df), \"birthdate\")\n    contains_first &lt;- stringr::str_detect(names(df), \"first[12]?\")\n    contains_last &lt;- stringr::str_detect(names(df), \"last[12]?\")\n    contains_city &lt;- stringr::str_detect(names(df), \"city\")\n    contains_year &lt;- stringr::str_detect(names(df), \"year[12]?\")\n    contains_month &lt;- stringr::str_detect(names(df), \"month[12]?\")\n    contains_day &lt;- stringr::str_detect(names(df), \"/day[12]?$\")\n    identifiable_data &lt;- contains_name | contains_address | contains_phone | \n        contains_email | contains_birthdate | contains_first | \n        contains_last | contains_city | contains_year | contains_month | \n        contains_day\n    identifiable_cols &lt;- (1:length(names(df)))[identifiable_data]\n    df_deidentified &lt;- df %&gt;% dplyr::select(., -all_of(identifiable_cols))\n    df_deidentified\n}\n\n\nThe non-MBCDI file contains the identifiers, so that is the target of this removal process.\n\nNote that we have added data to .gitignore in protocol/, the root directory for the HTML protocol, so none of the data files should be made available via git or GitHub. This also means that there is no version control being done on raw data files themselves.\n\ntar_target(\n  home_visit_remove_identifiers,\n  purrr::map_chr(\n    home_visit_non_mbcdi,\n    open_deidentify_save,\n    csv_save_dir = \"data/csv/home_visit/non_mbcdi/deid\",\n      these_questions = 'non_mbcdi'\n  )\n)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Home visit: Create aggregates</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#quality-assurance-qa-reviews",
    "href": "home-visit-aggregate.html#quality-assurance-qa-reviews",
    "title": "Home visit: Create aggregates",
    "section": "Quality assurance (QA) reviews",
    "text": "Quality assurance (QA) reviews\n\nMB-CDI files\n\n\n\n\n\n\nNote\n\n\n\nTo be completed.\n\n\n\n\nNon-MB-CDI files\nCreate a helper function to create a data set with summary information about the data files.\n\nsummarize_non_mbcdi_qs &lt;- function(fn) {\n  stopifnot(is.character(fn))\n  \n  if (!file.exists(fn)) {\n    stop('File not found `', fn, '`')\n  } else {\n    df &lt;- readr::read_csv(fn, show_col_types = FALSE)\n    if (!is.data.frame(df)) {\n      stop('Error reading data frame')\n    } else {\n      out_df &lt;-\n        tibble(\n          file_name = basename(fn),\n          n_rows = dim(df)[1],\n          n_vars = dim(df)[2]\n        )\n      dplyr::arrange(out_df, file_name)\n    }\n  }\n}\n\nSelect the de-identified CSVs to examine.\n\nfl &lt;-\n  list.files(\n    file.path(\"../data/csv/home_visit/non_mbcdi/deid\"),\n    '^[0-9]+_non_mbcdi_[12|18|24].*deidentified',\n    full.names = TRUE\n  )\n\nPLAY_forms &lt;- purrr::map_df(fl, summarize_non_mbcdi_qs)\n\nPLAY_forms %&gt;%\n  knitr::kable(., format = 'html') %&gt;%\n  kableExtra::kable_classic()\n\n\n\n\nfile_name\nn_rows\nn_vars\n\n\n\n\n1136694_non_mbcdi_18_english_deidentified.csv\n0\n288\n\n\n1151489_non_mbcdi_18_english_deidentified.csv\n0\n286\n\n\n307736_non_mbcdi_18_english_deidentified.csv\n4\n274\n\n\n331453_non_mbcdi_24_english_deidentified.csv\n3\n274\n\n\n331848_non_mbcdi_12_english_deidentified.csv\n4\n267\n\n\n334099_non_mbcdi_12_bilingual_english_deidentified.csv\n1\n267\n\n\n363349_non_mbcdi_18_english_deidentified.csv\n9\n280\n\n\n363381_non_mbcdi_24_english_deidentified.csv\n8\n280\n\n\n363431_non_mbcdi_12_english_deidentified.csv\n10\n281\n\n\n363465_non_mbcdi_24_bilingual_english_deidentified.csv\n0\n280\n\n\n363466_non_mbcdi_18_bilingual_english_deidentified.csv\n0\n280\n\n\n408149_non_mbcdi_24_bilingual_spanish_deidentified.csv\n1\n280\n\n\n411388_non_mbcdi_18_bilingual_spanish_deidentified.csv\n0\n280\n\n\n411456_non_mbcdi_12_bilingual_english_deidentified.csv\n1\n280\n\n\n411469_non_mbcdi_12_bilingual_spanish_deidentified.csv\n1\n280\n\n\n740623_non_mbcdi_12_bilingual_english_deidentified.csv\n43\n288\n\n\n740624_non_mbcdi_12_bilingual_spanish_deidentified.csv\n4\n288\n\n\n740625_non_mbcdi_12_english_deidentified.csv\n223\n288\n\n\n740626_non_mbcdi_18_bilingual_english_deidentified.csv\n61\n287\n\n\n740627_non_mbcdi_18_bilingual_spanish_deidentified.csv\n7\n287\n\n\n740628_non_mbcdi_18_english_deidentified.csv\n211\n288\n\n\n740629_non_mbcdi_24_english_deidentified.csv\n175\n287\n\n\n740630_non_mbcdi_24_bilingual_spanish_deidentified.csv\n3\n287\n\n\n740631_non_mbcdi_24_bilingual_english_deidentified.csv\n46\n287\n\n\n\n\n\n\n\nThe later forms (with higher form numbers–the leading integers in the file names) are the newer ones. These generally have the largest number of entries and have similar numbers of columns–either 287 or 288. Accordingly, we focus our cleaning efforts here first.\nWe start with the data files that have \\(n=288\\) columns.\n\ndf740623 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\ndf740624 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\nsum(names(df740623) == names(df740624))\n\n[1] 288\n\n\n\ndf740625 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\nsum(names(df740623) == names(df740625))\n\n[1] 288\n\n\n\ndf740628 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\nsum(names(df740623) == names(df740628))\n\n[1] 288\n\n\nSo, four of the most recent data files with \\(n=288\\) columns can be aggregated without modification.\nLet’s turn to the more recent files with \\(n=287\\) columns.\n\ndf740626 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\ndf740627 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\nsum(names(df740626) == names(df740627))\n\n[1] 100\n\n\nWhere does the misalignment arise?\n\nnames(df740626) == names(df740627)\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nThe misalignment arises somewhere near column 92.\n\ndf740629 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\nsum(names(df740626) == names(df740629))\n\n[1] 287\n\n\nSo, df740626 and df740629 are aligned and can be merged.\n\ndf740630 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\nsum(names(df740626) == names(df740630))\n\n[1] 100\n\nnames(df740626) == names(df740630)\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nThese files also fall out of alignment near column 92.\n\ndf740631 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\nsum(names(df740626) == names(df740631))\n\n[1] 100\n\nnames(df740626) == names(df740631)\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nAnd these files fall out of alignment near column 92.\nLet’s see if df740627, df740630, and df740631 are aligned with one another.\n\nsum(names(df740627) == names(df740630))\n\n[1] 287\n\nsum(names(df740627) == names(df740631))\n\n[1] 287\n\n\nYes, they are. So, these three can be merged. We do that first, then address the discrepancies between aggregates.\n\n\n‘Older’ forms\nThe “older” forms have varied numbers of columns. We focus on thos with data (n_vars &gt; 0)\n\ndf307736 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf331453 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf331848 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf334099 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf363349 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf363381 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf363431 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf408149 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf411456 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv\",\n    show_col_types = FALSE\n  )\ndf411469 &lt;-\n  read_csv(\n    \"../data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv\",\n    show_col_types = FALSE\n  )\n\nLet’s look at the two forms that have the same number of columns, \\(n=274\\), 307736 and 331453.\n\nnames(df307736) == names(df331453)\n\n  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[181] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[196] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[211] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[226] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[241] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[271] TRUE TRUE TRUE TRUE\n\nlength(names(df307736) == names(df331453)) == length(names(df307736))\n\n[1] TRUE\n\n\nSo, these two are identical and could be merged.\ntar_target(files_274_cols, stringr::str_detect(home_visit_remove_identifiers, \"/(307736|331453)\"))\n\ntar_target(df_merge_274_cols, make_aggregate_data_file(home_visit_remove_identifiers[files_274_cols]))\nHow about the files with \\(n=267\\) columns, 331848 and 334099?\n\nnames(df331848) == names(df334099)\n\n  [1] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[265]  TRUE  TRUE  TRUE\n\nlength(names(df331848) == names(df334099)) == length(names(df331848))\n\n[1] TRUE\n\n\n\nnames(df331848) |&gt; head()\n\n[1] \"group_combinedquestionnaires/participant_id\"             \n[2] \"start\"                                                   \n[3] \"end\"                                                     \n[4] \"group_combinedquestionnaires/note_fillthisoutbeforestudy\"\n[5] \"group_combinedquestionnaires/site_id\"                    \n[6] \"group_combinedquestionnaires/subject_number\"             \n\nnames(df334099) |&gt; head()\n\n[1] \"group_jo84c13/participant_id\"             \n[2] \"start\"                                    \n[3] \"end\"                                      \n[4] \"group_jo84c13/note_fillthisoutbeforestudy\"\n[5] \"group_jo84c13/site_id\"                    \n[6] \"group_jo84c13/subject_number\"             \n\n\nThere is an odd difference in the group label, group_combinedquestionnaires vs. group_jo84c13.\nLet’s try deleting the initial group labels and compare again.\n\nn1 &lt;- names(df331848)\nn2 &lt;- names(df334099)\n\nnames(df331848) %&gt;% stringr::str_remove(\"group_combinedquestionnaires/\") |&gt; head()\n\n[1] \"participant_id\"              \"start\"                      \n[3] \"end\"                         \"note_fillthisoutbeforestudy\"\n[5] \"site_id\"                     \"subject_number\"             \n\nnames(df334099) %&gt;% stringr::str_remove(\"group_jo84c13/\") |&gt; head()\n\n[1] \"participant_id\"              \"start\"                      \n[3] \"end\"                         \"note_fillthisoutbeforestudy\"\n[5] \"site_id\"                     \"subject_number\"             \n\n\nThat looks promising.\n\nnames(df331848) %&gt;% stringr::str_remove(\"group_combinedquestionnaires/\") -&gt; n1\nnames(df334099) %&gt;% stringr::str_remove(\"group_jo84c13/\") -&gt; n2\nn1 == n2\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE\n [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[265]  TRUE  TRUE  TRUE\n\n\n\ncbind(n1[8:15], n2[8:15])\n\n     [,1]                     [,2]                    \n[1,] \"test_date\"              \"test_date\"             \n[2,] \"child_sex\"              \"child_birth_date\"      \n[3,] \"age_group\"              \"child_sex\"             \n[4,] \"language_child\"         \"age_group\"             \n[5,] \"language_child/english\" \"language_child\"        \n[6,] \"language_child/spanish\" \"language_child/english\"\n[7,] \"language_instruction\"   \"language_child/spanish\"\n[8,] \"acknowledge_site\"       \"language_instruction\"  \n\n\nn2 or df334099 has a child_birth_date field in position 9 that the other data frame does not have.\n\nn1 |&gt; str_detect(\"child_birth_date\") |&gt; sum()\n\n[1] 0\n\n\nIf we delete that variable, the data frames will no longer have the same number of columns. Let’s explore that anyway.\n\nn2_2 &lt;- n2[-9]\n\nn1 == n2_2\n\nWarning in n1 == n2_2: longer object length is not a multiple of shorter object\nlength\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE\n [37]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [49] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE\n\n\nThat helps a bit, but we diverge around column 29.\n\ncbind(n1[28:51], n2_2[28:51])\n\n      [,1]                                                                                                \n [1,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested\"              \n [2,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/birthhospital\"\n [3,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/afterhome\"    \n [4,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no\"           \n [5,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused\"      \n [6,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/donotknow\"    \n [7,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested\"               \n [8,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/birthhospital\" \n [9,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/afterhome\"     \n[10,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no\"            \n[11,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused\"       \n[12,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow\"     \n[13,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies\"       \n[14,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection\"   \n[15,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma\"          \n[16,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory\"     \n[17,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal\"\n[18,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc\"              \n[19,] \"group_homevisitquestionnaires/group_health/group_general_health/child_injury_times\"                \n[20,] \"group_homevisitquestionnaires/group_health/group_general_health/comment_injury\"                    \n[21,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_general_health\"           \n[22,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"                   \n[23,] \"group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care\"                           \n[24,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"                       \n      [,2]                                                                                                                                  \n [1,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested\"                                                \n [2,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__in_the_bi\"                                 \n [3,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__after_goi\"                                 \n [4,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no\"                                             \n [5,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused\"                                        \n [6,] \"group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/don_t_know\"                                     \n [7,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested\"                                                 \n [8,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__in_the_bi\"                                  \n [9,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__after_goi\"                                  \n[10,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no\"                                              \n[11,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused\"                                         \n[12,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/don_t_know\"                                      \n[13,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/child_allergies_infections_ill_header\"\n[14,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies\"                            \n[15,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection\"                        \n[16,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma\"                               \n[17,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory\"                          \n[18,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal\"                     \n[19,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc\"                                                \n[20,] \"group_homevisitquestionnaires/group_health/group_general_health/child_injury_times\"                                                  \n[21,] \"group_homevisitquestionnaires/group_health/group_general_health/comment_injury\"                                                      \n[22,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_general_health\"                                             \n[23,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"                                                     \n[24,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"                                                         \n\n\nThese question labels looks very similar. There are just some minor changes in the variable names. n2_2 has an extra variable in column 40.\n\nn2_3 &lt;- n2_2[-40]\n\nThen, we can rename some of the columns in n2_3 using corresponding names from n1.\n\nn2_3 |&gt; stringr::str_replace(\"yes__in_the_bi\", \"birthhospital\") |&gt; stringr::str_replace(\"yes__after_goi\", \"afterhome\") |&gt; stringr::str_replace(\"don_t_know\", \"donotknow\") -&gt; n2_4\n\nn1 == n2_4\n\nWarning in n1 == n2_4: longer object length is not a multiple of shorter object\nlength\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE\n[229]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE\n\n\n\ncbind(n1[39:51], n2_4[39:51])\n\n      [,1]                                                                                                \n [1,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow\"     \n [2,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies\"       \n [3,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection\"   \n [4,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma\"          \n [5,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory\"     \n [6,] \"group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal\"\n [7,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc\"              \n [8,] \"group_homevisitquestionnaires/group_health/group_general_health/child_injury_times\"                \n [9,] \"group_homevisitquestionnaires/group_health/group_general_health/comment_injury\"                    \n[10,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_general_health\"           \n[11,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"                   \n[12,] \"group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care\"                           \n[13,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"                       \n      [,2]                                                                                                             \n [1,] \"group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow\"                  \n [2,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies\"       \n [3,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection\"   \n [4,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma\"          \n [5,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory\"     \n [6,] \"group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal\"\n [7,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc\"                           \n [8,] \"group_homevisitquestionnaires/group_health/group_general_health/child_injury_times\"                             \n [9,] \"group_homevisitquestionnaires/group_health/group_general_health/comment_injury\"                                 \n[10,] \"group_homevisitquestionnaires/group_health/group_general_health/comments_general_health\"                        \n[11,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"                                \n[12,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"                                    \n[13,] \"group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking\"                                      \n\n\nn1 has a group_medicalprof label from allergies through gastrointestinal; n2_4 has child_allergies_infections_ill for the same questions.\n\nn2_4 |&gt; stringr::str_replace(\"child_allergies_infections_ill\", \"group_medicalprof\") -&gt; n2_5\nn1 == n2_5\n\nWarning in n1 == n2_5: longer object length is not a multiple of shorter object\nlength\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE\n[229]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE\n\n\n\ncbind(n1[49:60], n2_5[49:60])\n\n      [,1]                                                                             \n [1,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"\n [2,] \"group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care\"        \n [3,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"    \n [4,] \"group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking\"      \n [5,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1\"   \n [6,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2\"   \n [7,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3\"   \n [8,] \"group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now\"       \n [9,] \"group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount\"\n[10,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_house\"         \n[11,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_car\"           \n[12,] \"group_homevisitquestionnaires/group_health/group_smoking/comments_smoking\"      \n      [,2]                                                                             \n [1,] \"group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal\"\n [2,] \"group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal\"    \n [3,] \"group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking\"      \n [4,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1\"   \n [5,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2\"   \n [6,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3\"   \n [7,] \"group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now\"       \n [8,] \"group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount\"\n [9,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_house\"         \n[10,] \"group_homevisitquestionnaires/group_health/group_smoking/smoking_car\"           \n[11,] \"group_homevisitquestionnaires/group_health/group_smoking/comments_smoking\"      \n[12,] \"group_homevisitquestionnaires/group_health/group_drinking/pregnant_drinking\"    \n\n\nIt looks like these could be reconciled by deleting prenatal_care from n1.\n\nn1_2 &lt;- n1[-50]\nn1_2 == n2_5\n\nWarning in n1_2 == n2_5: longer object length is not a multiple of shorter\nobject length\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE\n\n\n\ncbind(n1_2[64:75], n2_5[64:75])\n\n      [,1]                                                                                                          \n [1,] \"group_homevisitquestionnaires/group_health/group_drinking/comments_drinking\"                                 \n [2,] \"group_homevisitquestionnaires/group_health/group_phq4/note_phq4\"                                             \n [3,] \"group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_nervous\"                           \n [4,] \"group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_worrying\"                          \n [5,] \"group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_littleinterest\"                    \n [6,] \"group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_down\"                              \n [7,] \"group_homevisitquestionnaires/group_health/group_phq4/comments_phq4\"                                         \n [8,] \"group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions1\"              \n [9,] \"group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions2\"              \n[10,] \"group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_unfamiliarperson\"\n[11,] \"group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_troubletask\"     \n[12,] \"group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_companyofchild\"  \n      [,2]                                                                                                       \n [1,] \"group_homevisitquestionnaires/group_health/group_drinking/comments_drinking\"                              \n [2,] \"group_homevisitquestionnaires/group_health/group_phq4/Experimenter_These_stions_are_about_you\"            \n [3,] \"group_homevisitquestionnaires/group_health/group_phq4/comments_phq4\"                                      \n [4,] \"group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructor_rothbart\"                           \n [5,] \"group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructions_rothbart2\"                        \n [6,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/rothbart_questions_header\"                \n [7,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_approached_by_a_ld_cling_to_a_parent\"\n [8,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_having_trouble_get_easily_irritated\"\n [9,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_a_familiar_chil_company_of_the_child\"\n[10,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_offered_a_choic_uickly_and_go_for_it\"\n[11,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/During_daily_or_even_eing_quietly_sung_to\"\n[12,] \"group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_playing_outdoo_and_excitement_of_it\"\n\n\nIt looks like the phq4 is not in n2_5.\nLet’s check.\n\nn2_5 |&gt; stringr::str_detect(\"phq4\") |&gt; sum()\n\n[1] 2\n\n\nYes, there are only two PHQ4-related questions in df334099.\n\ndf334099 |&gt; names() |&gt; stringr::str_detect(\"phq4\") |&gt; sum()\n\n[1] 2\n\n\nThis path of reconciliation does not appear fruitful.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Home visit: Create aggregates</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#make-aggregate-files",
    "href": "home-visit-aggregate.html#make-aggregate-files",
    "title": "Home visit: Create aggregates",
    "section": "Make aggregate files",
    "text": "Make aggregate files\n\nnon-MB-CDI files with \\(n=288\\) columns\ntar_target(files_288_cols, \n  stringr::str_detect(home_visit_remove_identifiers, \n                      \"2[3458]_non_mbcdi.*_deidentified\\\\.csv\")\n)\n\ntar_target(df_merge_288_cols,\n    make_aggregate_data_file(\n        home_visit_remove_identifiers[files_288_cols])\n)\n\n\nnon-MB-CDI files with \\(n=287\\) columns\ntar_target(files_287_cols_1, \n  stringr::str_detect(home_visit_remove_identifiers, \n          \"2[69]_non_mbcdi.*_deidentified\\\\.csv\")),\ntar_target(files_287_cols_2, \n  stringr::str_detect(home_visit_remove_identifiers, \n          \"(740627|740630|740631)_non.*_deidentified\\\\.csv\")),\ntar_target(df_merge_287_cols_1,\n  make_aggregate_data_file(\n          home_visit_remove_identifiers[files_287_cols_1])),\ntar_target(df_merge_287_cols_2,\n  make_aggregate_data_file(\n          home_visit_remove_identifiers[files_287_cols_2])),\n\n\nExamine groups with \\(n=287\\) cols\nWe focus on the starting column where the column names diverge, column 92.\n\ntargets::tar_load(df_merge_287_cols_1, store=\"../_targets\")\ntargets::tar_load(df_merge_287_cols_2, store=\"../_targets\")\nnames(df_merge_287_cols_1)[92]\n\n[1] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_feeding_nutrition.instructions_feeding\"\n\nnames(df_merge_287_cols_2)[92]\n\n[1] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_locomotor_milestones.group_health.group_feeding_nutrition.instructions_feeding\"\n\n\nThere is an erroneous group_locomotor_milestones. in the df_merge_287_cols_2 column name.\nA bit of sleuthing determines that this group_locomotor_milestones. label is characteristic of columns 92 to 273.\n\nnames(df_merge_287_cols_2)[92:273] |&gt; stringr::str_detect(pattern = \"group_locomotor_milestones\")\n\n  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[181] TRUE TRUE\n\n\nThe following should fix this.\n\nold_names &lt;- names(df_merge_287_cols_2)\nnew_names &lt;- old_names\nnew_names[92:273] &lt;-\n  stringr::str_remove(new_names[92:273], \"group_locomotor_milestones\\\\.\")\nnames(df_merge_287_cols_2) &lt;- new_names\n\n\nnames(df_merge_287_cols_2) == names(df_merge_287_cols_1)\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE\n[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE\n[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nWe have a second problem with columns from 114 to 210.\n\nrbind(names(df_merge_287_cols_1)[113:115], names(df_merge_287_cols_2)[113:115])\n\n     [,1]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow\"\n     [,2]                                                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"      \n     [,3]                                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection\"\n\n\nOne of the problems has to do with column 114. There is a question ending doctor_told_you in names(df_merge_287_cols_1) but not in names(df_merge_287_cols_2).\n\nnames(df_merge_287_cols_1) |&gt; stringr::str_detect(pattern = \"doctor_told_you\") |&gt; sum()\n\n[1] 1\n\nnames(df_merge_287_cols_2) |&gt; stringr::str_detect(pattern = \"doctor_told_you\") |&gt; sum()\n\n[1] 0\n\n\nDeleting this question would create additional misalignments and further problems. We cannot proceed without further discussion with our team.\nFor now, let’s generate an array with all of the remaining differences in column names.\n\nnames_differ &lt;- (names(df_merge_287_cols_2) != names(df_merge_287_cols_1))\nsum(names_differ)\n\n[1] 103\n\n\n\nrbind(names(df_merge_287_cols_1)[names_differ], names(df_merge_287_cols_2)[names_differ])\n\n     [,1]                                                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"      \n     [,2]                                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection\"\n     [,3]                                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma\"       \n     [,4]                                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory\"\n     [,5]                                                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal\"\n     [,6]                                                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc\"                           \n     [,7]                                                                                                               \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times\"  \n     [,8]                                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury\"    \n     [,9]                                                                                                                  \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury\"         \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health\"\n     [,10]                                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal\"        \n     [,11]                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care\"        \n     [,12]                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal\"\n     [,13]                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking\"  \n     [,14]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1\"\n     [,15]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2\"\n     [,16]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3\"\n     [,17]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now\"    \n     [,18]                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now\"       \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount\"\n     [,19]                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house\"         \n     [,20]                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car\"  \n     [,21]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking\"\n     [,22]                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking\"\n     [,23]                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1\"\n     [,24]                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2\"\n     [,25]                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3\"\n     [,26]                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking\"   \n     [,27]                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4\"            \n     [,28]                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4\"        \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4\"\n     [,29]                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous\"     \n     [,30]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying\"\n     [,31]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying\"      \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest\"\n     [,32]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down\"          \n     [,33]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4\"\n     [,34]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1\"\n     [,35]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2\"\n     [,36]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2\"                        \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3\"\n     [,37]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson\"\n     [,38]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask\"     \n     [,39]                                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild\"\n     [,40]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities\"\n     [,41]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung\"     \n     [,42]                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung\"    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors\"\n     [,43]                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10\"     \n     [,44]                                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10\"       \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks\"\n     [,45]                                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults\"\n     [,46]                                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair\"        \n     [,47]                                                                                                                  \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy\"\n     [,48]                                                                                                                    \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged\"\n     [,49]                                                                                                                           \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged\"       \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity\"\n     [,50]                                                                                                                           \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly\"        \n     [,51]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention\"\n     [,52]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags\"         \n     [,53]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags\"            \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment\"\n     [,54]                                                                                                                        \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy\"          \n     [,55]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy\"  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles\"\n     [,56]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active\"  \n     [,57]                                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden\"\n     [,58]                                                                                                                    \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful\"\n     [,59]                                                                                                                    \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue\"    \n     [,60]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse\"\n     [,61]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent\"\n     [,62]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum\"\n     [,63]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently\"\n     [,64]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile\"  \n     [,65]                                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold\"       \n     [,66]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold\"         \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult\"\n     [,67]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful\"      \n     [,68]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful\"      \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace\"\n     [,69]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3\" \n     [,70]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed\"\n     [,71]                                                                                                                     \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother\"    \n     [,72]                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother\"      \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople\"\n     [,73]                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart\"                               \n     [,74]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1\"\n     [,75]                                                                                             \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology\"       \n     [,76]                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv\"\n     [,77]                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd\"\n     [,78]                                                                                               \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer\"\n     [,79]                                                                                               \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad\"    \n     [,80]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad\"           \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame\"\n     [,81]                                                                                                      \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame\"      \n     [,82]                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv\"      \n     [,83]                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how\"             \n     [,84]                                                                                           \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how\"              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd\"\n     [,85]                                                                                           \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how\"             \n     [,86]                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how\"                  \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer\"\n     [,87]                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how\"             \n     [,88]                                                                                            \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how\"         \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad\"\n     [,89]                                                                                            \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how\"             \n     [,90]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how\"                    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational\"\n     [,91]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how\"             \n     [,92]                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how\"           \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame\"\n     [,93]                                                                                                 \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how\"             \n     [,94]                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how\"   \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day\"\n     [,95]                                                                                            \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day\"     \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day\"\n     [,96]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day\"                    \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use\"\n     [,97]                                                                                                                \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale\"       \n     [,98]                                                                                                  \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day\"\n     [,99]                                                                                            \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel1\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1\"\n     [,100]                                                                                           \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel2\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2\"\n     [,101]                                                                                           \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel3\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3\"\n     [,102]                                                                                            \n[1,] \"group_combinedquestionnaires.group_databrary.acknowledge_databrary\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.acknowledge_databrary\"\n     [,103]                                                                                       \n[1,] \"group_combinedquestionnaires.group_databrary.note_saveasdraft\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_saveasdraft\"\n\n\nVisual inspection suggests that these are similar with the following deviations:\n\nAs noted, df_merge_287_cols_1 has a column ending doctor_told_you that is not present in df_merge_287_cols_2.\ndf_merge_287_cols_2 has a column ending technology_use_scale that is not present in the df_merge_287_cols_1\nThere are a set of fields in group_databrary that do not align exactly. We will almost certainly delete these, so the misalignment is not a huge problem.\n\nAs an exploration, let’s see if we can reconcile these by deleting the non-aligning columns.\n\ndf1 &lt;- df_merge_287_cols_1\ndf2 &lt;- df_merge_287_cols_2\n\ndf1 &lt;- df1 %&gt;%\n  dplyr::select(., -contains('doctor_told_you'))\n\ndf2 &lt;- df2 %&gt;%\n  dplyr::select(., -contains('technology_use_scale'))\n\nold_names &lt;- names(df2)\nnew_names &lt;- old_names\nnew_names[92:273] &lt;- stringr::str_remove(new_names[92:273], \"group_locomotor_milestones\\\\.\")\nnames(df2) &lt;- new_names\n\nnames(df1) == names(df2)\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE\n[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE\n[277] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\nThis looks promising.\n\nrbind(names(df1)[263], names(df2)[263])\n\n     [,1]                                                                                                   \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day\"\n\n\nThis is easily fixed.\n\nnames(df1)[263] &lt;- names(df2)[263]\n\n\nrbind(names(df1)[273:275], names(df2)[273:275])\n\n     [,1]                                                                                             \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel1\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1\"\n     [,2]                                                                                             \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel2\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2\"\n     [,3]                                                                                             \n[1,] \"group_combinedquestionnaires.group_databrary.note_databraryspiel3\"                              \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3\"\n\n\nThe last misalignments relate to Databrary fields.\n\ndf1 &lt;- df1 %&gt;%\n  dplyr::select(., -contains('group_databrary'))\n\ndf2 &lt;- df2 %&gt;%\n  dplyr::select(., -contains('group_databrary'))\n\nnames(df1) == names(df2)\n\n  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[181] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[196] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[211] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[226] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[241] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[271] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\nSuccess!",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Home visit: Create aggregates</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#combining-the-two-groups-of-datasets",
    "href": "home-visit-aggregate.html#combining-the-two-groups-of-datasets",
    "title": "Home visit: Create aggregates",
    "section": "Combining the two groups of datasets",
    "text": "Combining the two groups of datasets\nNow, let’s go back to the data frame with 288 cols and see if we can bring these into alignment.\n\ntargets::tar_load(df_merge_288_cols, store=\"../_targets\")\n\ndf3 &lt;- df_merge_288_cols\n\ndf3 &lt;- df3 %&gt;%\n  dplyr::select(., -contains('group_databrary'))\n\nc(dim(df1), dim(df2), dim(df3))\n\n[1] 236 281  56 281 481 283\n\nnames(df1) == names(df3)\n\nWarning in names(df1) == names(df3): longer object length is not a multiple of\nshorter object length\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n\nrbind(names(df1)[114:115], names(df3)[114:115])\n\n     [,1]                                                                                                                                         \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"      \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you\"\n     [,2]                                                                                                                                       \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies\"    \n\n\nOnce again, there appears to be a problem with the ‘doctor_told_you’ field. We’ll delete it to see if this fixes one of the problems.\n\ndf3 &lt;- df3 %&gt;%\n  dplyr::select(., -contains('doctor_told_you'))\n\nnames(df1) == names(df3)\n\nWarning in names(df1) == names(df3): longer object length is not a multiple of\nshorter object length\n\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[205]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[277] FALSE FALSE FALSE FALSE FALSE FALSE\n\n\nWe still have misalignments at column 210.\n\nrbind(names(df1)[210:213], names(df3)[210:213])\n\n     [,1]                                                                                                          \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals\"               \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale\"\n     [,2]                                                                                              \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals\"   \n     [,3]                                                                                              \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime\" \n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime\"\n     [,4]                                                                                                    \n[1,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.transportation\"\n[2,] \"group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime\"       \n\n\nThe ’technology_use_scale` exists in one but not the other.\n\ndf3 &lt;- df3 %&gt;%\n  dplyr::select(., -contains('technology_use_scale'))\n\nrbind(dim(df1), dim(df3))\n\n     [,1] [,2]\n[1,]  236  281\n[2,]  481  281\n\nnames(df1) == names(df3)\n\n  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE\n[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[277]  TRUE  TRUE  TRUE  TRUE  TRUE\n\n\n\nFuture versions of the workflow will need to handle this more elegantly.\nOption 1: Fix the underlying forms.\nOption 2: Add the ‘missing’ columns as NA in post-processing.\n\nFor now, I’m going to create functions that align these data frames. These are incorporated into R/functions.R so we do not source them again here.\n\nremove_technology_use_scale &lt;- function(df) {\n  dplyr::select(df, -contains('technology_use_scale'))\n}\n\nremove_doctor_told_you &lt;- function(df) {\n  dplyr::select(df, -contains('doctor_told_you'))\n}\n\nremove_databrary_fields &lt;- function(df) {\n  dplyr::select(df, -contains('group_databrary'))\n}\n\nreconcile_typicalday &lt;- function(df) {\n  names(df) &lt;- stringr::str_replace_all(names(df), 'typicalday', 'typical_day')\n  df\n}\n\nremove_permissive_locomotor_milestones_label &lt;- function(df) {\n  old_names &lt;- names(df)\n  new_names &lt;- old_names\n  contains_locomotor &lt;-\n    stringr::str_detect(new_names, pattern = \"locomotor_milestones.*health|division|rothbart|mediause|pets|typical|acknowledge\")\n  new_names[contains_locomotor] &lt;-\n    stringr::str_remove(new_names[contains_locomotor], \"group_locomotor_milestones\\\\.\")\n  names(df) &lt;- new_names\n  df\n}\n\nremove_X_meta_cols &lt;- function(df) {\n  dplyr::select(df, -contains(\"X_\"), -contains(\"meta.instanceID\"))\n}\n\nremove_redundant_group_labels &lt;- function(df) {\n  names(df) &lt;- stringr::str_remove_all(names(df), 'group_homevisitquestionnaires\\\\.')\n  names(df) &lt;- stringr::str_remove_all(names(df), 'group_combinedquestionnaires\\\\.')\n  df\n}\n\nclean_dfs &lt;- function(df) {\n  df %&gt;%\n    reconcile_typicalday() %&gt;%\n    remove_technology_use_scale() %&gt;%\n    remove_doctor_told_you() %&gt;%\n    remove_permissive_locomotor_milestones_label() %&gt;%\n    remove_databrary_fields() %&gt;%\n    remove_X_meta_cols() %&gt;%\n    remove_redundant_group_labels()\n}\n\nLet’s test this workflow with the unmodified files.\n\ntargets::tar_load(df_merge_287_cols_1, store=\"../_targets\")\ntargets::tar_load(df_merge_287_cols_2, store=\"../_targets\")\ntargets::tar_load(df_merge_288_cols, store=\"../_targets\")\n\ndf1m &lt;- clean_dfs(df_merge_287_cols_1)\ndim(df1m)\n\n[1] 236 272\n\ndf2m &lt;- clean_dfs(df_merge_287_cols_2)\ndim(df2m)\n\n[1]  56 272\n\ndf3m &lt;- clean_dfs(df_merge_288_cols)\ndim(df3m)\n\n[1] 481 272\n\n(names(df1m) == names(df2m)) |&gt; sum()\n\n[1] 272\n\n(names(df1m) == names(df3m)) |&gt; sum()\n\n[1] 272\n\n\n\nMerging files at last\n\ndf &lt;- rbind(df1m, df2m, df3m)\n\n\nAs of 2022-12-15, the above has now been incorporated into R/functions.R and into the _targets.R workflow.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Home visit: Create aggregates</span>"
    ]
  },
  {
    "objectID": "home-visit-aggregate.html#merge-with-databrary-info",
    "href": "home-visit-aggregate.html#merge-with-databrary-info",
    "title": "Home visit: Create aggregates",
    "section": "Merge with Databrary info",
    "text": "Merge with Databrary info\n\n\n\n\n\n\nWarning\n\n\n\nThis code is not working as of 2024-09-11.\n\n\nFor each session (row) in the merged data frame, we pull data from the associated Databrary volume and session. These data are merged with that drawn from KBT.\ntar_target(\n  home_visit_w_databrary_df,\n  add_databrary_info_to_home_visit_df(home_visit_df)\n)\nThe add_databrary_info_to_home_visit() function in R/functions.R does most of the work.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Home visit: Create aggregates</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html",
    "href": "home-visit-clean.html",
    "title": "Home visit: Clean variables",
    "section": "",
    "text": "Background\nThis page describes how the aggregate files are cleaned, measure by measure.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#load-data-file",
    "href": "home-visit-clean.html#load-data-file",
    "title": "Home visit: Clean variables",
    "section": "Load data file",
    "text": "Load data file\n\nif (!('home_visit_df' %in% ls())) {\n  targets::tar_load(home_visit_df, store=\"../_targets\")\n}",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#remove-metadata-variables",
    "href": "home-visit-clean.html#remove-metadata-variables",
    "title": "Home visit: Clean variables",
    "section": "Remove metadata variables",
    "text": "Remove metadata variables\n\nmetadata_cols &lt;- stringr::str_detect(names(home_visit_df), \"note|instructions|acknowledge\")\n\nno_metadata_cols_index &lt;- seq_along(home_visit_df)[!metadata_cols]\n\nhome_visit_df_trim &lt;- home_visit_df |&gt;\n  dplyr::select(all_of(no_metadata_cols_index)) |&gt;\n  dplyr::select(-start,\n                -end)\n\nThe untrimmed data frame had 272 variables. The trimmed data frame has 216 variables.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#language-variables",
    "href": "home-visit-clean.html#language-variables",
    "title": "Home visit: Clean variables",
    "section": "Language variables",
    "text": "Language variables\nThe raw file contains separate variables indicating whether the child is exposed to English and Spanish at home. We leave those for now.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#locomotion-variables",
    "href": "home-visit-clean.html#locomotion-variables",
    "title": "Home visit: Clean variables",
    "section": "Locomotion variables",
    "text": "Locomotion variables\n\nloco_admin_cols &lt;- names(home_visit_df_trim) %in% c(\n  \"locomotor_milestones.date_format\",\n  \"locomotor_milestones.calc_5mo\",\n  \"locomotor_milestones.calc_6mo\",\n  \"locomotor_milestones.calc_7mo\",\n  \"locomotor_milestones.calc_8mo\",\n  \"locomotor_milestones.calc_9mo\",\n  \"locomotor_milestones.calc_10mo\",\n  \"locomotor_milestones.calc_11mo\",\n  \"locomotor_milestones.calc_12mo\",\n  \"locomotor_milestones.calc_13mo\",\n  \"locomotor_milestones.calc_14mo\",\n  \"locomotor_milestones.calc_15mo\",\n  \"locomotor_milestones.calc_16mo\",\n  \"locomotor_milestones.who_walk.walk_onset_check\",\n  \"locomotor_milestones.holiday1.holiday_jan\",\n  \"locomotor_milestones.holiday1.holiday_feb\",\n  \"locomotor_milestones.holiday1.holiday_marchapril\",\n  \"locomotor_milestones.holiday1.holiday_may\",\n  \"locomotor_milestones.holiday1.holiday_june\",\n  \"locomotor_milestones.holiday1.holiday_july\",\n  \"locomotor_milestones.holiday1.holiday_sep\",\n  \"locomotor_milestones.holiday1.holiday_oct\",\n  \"locomotor_milestones.holiday1.holiday_nov\",\n  \"locomotor_milestones.holiday1.holiday_dec\",\n  \"locomotor_milestones.holiday1.memorable_events\",\n  \"locomotor_milestones.k_walk.k_walk_onset_check\",\n  \"locomotor_milestones.crawl_onset.crawl_onset_check\",\n  \"locomotor_milestones.holiday2.holiday_jan2\",\n  \"locomotor_milestones.holiday2.holiday_feb2\",\n  \"locomotor_milestones.holiday2.holiday_marchapril2\",\n  \"locomotor_milestones.holiday2.holiday_may2\",\n  \"locomotor_milestones.holiday2.holiday_june2\",\n  \"locomotor_milestones.holiday2.holiday_july2\",\n  \"locomotor_milestones.holiday2.holiday_sep2\",\n  \"locomotor_milestones.holiday2.holiday_oct2\",\n  \"locomotor_milestones.holiday2.holiday_nov2\",\n  \"locomotor_milestones.holiday2.holiday_dec2\",\n  \"locomotor_milestones.holiday2.memorable_events2\"\n)\n\nloco_admin_index &lt;- seq_along(home_visit_df_trim)[!loco_admin_cols]\n\nhome_visit_df_loco &lt;- home_visit_df_trim |&gt;\n  dplyr::select(all_of(loco_admin_index)) |&gt;\n  dplyr::rename(\n    walk_mos_who = locomotor_milestones.who_walk.who_walk_onset_mo,\n    walk_mos_kea = locomotor_milestones.k_walk.k_walk_onset_mo,\n    crawl_mos = locomotor_milestones.crawl_onset.crawl_onset_mo,\n    walk_onset_date_kea = locomotor_milestones.k_walk.k_walk_onset_date,\n    walk_onset_date_who = locomotor_milestones.who_walk.who_walk_onset_date,\n    walk_onset_comments_who = locomotor_milestones.who_walk.comments_who_walk_onset,\n    walk_onset_comments_kea = locomotor_milestones.k_walk.comments_k_walk_onset,\n    crawl_onset_date = locomotor_milestones.crawl_onset.crawl_onset_date,\n    crawl_onset_comments = locomotor_milestones.crawl_onset.comments_crawl_onset\n  ) |&gt;\n  dplyr::mutate(\n    walk_mos_who = as.numeric(walk_mos_who),\n    walk_mos_kea = as.numeric(walk_mos_kea),\n    crawl_mos = as.numeric(crawl_mos)\n  )",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#health-variables",
    "href": "home-visit-clean.html#health-variables",
    "title": "Home visit: Clean variables",
    "section": "Health variables",
    "text": "Health variables\n\nhealth_admin_cols &lt;- names(home_visit_df_loco) %in% c('instructions',\n                                                      'note',\n                                                      'doctor_told_you')\n\nhealth_admin_index &lt;- seq_along(home_visit_df_loco)[!health_admin_cols]\n\nhome_visit_df_health &lt;- home_visit_df_loco |&gt;\n   dplyr::select(all_of(health_admin_index)) |&gt;\n  dplyr::rename(\n    feeding_breastfeed = health.feeding_nutrition.breastfeed,\n    feeding_solidfood_age = health.feeding_nutrition.solidfood_age,\n    feeding_comments = health.feeding_nutrition.comments_feeding,\n    child_sleeping_position = health.general_health.child_sleeping_position,\n    child_health = health.general_health.child_health,\n    child_recent_vaccination = health.general_health.child_vaccination,\n    child_medical_specialist = health.general_health.child_medical_specialist,\n    child_medical_specialist_comments = health.general_health.comments_child_medical_special,\n    child_hearing_tested = health.general_health.child_hearing_tested,\n    child_vision_tested = health.general_health.child_vision_tested,\n    child_allergies = health.general_health.child_allergies_infections_ill.allergies,\n    child_ear_infection = health.general_health.child_allergies_infections_ill.ear_infection,\n    child_asthma = health.general_health.child_allergies_infections_ill.asthma,\n    child_respiratory = health.general_health.child_allergies_infections_ill.respiratory,\n    child_gastrointestinal = health.general_health.child_allergies_infections_ill.gastrointestinal,\n    child_allergy_illness_comments = health.general_health.comments_allergy_etc,\n    child_injury_times = health.general_health.child_injury_times,\n    child_injury_comments = health.general_health.comment_injury,\n    child_health_comments = health.general_health.comments_general_health,\n    mom_prenatal_care = health.prenatal.prenatal_care,\n    mom_prenatal_care_comments = health.prenatal.comments_prenatal,\n    mom_pregnant_smoking = health.smoking.pregnant_smoking,\n    mom_pregnant_smoking_trimester_1 = health.smoking.smoking_trimester_1,\n    mom_pregnant_smoking_trimester_2 = health.smoking.smoking_trimester_2,\n    mom_pregnant_smoking_trimester_3 = health.smoking.smoking_trimester_3,\n    mom_smoking_now = health.smoking.mom_smoking_now,\n    mom_smoking_now_amount = health.smoking.mom_smoking_now_amount,\n    smoking_house = health.smoking.smoking_house,\n    smoking_car = health.smoking.smoking_car,\n    smoking_comments = health.smoking.comments_smoking,\n    mom_pregnant_drinking = health.drinking.pregnant_drinking,\n    mom_drinking_trimester_1 = health.drinking.drinking_trimester_1,\n    mom_drinking_trimester_2 = health.drinking.drinking_trimester_2,\n    mom_drinking_trimester_3 = health.drinking.drinking_trimester_3,\n    mom_drinking_comments = health.drinking.comments_drinking,\n    phq4_nervous = health.phq4.phq4_nervous,\n    phq4_worrying = health.phq4.phq4_worrying,\n    phq4_littleinterest = health.phq4.phq4_littleinterest,\n    phq4_down = health.phq4.phq4_down,\n    phq4_comments = health.phq4.comments_phq4\n  ) |&gt;\n  # Remove duplicating variables\n  dplyr::select(-health.general_health.child_hearing_tested.birthhospital,\n                -health.general_health.child_hearing_tested.afterhome,\n                -health.general_health.child_hearing_tested.no,\n                -health.general_health.child_hearing_tested.refused,\n                -health.general_health.child_hearing_tested.donotknow,\n                -health.general_health.child_vision_tested.birthhospital,\n                -health.general_health.child_vision_tested.afterhome,\n                -health.general_health.child_vision_tested.no,\n                -health.general_health.child_vision_tested.refused,\n                -health.general_health.child_vision_tested.donotknow)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#rothbart-ecbq",
    "href": "home-visit-clean.html#rothbart-ecbq",
    "title": "Home visit: Clean variables",
    "section": "Rothbart ECBQ",
    "text": "Rothbart ECBQ\n\nrothbart_vars &lt;- stringr::str_detect(names(home_visit_df_health), 'rothbart')\n\nnew_rothbart_var_names &lt;- stringr::str_replace(names(home_visit_df_health)[rothbart_vars], \"rothbart\\\\.rothbartquestions\\\\.\", \"\")\n\nnames(home_visit_df_health)[rothbart_vars] &lt;- new_rothbart_var_names\n\nhome_visit_ecbq &lt;- home_visit_df_health |&gt;\n  dplyr::rename(comments_rothbart = rothbart.comments_rothbart)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#media-use",
    "href": "home-visit-clean.html#media-use",
    "title": "Home visit: Clean variables",
    "section": "Media use",
    "text": "Media use\n\nhome_visit_mediause &lt;- home_visit_ecbq |&gt;\n  dplyr::rename(mediause_home_technology = mediause.home_technology,\n                mediause_technology_child_tv = mediause.technology_child_tv,\n                mediause_technology_child_computer = mediause.technology_child_computer,\n                mediause_technology_child_ipad = mediause.technology_child_ipad,\n                mediause_technology_child_dvd = mediause.technology_child_dvd,\n                mediause_technology_child_educational = mediause.technology_child_educational,\n                mediause_technology_child_videogame = mediause.technology_child_videogame,\n                mediause_tv_how = mediause.tv_how,\n                mediause_dvd_how = mediause.dvd_how,\n                mediause_computer_how = mediause.computer_how,\n                mediause_ipad_how = mediause.ipad_how,\n                mediause_educational_how = mediause.educational_how,\n                mediause_videogame_how = mediause.videogame_how,\n                mediause_tv_hrs_per_day = mediause.tv_hours_per_day,\n                mediause_techuse_meals = mediause.techuse.meals,\n                mediause_techuse_playtime = mediause.techuse.playtime,\n                mediause_techuse_bedtime = mediause.techuse.bedtime,\n                mediause_techuse_transportation = mediause.techuse.transportation,\n                mediause_comments = mediause.comments_technology)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#pets",
    "href": "home-visit-clean.html#pets",
    "title": "Home visit: Clean variables",
    "section": "Pets",
    "text": "Pets\n\nhome_visit_pets &lt;- home_visit_mediause |&gt;\n  dplyr::rename(pets_at_home = pets.pets_at_home,\n                pets_types_number = pets.pets_types_number,\n                pets_indoors_outdoors = pets.pets_indoors_outdoors,\n                comments_pets = pets.comments_pets)\n\nunique(home_visit_pets$pets_types_number) |&gt; head(20)\n\n [1] NA                                             \n [2] \"One dog\"                                      \n [3] \"1 dog\"                                        \n [4] \"Two Dogs\"                                     \n [5] \"two dogs\"                                     \n [6] \"Sharky, a dog\"                                \n [7] \"3 dogs\"                                       \n [8] \"2 dogs, 5 chickens\"                           \n [9] \"2 cats\"                                       \n[10] \"1 cat 1 dog German shepherd and Anatolian mix\"\n[11] \"1 cat. Occassionaly family dogsit as well.\"   \n[12] \"2 dogs, 2 hermit crabs\"                       \n[13] \"Dogs 2 schitzu\"                               \n[14] \"2 Cats\"                                       \n[15] \"1 Dog\"                                        \n[16] \"2 dogs 1 cat\"                                 \n[17] \"1 fish\"                                       \n[18] \"3 cats\"                                       \n[19] \"2 cats, 1 rabbit\"                             \n[20] \"2 dogs, 1 kitty, 1 bird\"",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#division-of-labor",
    "href": "home-visit-clean.html#division-of-labor",
    "title": "Home visit: Clean variables",
    "section": "Division of labor",
    "text": "Division of labor\n\nhome_visit_labor &lt;- home_visit_pets\nnames(home_visit_labor) &lt;- stringr::str_remove(names(home_visit_labor), \"division_labor\\\\.\") |&gt;\n  stringr::str_remove(\"laundry\\\\.\") |&gt;\n  stringr::str_remove(\"cleaning\\\\.\") |&gt;\n  stringr::str_remove(\"dishwashing\\\\.\") |&gt;\n  stringr::str_remove(\"cooking\\\\.\") |&gt;\n  stringr::str_remove(\"feeding\\\\.\") |&gt;\n  stringr::str_remove(\"droppick\\\\.\") |&gt;\n  stringr::str_remove(\"bed\\\\.\") |&gt;\n  stringr::str_remove(\"disciplining\\\\.\")\n\nhome_visit_labor &lt;- home_visit_labor |&gt;\n  dplyr::select(-instruction_dishes)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#typical-day",
    "href": "home-visit-clean.html#typical-day",
    "title": "Home visit: Clean variables",
    "section": "Typical day",
    "text": "Typical day\n\nhome_visit_clean &lt;- home_visit_labor\nnames(home_visit_clean) &lt;- stringr::str_remove(names(home_visit_clean), \"typical_day\\\\.\")\nnames(home_visit_clean)\n\n  [1] \"participant_id\"                          \n  [2] \"date_today\"                              \n  [3] \"site_id\"                                 \n  [4] \"subject_number\"                          \n  [5] \"test_date\"                               \n  [6] \"child_sex\"                               \n  [7] \"age_group\"                               \n  [8] \"language_child\"                          \n  [9] \"language_child.english\"                  \n [10] \"language_child.spanish\"                  \n [11] \"language_instruction\"                    \n [12] \"walk_onset_date_who\"                     \n [13] \"walk_mos_who\"                            \n [14] \"walk_onset_comments_who\"                 \n [15] \"walk_onset_date_kea\"                     \n [16] \"walk_mos_kea\"                            \n [17] \"walk_onset_comments_kea\"                 \n [18] \"crawl_onset_date\"                        \n [19] \"crawl_mos\"                               \n [20] \"crawl_onset_comments\"                    \n [21] \"feeding_breastfeed\"                      \n [22] \"feeding_solidfood_age\"                   \n [23] \"feeding_comments\"                        \n [24] \"child_sleeping_position\"                 \n [25] \"child_health\"                            \n [26] \"child_recent_vaccination\"                \n [27] \"child_medical_specialist\"                \n [28] \"child_medical_specialist_comments\"       \n [29] \"child_hearing_tested\"                    \n [30] \"child_vision_tested\"                     \n [31] \"child_allergies\"                         \n [32] \"child_ear_infection\"                     \n [33] \"child_asthma\"                            \n [34] \"child_respiratory\"                       \n [35] \"child_gastrointestinal\"                  \n [36] \"child_allergy_illness_comments\"          \n [37] \"child_injury_times\"                      \n [38] \"child_injury_comments\"                   \n [39] \"child_health_comments\"                   \n [40] \"mom_prenatal_care\"                       \n [41] \"mom_prenatal_care_comments\"              \n [42] \"mom_pregnant_smoking\"                    \n [43] \"mom_pregnant_smoking_trimester_1\"        \n [44] \"mom_pregnant_smoking_trimester_2\"        \n [45] \"mom_pregnant_smoking_trimester_3\"        \n [46] \"mom_smoking_now\"                         \n [47] \"mom_smoking_now_amount\"                  \n [48] \"smoking_house\"                           \n [49] \"smoking_car\"                             \n [50] \"smoking_comments\"                        \n [51] \"mom_pregnant_drinking\"                   \n [52] \"mom_drinking_trimester_1\"                \n [53] \"mom_drinking_trimester_2\"                \n [54] \"mom_drinking_trimester_3\"                \n [55] \"mom_drinking_comments\"                   \n [56] \"phq4_nervous\"                            \n [57] \"phq4_worrying\"                           \n [58] \"phq4_littleinterest\"                     \n [59] \"phq4_down\"                               \n [60] \"phq4_comments\"                           \n [61] \"rothbart_unfamiliarperson\"               \n [62] \"rothbart_troubletask\"                    \n [63] \"rothbart_companyofchild\"                 \n [64] \"rothbart_choiceactivities\"               \n [65] \"rothbart_quietlysung\"                    \n [66] \"rothbart_playingoutdoors\"                \n [67] \"rothbart_morethan10\"                     \n [68] \"rothbart_respondingremarks\"              \n [69] \"rothbart_excitedlovedadults\"             \n [70] \"rothbart_fiddlehair\"                     \n [71] \"rothbart_roughrowdy\"                     \n [72] \"rothbart_rockedhugged\"                   \n [73] \"rothbart_involvednewactivity\"            \n [74] \"rothbart_tirequickly\"                    \n [75] \"rothbart_callattention\"                  \n [76] \"rothbart_tags\"                           \n [77] \"rothbart_noisyenvironment\"               \n [78] \"rothbart_energy\"                         \n [79] \"rothbart_vehicles\"                       \n [80] \"rothbart_active\"                         \n [81] \"rothbart_forbidden\"                      \n [82] \"rothbart_sadlytearful\"                   \n [83] \"rothbart_downblue\"                       \n [84] \"rothbart_runhouse\"                       \n [85] \"rothbart_excitingevent\"                  \n [86] \"rothbart_tempertantrum\"                  \n [87] \"rothbart_waitpatiently\"                  \n [88] \"rothbart_rockedsmile\"                    \n [89] \"rothbart_mold\"                           \n [90] \"rothbart_interactadult\"                  \n [91] \"rothbart_careful\"                        \n [92] \"rothbart_enternewplace\"                  \n [93] \"rothbart_crymorethan3\"                   \n [94] \"rothbart_easilysoothed\"                  \n [95] \"rothbart_busyother\"                      \n [96] \"rothbart_differentpeople\"                \n [97] \"comments_rothbart\"                       \n [98] \"mediause_home_technology\"                \n [99] \"mediause.home_technology.tv\"             \n[100] \"mediause.home_technology.dvd\"            \n[101] \"mediause.home_technology.computer\"       \n[102] \"mediause.home_technology.ipad\"           \n[103] \"mediause.home_technology.educationalgame\"\n[104] \"mediause.home_technology.videogame\"      \n[105] \"mediause_technology_child_tv\"            \n[106] \"mediause_tv_how\"                         \n[107] \"mediause_technology_child_dvd\"           \n[108] \"mediause_dvd_how\"                        \n[109] \"mediause_technology_child_computer\"      \n[110] \"mediause_computer_how\"                   \n[111] \"mediause_technology_child_ipad\"          \n[112] \"mediause_ipad_how\"                       \n[113] \"mediause_technology_child_educational\"   \n[114] \"mediause_educational_how\"                \n[115] \"mediause_technology_child_videogame\"     \n[116] \"mediause_videogame_how\"                  \n[117] \"mediause_tv_hrs_per_day\"                 \n[118] \"mediause_techuse_meals\"                  \n[119] \"mediause_techuse_playtime\"               \n[120] \"mediause_techuse_bedtime\"                \n[121] \"mediause_techuse_transportation\"         \n[122] \"mediause_comments\"                       \n[123] \"pets_at_home\"                            \n[124] \"pets_types_number\"                       \n[125] \"pets_indoors_outdoors\"                   \n[126] \"comments_pets\"                           \n[127] \"laundry_self\"                            \n[128] \"laundry_partner\"                         \n[129] \"laundry_otherperson\"                     \n[130] \"labor_laundry_otherperson\"               \n[131] \"cleaning_self\"                           \n[132] \"cleaning_partner\"                        \n[133] \"cleaning_otherperson\"                    \n[134] \"labor_cleaning_otherperson\"              \n[135] \"dishes_self\"                             \n[136] \"dishes_partner\"                          \n[137] \"dishes_otherperson\"                      \n[138] \"labor_dishes_otherperson\"                \n[139] \"cooking_self\"                            \n[140] \"cooking_partner\"                         \n[141] \"cooking_otherperson\"                     \n[142] \"labor_cooking_otherperson\"               \n[143] \"feeding_self\"                            \n[144] \"feeding_partner\"                         \n[145] \"feeding_otherperson\"                     \n[146] \"labor_feeding_otherperson\"               \n[147] \"droppick_self\"                           \n[148] \"droppick_partner\"                        \n[149] \"droppick_otherperson\"                    \n[150] \"labor_droppick_otherperson\"              \n[151] \"bed_self\"                                \n[152] \"bed_partner\"                             \n[153] \"bed_otherperson\"                         \n[154] \"labor_bed_otherperson\"                   \n[155] \"disciplining_self\"                       \n[156] \"disciplining_partner\"                    \n[157] \"disciplining_otherperson\"                \n[158] \"labor_disciplining_otherperson\"          \n[159] \"comments_division_labor\"                 \n[160] \"typical_behavior\"                        \n[161] \"typical_behavior_specifics\"              \n[162] \"typical_activities\"                      \n[163] \"typical_activities_specifics\"            \n[164] \"typical_nightmorning\"                    \n[165] \"typical_nightmorning_specifics\"          \n[166] \"typical_otherthanme\"                     \n[167] \"typical_otherthanme_specifics\"",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-clean.html#save-cleaned-file",
    "href": "home-visit-clean.html#save-cleaned-file",
    "title": "Home visit: Clean variables",
    "section": "Save cleaned file",
    "text": "Save cleaned file\nSave with “latest” label.\n\nreadr::write_csv(home_visit_clean, \"../data/csv/home_visit/agg/PLAY-non-mcdi-latest.csv\")\n\nSave with date-stamp for quality control.\n\nfn &lt;- paste0(\"../data/csv/home_visit/agg/PLAY-non-mcdi-\", Sys.Date(), \".csv\")\nreadr::write_csv(home_visit_clean, fn)",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Home visit: Clean variables</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html",
    "href": "home-visit-viz.html",
    "title": "Home visit: Visualizations",
    "section": "",
    "text": "Background\nThis page shows some simple visualizations of the cleaned aggregate data file.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#setup",
    "href": "home-visit-viz.html#setup",
    "title": "Home visit: Visualizations",
    "section": "Setup",
    "text": "Setup\nLoad dependencies.\n\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(wordcloud))\nsuppressPackageStartupMessages(library(RColorBrewer))\n\nsource(\"../R/mcdi_viz_wordcloud.R\")\nsource(\"../R/ecbq_plot.R\")\n\nLoad saved “latest” data file.\n\nhv &lt;- readr::read_csv(\"../data/csv/home_visit/agg/PLAY-non-mcdi-latest.csv\", show_col_types = FALSE)\n\n\nChild age\nChild age in months (age_group) by child_sex.\nNote: The child’s exact age in months is part of the Databrary-related data. That is on the work plan.\n\nhome_visit_filtered &lt;- hv |&gt;\n  dplyr::filter(!is.na(age_group),\n                !is.na(child_sex))\n\n\nxtabs(formula = ~ age_group + child_sex, \n      data = home_visit_filtered)\n\n         child_sex\nage_group female male\n     12mo    147  123\n     18mo    130  149\n     24mo    109  115\n\n\nA total of \\(n=\\) 773 mother-infant dyads have been tested. This includes training and pilot visits.\n\nhome_visit_filtered |&gt;\n  ggplot() +\n  aes(age_group, fill = child_sex) +\n  geom_bar() +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 10.1: Participants by age group and sex\n\n\n\n\n\n\n\nTime series\nTo calculate cumulative visits, we have to add an index variable\n\ndf &lt;- home_visit_filtered |&gt;\n  dplyr::select(test_date, site_id) |&gt;\n  dplyr::mutate(test_date = as.Date(test_date)) |&gt;\n  dplyr::arrange(test_date) |&gt;\n  dplyr::mutate(n_visits = seq_along(test_date))\n\n\ndf |&gt;\n  dplyr::filter(!is.na(test_date),\n                !is.na(n_visits),\n                !is.na(site_id)) |&gt;\n  ggplot() +\n  aes(test_date, n_visits) +\n  geom_point()\n\n\n\n\n\n\n\nFigure 10.2: Cumulative home visits by year",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#language-exposure",
    "href": "home-visit-viz.html#language-exposure",
    "title": "Home visit: Visualizations",
    "section": "Language exposure",
    "text": "Language exposure\n\ndf &lt;- hv |&gt;\n  dplyr::mutate(language_child = stringr::str_replace_all(language_child, \" \", \"_\"))\nxtabs(formula = ~ child_sex + language_child, data = df)\n\n         language_child\nchild_sex english english_spanish\n   female     311              75\n   male       298              89",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#mb-cdi",
    "href": "home-visit-viz.html#mb-cdi",
    "title": "Home visit: Visualizations",
    "section": "MB-CDI",
    "text": "MB-CDI\n\n12-mo-old English speakers\n\neng_12 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/agg/mcdi_english_12_combined.csv\",\n    col_types = readr::cols(.default = 'c'),\n    show_col_types = FALSE\n  )\n\nThere are \\(n=\\) 186 participant records.\n\neng_12_long &lt;- eng_12 |&gt;\n  tidyr::pivot_longer(cols = !(play_id | site_id | subject_number),\n                        names_to = \"word\",\n                        values_to = \"understands_or_says\")\n\n#xtabs(~ word + understands_or_says, eng_12_long)\n\n\nword_ct &lt;- eng_12_long |&gt;\n  dplyr::filter(!is.na(understands_or_says)) |&gt;\n  dplyr::filter(understands_or_says == \"understands\") |&gt;\n  dplyr::count(word, sort = TRUE)\n\nquant_25 &lt;- round(n_12_eng*.25, 0)\n\n\n# rcb_color_paired &lt;- RColorBrewer::brewer.pal(12, 'Paired')\n# wordcloud::wordcloud(words = word_ct$word, freq = word_ct$n, min.freq = quant_25, colors = rcb_color_paired)\n\nmcdi_viz_wordcloud(word_ct, n_participants = dim(eng_12)[1], quantile = .40)\n\n\n\n\n\n\n\n\n\n\n18-mo-old English speakers\n\neng_18 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/agg/mcdi_english_18_combined.csv\",\n    col_types = readr::cols(.default = 'c'),\n    show_col_types = FALSE\n  )\n\nThere are \\(n=\\) 170 participant records.\n\nword_ct &lt;- eng_18 |&gt;\n  tidyr::pivot_longer(cols = !(play_id | site_id | subject_number),\n                        names_to = \"word\",\n                        values_to = \"says\") |&gt;\n  dplyr::filter(!is.na(says)) |&gt;\n  dplyr::filter(says == TRUE) |&gt;\n  dplyr::count(word, sort = TRUE)\n\nquant_25 &lt;- round(n_18_eng*.25, 0)\n\n\n#wordcloud::wordcloud(words = word_ct$word, freq = word_ct$n, min.freq = quant_25, colors = rcb_color_paired)\nmcdi_viz_wordcloud(word_ct, n_participants = dim(eng_18)[1], quantile = .50)\n\n\n\n\n\n\n\n\n\n\n24-mo-old English speakers\n\neng_24 &lt;-\n  readr::read_csv(\n    \"../data/csv/home_visit/agg/mcdi_english_24_combined.csv\",\n    col_types = readr::cols(.default = 'c'),\n    show_col_types = FALSE\n  )\n\nThere are \\(n=\\) 144 participant records.\n\nword_ct &lt;- eng_24 |&gt;\n  tidyr::pivot_longer(cols = !(play_id | site_id | subject_number),\n                        names_to = \"word\",\n                        values_to = \"says\") |&gt;\n  dplyr::filter(!is.na(says)) |&gt;\n  dplyr::filter(says == TRUE) |&gt;\n  dplyr::count(word, sort = TRUE)\n\n\nmcdi_viz_wordcloud(word_ct, n_participants = dim(eng_24)[1], quantile = .60)\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : butterfly could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : baabaa could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : pants could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : woofwoof could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : rain_2 could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : egg could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : yes could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : choochoo could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : kiss could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : car could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : flower could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : one could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : soap could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cookie could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : light could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : head could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : tree could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : truck could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : spoon could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : open could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : three could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : ear could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : wet_1 could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : stairs could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : sock could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : ouch could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : shirt could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : strawberry could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : trash could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : monkey could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : shh could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : vroom could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : door could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : please could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : uhoh could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : more could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : help could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : rain_1 could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : thankyou could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : jump could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : daddy could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : mine could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : mouth could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : baby could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : bye could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cow could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : eat could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : hug could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : go could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : sleep could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : hi could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : swing could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : out could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : frog could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : quackquack could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : buttocks could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : hat could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : shoe could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : yumyum could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : hot could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : cup could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : brush could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : bear could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : allgone could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : blanket could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : chair could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : dirty could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : balloon could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : walk could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : book could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : diaper could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : down could not be fit on page. It will not be plotted.\n\n\nWarning in wordcloud::wordcloud(words = wd_ct$word, freq = wd_ct$n, min.freq =\nmy_thresh, : play could not be fit on page. It will not be plotted.\n\n\n\n\n\n\n\n\n\n\nrare_word_ct &lt;- word_ct |&gt;\n  dplyr::filter(n &lt; dim(eng_24)[1]*.25)\n# \n# wordcloud::wordcloud(words = rare_word_ct$word, freq = rare_word_ct$n)\nmcdi_viz_wordcloud(rare_word_ct, n_participants = dim(eng_24)[1], quantile = .25)\n\nNo words meet criterion: n = 36 'know/say' out of n = 144 participants\n\n\nTry quantile &lt; 0.24\n\n\nNULL\n\n\n\nif (!('home_visit_df' %in% ls())) {\n  targets::tar_load(home_visit_df, store=\"../_targets\")\n}",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#locomotion",
    "href": "home-visit-viz.html#locomotion",
    "title": "Home visit: Visualizations",
    "section": "Locomotion",
    "text": "Locomotion\n\nCheck for anomalous values\n\ncrawl_mos_min &lt;- 4\nwalk_mos_min &lt;- 6\n\n\nAnomalous crawling onset\n\nhv |&gt;\n  dplyr::select(site_id, subject_number, crawl_mos) |&gt;\n  dplyr::filter(crawl_mos &lt; crawl_mos_min) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\nsite_id\nsubject_number\ncrawl_mos\n\n\n\n\nCHOPH\n003\n3.72\n\n\nPRINU\n020\n-5.69\n\n\n\n\n\n\n\n\n\nAnomalous walking onset (KEA criteria)\n\nhv |&gt;\n  dplyr::select(site_id, subject_number, walk_mos_kea) |&gt;\n  dplyr::filter(walk_mos_kea &lt; walk_mos_min) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\nsite_id\nsubject_number\nwalk_mos_kea\n\n\n\n\nCSUFL\n011\n0.76\n\n\nUMIAM\n018\n2.76\n\n\nPRINU\n020\n-2.93\n\n\n\n\n\n\n\n\n\nAnomalous walking onset (WHO criteria)\n\nhv |&gt;\n  dplyr::select(site_id, subject_number, walk_mos_who) |&gt;\n  dplyr::filter(walk_mos_who &lt; walk_mos_min) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\nsite_id\nsubject_number\nwalk_mos_who\n\n\n\n\nPRINU\n020\n-3.29\n\n\n\n\n\n\n\n\n\n\nCrawl onset\n\nhv |&gt;\n  dplyr::filter(crawl_mos &gt; crawl_mos_min, !is.na(crawl_mos)) |&gt;\n  ggplot() +\n  aes(crawl_mos, fill = child_sex) +\n  geom_histogram(bins = 12) +\n  theme(legend.position = \"bottom\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 10.3: Age of crawling onset (mos) by sex\n\n\n\n\n\n\n\nWalk onset\n\nhv |&gt;\n  dplyr::filter(walk_mos_kea &gt; walk_mos_min, !is.na(walk_mos_kea)) |&gt;\n  ggplot() +\n  aes(walk_mos_kea, fill = child_sex) +\n  theme(legend.position=\"bottom\") +\n  geom_histogram(bins = 10)\n\nmessage(\"Tukey's five number summary (minimum, lower-hinge, median, upper-hinge, maximum): \")\n\nTukey's five number summary (minimum, lower-hinge, median, upper-hinge, maximum): \n\nhv$walk_mos_kea |&gt; fivenum()\n\n[1] -2.93 11.70 12.69 14.33 19.00\n\n\n\n\n\n\n\n\nFigure 10.4: Age (mos) of walking onset (KEA criteria) by sex\n\n\n\n\n\n\nhv |&gt;\n  dplyr::filter(walk_mos_who &gt; walk_mos_min, !is.na(walk_mos_who)) |&gt;\n  ggplot() +\n  aes(walk_mos_who, fill = child_sex) +\n  geom_histogram(bins=12) +\n  theme(legend.position=\"bottom\") +\n  theme(legend.title = element_blank())\n\nmessage(\"Tukey's five number summary (minimum, lower-hinge, median, upper-hinge, maximum): \")\n\nTukey's five number summary (minimum, lower-hinge, median, upper-hinge, maximum): \n\nhv$walk_mos_who |&gt; fivenum()\n\n[1] -3.29 11.11 12.13 13.64 25.08\n\n\n\n\n\n\n\n\nFigure 10.5: Age (mos) of walking onset (WHO criteria) by sex\n\n\n\n\n\n\nfiltered_walk_mos &lt;- hv |&gt;\n  dplyr::filter(walk_mos_who &gt; walk_mos_min, !is.na(walk_mos_who), \n                walk_mos_kea &gt; walk_mos_min, !is.na(walk_mos_kea)) \n\nfiltered_walk_mos |&gt;\n  ggplot() +\n  aes(walk_mos_who, walk_mos_kea, color = child_sex) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  xlim(8, 18) +\n  ylim(8, 18) +\n  theme(legend.position = \"bottom\") +\n  theme(aspect.ratio = 1) +\n  theme(legend.title = element_blank()) -&gt; walk_p\n\nggExtra::ggMarginal(\n  walk_p,\n  play_loco,\n  walk_mos_who,\n  walk_mos_kea,\n  type = \"density\",\n  margins = \"both\",\n  groupColour = TRUE,\n  groupFill = TRUE\n)\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\nWarning: Removed 9 rows containing non-finite outside the scale range\n(`stat_smooth()`).\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\nWarning: Removed 9 rows containing non-finite outside the scale range\n(`stat_smooth()`).\n\n\nWarning: Removed 9 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 1 row containing missing values or values outside the scale range\n(`geom_smooth()`).\n\ncor.test(filtered_walk_mos$walk_mos_who, filtered_walk_mos$walk_mos_kea)\n\n\n    Pearson's product-moment correlation\n\ndata:  filtered_walk_mos$walk_mos_who and filtered_walk_mos$walk_mos_kea\nt = 51.42, df = 584, p-value &lt; 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.8892203 0.9186854\nsample estimates:\n      cor \n0.9050328 \n\n\n\n\n\n\n\n\nFigure 10.6: Walking onset by WHO vs. KEA criteria\n\n\n\n\n\n\nfiltered_walk_crawl_mos &lt;- hv |&gt;\n  dplyr::filter(crawl_mos &gt; crawl_mos_min, !is.na(crawl_mos), \n                walk_mos_kea &gt; walk_mos_min, !is.na(walk_mos_kea))\n\nfiltered_walk_crawl_mos |&gt;\n  ggplot() +\n  aes(crawl_mos, walk_mos_kea, color = child_sex) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  theme(legend.position = \"bottom\") +\n  theme(aspect.ratio = 1) +\n  theme(legend.title = element_blank()) -&gt; walk_crawl_p\n\nggExtra::ggMarginal(\n  walk_crawl_p,\n  filtered_walk_crawl_mos,\n  crawl_mos,\n  walk_mos_kea,\n  type = \"density\",\n  margins = \"both\",\n  groupColour = TRUE,\n  groupFill = TRUE\n)\n\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n\ncor.test(filtered_walk_crawl_mos$crawl_mos, filtered_walk_crawl_mos$walk_mos_kea)\n\n\n    Pearson's product-moment correlation\n\ndata:  filtered_walk_crawl_mos$crawl_mos and filtered_walk_crawl_mos$walk_mos_kea\nt = 14.658, df = 557, p-value &lt; 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.4650147 0.5849356\nsample estimates:\n      cor \n0.5275987 \n\n\n\n\n\n\n\n\nFigure 10.7: Walking onset vs. Crawling",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#health-visualizations",
    "href": "home-visit-viz.html#health-visualizations",
    "title": "Home visit: Visualizations",
    "section": "Health visualizations",
    "text": "Health visualizations\n\nFeeding\n\n\n\nTable 10.1\n\n\nxtabs(formula = ~ age_group + feeding_breastfeed, data = hv)\n\n         feeding_breastfeed\nage_group donotknow  no refused yes\n     12mo         0  13       0 257\n     18mo         1  13       0 265\n     24mo         0  10       1 208\n\n\n\n\n\nhv %&gt;%\n  dplyr::select(child_sex, feeding_solidfood_age) |&gt;\n  dplyr::filter(feeding_solidfood_age &lt; 12) |&gt;\n  ggplot() +\n  aes(x = feeding_solidfood_age, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  xlab(\"Introduction of solid foods (mos)\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 10.8: Age at introduction of solid foods\n\n\n\n\n\nThere are some unlikely values here.\n\nhv |&gt;\n  dplyr::select(participant_id, \n                feeding_solidfood_age) |&gt;\n  dplyr::filter(feeding_solidfood_age &gt; 12 | feeding_solidfood_age &lt; 3) %&gt;%\n  knitr::kable(format = 'html')\n\n\n\n\nparticipant_id\nfeeding_solidfood_age\n\n\n\n\na9M6Q1C1A\n999\n\n\nt9S6A2M1A\n990\n\n\na4T7C3F1A\n990\n\n\ni9P3B3K2A\n995\n\n\ne5M1S1R3A\n0\n\n\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nA preliminary look at feeding_comments shows that there are some names mentioned. So, we do not view them here.\nWe should consider flagging these in the QA process.\n\n\n\n\nSleeping position\nThese data only focus on child_sleeping_position. Other sleeping data are in the screening questionnaire.\n\n\n\nTable 10.2\n\n\nxtabs(formula = ~ child_sleeping_position + age_group, data = hv)\n\n                       age_group\nchild_sleeping_position 12mo 18mo 24mo\n           back          247  266  205\n           changed         4    3    2\n           donotknow       0    1    0\n           other           4    1    1\n           refused         0    0    1\n           side            4    2    5\n           sitting         2    0    1\n           stomach_down    1    1    1\n           stomach_side    8    5    3\n\n\n\n\n\n\nChild health\n\nOverall rating\n\n\n\nTable 10.3\n\n\nchild_health_rating &lt;- hv |&gt;\n  # dplyr::select(child_sex, age_group, child_health) |&gt;\n  dplyr::filter(!is.na(child_health)) |&gt;\n  dplyr::mutate(child_health = factor(child_health,\n                                      c(\"poor\",\n                                        \"fair\",\n                                        \"good\",\n                                        \"verygood\",\n                                        \"excellent\",\n                                        \"donotknow\",\n                                        \"refused\"),\n                                      ordered = TRUE))\n\nxtabs(formula = ~ child_health + age_group, data = child_health_rating)\n\n            age_group\nchild_health 12mo 18mo 24mo\n   poor         0    0    0\n   fair         2    1    1\n   good        12   17   14\n   verygood    71   65   55\n   excellent  185  195  148\n   donotknow    0    1    0\n   refused      0    0    1\n\n\n\n\n\n\nRecent vaccination\n\n\n\nTable 10.4\n\n\nrecent_vax &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_recent_vaccination) |&gt;\n  dplyr::filter(!is.na(child_recent_vaccination))\n\nxtabs(formula = ~ child_recent_vaccination + age_group, data = recent_vax)\n\n                        age_group\nchild_recent_vaccination 12mo 18mo 24mo\n               donotknow    0    2    4\n               no         149  194  170\n               yes        121   83   45\n\n\n\n\n\n\nSeen medical specialist\n\n\n\nTable 10.5\n\n\nseen_specialist &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_medical_specialist) |&gt;\n  dplyr::filter(!is.na(child_medical_specialist))\n\nxtabs(formula = ~ child_medical_specialist + age_group, data = seen_specialist)\n\n                        age_group\nchild_medical_specialist 12mo 18mo 24mo\n               donotknow    0    1    2\n               no         138  126   97\n               refused      0    0    1\n               yes        132  152  119\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nManual inspection shows some possible identifying information (names) in child_medical_specialist_comments.\n\n\n\n\nHearing tested\n\n\n\nTable 10.6\n\n\nhearing_tested &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_hearing_tested) |&gt;\n  dplyr::filter(!is.na(child_hearing_tested))\n\nxtabs(formula = ~ child_hearing_tested + age_group, data = hearing_tested)\n\n                         age_group\nchild_hearing_tested      12mo 18mo 24mo\n  afterhome                  6   16   11\n  birthhospital            222  208  149\n  birthhospital afterhome   33   43   43\n  birthhospital donotknow    1    1    1\n  donotknow                  1    5    6\n  no                         7    6    8\n  refused                    0    0    1\n\n\n\n\n\n\nVision tested\n\n\n\nTable 10.7\n\n\nvision_tested &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_vision_tested) |&gt;\n  dplyr::filter(!is.na(child_vision_tested))\n\nxtabs(formula = ~ child_vision_tested + age_group, data = vision_tested)\n\n                         age_group\nchild_vision_tested       12mo 18mo 24mo\n  afterhome                 45   51   44\n  birthhospital             66   73   54\n  birthhospital afterhome   24   31   29\n  birthhospital donotknow    1    1    1\n  donotknow                 32   37   26\n  no                       101   84   62\n  no donotknow               1    2    2\n  refused                    0    0    1\n\n\n\n\n\n\nIllnesses and allergies\n\nillness_allergy &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(c(\"allergies\", \"ear_infection\", \n                                                 \"asthma\",\n                                                 \"respiratory\",\n                                                 \"gastrointestinal\")))\n\nillness_allergy |&gt;\n  tidyr::pivot_longer(!c('child_sex', 'age_group'),\n                      names_to = \"type\",\n                      values_to = \"response\") |&gt;\n  dplyr::filter(!is.na(response)) |&gt;\n  dplyr::mutate(response = factor(response,\n                                  c(\"no\", \"yes\", \"donotknow\", \"refused\"))) |&gt;\n  ggplot() +\n  aes(x = response, fill = child_sex) +\n  geom_bar() +\n  facet_grid(cols = vars(type), rows = vars(age_group)) +\n  scale_x_discrete(guide = guide_axis(angle = 90)) +\n  xlab(\"\") +\n  theme(legend.position = \"bottom\", legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 10.9: Parent reports of child illnesses or allergies.\n\n\n\n\n\n\n\nInjuries\n\n\n\nTable 10.8\n\n\nxtabs(formula = ~ child_injury_times + age_group, data = hv)\n\n                  age_group\nchild_injury_times 12mo 18mo 24mo\n         donotknow    1    2    1\n         never      244  242  160\n         once        19   29   49\n         refused      0    0    1\n         threemore    3    0    1\n         twice        3    6    7\n\n\n\n\n\n\n\nMom health\n\nSmoking & drinking\n\n\n\nTable 10.9\n\n\nsmoking_drinking &lt;- hv |&gt;\n  dplyr::select(age_group,\n    child_sex,\n    contains(\"smoking\"),\n    contains(\"drinking\")\n  )\n\nxtabs(formula = ~ mom_pregnant_smoking + mom_pregnant_drinking, smoking_drinking)\n\n                    mom_pregnant_drinking\nmom_pregnant_smoking donotknow  no refused yes\n           donotknow         2   1       0   0\n           no                0 632       1 125\n           refused           0   0       1   0\n           yes               0   1       0   2\n\n\n\n\n\nxtabs(formula = ~ smoking_house + smoking_car, smoking_drinking)\n\n             smoking_car\nsmoking_house donotknow  no refused yes\n    donotknow         1   1       0   0\n    no                1 745       0   3\n    refused           0   3       1   0\n    yes               0  10       0   3\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.10\n\n\nsmoking_drinking |&gt;\n  dplyr::select(smoking_comments) |&gt;\n  dplyr::filter(!is.na(smoking_comments)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nTable 10.11\n\n\nxtabs(formula = ~ mom_smoking_now, smoking_drinking)\n\nmom_smoking_now\ndonotknow        no   refused       yes \n        1       759         4         4 \n\n\n\n\n\n\n\nTable 10.12\n\n\nsmoking_drinking$mom_smoking_now_amount[!is.na(smoking_drinking$mom_smoking_now_amount)]\n\n[1]  1  4  3 10\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.13\n\n\nsmoking_drinking |&gt;\n  dplyr::select(mom_drinking_comments) |&gt;\n  dplyr::filter(!is.na(mom_drinking_comments)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nPatient Health Questionnaire (PHQ-4)\n\nphq4 &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(\"phq4_\")) |&gt;\n  dplyr::select(-contains(\"comments\"))\n\nnames(phq4) &lt;- gsub(pattern = \"phq4_\", replacement = \"\", names(phq4))\n\nphq4 |&gt;\n  tidyr::pivot_longer(!c('child_sex', 'age_group'),\n                      names_to = \"question\",\n                      values_to = \"response\") |&gt;\n  dplyr::filter(!is.na(response)) |&gt;\n  dplyr::mutate(response = factor(\n    response,\n    c(\"notatall\", \"severaldays\", \"morethanhalf\", \"nearly\")\n  ), ordered = TRUE) |&gt;\n  ggplot() +\n  aes(x = response, fill = child_sex) +\n  geom_bar() +\n  facet_grid(cols = vars(question), rows = vars(age_group)) +\n  scale_x_discrete(guide = guide_axis(angle = 90)) +\n  xlab(\"\") +\n  theme(legend.position = \"bottom\", legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 10.10: PHQ4 responses by age group and child sex",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#rothbart-visualizations",
    "href": "home-visit-viz.html#rothbart-visualizations",
    "title": "Home visit: Visualizations",
    "section": "Rothbart visualizations",
    "text": "Rothbart visualizations\nThe next section provides visualizations of the Rothbart Early Childhood Behavior Questionnaire (ECBQ) data related to child temperament.\n\n\n\n\n\n\nWarning\n\n\n\nAs of 2024-09-12, this next section has been disabled temporarily.\n\n\n\necbq &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(\"rothbart\"))\n\necbq_complete &lt;- ecbq |&gt;\n  tidyr::complete() |&gt;\n  dplyr::select(-comments_rothbart)\n\necbq_vars &lt;- names(ecbq)[stringr::str_detect(names(ecbq_complete),\"rothbart_\")]\necbq_vars &lt;- ecbq_vars[!stringr::str_detect(ecbq_vars, \"comments_rothbart\")]\n\n\npurrr::map(ecbq_vars, suppressMessages(ecbq_plot), df = ecbq_complete)\n\n[[1]]\n\n\n\n\n\n\n\n\n\n\n[[2]]\n\n\n\n\n\n\n\n\n\n\n[[3]]\n\n\n\n\n\n\n\n\n\n\n[[4]]\n\n\n\n\n\n\n\n\n\n\n[[5]]\n\n\n\n\n\n\n\n\n\n\n[[6]]\n\n\n\n\n\n\n\n\n\n\n[[7]]\n\n\n\n\n\n\n\n\n\n\n[[8]]\n\n\n\n\n\n\n\n\n\n\n[[9]]\n\n\n\n\n\n\n\n\n\n\n[[10]]\n\n\n\n\n\n\n\n\n\n\n[[11]]\n\n\n\n\n\n\n\n\n\n\n[[12]]\n\n\n\n\n\n\n\n\n\n\n[[13]]\n\n\n\n\n\n\n\n\n\n\n[[14]]\n\n\n\n\n\n\n\n\n\n\n[[15]]\n\n\n\n\n\n\n\n\n\n\n[[16]]\n\n\n\n\n\n\n\n\n\n\n[[17]]\n\n\n\n\n\n\n\n\n\n\n[[18]]\n\n\n\n\n\n\n\n\n\n\n[[19]]\n\n\n\n\n\n\n\n\n\n\n[[20]]\n\n\n\n\n\n\n\n\n\n\n[[21]]\n\n\n\n\n\n\n\n\n\n\n[[22]]\n\n\n\n\n\n\n\n\n\n\n[[23]]\n\n\n\n\n\n\n\n\n\n\n[[24]]\n\n\n\n\n\n\n\n\n\n\n[[25]]\n\n\n\n\n\n\n\n\n\n\n[[26]]\n\n\n\n\n\n\n\n\n\n\n[[27]]\n\n\n\n\n\n\n\n\n\n\n[[28]]\n\n\n\n\n\n\n\n\n\n\n[[29]]\n\n\n\n\n\n\n\n\n\n\n[[30]]\n\n\n\n\n\n\n\n\n\n\n[[31]]\n\n\n\n\n\n\n\n\n\n\n[[32]]\n\n\n\n\n\n\n\n\n\n\n[[33]]\n\n\n\n\n\n\n\n\n\n\n[[34]]\n\n\n\n\n\n\n\n\n\n\n[[35]]\n\n\n\n\n\n\n\n\n\n\n[[36]]\n\n\n\n\n\n\n\n\n\n\nComments\n\n\n\n\n\n\nWarning\n\n\n\nManual inspection shows that the comments field has some names. We omit printing the comments here until we can be assured that there is no identifiying information in the comments.\n\n\n\necbq |&gt;\n  dplyr::select(comments_rothbart) |&gt;\n  dplyr::filter(!is.na(comments_rothbart)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#media-use",
    "href": "home-visit-viz.html#media-use",
    "title": "Home visit: Visualizations",
    "section": "Media use",
    "text": "Media use\n\nHome technology\n\n\n\nTable 10.14: Use of TV at home\n\n\nxtabs(formula = ~ mediause.home_technology.tv, hv)\n\nmediause.home_technology.tv\nFALSE  TRUE \n   22   743 \n\n\n\n\n\n\n\nTable 10.15: Use of DVD at home\n\n\nxtabs(formula = ~ mediause.home_technology.dvd, hv)\n\nmediause.home_technology.dvd\nFALSE  TRUE \n  504   261 \n\n\n\n\n\n\n\nTable 10.16: Use of computer at home\n\n\nxtabs(formula = ~ mediause.home_technology.computer, hv)\n\nmediause.home_technology.computer\nFALSE  TRUE \n   29   736 \n\n\n\n\n\n\n\nTable 10.17: Use of iPad/tablet at home\n\n\nxtabs(formula = ~ mediause.home_technology.ipad, hv)\n\nmediause.home_technology.ipad\nFALSE  TRUE \n  198   567 \n\n\n\n\n\n\n\nTable 10.18: Use of educational games at home\n\n\nxtabs(formula = ~ mediause.home_technology.educationalgame, hv)\n\nmediause.home_technology.educationalgame\nFALSE  TRUE \n  592   173 \n\n\n\n\n\n\n\nTable 10.19: Use of video games at home\n\n\nxtabs(formula = ~ mediause.home_technology.videogame, hv)\n\nmediause.home_technology.videogame\nFALSE  TRUE \n  311   454 \n\n\n\n\n\n\nChild TV\n\n\n\nTable 10.20: Use of TV by child\n\n\nxtabs(formula = ~ mediause_technology_child_tv, hv)\n\nmediause_technology_child_tv\n no yes \n104 637 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.21\n\n\nhv |&gt;\n  dplyr::select(mediause_tv_how) |&gt;\n  dplyr::filter(!is.na(mediause_tv_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nChild DVD\n\n\n\nTable 10.22: Use of DVD by child\n\n\nxtabs(formula = ~ mediause_technology_child_dvd, hv)\n\nmediause_technology_child_dvd\n no yes \n223  38 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.23\n\n\nhv |&gt;\n  dplyr::select(mediause_dvd_how) |&gt;\n  dplyr::filter(!is.na(mediause_dvd_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nChild computer\n\n\n\nTable 10.24: Use of computer by child\n\n\nxtabs(formula = ~ mediause_technology_child_computer, hv)\n\nmediause_technology_child_computer\n no yes \n526 209 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.25\n\n\nhv |&gt;\n  dplyr::select(mediause_computer_how) |&gt;\n  dplyr::filter(!is.na(mediause_computer_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nChild iPad\n\n\n\nTable 10.26: Use of iPad/tablet by child\n\n\nxtabs(formula = ~ mediause_technology_child_ipad, hv)\n\nmediause_technology_child_ipad\n no yes \n312 255 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.27\n\n\nhv |&gt;\n  dplyr::select(mediause_ipad_how) |&gt;\n  dplyr::filter(!is.na(mediause_ipad_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nChild educational\n\n\n\nTable 10.28: Use of educational games by child\n\n\nxtabs(formula = ~ mediause_technology_child_educational, hv)\n\nmediause_technology_child_educational\n no yes \n 51 122 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.29\n\n\nhv |&gt;\n  dplyr::select(mediause_educational_how) |&gt;\n  dplyr::filter(!is.na(mediause_educational_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nChild videogame\n\n\n\nTable 10.30: Use of video games by child\n\n\nxtabs(formula = ~ mediause_technology_child_videogame, hv)\n\nmediause_technology_child_videogame\n no yes \n389  65 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.31\n\n\nhv |&gt;\n  dplyr::select(mediause_videogame_how) |&gt;\n  dplyr::filter(!is.na(mediause_videogame_how)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nTV hrs/day\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\nMoreover, this is a free-text field that requires further processing to be visualized.\n\n\n\n\n\nTable 10.32\n\n\nhv |&gt;\n  dplyr::select(mediause_tv_hrs_per_day) |&gt;\n  dplyr::filter(!is.na(mediause_tv_hrs_per_day)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nUse meals\n\n\n\nTable 10.33: Use of technology at meals\n\n\nxtabs(formula = ~ mediause_techuse_meals, hv)\n\nmediause_techuse_meals\n       likely       neutral   neverdothis notverylikely    verylikely \n          124            95           124           366            56 \n\n\n\n\n\n\nUse playtime\n\n\n\nTable 10.34: Use of technology at playtime\n\n\nxtabs(formula = ~ mediause_techuse_playtime, hv)\n\nmediause_techuse_playtime\n       likely       neutral   neverdothis notverylikely    verylikely \n          253           237            23           207            45 \n\n\n\n\n\n\nUse bedtime\n\n\n\nTable 10.35: Use of technology at bedtime\n\n\nxtabs(formula = ~ mediause_techuse_bedtime, hv)\n\nmediause_techuse_bedtime\n       likely       neutral   neverdothis notverylikely    verylikely \n           48            46           420           224            24 \n\n\n\n\n\n\nUse transportation\n\n\n\nTable 10.36: Use of technology during transportation\n\n\nxtabs(formula = ~ mediause_techuse_transportation, hv)\n\nmediause_techuse_transportation\n       likely       neutral   neverdothis notverylikely    verylikely \n          105            71           342           212            32 \n\n\n\n\n\n\nMedia use comments\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.37\n\n\nhv |&gt;\n  dplyr::select(mediause_comments) |&gt;\n  dplyr::filter(!is.na(mediause_comments)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#pets",
    "href": "home-visit-viz.html#pets",
    "title": "Home visit: Visualizations",
    "section": "Pets",
    "text": "Pets\n\n\n\nTable 10.38: Pets at home\n\n\nxtabs(formula = ~ pets_at_home, hv)\n\npets_at_home\n no yes \n276 490 \n\n\n\n\n\nhv$pets_types_number[!is.na(hv$pets_types_number)] |&gt; head(20)\n\n [1] \"One dog\"                                      \n [2] \"1 dog\"                                        \n [3] \"Two Dogs\"                                     \n [4] \"two dogs\"                                     \n [5] \"Sharky, a dog\"                                \n [6] \"3 dogs\"                                       \n [7] \"2 dogs, 5 chickens\"                           \n [8] \"1 dog\"                                        \n [9] \"1 dog\"                                        \n[10] \"2 cats\"                                       \n[11] \"1 dog\"                                        \n[12] \"1 cat 1 dog German shepherd and Anatolian mix\"\n[13] \"1 cat. Occassionaly family dogsit as well.\"   \n[14] \"2 dogs, 2 hermit crabs\"                       \n[15] \"1 dog\"                                        \n[16] \"Dogs 2 schitzu\"                               \n[17] \"1 dog\"                                        \n[18] \"1 dog\"                                        \n[19] \"One dog\"                                      \n[20] \"2 Cats\"                                       \n\n\nThese data need further cleaning to be visualized properly.\n\nhv_pets &lt;- hv |&gt;\n  dplyr::mutate(dogs = stringr::str_detect(pets_types_number, \"[dD]og\"),\n                cats = stringr::str_detect(pets_types_number, \"[cC]at\"))\n\n\n\n\nTable 10.39: Dogs and/or cats\n\n\nxtabs(formula = ~ dogs + cats, hv_pets)\n\n       cats\ndogs    FALSE TRUE\n  FALSE    20  136\n  TRUE    258   75\n\n\n\n\n\n\n\nTable 10.40: Pets indoors or out\n\n\nxtabs(formula = ~ pets_indoors_outdoors, hv)\n\npets_indoors_outdoors\n indoors outdoors \n     462       26 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere are some identifiable elements in the comments_pets field.\n\n\n\n\n\nTable 10.41\n\n\nhv |&gt;\n  dplyr::select(comments_pets) |&gt;\n  dplyr::filter(!is.na(comments_pets)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#division-of-labor",
    "href": "home-visit-viz.html#division-of-labor",
    "title": "Home visit: Visualizations",
    "section": "Division of Labor",
    "text": "Division of Labor\n\nLaundry\n\nhv |&gt;\n  ggplot() +\n  aes(x = laundry_self, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 6 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.11\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = laundry_partner, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 47 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.12\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = laundry_otherperson, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 463 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.13\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.42\n\n\nhv |&gt;\n  dplyr::select(labor_laundry_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_laundry_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\nCleaning\n\nhv |&gt;\n  ggplot() +\n  aes(x = cleaning_self, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 7 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.14\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = cleaning_partner, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 44 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.15\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = cleaning_otherperson, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 360 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.16\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.43\n\n\nhv |&gt;\n  dplyr::select(labor_cleaning_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_cleaning_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\nDishes\n\nhv |&gt;\n  ggplot() +\n  aes(x = dishes_self, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 8 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.17\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = dishes_partner, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 47 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.18\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = dishes_otherperson, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 454 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.19\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.44\n\n\nhv |&gt;\n  dplyr::select(labor_dishes_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_dishes_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\nCooking\n\nhv |&gt;\n  ggplot() +\n  aes(x = cooking_self, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 5 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.20\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = cooking_partner, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 46 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.21\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = cooking_otherperson, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 481 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.22\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.45\n\n\nhv |&gt;\n  dplyr::select(labor_cooking_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_cooking_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\nFeeding\n\nhv |&gt;\n  ggplot() +\n  aes(x = feeding_self, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 5 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.23\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = feeding_partner, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 45 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.24\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = feeding_otherperson, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 342 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.25\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.46\n\n\nhv |&gt;\n  dplyr::select(labor_feeding_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_feeding_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\nDrop-off/pick-up\n\nhv |&gt;\n  ggplot() +\n  aes(x = droppick_self, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 5 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.26\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = droppick_partner, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 76 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.27\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = droppick_otherperson, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 513 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.28\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.47\n\n\nhv |&gt;\n  dplyr::select(labor_droppick_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_droppick_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\nBedtime\n\nhv |&gt;\n  ggplot() +\n  aes(x = bed_self, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 5 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.29\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = bed_partner, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 47 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.30\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = droppick_otherperson, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 513 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.31\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.48\n\n\nhv |&gt;\n  dplyr::select(labor_bed_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_bed_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\nDisciplining\n\nhv |&gt;\n  ggplot() +\n  aes(x = disciplining_self, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 5 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.32\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = disciplining_partner, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 51 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.33\n\n\n\n\n\n\nhv |&gt;\n  ggplot() +\n  aes(x = disciplining_otherperson, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  theme(legend.title = element_blank())\n\nWarning: Removed 455 rows containing non-finite outside the scale range\n(`stat_bin()`).\n\n\n\n\n\n\n\n\nFigure 10.34\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.49\n\n\nhv |&gt;\n  dplyr::select(labor_disciplining_otherperson) |&gt;\n  dplyr::filter(!is.na(labor_disciplining_otherperson)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()\n\n\n\n\n\nComments\n\n\n\n\n\n\nWarning\n\n\n\nThere may be identifiable elements in the next field, so we do not render it.\n\n\n\n\n\nTable 10.50\n\n\nhv |&gt;\n  dplyr::select(comments_division_labor) |&gt;\n  dplyr::filter(!is.na(comments_division_labor)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n    kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#typical-day",
    "href": "home-visit-viz.html#typical-day",
    "title": "Home visit: Visualizations",
    "section": "Typical day",
    "text": "Typical day\n\n\n\nTable 10.51\n\n\nxtabs(formula = ~ typical_behavior, hv)\n\ntypical_behavior\n no yes \n 87 676 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following code will permit visualization of the comments, but the data should be checked for identifiable information before putting it in this document.\n\n\n\n\n\nTable 10.52\n\n\nhv |&gt;\n  dplyr::select(typical_behavior_specifics) |&gt;\n  dplyr::filter(!is.na(typical_behavior_specifics)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nTable 10.53\n\n\nxtabs(formula = ~ typical_activities, hv)\n\ntypical_activities\n no yes \n119 647 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following code will permit visualization of the comments, but the data should be checked for identifiable information before putting it in this document.\n\n\n\n\n\nTable 10.54\n\n\nhv |&gt;\n  dplyr::select(typical_activities_specifics) |&gt;\n  dplyr::filter(!is.na(typical_activities_specifics)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nTable 10.55\n\n\nxtabs(formula = ~ typical_nightmorning, hv)\n\ntypical_nightmorning\n no yes \n184 580 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following code will permit visualization of the comments, but the data should be checked for identifiable information before putting it in this document.\n\n\n\n\n\nTable 10.56\n\n\nhv |&gt;\n  dplyr::select(typical_nightmorning_specifics) |&gt;\n  dplyr::filter(!is.na(typical_nightmorning_specifics)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nTable 10.57\n\n\nxtabs(formula = ~ typical_otherthanme, hv)\n\ntypical_otherthanme\n no yes \n 99 667 \n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following code will permit visualization of the comments, but the data should be checked for identifiable information before putting it in this document.\n\n\n\n\n\nTable 10.58\n\n\nhv |&gt;\n  dplyr::select(typical_otherthanme_specifics) |&gt;\n  dplyr::filter(!is.na(typical_otherthanme_specifics)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-data-dictionary.html",
    "href": "home-visit-data-dictionary.html",
    "title": "Home visit: Data dictionary",
    "section": "",
    "text": "Extracting questions\nAn alternative approach to generating the data dictionary starts with the questionnaire files themselves.",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>11</span>  <span class='chapter-title'>Home visit: Data dictionary</span>"
    ]
  },
  {
    "objectID": "post-visit-gather.html",
    "href": "post-visit-gather.html",
    "title": "Post-visit: Gathering",
    "section": "",
    "text": "Warning\n\n\n\nThis page is under construction.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>12</span>  <span class='chapter-title'>Post-visit: Gathering</span>"
    ]
  },
  {
    "objectID": "post-visit-clean.html",
    "href": "post-visit-clean.html",
    "title": "Post-visit: Cleaning",
    "section": "",
    "text": "Warning\n\n\n\nThis page is under construction.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>Post-visit: Cleaning</span>"
    ]
  },
  {
    "objectID": "post-visit-viz.html",
    "href": "post-visit-viz.html",
    "title": "Post-visit: Visualization",
    "section": "",
    "text": "Warning\n\n\n\nThis page is under construction.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>Post-visit: Visualization</span>"
    ]
  },
  {
    "objectID": "post-visit-data-dictionary.html",
    "href": "post-visit-data-dictionary.html",
    "title": "Post-visit: Data dictionary",
    "section": "",
    "text": "Warning\n\n\n\nThis page is under construction.",
    "crumbs": [
      "Post visit",
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>Post-visit: Data dictionary</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#health",
    "href": "home-visit-viz.html#health",
    "title": "Home visit: Visualizations",
    "section": "Health",
    "text": "Health\n\nFeeding\n\n\n\nTable 10.1: Breastfeeding by age group\n\n\nxtabs(formula = ~ age_group + feeding_breastfeed, data = hv)\n\n         feeding_breastfeed\nage_group donotknow  no refused yes\n     12mo         0  13       0 257\n     18mo         1  13       0 265\n     24mo         0  10       1 208\n\n\n\n\n\nhv %&gt;%\n  dplyr::select(child_sex, feeding_solidfood_age) |&gt;\n  dplyr::filter(feeding_solidfood_age &lt; 12) |&gt;\n  ggplot() +\n  aes(x = feeding_solidfood_age, color = child_sex, fill = child_sex) +\n  geom_histogram(bins = 6) +\n  xlab(\"Introduction of solid foods (mos)\") +\n  theme(legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 10.8: Age at introduction of solid foods\n\n\n\n\n\nThere are some unlikely values here.\n\nhv |&gt;\n  dplyr::select(participant_id, \n                feeding_solidfood_age) |&gt;\n  dplyr::filter(feeding_solidfood_age &gt; 12 | feeding_solidfood_age &lt; 3) %&gt;%\n  knitr::kable(format = 'html')\n\n\n\n\nparticipant_id\nfeeding_solidfood_age\n\n\n\n\na9M6Q1C1A\n999\n\n\nt9S6A2M1A\n990\n\n\na4T7C3F1A\n990\n\n\ni9P3B3K2A\n995\n\n\ne5M1S1R3A\n0\n\n\n\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nA preliminary look at feeding_comments shows that there are some names mentioned. So, we do not view them here.\nWe should consider flagging these in the QA process.\n\n\n\n\nSleeping position\nThese data only focus on child_sleeping_position. Other sleeping data are in the screening questionnaire.\n\n\n\nTable 10.2: Child sleeping position by age group\n\n\nxtabs(formula = ~ child_sleeping_position + age_group, data = hv)\n\n                       age_group\nchild_sleeping_position 12mo 18mo 24mo\n           back          247  266  205\n           changed         4    3    2\n           donotknow       0    1    0\n           other           4    1    1\n           refused         0    0    1\n           side            4    2    5\n           sitting         2    0    1\n           stomach_down    1    1    1\n           stomach_side    8    5    3\n\n\n\n\n\n\nChild health\n\nOverall rating\n\n\n\nTable 10.3: Parent-report of overall child health\n\n\nchild_health_rating &lt;- hv |&gt;\n  # dplyr::select(child_sex, age_group, child_health) |&gt;\n  dplyr::filter(!is.na(child_health)) |&gt;\n  dplyr::mutate(child_health = factor(child_health,\n                                      c(\"poor\",\n                                        \"fair\",\n                                        \"good\",\n                                        \"verygood\",\n                                        \"excellent\",\n                                        \"donotknow\",\n                                        \"refused\"),\n                                      ordered = TRUE))\n\nxtabs(formula = ~ child_health + age_group, data = child_health_rating)\n\n            age_group\nchild_health 12mo 18mo 24mo\n   poor         0    0    0\n   fair         2    1    1\n   good        12   17   14\n   verygood    71   65   55\n   excellent  185  195  148\n   donotknow    0    1    0\n   refused      0    0    1\n\n\n\n\n\n\nRecent vaccination\n\n\n\nTable 10.4\n\n\nrecent_vax &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_recent_vaccination) |&gt;\n  dplyr::filter(!is.na(child_recent_vaccination))\n\nxtabs(formula = ~ child_recent_vaccination + age_group, data = recent_vax)\n\n                        age_group\nchild_recent_vaccination 12mo 18mo 24mo\n               donotknow    0    2    4\n               no         149  194  170\n               yes        121   83   45\n\n\n\n\n\n\nSeen medical specialist\n\n\n\nTable 10.5: Children who have seen a medical specialist\n\n\nseen_specialist &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_medical_specialist) |&gt;\n  dplyr::filter(!is.na(child_medical_specialist))\n\nxtabs(formula = ~ child_medical_specialist + age_group, data = seen_specialist)\n\n                        age_group\nchild_medical_specialist 12mo 18mo 24mo\n               donotknow    0    1    2\n               no         138  126   97\n               refused      0    0    1\n               yes        132  152  119\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nManual inspection shows some possible identifying information (names) in child_medical_specialist_comments.\n\n\n\n\nHearing tested\n\n\n\nTable 10.6: Hearing test and context\n\n\nhearing_tested &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_hearing_tested) |&gt;\n  dplyr::filter(!is.na(child_hearing_tested))\n\nxtabs(formula = ~ child_hearing_tested + age_group, data = hearing_tested)\n\n                         age_group\nchild_hearing_tested      12mo 18mo 24mo\n  afterhome                  6   16   11\n  birthhospital            222  208  149\n  birthhospital afterhome   33   43   43\n  birthhospital donotknow    1    1    1\n  donotknow                  1    5    6\n  no                         7    6    8\n  refused                    0    0    1\n\n\n\n\n\n\nVision tested\n\n\n\nTable 10.7: Vision test and context\n\n\nvision_tested &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, child_vision_tested) |&gt;\n  dplyr::filter(!is.na(child_vision_tested))\n\nxtabs(formula = ~ child_vision_tested + age_group, data = vision_tested)\n\n                         age_group\nchild_vision_tested       12mo 18mo 24mo\n  afterhome                 45   51   44\n  birthhospital             66   73   54\n  birthhospital afterhome   24   31   29\n  birthhospital donotknow    1    1    1\n  donotknow                 32   37   26\n  no                       101   84   62\n  no donotknow               1    2    2\n  refused                    0    0    1\n\n\n\n\n\n\nIllnesses and allergies\n\nillness_allergy &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(c(\"allergies\", \"ear_infection\", \n                                                 \"asthma\",\n                                                 \"respiratory\",\n                                                 \"gastrointestinal\")))\n\nillness_allergy |&gt;\n  tidyr::pivot_longer(!c('child_sex', 'age_group'),\n                      names_to = \"type\",\n                      values_to = \"response\") |&gt;\n  dplyr::filter(!is.na(response)) |&gt;\n  dplyr::mutate(response = factor(response,\n                                  c(\"no\", \"yes\", \"donotknow\", \"refused\"))) |&gt;\n  ggplot() +\n  aes(x = response, fill = child_sex) +\n  geom_bar() +\n  facet_grid(cols = vars(type), rows = vars(age_group)) +\n  scale_x_discrete(guide = guide_axis(angle = 90)) +\n  xlab(\"\") +\n  theme(legend.position = \"bottom\", legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 10.9: Parent reports of child illnesses or allergies.\n\n\n\n\n\n\n\nInjuries\n\n\n\nTable 10.8: Child injuries\n\n\nxtabs(formula = ~ child_injury_times + age_group, data = hv)\n\n                  age_group\nchild_injury_times 12mo 18mo 24mo\n         donotknow    1    2    1\n         never      244  242  160\n         once        19   29   49\n         refused      0    0    1\n         threemore    3    0    1\n         twice        3    6    7\n\n\n\n\n\n\n\nMom health\n\nSmoking & drinking\n\n\n\nTable 10.9: Smoking or drinking during pregancy\n\n\nsmoking_drinking &lt;- hv |&gt;\n  dplyr::select(age_group,\n    child_sex,\n    contains(\"smoking\"),\n    contains(\"drinking\")\n  )\n\nxtabs(formula = ~ mom_pregnant_smoking + mom_pregnant_drinking, smoking_drinking)\n\n                    mom_pregnant_drinking\nmom_pregnant_smoking donotknow  no refused yes\n           donotknow         2   1       0   0\n           no                0 632       1 125\n           refused           0   0       1   0\n           yes               0   1       0   2\n\n\n\n\n\nxtabs(formula = ~ smoking_house + smoking_car, smoking_drinking)\n\n             smoking_car\nsmoking_house donotknow  no refused yes\n    donotknow         1   1       0   0\n    no                1 745       0   3\n    refused           0   3       1   0\n    yes               0  10       0   3\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.10\n\n\nsmoking_drinking |&gt;\n  dplyr::select(smoking_comments) |&gt;\n  dplyr::filter(!is.na(smoking_comments)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\n\nTable 10.11: Smoking currently\n\n\nxtabs(formula = ~ mom_smoking_now, smoking_drinking)\n\nmom_smoking_now\ndonotknow        no   refused       yes \n        1       759         4         4 \n\n\n\n\n\n\n\nTable 10.12: Amount if smoking currently\n\n\nsmoking_drinking$mom_smoking_now_amount[!is.na(smoking_drinking$mom_smoking_now_amount)]\n\n[1]  1  4  3 10\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe following may contain identifiable data.\n\n\n\n\n\nTable 10.13: Drinking comments\n\n\nsmoking_drinking |&gt;\n  dplyr::select(mom_drinking_comments) |&gt;\n  dplyr::filter(!is.na(mom_drinking_comments)) |&gt;\n  knitr::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()\n\n\n\n\n\nPatient Health Questionnaire (PHQ-4)\n\nphq4 &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(\"phq4_\")) |&gt;\n  dplyr::select(-contains(\"comments\"))\n\nnames(phq4) &lt;- gsub(pattern = \"phq4_\", replacement = \"\", names(phq4))\n\nphq4 |&gt;\n  tidyr::pivot_longer(!c('child_sex', 'age_group'),\n                      names_to = \"question\",\n                      values_to = \"response\") |&gt;\n  dplyr::filter(!is.na(response)) |&gt;\n  dplyr::mutate(response = factor(\n    response,\n    c(\"notatall\", \"severaldays\", \"morethanhalf\", \"nearly\")\n  ), ordered = TRUE) |&gt;\n  ggplot() +\n  aes(x = response, fill = child_sex) +\n  geom_bar() +\n  facet_grid(cols = vars(question), rows = vars(age_group)) +\n  scale_x_discrete(guide = guide_axis(angle = 90)) +\n  xlab(\"\") +\n  theme(legend.position = \"bottom\", legend.title = element_blank())\n\n\n\n\n\n\n\nFigure 10.10: PHQ4 responses by age group and child sex",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  },
  {
    "objectID": "home-visit-viz.html#rothbart-ecbq",
    "href": "home-visit-viz.html#rothbart-ecbq",
    "title": "Home visit: Visualizations",
    "section": "Rothbart ECBQ",
    "text": "Rothbart ECBQ\nThe next section provides visualizations of the Rothbart Early Childhood Behavior Questionnaire (ECBQ) data related to child temperament.\n\necbq &lt;- hv |&gt;\n  dplyr::select(child_sex, age_group, contains(\"rothbart\"))\n\necbq_complete &lt;- ecbq |&gt;\n  tidyr::complete() |&gt;\n  dplyr::select(-comments_rothbart)\n\necbq_vars &lt;- names(ecbq)[stringr::str_detect(names(ecbq_complete),\"rothbart_\")]\necbq_vars &lt;- ecbq_vars[!stringr::str_detect(ecbq_vars, \"comments_rothbart\")]\n\n\npurrr::map(ecbq_vars, suppressMessages(ecbq_plot), df = ecbq_complete)\n\n[[1]]\n\n\n\n\n\n\n\n\n\n\n[[2]]\n\n\n\n\n\n\n\n\n\n\n[[3]]\n\n\n\n\n\n\n\n\n\n\n[[4]]\n\n\n\n\n\n\n\n\n\n\n[[5]]\n\n\n\n\n\n\n\n\n\n\n[[6]]\n\n\n\n\n\n\n\n\n\n\n[[7]]\n\n\n\n\n\n\n\n\n\n\n[[8]]\n\n\n\n\n\n\n\n\n\n\n[[9]]\n\n\n\n\n\n\n\n\n\n\n[[10]]\n\n\n\n\n\n\n\n\n\n\n[[11]]\n\n\n\n\n\n\n\n\n\n\n[[12]]\n\n\n\n\n\n\n\n\n\n\n[[13]]\n\n\n\n\n\n\n\n\n\n\n[[14]]\n\n\n\n\n\n\n\n\n\n\n[[15]]\n\n\n\n\n\n\n\n\n\n\n[[16]]\n\n\n\n\n\n\n\n\n\n\n[[17]]\n\n\n\n\n\n\n\n\n\n\n[[18]]\n\n\n\n\n\n\n\n\n\n\n[[19]]\n\n\n\n\n\n\n\n\n\n\n[[20]]\n\n\n\n\n\n\n\n\n\n\n[[21]]\n\n\n\n\n\n\n\n\n\n\n[[22]]\n\n\n\n\n\n\n\n\n\n\n[[23]]\n\n\n\n\n\n\n\n\n\n\n[[24]]\n\n\n\n\n\n\n\n\n\n\n[[25]]\n\n\n\n\n\n\n\n\n\n\n[[26]]\n\n\n\n\n\n\n\n\n\n\n[[27]]\n\n\n\n\n\n\n\n\n\n\n[[28]]\n\n\n\n\n\n\n\n\n\n\n[[29]]\n\n\n\n\n\n\n\n\n\n\n[[30]]\n\n\n\n\n\n\n\n\n\n\n[[31]]\n\n\n\n\n\n\n\n\n\n\n[[32]]\n\n\n\n\n\n\n\n\n\n\n[[33]]\n\n\n\n\n\n\n\n\n\n\n[[34]]\n\n\n\n\n\n\n\n\n\n\n[[35]]\n\n\n\n\n\n\n\n\n\n\n[[36]]\n\n\n\n\n\n\n\n\n\n\nComments\n\n\n\n\n\n\nWarning\n\n\n\nManual inspection shows that the comments field has some names. We omit printing the comments here until we can be assured that there is no identifiying information in the comments.\n\n\n\necbq |&gt;\n  dplyr::select(comments_rothbart) |&gt;\n  dplyr::filter(!is.na(comments_rothbart)) |&gt;\n  kableExtra::kable(format = 'html') |&gt;\n  kableExtra::kable_classic()",
    "crumbs": [
      "Home visit",
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Home visit: Visualizations</span>"
    ]
  }
]