[{"path":"index.html","id":"about","chapter":"About","heading":"About","text":"","code":""},{"path":"index.html","id":"purpose","chapter":"About","heading":"Purpose","text":"PLAY project researchers use KoBoToolbox collect data participant families.\nData sessions PLAY data collection sites pushed common set files KoBoToolbox server.document describes process ) downloading, ii) parsing, iii) cleaning, iv) exporting files forms suitable data analysis.","code":""},{"path":"index.html","id":"overview-of-data-sets","chapter":"About","heading":"Overview of data sets","text":"two sets data collected using KoBoToolbox.\nOne set collected recruiting screening calls study.\nsecond set collected home visit.","code":""},{"path":"index.html","id":"data-access-and-processing","chapter":"About","heading":"Data access and processing","text":"data downloaded manipulated locally synched GitHub.\naccomplished adding data .gitignore.separate processes detecting deleting personal identifiers specific data files exporting ‘cleaned’ versions may shared Databrary.","code":""},{"path":"index.html","id":"home-visit-data","chapter":"About","heading":"Home visit data","text":"three (3) age groups (12-, 18-, 24-month-olds) four (4) different language environment groups (English-, Spanish-, Bilingual-English-dominant, Bilingual-Spanish-dominant).\nSince language questions specific questions vary age group language environment group, \\(3*4=12\\) different KoBoToolbox survey form files must processed.","code":""},{"path":"setup.html","id":"setup","chapter":"Setup","heading":"Setup","text":"section describes setup procedure.","code":""},{"path":"setup.html","id":"authentication","chapter":"Setup","heading":"Authentication","text":"data stored account https://kf.kobotoolbox.org.\nlogin credentials account shared among PLAY Project staff.\naccess site’s API programmatically, API key downloaded added local ~/.Renviron file.KoBoToolBox API key synched GitHub.","code":""},{"path":"setup.html","id":"set-up","chapter":"Setup","heading":"Set-up","text":"test whether local system API key installed, run command Sys.getenv(\"KOBO_API_KEY\").","code":""},{"path":"setup.html","id":"check-kobo-api-key","chapter":"Setup","heading":"Check KoBo API Key","text":"","code":"\nkb_api <- Sys.getenv(\"KOBO_API_KEY\")\nif ((length(kb_api) != 1) || (!is.character(kb_api))) {\n  stop(\"'KOBO_API_KEY' not installed in .Renviron\")\n} else {\n  message(\"'KOBO_API_KEY' installed.\")\n}## 'KOBO_API_KEY' installed."},{"path":"setup.html","id":"loadsource-helper-functions","chapter":"Setup","heading":"Load/source helper functions","text":"following blocks evaluated move targets package\nuse renv package.\ninstructions updated.API key installed, several custom functions R/kobo_export.R can run.","code":"\nif (file.exists(\"R/kobo_export.R\")) {\n  source(file.path(\"R/kobo_export.R\"))\n} else {\n  stop(\"File not found: 'R/kobo_export.R'\")\n}"},{"path":"setup.html","id":"install-dependencies","chapter":"Setup","heading":"Install dependencies","text":"helper functions require several external packages. confirm installed, run following chunk.","code":"\nif (params$install_deps) {\n  install_kobo_packages()  \n} else {\n  message(\"'params$install_deps' is FALSE, so no dependencies are installed.\")\n}"},{"path":"screening-call.html","id":"screening-call","chapter":"Screening call","heading":"Screening call","text":"","code":""},{"path":"screening-call.html","id":"collection-protocol","chapter":"Screening call","heading":"Collection protocol","text":"Details data collection protocol participant screening recruiting can found PLAY Project website.make workflow robust reproducible, much work embedded functions (R/functions.R) extensive use made targets package.\ndocument describes workflow, none code chunks executed.tar_target() syntax read follows: “target” variable file left, function generates right.","code":""},{"path":"screening-call.html","id":"retrieve-files-from-kobotoolbox","chapter":"Screening call","heading":"Retrieve files from KoBoToolbox","text":"relevant KoBoToolbox data files ‘Demographic Questionnaire’ title.\nlist files save data frame called kb_df.","code":"tar_target(kb_df, list_kobo_data())"},{"path":"screening-call.html","id":"save-selected-raw-files-to-local-directory","chapter":"Screening call","heading":"Save selected raw files to local directory","text":"Prepare retrieve demographic data files.\nfiles “Demographic” file name.\ncreate data frame kb_demog includes files.Next, retrieve relevant (XLSX-formatted) files store local directory.","code":"tar_target(kb_demog, dplyr::filter(kb_df, stringr::str_detect(title, \"Demographic\")))tar_target(screening_dir_xlsx, \"protocol/data/xlsx/screening\"),\n  tar_target(screening_downloads, retrieve_screening_xlsx(kb_demog, screening_dir_xlsx)),"},{"path":"screening-call.html","id":"convert-to-csvs","chapter":"Screening call","heading":"Convert to CSVs","text":"default, presume want convert XLSX files screening_dir_xlsx CSVs.strictly necessary, filter downloaded filename ensure includes ‘Demographic_Questionnaire’ form ID, integer.import XLSX files save CSVs","code":"tar_target(screening_dir_csv, \"protocol/data/csv/screening\")\ntar_target(\n  screening_csv_fns,\n  list.files(screening_dir_csv, pattern = \"[0-9]+.*\\\\.csv\", full.names = TRUE)tar_target(screening_xlsx_to_csv, load_screening_xlsx_save_csv(screening_dir_xlsx, screening_dir_csv))"},{"path":"screening-call.html","id":"merge-files","chapter":"Screening call","heading":"Merge files","text":"Next, merge separate screening files.following code documents early exploration files.\nshows field names equivalent.subsequent sub-section, clean field names three files can combined.","code":""},{"path":"screening-call.html","id":"compare-the-files","chapter":"Screening call","heading":"Compare the files","text":"merging, examine fields compare.Open first file.Open second file.Open third file.files different numbers columns, need careful creating merged data file.","code":"\ncsv_fns <- list.files(\"data/csv/screening\", pattern = \"\\\\.csv\", full.names = TRUE)\ndemog_1 <- readr::read_csv(csv_fns[1], show_col_types = FALSE)\ndim(demog_1)\ndemog_2 <- readr::read_csv(csv_fns[2], show_col_types = FALSE)\ndim(demog_2)\ndemog_3 <- readr::read_csv(csv_fns[3], show_col_types = FALSE)\ndim(demog_3)"},{"path":"screening-call.html","id":"extract-column-names","chapter":"Screening call","heading":"Extract column names","text":"Compare 1 2.Compare 1 3.Compare 2 3.second third data files overlap.","code":"\ndemog_1_names <- names(demog_1)\ndemog_2_names <- names(demog_2)\ndemog_3_names <- names(demog_3)\nsum(demog_1_names == demog_2_names)\nsum(demog_1_names == demog_3_names)\nsum(demog_2_names == demog_3_names)"},{"path":"screening-call.html","id":"extract-core-variables","chapter":"Screening call","heading":"Extract core variables","text":"Since data come enrolled participants, careful variables extract project management purposes.use separate functions old (first) file versus later two files.See protocol/R/functions.R focus clean_demog_1() clean_demog_2().scheme inelegant brittle. improved.","code":"\nsource(\"R/functions.R\")\nclean_demog_1## function(csv_fn) {\n##   require(readr)\n##   \n##   stopifnot(\"csv_fn not found\" = file.exists(csv_fn))\n##   \n##   df_1 <- readr::read_csv(csv_fn, show_col_types = FALSE)\n##   df_1 %>%\n##     dplyr::select(., submit_date = c_today, \n##                   site_id = `play_phone_questionnaire/group_siteinfo/site_id`,\n##                   sub_num = `play_phone_questionnaire/group_siteinfo/subject_number`,\n##                   child_age_mos = `play_phone_questionnaire/check_childage`,\n##                   child_sex = `play_phone_questionnaire/child_sex`,\n##                   language_to_child = `play_phone_questionnaire/language_spoken_child`,\n##                   language_spoken_home = `play_phone_questionnaire/language_spoken_home`,\n##                   child_bornonduedate = `play_phone_questionnaire/child_information/child_onterm`,\n##                   child_weight_pounds = `play_phone_questionnaire/child_information/child_weight_pounds`,\n##                   child_weight_ounces = `play_phone_questionnaire/child_information/child_weight_ounces`,\n##                   child_birth_complications = `play_phone_questionnaire/child_information/child_birth_complications`,\n##                   major_illnesses_injuries = `play_phone_questionnaire/child_information/major_illnesses_injuries`,\n##                   child_sleep_time = `play_phone_questionnaire/child_information/child_sleep_time`,\n##                   child_wake_time = `play_phone_questionnaire/child_information/child_wake_time`,\n##                   child_nap_hours = `play_phone_questionnaire/child_information/child_nap_hours`,\n##                   child_sleep_location = `play_phone_questionnaire/child_information/child_sleep_location`,\n##                   mother_childbirth_age = `play_phone_questionnaire/parent_information/mother_information/mother_childbirth_age`,\n##                   mother_race = `play_phone_questionnaire/parent_information/mother_information/mother_race`,\n##                   mother_ethnicity = `play_phone_questionnaire/parent_information/mother_information/mother_ethnicity`,\n##                   ) %>%\n##     dplyr::mutate(\n##       .,\n##       site_id = dplyr::recode(\n##         site_id,\n##         NYU = \"NYUNI\",\n##         new_york_unive = \"NYUNI\",\n##         georgetown_uni = \"GEORG\",\n##         GTN = \"GEORG\",\n##         UCR = \"UCRIV\"\n##       )\n##     ) %>%\n##     dplyr::filter(.,!stringr::str_detect(site_id, '_of__'))\n## }\nclean_demog_2## function(csv_fn) {\n##   require(readr)\n##   require(dplyr)\n##   \n##   stopifnot(\"csv_fn not found\" = file.exists(csv_fn))\n##   \n##   df_2 <- readr::read_csv(csv_fn, show_col_types = FALSE)\n##   df_2 %>%\n##     dplyr::select(submit_date = c_today, \n##                   site_id = `play_demo_questionnaire/group_siteinfo/site_id`,\n##                   sub_num = `play_demo_questionnaire/group_siteinfo/subject_number`,\n##                   child_age_mos = `play_demo_questionnaire/check_childage`,\n##                   child_sex = `play_demo_questionnaire/child_sex`,\n##                   language_to_child = `play_demo_questionnaire/language_spoken_child`,\n##                   language_spoken_home = `play_demo_questionnaire/language_spoken_house`,\n##                   child_bornonduedate = `play_demo_questionnaire/child_information/child_onterm`,\n##                   child_weight_pounds = `play_demo_questionnaire/child_information/child_weight_pounds`,\n##                   child_weight_ounces = `play_demo_questionnaire/child_information/child_weight_ounces`,\n##                   child_birth_complications = `play_demo_questionnaire/child_information/child_birth_complications`,\n##                   major_illnesses_injuries = `play_demo_questionnaire/child_information/major_illnesses_injuries`,\n##                   child_sleep_time = `play_demo_questionnaire/child_information/child_sleep_time`,\n##                   child_wake_time = `play_demo_questionnaire/child_information/child_wake_time`,\n##                   child_nap_hours = `play_demo_questionnaire/child_information/child_nap_hours`,\n##                   child_sleep_location = `play_demo_questionnaire/child_information/child_sleep_location`,\n##                   mother_childbirth_age = `play_demo_questionnaire/group_mominfo/mom_childbirth_age`,\n##                   mother_race = `play_demo_questionnaire/group_mominfo/mom_race`,\n##                   mother_ethnicity = `play_demo_questionnaire/group_mominfo/mom_ethnicity`,\n##     )\n## }"},{"path":"screening-call.html","id":"merge-files-1","chapter":"Screening call","heading":"Merge files","text":"","code":"tar_target(demog_submissions, clean_merge_demog(screening_csv_fns))"},{"path":"home-visit.html","id":"home-visit","chapter":"Home visit","heading":"Home visit","text":"","code":""},{"path":"home-visit.html","id":"protocol","chapter":"Home visit","heading":"Protocol","text":"Details data collection protocol home visit can found [PLAY Project website]((https://www.play-project.org/collection.html#Home_Visit).","code":""},{"path":"home-visit.html","id":"download-data","chapter":"Home visit","heading":"Download data","text":"Data files language age-group conditions stored KoBoToolbox (KBT).Store data files KBT kb_df.List data forms specific home visit filtering files names contain “Home”.","code":"tar_target(kb_df, list_kobo_data()),\nlibrary(targets)\ntar_load(kb_df)\nkb_df##         id              id_string\n## 1   411456 a58ZhjX6M8WXtzLGvBaEaG\n## 2   920365 a6r99tj8RaULvzTM7MuWpi\n## 3   740625 a8HyzdxnVjK53dt4fX3Vup\n## 4  1129568 a9n2DWjJw3ayJmkijsAm7h\n## 5   331453 aae4wz2tpkSnAkea2PAzin\n## 6   363465 abYGMsrMvkGsnA4xm9kqC9\n## 7   363431 acCBJaRqBkSMPYdvaaWCSu\n## 8   334099 ad3NtS6TDPuKTUKCAyCuby\n## 9   363349 aEMERWLYQAdhaMKMt5QkD7\n## 10  307736 aeMJQLo56HWyVHkKX9oaJD\n## 11  334134 agChfbnGHc6fiUdfYUaZ2z\n## 12  346565 aGD5Q64T5zTQtakQaS8x55\n## 13  359546 aGLEqT7eRBhuPgizCQBeqA\n## 14  740631 ahYJ7XRUcit8gbFYwaxnAV\n## 15  361981 aJNWkgeX7c9jEFiNAgJspn\n## 16  738593 aJPU78BR3NfU9rm4LzRVLt\n## 17 1151489 aLqdPLTCZb8jvFkDxcFwzy\n## 18  920339 aLxPNje5yoeZijafFoVz5z\n## 19  738513 aM2ob4BdwFucdjjcUNTwms\n## 20 1136694 aMteoHisncRUStdyZfsjMB\n## 21  275882 anqhvxKtQieo7gc9uPqJ3y\n## 22  740623 aoLcmmN8KWG4N6A3XpUiRT\n## 23  740628 aRJW7SwKsVyZu8b4FighiM\n## 24  363466 asv7tL6CEYjiW2XCkLxhcX\n## 25  411469 aswcEAtxj24u9MfuBmS9AW\n## 26  740630 aThMD6zuEFjtTfptwcpZPg\n## 27  411388 aTyGBYk6HvRXmki9ksb29p\n## 28  740624 aUeYzPfq6WED4dDF28VT9D\n## 29  363381 aWd7wujF5d5HYaYMhT4jBZ\n## 30  740626 awMnFDna5kWR3LXKyGmFMd\n## 31  331848 axYbEbLcJxzUNFbqMVySjJ\n## 32  740629 axyJSgLRDeSk3BHB6cJmYk\n## 33  408149 ayhCy68ZTaDGc7tuGthQpJ\n## 34  740627 aYokcZAjTZ9JCyVXz4R5rh\n##                                                                      title\n## 1              PLAY Home Questionaires - 12 Bilingual English (2020-03-04)\n## 2                                                 NYU_Pilot DLL-ES_Level_2\n## 3                                        PLAY_HomeQuestionaires_12_English\n## 4                                        Clone of NYU_Pilot DLL-ES_Level_1\n## 5                                    PLAY Home Questionnaires (24 English)\n## 6             PLAY Home Questionnaires - 24 Bilingual English (2020-03-04)\n## 7                       PLAY Home Questionnaires - 12 English (2020-03-04)\n## 8                        PLAY Home Questionnaires (12 Bilingual - English)\n## 9                       PLAY Home Questionnaires - 18 English (2020-03-04)\n## 10                                   PLAY Home Questionnaires (18 English)\n## 11                                PLAY Demographic Questionnaire (Spanish)\n## 12                                                   PLAY Post-Visit Notes\n## 13                                          PLAY Demographic Questionnaire\n## 14                             PLAY_HomeQuestionaires_24_Bilingual_English\n## 15                                                   PLAY Post-Visit Notes\n## 16                                                DLL-ES_Level_2 (English)\n## 17 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n## 18                                                NYU_Pilot DLL-ES_Level_1\n## 19                                               DLL-ES_Level_1_2021_07_30\n## 20             Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO TODAY\n## 21                                          PLAY Demographic Questionnaire\n## 22                             PLAY_HomeQuestionaires_12_Bilingual_English\n## 23                                      PLAY_HomeQuestionnaires_18_English\n## 24            PLAY Home Questionnaires - 18 Bilingual English (2020-03-04)\n## 25            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n## 26                             PLAY_HomeQuestionaires_24_Bilingual_Spanish\n## 27            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n## 28                             PLAY_HomeQuestionaires_12_Bilingual_Spanish\n## 29                      PLAY Home Questionnaires - 24 English (2020-03-04)\n## 30                             PLAY_HomeQuestionaires_18_Bilingual_English\n## 31                                   PLAY Home Questionnaires (12 English)\n## 32                                      PLAY_HomeQuestionnaires_24_English\n## 33            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-03-04)\n## 34                             PLAY_HomeQuestionaires_18_Bilingual_Spanish\n##                                                                description\n## 1            PLAY Home Questionaires - 12 Bilingual (English) (2020-03-04)\n## 2                                                 NYU_Pilot DLL-ES_Level_2\n## 3                             PLAY_HomeQuestionaires_12_English-2021-07-29\n## 4                                        Clone of NYU_Pilot DLL-ES_Level_1\n## 5                                    PLAY Home Questionnaires (24 English)\n## 6             PLAY Home Questionnaires - 24 Bilingual English (2019-11-20)\n## 7                       PLAY Home Questionnaires - 12 English (2019-11-20)\n## 8                        PLAY Home Questionnaires (12 Bilingual - English)\n## 9                       PLAY Home Questionnaires - 18 English (2018-11-20)\n## 10                                   PLAY Home Questionnaires (18 English)\n## 11                                PLAY Demographic Questionnaire (Spanish)\n## 12                                              PLAY Cleanup Checklists v2\n## 13                                           New Demographic Questionnaire\n## 14                  PLAY_HomeQuestionaires_24_Bilingual_English-2021-07-30\n## 15                                      PLAY Post-Visit Notes (2019-11-18)\n## 16                                          DLL-ES_Level_2_KBTB_2021_07_28\n## 17 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n## 18                                                NYU_Pilot DLL-ES_Level_1\n## 19                                               DLL-ES_Level_1_2021_07_28\n## 20                             Clone of PLAY_HomeQuestionnaires_18_English\n## 21                                                PLAY Phone Questionnaire\n## 22                  PLAY_HomeQuestionaires_12_Bilingual_English-2021-07-29\n## 23                           PLAY_HomeQuestionnaires_18_English-2021-07-29\n## 24            PLAY Home Questionnaires - 18 Bilingual English (2019-11-20)\n## 25            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n## 26                  PLAY_HomeQuestionaires_24_Bilingual_Spanish-2021-07-30\n## 27            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n## 28                  PLAY_HomeQuestionaires_12_Bilingual_Spanish-2021-07-29\n## 29                      PLAY Home Questionnaires - 24 English (2019-11-20)\n## 30                  PLAY_HomeQuestionaires_18_Bilingual_English-2021-07-29\n## 31                                   PLAY Home Questionnaires (12 English)\n## 32                           PLAY_HomeQuestionnaires_24_English-2021-07-30\n## 33            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-02-27)\n## 34                  PLAY_HomeQuestionaires_18_Bilingual_Spanish-2021-07-29\n##                                               url\n## 1   https://kc.kobotoolbox.org/api/v1/data/411456\n## 2   https://kc.kobotoolbox.org/api/v1/data/920365\n## 3   https://kc.kobotoolbox.org/api/v1/data/740625\n## 4  https://kc.kobotoolbox.org/api/v1/data/1129568\n## 5   https://kc.kobotoolbox.org/api/v1/data/331453\n## 6   https://kc.kobotoolbox.org/api/v1/data/363465\n## 7   https://kc.kobotoolbox.org/api/v1/data/363431\n## 8   https://kc.kobotoolbox.org/api/v1/data/334099\n## 9   https://kc.kobotoolbox.org/api/v1/data/363349\n## 10  https://kc.kobotoolbox.org/api/v1/data/307736\n## 11  https://kc.kobotoolbox.org/api/v1/data/334134\n## 12  https://kc.kobotoolbox.org/api/v1/data/346565\n## 13  https://kc.kobotoolbox.org/api/v1/data/359546\n## 14  https://kc.kobotoolbox.org/api/v1/data/740631\n## 15  https://kc.kobotoolbox.org/api/v1/data/361981\n## 16  https://kc.kobotoolbox.org/api/v1/data/738593\n## 17 https://kc.kobotoolbox.org/api/v1/data/1151489\n## 18  https://kc.kobotoolbox.org/api/v1/data/920339\n## 19  https://kc.kobotoolbox.org/api/v1/data/738513\n## 20 https://kc.kobotoolbox.org/api/v1/data/1136694\n## 21  https://kc.kobotoolbox.org/api/v1/data/275882\n## 22  https://kc.kobotoolbox.org/api/v1/data/740623\n## 23  https://kc.kobotoolbox.org/api/v1/data/740628\n## 24  https://kc.kobotoolbox.org/api/v1/data/363466\n## 25  https://kc.kobotoolbox.org/api/v1/data/411469\n## 26  https://kc.kobotoolbox.org/api/v1/data/740630\n## 27  https://kc.kobotoolbox.org/api/v1/data/411388\n## 28  https://kc.kobotoolbox.org/api/v1/data/740624\n## 29  https://kc.kobotoolbox.org/api/v1/data/363381\n## 30  https://kc.kobotoolbox.org/api/v1/data/740626\n## 31  https://kc.kobotoolbox.org/api/v1/data/331848\n## 32  https://kc.kobotoolbox.org/api/v1/data/740629\n## 33  https://kc.kobotoolbox.org/api/v1/data/408149\n## 34  https://kc.kobotoolbox.org/api/v1/data/740627tar_target(kb_home, dplyr::filter(kb_df, stringr::str_detect(title, \"Home\")))\ntar_load(kb_home)\nkb_home##         id              id_string\n## 1   411456 a58ZhjX6M8WXtzLGvBaEaG\n## 2   740625 a8HyzdxnVjK53dt4fX3Vup\n## 3   331453 aae4wz2tpkSnAkea2PAzin\n## 4   363465 abYGMsrMvkGsnA4xm9kqC9\n## 5   363431 acCBJaRqBkSMPYdvaaWCSu\n## 6   334099 ad3NtS6TDPuKTUKCAyCuby\n## 7   363349 aEMERWLYQAdhaMKMt5QkD7\n## 8   307736 aeMJQLo56HWyVHkKX9oaJD\n## 9   740631 ahYJ7XRUcit8gbFYwaxnAV\n## 10 1151489 aLqdPLTCZb8jvFkDxcFwzy\n## 11 1136694 aMteoHisncRUStdyZfsjMB\n## 12  740623 aoLcmmN8KWG4N6A3XpUiRT\n## 13  740628 aRJW7SwKsVyZu8b4FighiM\n## 14  363466 asv7tL6CEYjiW2XCkLxhcX\n## 15  411469 aswcEAtxj24u9MfuBmS9AW\n## 16  740630 aThMD6zuEFjtTfptwcpZPg\n## 17  411388 aTyGBYk6HvRXmki9ksb29p\n## 18  740624 aUeYzPfq6WED4dDF28VT9D\n## 19  363381 aWd7wujF5d5HYaYMhT4jBZ\n## 20  740626 awMnFDna5kWR3LXKyGmFMd\n## 21  331848 axYbEbLcJxzUNFbqMVySjJ\n## 22  740629 axyJSgLRDeSk3BHB6cJmYk\n## 23  408149 ayhCy68ZTaDGc7tuGthQpJ\n## 24  740627 aYokcZAjTZ9JCyVXz4R5rh\n##                                                                      title\n## 1              PLAY Home Questionaires - 12 Bilingual English (2020-03-04)\n## 2                                        PLAY_HomeQuestionaires_12_English\n## 3                                    PLAY Home Questionnaires (24 English)\n## 4             PLAY Home Questionnaires - 24 Bilingual English (2020-03-04)\n## 5                       PLAY Home Questionnaires - 12 English (2020-03-04)\n## 6                        PLAY Home Questionnaires (12 Bilingual - English)\n## 7                       PLAY Home Questionnaires - 18 English (2020-03-04)\n## 8                                    PLAY Home Questionnaires (18 English)\n## 9                              PLAY_HomeQuestionaires_24_Bilingual_English\n## 10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n## 11             Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO TODAY\n## 12                             PLAY_HomeQuestionaires_12_Bilingual_English\n## 13                                      PLAY_HomeQuestionnaires_18_English\n## 14            PLAY Home Questionnaires - 18 Bilingual English (2020-03-04)\n## 15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n## 16                             PLAY_HomeQuestionaires_24_Bilingual_Spanish\n## 17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n## 18                             PLAY_HomeQuestionaires_12_Bilingual_Spanish\n## 19                      PLAY Home Questionnaires - 24 English (2020-03-04)\n## 20                             PLAY_HomeQuestionaires_18_Bilingual_English\n## 21                                   PLAY Home Questionnaires (12 English)\n## 22                                      PLAY_HomeQuestionnaires_24_English\n## 23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-03-04)\n## 24                             PLAY_HomeQuestionaires_18_Bilingual_Spanish\n##                                                                description\n## 1            PLAY Home Questionaires - 12 Bilingual (English) (2020-03-04)\n## 2                             PLAY_HomeQuestionaires_12_English-2021-07-29\n## 3                                    PLAY Home Questionnaires (24 English)\n## 4             PLAY Home Questionnaires - 24 Bilingual English (2019-11-20)\n## 5                       PLAY Home Questionnaires - 12 English (2019-11-20)\n## 6                        PLAY Home Questionnaires (12 Bilingual - English)\n## 7                       PLAY Home Questionnaires - 18 English (2018-11-20)\n## 8                                    PLAY Home Questionnaires (18 English)\n## 9                   PLAY_HomeQuestionaires_24_Bilingual_English-2021-07-30\n## 10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA\n## 11                             Clone of PLAY_HomeQuestionnaires_18_English\n## 12                  PLAY_HomeQuestionaires_12_Bilingual_English-2021-07-29\n## 13                           PLAY_HomeQuestionnaires_18_English-2021-07-29\n## 14            PLAY Home Questionnaires - 18 Bilingual English (2019-11-20)\n## 15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)\n## 16                  PLAY_HomeQuestionaires_24_Bilingual_Spanish-2021-07-30\n## 17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)\n## 18                  PLAY_HomeQuestionaires_12_Bilingual_Spanish-2021-07-29\n## 19                      PLAY Home Questionnaires - 24 English (2019-11-20)\n## 20                  PLAY_HomeQuestionaires_18_Bilingual_English-2021-07-29\n## 21                                   PLAY Home Questionnaires (12 English)\n## 22                           PLAY_HomeQuestionnaires_24_English-2021-07-30\n## 23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-02-27)\n## 24                  PLAY_HomeQuestionaires_18_Bilingual_Spanish-2021-07-29\n##                                               url\n## 1   https://kc.kobotoolbox.org/api/v1/data/411456\n## 2   https://kc.kobotoolbox.org/api/v1/data/740625\n## 3   https://kc.kobotoolbox.org/api/v1/data/331453\n## 4   https://kc.kobotoolbox.org/api/v1/data/363465\n## 5   https://kc.kobotoolbox.org/api/v1/data/363431\n## 6   https://kc.kobotoolbox.org/api/v1/data/334099\n## 7   https://kc.kobotoolbox.org/api/v1/data/363349\n## 8   https://kc.kobotoolbox.org/api/v1/data/307736\n## 9   https://kc.kobotoolbox.org/api/v1/data/740631\n## 10 https://kc.kobotoolbox.org/api/v1/data/1151489\n## 11 https://kc.kobotoolbox.org/api/v1/data/1136694\n## 12  https://kc.kobotoolbox.org/api/v1/data/740623\n## 13  https://kc.kobotoolbox.org/api/v1/data/740628\n## 14  https://kc.kobotoolbox.org/api/v1/data/363466\n## 15  https://kc.kobotoolbox.org/api/v1/data/411469\n## 16  https://kc.kobotoolbox.org/api/v1/data/740630\n## 17  https://kc.kobotoolbox.org/api/v1/data/411388\n## 18  https://kc.kobotoolbox.org/api/v1/data/740624\n## 19  https://kc.kobotoolbox.org/api/v1/data/363381\n## 20  https://kc.kobotoolbox.org/api/v1/data/740626\n## 21  https://kc.kobotoolbox.org/api/v1/data/331848\n## 22  https://kc.kobotoolbox.org/api/v1/data/740629\n## 23  https://kc.kobotoolbox.org/api/v1/data/408149\n## 24  https://kc.kobotoolbox.org/api/v1/data/740627"},{"path":"home-visit.html","id":"save-selected-raw-files-to-local-directory-1","chapter":"Home visit","heading":"Save selected raw files to local directory","text":"Prepare retrieve home visit files.\\(n=\\) 24 home visit data files.","code":"\nn_files <- dim(kb_home)[1]tar_target(home_visit_dir_xlsx, \"data/xlsx/home_visit\"),\ntar_target(home_visit_dir_csv, \"data/csv/home_visit\"),\ntar_target(home_visit_downloads, retrieve_kobo_xlsx(kb_home, home_visit_dir_xlsx))"},{"path":"home-visit.html","id":"normalize-file-names","chapter":"Home visit","heading":"Normalize file names","text":"form names inconsistent, normalize fit following pattern:<form_id>_PLAY_HomeQuestionnaires_<age_group>_<lang_group>.xlsx","code":"tar_target(home_visit_renamed, rename_home_xlsx(home_visit_dir_xlsx, home_visit_dir_xlsx))"},{"path":"home-visit.html","id":"save-xlsx-as-csv","chapter":"Home visit","heading":"Save xlsx as csv","text":"","code":"tar_target(home_visit_xlsx_to_csv, load_xlsx_save_many_csvs(home_visit_dir_xlsx, home_visit_dir_csv, \"Home\"))"},{"path":"home-visit.html","id":"split-mb-cdi-from-other-questions","chapter":"Home visit","heading":"Split MB-CDI from other questions","text":"Next import CSV given form year, age group, language group, create two new CSV files: one MB-CDI data one survey questions.default, document presumes want convert CSV filesExtract ‘non-mbcdi’ questions first add ‘non_mbcdi’ filename.Extracting MB-CDI data nearly function call, these_questions parameter set ‘mbcdi’.","code":"tar_target(home_visit_csvs, list.files(home_visit_dir_csv, '^[0-9]+_PLAY.*\\\\csv', full.names = TRUE))\n\ntar_target(home_visit_non_mbcdi, purrr::map(\n    home_visit_csvs,\n    open_split_save,\n    csv_save_dir = home_visit_dir_csv,\n    these_questions = 'non_mbcdi'\n  ))tar_target(home_visit_mbcdi, purrr::map(\n    home_visit_csvs,\n    open_split_save,\n    csv_save_dir = home_visit_dir_csv,\n    these_questions = 'mbcdi'\n  ))"},{"path":"home-visit.html","id":"clean-data","chapter":"Home visit","heading":"Clean data","text":"","code":""},{"path":"home-visit.html","id":"remove-identifiers","chapter":"Home visit","heading":"Remove identifiers","text":"function remove_identifiers() R/kobo_export detects presence names, addresses, phone numbers, email, dates field names input file removes fields.\nalso modifies file name appending _deidentified.remove_identifiers() function detects fields:non-MBCDI file contains identifiers, target removal process.Note added data .gitignore protocol/, root directory HTML protocol, none data files made available via git GitHub. also means version control done raw data files .","code":"\nsource(\"~/rrr/KoBoToolbox/R/functions.R\", echo = FALSE, print.eval = FALSE)\nremove_identifiers## function(df) {\n##   contains_name <- stringr::str_detect(names(df), 'name')\n##   contains_address <- stringr::str_detect(names(df), 'address')\n##   contains_phone <- stringr::str_detect(names(df), 'phone')\n##   contains_email <- stringr::str_detect(names(df), 'email')\n##   contains_birthdate <- stringr::str_detect(names(df), 'birthdate')\n##   contains_first <- stringr::str_detect(names(df), 'first[12]?')\n##   contains_last <- stringr::str_detect(names(df), 'last[12]?')\n##   contains_city <- stringr::str_detect(names(df), 'city')\n##   contains_year <- stringr::str_detect(names(df), 'year[12]?')\n##   contains_month <- stringr::str_detect(names(df), 'month[12]?')\n##   contains_day <- stringr::str_detect(names(df), '/day[12]?$')\n##   \n##   identifiable_data <- contains_name | contains_address |\n##     contains_phone |\n##     contains_email | contains_birthdate | contains_first |\n##     contains_last |\n##     contains_city | contains_year | contains_month | contains_day\n##   \n##   identifiable_cols <- (1:length(names(df)))[identifiable_data]\n##   \n##   df_deidentified <- df %>%\n##     dplyr::select(., -all_of(identifiable_cols))\n##   \n##   df_deidentified\n## }tar_target(home_visit_non_mbcdi_csvs, list.files(home_visit_dir_csv, '^[0-9]+_non_mbcdi.*\\\\csv', full.names = TRUE)),\ntar_target(home_visit_remove_identifiers, purrr::map(\n    home_visit_non_mbcdi_csvs,\n    open_deidentify_save,\n    csv_save_dir = home_visit_dir_csv,\n    these_questions = 'non_mbcdi'\n  ))"},{"path":"data-dictionary.html","id":"data-dictionary","chapter":"Data dictionary","heading":"Data dictionary","text":"","code":""},{"path":"visualization.html","id":"visualization","chapter":"Visualization","heading":"Visualization","text":"","code":""}]
