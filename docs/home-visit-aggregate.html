<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Aggregate – PLAY Survey Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./home-visit-clean.html" rel="next">
<link href="./home-visit-gather.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="include/css/style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./home-visit-gather.html">Home visit</a></li><li class="breadcrumb-item"><a href="./home-visit-aggregate.html"><span class="chapter-title">Aggregate</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">PLAY Survey Data</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/PLAY-behaviorome/KoBoToolbox/tree/main/src/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Setup</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Screening</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./screen-gather.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Gather</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./screen-clean.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Clean</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./screen-viz.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Visualize</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./screen-data-dictionary.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data dictionary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Home visit</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./home-visit-gather.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Gather</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./home-visit-aggregate.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Aggregate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./home-visit-clean.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Clean</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./home-visit-viz.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Visualize</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./home-visit-data-dictionary.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data dictionary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Post visit</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./post-visit-gather.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Gather</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./post-visit-clean.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Clean</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./post-visit-viz.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Visualize</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./post-visit-data-dictionary.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data dictionary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Export</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./merge.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Merge files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./site-specific.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Site-specific files</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#about" id="toc-about" class="nav-link active" data-scroll-target="#about">About</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#remove-identifiers" id="toc-remove-identifiers" class="nav-link" data-scroll-target="#remove-identifiers">Remove identifiers</a></li>
  <li><a href="#quality-assurance-qa-reviews" id="toc-quality-assurance-qa-reviews" class="nav-link" data-scroll-target="#quality-assurance-qa-reviews">Quality assurance (QA) reviews</a>
  <ul class="collapse">
  <li><a href="#mb-cdi-files" id="toc-mb-cdi-files" class="nav-link" data-scroll-target="#mb-cdi-files">MB-CDI files</a></li>
  <li><a href="#non-mb-cdi-files" id="toc-non-mb-cdi-files" class="nav-link" data-scroll-target="#non-mb-cdi-files">Non-MB-CDI files</a></li>
  <li><a href="#older-forms" id="toc-older-forms" class="nav-link" data-scroll-target="#older-forms">‘Older’ forms</a></li>
  </ul></li>
  <li><a href="#make-aggregate-files" id="toc-make-aggregate-files" class="nav-link" data-scroll-target="#make-aggregate-files">Make aggregate files</a>
  <ul class="collapse">
  <li><a href="#non-mb-cdi-files-with-n288-columns" id="toc-non-mb-cdi-files-with-n288-columns" class="nav-link" data-scroll-target="#non-mb-cdi-files-with-n288-columns">non-MB-CDI files with <span class="math inline">\(n=288\)</span> columns</a></li>
  <li><a href="#non-mb-cdi-files-with-n287-columns" id="toc-non-mb-cdi-files-with-n287-columns" class="nav-link" data-scroll-target="#non-mb-cdi-files-with-n287-columns">non-MB-CDI files with <span class="math inline">\(n=287\)</span> columns</a></li>
  <li><a href="#examine-groups-with-n287-cols" id="toc-examine-groups-with-n287-cols" class="nav-link" data-scroll-target="#examine-groups-with-n287-cols">Examine groups with <span class="math inline">\(n=287\)</span> cols</a></li>
  </ul></li>
  <li><a href="#combining-the-two-groups-of-datasets" id="toc-combining-the-two-groups-of-datasets" class="nav-link" data-scroll-target="#combining-the-two-groups-of-datasets">Combining the two groups of datasets</a></li>
  <li><a href="#merging-and-exporting" id="toc-merging-and-exporting" class="nav-link" data-scroll-target="#merging-and-exporting">Merging and exporting</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/PLAY-behaviorome/KoBoToolbox/edit/main/src/home-visit-aggregate.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/PLAY-behaviorome/KoBoToolbox/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./home-visit-gather.html">Home visit</a></li><li class="breadcrumb-item"><a href="./home-visit-aggregate.html"><span class="chapter-title">Aggregate</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-title">Aggregate</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">September 17, 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="about" class="level2">
<h2 class="anchored" data-anchor-id="about">About</h2>
<p>This page documents the process for combining separate files into aggregate files containing data from many participants.</p>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>fl <span class="ot">&lt;-</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list.files</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"R"</span>),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"^load|^kobo_|^file_|^screen_|^ecbq_|^health_|^databrary|^home|^make|^export|^post_visit|CONSTANTS|utils"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">full.names =</span> <span class="cn">TRUE</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">walk</span>(fl, source)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(tidyverse))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="remove-identifiers" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="remove-identifiers">Remove identifiers</h2>
<p>The <strong>non-MBCDI file</strong> contains the identifiers, so that is the target of this removal process.</p>
<div class="rmdnote">
<p>Note that we have added <code>data</code> to <code>.gitignore</code> in <code>protocol/</code>, the root directory for the HTML protocol, so <em>none</em> of the data files should be made available via git or GitHub. This also means that there is <strong>no version control</strong> being done on raw data files themselves.</p>
</div>
<pre><code>tar_target(
  home_visit_remove_identifiers,
  purrr::map_chr(
    home_visit_non_mbcdi,
    open_deidentify_save,
    csv_save_dir = "data/csv/home_visit/non_mbcdi/deid",
      these_questions = 'non_mbcdi'
  )
)</code></pre>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>home_visit_non_mbcdi <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/non_mbcdi/raw"</span>),</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"</span><span class="sc">\\</span><span class="st">.csv$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_chr</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    home_visit_non_mbcdi,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    file_open_deidentify_save,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">csv_save_dir =</span> <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/non_mbcdi/deid"</span>),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">these_questions =</span> <span class="st">'non_mbcdi'</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/1136694_non_mbcdi_18_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/1151489_non_mbcdi_18_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363465_non_mbcdi_24_bilingual_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363466_non_mbcdi_18_bilingual_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411388_non_mbcdi_18_bilingual_spanish_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Saved `/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/1136694_non_mbcdi_18_english_deidentified.csv"         
 [2] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/1151489_non_mbcdi_18_english_deidentified.csv"         
 [3] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv"          
 [4] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv"          
 [5] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv"          
 [6] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv"
 [7] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv"          
 [8] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv"          
 [9] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv"          
[10] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363465_non_mbcdi_24_bilingual_english_deidentified.csv"
[11] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/363466_non_mbcdi_18_bilingual_english_deidentified.csv"
[12] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv"
[13] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411388_non_mbcdi_18_bilingual_spanish_deidentified.csv"
[14] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv"
[15] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv"
[16] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv"
[17] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv"
[18] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv"          
[19] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv"
[20] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv"
[21] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv"          
[22] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv"          
[23] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv"
[24] "/Users/rog1/rrr/KoBoToolbox/data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv"</code></pre>
</div>
</div>
</section>
<section id="quality-assurance-qa-reviews" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="quality-assurance-qa-reviews">Quality assurance (QA) reviews</h2>
<section id="mb-cdi-files" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="mb-cdi-files">MB-CDI files</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>To be completed.</p>
</div>
</div>
</section>
<section id="non-mb-cdi-files" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="non-mb-cdi-files">Non-MB-CDI files</h3>
<p>Create a helper function to create a data set with summary information about the data files.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>summarize_non_mbcdi_qs <span class="ot">&lt;-</span> <span class="cf">function</span>(fn) {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">is.character</span>(fn))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(fn)) {</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">'File not found `'</span>, fn, <span class="st">'`'</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(fn, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.data.frame</span>(df)) {</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">'Error reading data frame'</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>      out_df <span class="ot">&lt;-</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tibble</span>(</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">file_name =</span> <span class="fu">basename</span>(fn),</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">n_rows =</span> <span class="fu">dim</span>(df)[<span class="dv">1</span>],</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">n_vars =</span> <span class="fu">dim</span>(df)[<span class="dv">2</span>]</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">arrange</span>(out_df, file_name)</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Select the de-identified CSVs to examine.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>fl <span class="ot">&lt;-</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list.files</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/non_mbcdi/deid"</span>),</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'^[0-9]+_non_mbcdi_[12|18|24].*deidentified'</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">full.names =</span> <span class="cn">TRUE</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>PLAY_forms <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_df</span>(fl, summarize_non_mbcdi_qs)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>PLAY_forms <span class="sc">%&gt;%</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(., <span class="at">format =</span> <span class="st">'html'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">file_name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n_rows</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n_vars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1136694_non_mbcdi_18_english_deidentified.csv</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">288</td>
</tr>
<tr class="even">
<td style="text-align: left;">1151489_non_mbcdi_18_english_deidentified.csv</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">286</td>
</tr>
<tr class="odd">
<td style="text-align: left;">307736_non_mbcdi_18_english_deidentified.csv</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">274</td>
</tr>
<tr class="even">
<td style="text-align: left;">331453_non_mbcdi_24_english_deidentified.csv</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">274</td>
</tr>
<tr class="odd">
<td style="text-align: left;">331848_non_mbcdi_12_english_deidentified.csv</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">267</td>
</tr>
<tr class="even">
<td style="text-align: left;">334099_non_mbcdi_12_bilingual_english_deidentified.csv</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">267</td>
</tr>
<tr class="odd">
<td style="text-align: left;">363349_non_mbcdi_18_english_deidentified.csv</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="even">
<td style="text-align: left;">363381_non_mbcdi_24_english_deidentified.csv</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="odd">
<td style="text-align: left;">363431_non_mbcdi_12_english_deidentified.csv</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">281</td>
</tr>
<tr class="even">
<td style="text-align: left;">363465_non_mbcdi_24_bilingual_english_deidentified.csv</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="odd">
<td style="text-align: left;">363466_non_mbcdi_18_bilingual_english_deidentified.csv</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="even">
<td style="text-align: left;">408149_non_mbcdi_24_bilingual_spanish_deidentified.csv</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="odd">
<td style="text-align: left;">411388_non_mbcdi_18_bilingual_spanish_deidentified.csv</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="even">
<td style="text-align: left;">411456_non_mbcdi_12_bilingual_english_deidentified.csv</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="odd">
<td style="text-align: left;">411469_non_mbcdi_12_bilingual_spanish_deidentified.csv</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="even">
<td style="text-align: left;">740623_non_mbcdi_12_bilingual_english_deidentified.csv</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">288</td>
</tr>
<tr class="odd">
<td style="text-align: left;">740624_non_mbcdi_12_bilingual_spanish_deidentified.csv</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">288</td>
</tr>
<tr class="even">
<td style="text-align: left;">740625_non_mbcdi_12_english_deidentified.csv</td>
<td style="text-align: right;">251</td>
<td style="text-align: right;">288</td>
</tr>
<tr class="odd">
<td style="text-align: left;">740626_non_mbcdi_18_bilingual_english_deidentified.csv</td>
<td style="text-align: right;">63</td>
<td style="text-align: right;">287</td>
</tr>
<tr class="even">
<td style="text-align: left;">740627_non_mbcdi_18_bilingual_spanish_deidentified.csv</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">287</td>
</tr>
<tr class="odd">
<td style="text-align: left;">740628_non_mbcdi_18_english_deidentified.csv</td>
<td style="text-align: right;">234</td>
<td style="text-align: right;">288</td>
</tr>
<tr class="even">
<td style="text-align: left;">740629_non_mbcdi_24_english_deidentified.csv</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">287</td>
</tr>
<tr class="odd">
<td style="text-align: left;">740630_non_mbcdi_24_bilingual_spanish_deidentified.csv</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">287</td>
</tr>
<tr class="even">
<td style="text-align: left;">740631_non_mbcdi_24_bilingual_english_deidentified.csv</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">287</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>The later forms (with higher form numbers–the leading integers in the file names) are the newer ones. These generally have the largest number of entries and have similar numbers of columns–either 287 or 288. Accordingly, we focus our cleaning efforts here first.</p>
<p>We start with the data files that have <span class="math inline">\(n=288\)</span> columns.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df740623 <span class="ot">&lt;-</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv"</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>df740624 <span class="ot">&lt;-</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv"</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740624))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 288</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df740625 <span class="ot">&lt;-</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv"</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740625))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 288</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>df740628 <span class="ot">&lt;-</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv"</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740628))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 288</code></pre>
</div>
</div>
<p>So, four of the most recent data files with <span class="math inline">\(n=288\)</span> columns can be aggregated without modification.</p>
<p>Let’s turn to the more recent files with <span class="math inline">\(n=287\)</span> columns.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df740626 <span class="ot">&lt;-</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv"</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>df740627 <span class="ot">&lt;-</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv"</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740627))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100</code></pre>
</div>
</div>
<p>Where does the misalignment arise?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740627)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>The misalignment arises somewhere near column 92.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df740629 <span class="ot">&lt;-</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv"</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740629))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 287</code></pre>
</div>
</div>
<p>So, <code>df740626</code> and <code>df740629</code> are aligned and can be merged.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>df740630 <span class="ot">&lt;-</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv"</span>),</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740630))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740630)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>These files also fall out of alignment near column 92.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>df740631 <span class="ot">&lt;-</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv"</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740631))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740631)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>And these files fall out of alignment near column 92.</p>
<p>Let’s see if <code>df740627</code>, <code>df740630</code>, and <code>df740631</code> are aligned with one another.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740627) <span class="sc">==</span> <span class="fu">names</span>(df740630))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 287</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740627) <span class="sc">==</span> <span class="fu">names</span>(df740631))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 287</code></pre>
</div>
</div>
<p>Yes, they are. So, these three can be merged. We do that first, then address the discrepancies between aggregates.</p>
</section>
<section id="older-forms" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="older-forms">‘Older’ forms</h3>
<p>The “older” forms have varied numbers of columns. We focus on thos with data (n_vars &gt; 0)</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>df307736 <span class="ot">&lt;-</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv"</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>df331453 <span class="ot">&lt;-</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv"</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>df331848 <span class="ot">&lt;-</span></span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv"</span></span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>df334099 <span class="ot">&lt;-</span></span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv"</span></span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a>df363349 <span class="ot">&lt;-</span></span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-43"><a href="#cb55-43" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv"</span></span>
<span id="cb55-44"><a href="#cb55-44" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-45"><a href="#cb55-45" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb55-46"><a href="#cb55-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-47"><a href="#cb55-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-48"><a href="#cb55-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-49"><a href="#cb55-49" aria-hidden="true" tabindex="-1"></a>df363381 <span class="ot">&lt;-</span></span>
<span id="cb55-50"><a href="#cb55-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-51"><a href="#cb55-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-52"><a href="#cb55-52" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-53"><a href="#cb55-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv"</span></span>
<span id="cb55-54"><a href="#cb55-54" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-55"><a href="#cb55-55" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb55-56"><a href="#cb55-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-57"><a href="#cb55-57" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-58"><a href="#cb55-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-59"><a href="#cb55-59" aria-hidden="true" tabindex="-1"></a>df363431 <span class="ot">&lt;-</span></span>
<span id="cb55-60"><a href="#cb55-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-61"><a href="#cb55-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-62"><a href="#cb55-62" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-63"><a href="#cb55-63" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv"</span></span>
<span id="cb55-64"><a href="#cb55-64" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-65"><a href="#cb55-65" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb55-66"><a href="#cb55-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-67"><a href="#cb55-67" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-68"><a href="#cb55-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-69"><a href="#cb55-69" aria-hidden="true" tabindex="-1"></a>df408149 <span class="ot">&lt;-</span></span>
<span id="cb55-70"><a href="#cb55-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-71"><a href="#cb55-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-72"><a href="#cb55-72" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-73"><a href="#cb55-73" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv"</span></span>
<span id="cb55-74"><a href="#cb55-74" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-75"><a href="#cb55-75" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb55-76"><a href="#cb55-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-77"><a href="#cb55-77" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-78"><a href="#cb55-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-79"><a href="#cb55-79" aria-hidden="true" tabindex="-1"></a>df411456 <span class="ot">&lt;-</span></span>
<span id="cb55-80"><a href="#cb55-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-81"><a href="#cb55-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-82"><a href="#cb55-82" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-83"><a href="#cb55-83" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv"</span></span>
<span id="cb55-84"><a href="#cb55-84" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-85"><a href="#cb55-85" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb55-86"><a href="#cb55-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-87"><a href="#cb55-87" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-88"><a href="#cb55-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-89"><a href="#cb55-89" aria-hidden="true" tabindex="-1"></a>df411469 <span class="ot">&lt;-</span></span>
<span id="cb55-90"><a href="#cb55-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb55-91"><a href="#cb55-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb55-92"><a href="#cb55-92" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb55-93"><a href="#cb55-93" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv"</span></span>
<span id="cb55-94"><a href="#cb55-94" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-95"><a href="#cb55-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-96"><a href="#cb55-96" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s look at the two forms that have the same number of columns, <span class="math inline">\(n=274\)</span>, 307736 and 331453.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df307736) <span class="sc">==</span> <span class="fu">names</span>(df331453)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[181] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[196] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[211] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[226] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[241] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[271] TRUE TRUE TRUE TRUE</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df307736) <span class="sc">==</span> <span class="fu">names</span>(df331453)) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">names</span>(df307736))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>So, these two are identical and could be merged.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>hv_deid_fl <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/non_mbcdi/deid"</span>), <span class="st">"</span><span class="sc">\\</span><span class="st">.csv$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>files_274_cols <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(hv_deid_fl, <span class="st">"/(307736|331453)"</span>)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>df_merge_274_cols <span class="ot">&lt;-</span> <span class="fu">file_make_aggregate_from_csvs</span>(hv_deid_fl[files_274_cols])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>How about the files with <span class="math inline">\(n=267\)</span> columns, 331848 and 334099?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">==</span> <span class="fu">names</span>(df334099)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[265]  TRUE  TRUE  TRUE</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df331848) <span class="sc">==</span> <span class="fu">names</span>(df334099)) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">names</span>(df331848))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "group_combinedquestionnaires/participant_id"             
[2] "start"                                                   
[3] "end"                                                     
[4] "group_combinedquestionnaires/note_fillthisoutbeforestudy"
[5] "group_combinedquestionnaires/site_id"                    
[6] "group_combinedquestionnaires/subject_number"             </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "group_jo84c13/participant_id"             
[2] "start"                                    
[3] "end"                                      
[4] "group_jo84c13/note_fillthisoutbeforestudy"
[5] "group_jo84c13/site_id"                    
[6] "group_jo84c13/subject_number"             </code></pre>
</div>
</div>
<p>There is an odd difference in the group label, <code>group_combinedquestionnaires</code> vs.&nbsp;<code>group_jo84c13</code>.</p>
<p>Let’s try deleting the initial group labels and compare again.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>n1 <span class="ot">&lt;-</span> <span class="fu">names</span>(df331848)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>n2 <span class="ot">&lt;-</span> <span class="fu">names</span>(df334099)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">"group_combinedquestionnaires/"</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "participant_id"              "start"                      
[3] "end"                         "note_fillthisoutbeforestudy"
[5] "site_id"                     "subject_number"             </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">"group_jo84c13/"</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "participant_id"              "start"                      
[3] "end"                         "note_fillthisoutbeforestudy"
[5] "site_id"                     "subject_number"             </code></pre>
</div>
</div>
<p>That looks promising.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">"group_combinedquestionnaires/"</span>) <span class="ot">-&gt;</span> n1</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">"group_jo84c13/"</span>) <span class="ot">-&gt;</span> n2</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">==</span> n2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE
 [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[265]  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>], n2[<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                     [,2]                    
[1,] "test_date"              "test_date"             
[2,] "child_sex"              "child_birth_date"      
[3,] "age_group"              "child_sex"             
[4,] "language_child"         "age_group"             
[5,] "language_child/english" "language_child"        
[6,] "language_child/spanish" "language_child/english"
[7,] "language_instruction"   "language_child/spanish"
[8,] "acknowledge_site"       "language_instruction"  </code></pre>
</div>
</div>
<p><code>n2</code> or <code>df334099</code> has a <code>child_birth_date</code> field in position 9 that the other data frame does not have.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">|&gt;</span> <span class="fu">str_detect</span>(<span class="st">"child_birth_date"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>If we delete that variable, the data frames will no longer have the same number of columns. Let’s explore that anyway.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>n2_2 <span class="ot">&lt;-</span> n2[<span class="sc">-</span><span class="dv">9</span>]</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">==</span> n2_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in n1 == n2_2: longer object length is not a multiple of shorter object
length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE
 [37]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [49] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>That helps a bit, but we diverge around column 29.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">28</span><span class="sc">:</span><span class="dv">51</span>], n2_2[<span class="dv">28</span><span class="sc">:</span><span class="dv">51</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]                                                                                                
 [1,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested"              
 [2,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/birthhospital"
 [3,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/afterhome"    
 [4,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no"           
 [5,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused"      
 [6,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/donotknow"    
 [7,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested"               
 [8,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/birthhospital" 
 [9,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/afterhome"     
[10,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no"            
[11,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused"       
[12,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow"     
[13,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies"       
[14,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection"   
[15,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma"          
[16,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory"     
[17,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal"
[18,] "group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc"              
[19,] "group_homevisitquestionnaires/group_health/group_general_health/child_injury_times"                
[20,] "group_homevisitquestionnaires/group_health/group_general_health/comment_injury"                    
[21,] "group_homevisitquestionnaires/group_health/group_general_health/comments_general_health"           
[22,] "group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal"                   
[23,] "group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care"                           
[24,] "group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal"                       
      [,2]                                                                                                                                  
 [1,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested"                                                
 [2,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__in_the_bi"                                 
 [3,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__after_goi"                                 
 [4,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no"                                             
 [5,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused"                                        
 [6,] "group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/don_t_know"                                     
 [7,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested"                                                 
 [8,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__in_the_bi"                                  
 [9,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__after_goi"                                  
[10,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no"                                              
[11,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused"                                         
[12,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/don_t_know"                                      
[13,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/child_allergies_infections_ill_header"
[14,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies"                            
[15,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection"                        
[16,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma"                               
[17,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory"                          
[18,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal"                     
[19,] "group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc"                                                
[20,] "group_homevisitquestionnaires/group_health/group_general_health/child_injury_times"                                                  
[21,] "group_homevisitquestionnaires/group_health/group_general_health/comment_injury"                                                      
[22,] "group_homevisitquestionnaires/group_health/group_general_health/comments_general_health"                                             
[23,] "group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal"                                                     
[24,] "group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal"                                                         </code></pre>
</div>
</div>
<p>These question labels looks very similar. There are just some minor changes in the variable names. <code>n2_2</code> has an extra variable in column 40.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>n2_3 <span class="ot">&lt;-</span> n2_2[<span class="sc">-</span><span class="dv">40</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then, we can rename some of the columns in <code>n2_3</code> using corresponding names from <code>n1</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>n2_3 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">"yes__in_the_bi"</span>, <span class="st">"birthhospital"</span>) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">"yes__after_goi"</span>, <span class="st">"afterhome"</span>) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">"don_t_know"</span>, <span class="st">"donotknow"</span>) <span class="ot">-&gt;</span> n2_4</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">==</span> n2_4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in n1 == n2_4: longer object length is not a multiple of shorter object
length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
[229]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">39</span><span class="sc">:</span><span class="dv">51</span>], n2_4[<span class="dv">39</span><span class="sc">:</span><span class="dv">51</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]                                                                                                
 [1,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow"     
 [2,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies"       
 [3,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection"   
 [4,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma"          
 [5,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory"     
 [6,] "group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal"
 [7,] "group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc"              
 [8,] "group_homevisitquestionnaires/group_health/group_general_health/child_injury_times"                
 [9,] "group_homevisitquestionnaires/group_health/group_general_health/comment_injury"                    
[10,] "group_homevisitquestionnaires/group_health/group_general_health/comments_general_health"           
[11,] "group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal"                   
[12,] "group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care"                           
[13,] "group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal"                       
      [,2]                                                                                                             
 [1,] "group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow"                  
 [2,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies"       
 [3,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection"   
 [4,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma"          
 [5,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory"     
 [6,] "group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal"
 [7,] "group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc"                           
 [8,] "group_homevisitquestionnaires/group_health/group_general_health/child_injury_times"                             
 [9,] "group_homevisitquestionnaires/group_health/group_general_health/comment_injury"                                 
[10,] "group_homevisitquestionnaires/group_health/group_general_health/comments_general_health"                        
[11,] "group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal"                                
[12,] "group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal"                                    
[13,] "group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking"                                      </code></pre>
</div>
</div>
<p><code>n1</code> has a <code>group_medicalprof</code> label from <code>allergies</code> through <code>gastrointestinal</code>; <code>n2_4</code> has <code>child_allergies_infections_ill</code> for the same questions.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>n2_4 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">"child_allergies_infections_ill"</span>, <span class="st">"group_medicalprof"</span>) <span class="ot">-&gt;</span> n2_5</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">==</span> n2_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in n1 == n2_5: longer object length is not a multiple of shorter object
length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
[229]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">49</span><span class="sc">:</span><span class="dv">60</span>], n2_5[<span class="dv">49</span><span class="sc">:</span><span class="dv">60</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]                                                                             
 [1,] "group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal"
 [2,] "group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care"        
 [3,] "group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal"    
 [4,] "group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking"      
 [5,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1"   
 [6,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2"   
 [7,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3"   
 [8,] "group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now"       
 [9,] "group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount"
[10,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_house"         
[11,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_car"           
[12,] "group_homevisitquestionnaires/group_health/group_smoking/comments_smoking"      
      [,2]                                                                             
 [1,] "group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal"
 [2,] "group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal"    
 [3,] "group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking"      
 [4,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1"   
 [5,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2"   
 [6,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3"   
 [7,] "group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now"       
 [8,] "group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount"
 [9,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_house"         
[10,] "group_homevisitquestionnaires/group_health/group_smoking/smoking_car"           
[11,] "group_homevisitquestionnaires/group_health/group_smoking/comments_smoking"      
[12,] "group_homevisitquestionnaires/group_health/group_drinking/pregnant_drinking"    </code></pre>
</div>
</div>
<p>It looks like these could be reconciled by deleting <code>prenatal_care</code> from <code>n1</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>n1_2 <span class="ot">&lt;-</span> n1[<span class="sc">-</span><span class="dv">50</span>]</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>n1_2 <span class="sc">==</span> n2_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in n1_2 == n2_5: longer object length is not a multiple of shorter
object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1_2[<span class="dv">64</span><span class="sc">:</span><span class="dv">75</span>], n2_5[<span class="dv">64</span><span class="sc">:</span><span class="dv">75</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]                                                                                                          
 [1,] "group_homevisitquestionnaires/group_health/group_drinking/comments_drinking"                                 
 [2,] "group_homevisitquestionnaires/group_health/group_phq4/note_phq4"                                             
 [3,] "group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_nervous"                           
 [4,] "group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_worrying"                          
 [5,] "group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_littleinterest"                    
 [6,] "group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_down"                              
 [7,] "group_homevisitquestionnaires/group_health/group_phq4/comments_phq4"                                         
 [8,] "group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions1"              
 [9,] "group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions2"              
[10,] "group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_unfamiliarperson"
[11,] "group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_troubletask"     
[12,] "group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_companyofchild"  
      [,2]                                                                                                       
 [1,] "group_homevisitquestionnaires/group_health/group_drinking/comments_drinking"                              
 [2,] "group_homevisitquestionnaires/group_health/group_phq4/Experimenter_These_stions_are_about_you"            
 [3,] "group_homevisitquestionnaires/group_health/group_phq4/comments_phq4"                                      
 [4,] "group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructor_rothbart"                           
 [5,] "group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructions_rothbart2"                        
 [6,] "group_homevisitquestionnaires/group_rothbart/rothbart_questions/rothbart_questions_header"                
 [7,] "group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_approached_by_a_ld_cling_to_a_parent"
 [8,] "group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_having_trouble_get_easily_irritated"
 [9,] "group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_a_familiar_chil_company_of_the_child"
[10,] "group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_offered_a_choic_uickly_and_go_for_it"
[11,] "group_homevisitquestionnaires/group_rothbart/rothbart_questions/During_daily_or_even_eing_quietly_sung_to"
[12,] "group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_playing_outdoo_and_excitement_of_it"</code></pre>
</div>
</div>
<p>It looks like the phq4 is <em>not</em> in <code>n2_5</code>.</p>
<p>Let’s check.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>n2_5 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="st">"phq4"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>Yes, there are only two PHQ4-related questions in <code>df334099</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>df334099 <span class="sc">|&gt;</span> <span class="fu">names</span>() <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="st">"phq4"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>This path of reconciliation does not appear fruitful.</p>
</section>
</section>
<section id="make-aggregate-files" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="make-aggregate-files">Make aggregate files</h2>
<section id="non-mb-cdi-files-with-n288-columns" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="non-mb-cdi-files-with-n288-columns">non-MB-CDI files with <span class="math inline">\(n=288\)</span> columns</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>files_288_cols <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(hv_deid_fl, <span class="st">"2[3458]_non_mbcdi.*_deidentified</span><span class="sc">\\</span><span class="st">.csv"</span>)</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>df_merge_288_cols <span class="ot">&lt;-</span> <span class="fu">file_make_aggregate_from_csvs</span>(hv_deid_fl[files_288_cols])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="non-mb-cdi-files-with-n287-columns" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="non-mb-cdi-files-with-n287-columns">non-MB-CDI files with <span class="math inline">\(n=287\)</span> columns</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>files_287_cols_1 <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(hv_deid_fl, <span class="st">"2[69]_non_mbcdi.*_deidentified</span><span class="sc">\\</span><span class="st">.csv"</span>)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>files_287_cols_2 <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(hv_deid_fl, <span class="st">"(740627|740630|740631)_non.*_deidentified</span><span class="sc">\\</span><span class="st">.csv"</span>)</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>df_merge_287_cols_1 <span class="ot">&lt;-</span> <span class="fu">file_make_aggregate_from_csvs</span>(hv_deid_fl[files_287_cols_1])</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>df_merge_287_cols_2 <span class="ot">&lt;-</span> <span class="fu">file_make_aggregate_from_csvs</span>(hv_deid_fl[files_287_cols_2])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="examine-groups-with-n287-cols" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="examine-groups-with-n287-cols">Examine groups with <span class="math inline">\(n=287\)</span> cols</h3>
<p>We focus on the starting column where the column names diverge, column 92.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># targets::tar_load(df_merge_287_cols_1, store="../_targets")</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co"># targets::tar_load(df_merge_287_cols_2, store="../_targets")</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_1)[<span class="dv">92</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_feeding_nutrition.instructions_feeding"</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">92</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "group_combinedquestionnaires.group_homevisitquestionnaires.group_locomotor_milestones.group_health.group_feeding_nutrition.instructions_feeding"</code></pre>
</div>
</div>
<p>There is an erroneous <code>group_locomotor_milestones.</code> in the <code>df_merge_287_cols_2</code> column name.</p>
<p>A bit of sleuthing determines that this <code>group_locomotor_milestones.</code> label is characteristic of columns 92 to 273.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">"group_locomotor_milestones"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[181] TRUE TRUE</code></pre>
</div>
</div>
<p>The following should fix this.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df_merge_287_cols_2)</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="ot">&lt;-</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>], <span class="st">"group_locomotor_milestones</span><span class="sc">\\</span><span class="st">."</span>)</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="ot">&lt;-</span> new_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">==</span> <span class="fu">names</span>(df_merge_287_cols_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[109]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE
[277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>We have a second problem with columns from 114 to 210.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df_merge_287_cols_1)[<span class="dv">113</span><span class="sc">:</span><span class="dv">115</span>], <span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">113</span><span class="sc">:</span><span class="dv">115</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow"
     [,2]                                                                                                                                         
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies"      
     [,3]                                                                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies"    
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection"</code></pre>
</div>
</div>
<p>One of the problems has to do with column 114. There is a question ending <code>doctor_told_you</code> in <code>names(df_merge_287_cols_1)</code> but not in <code>names(df_merge_287_cols_2)</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_1) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">"doctor_told_you"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">"doctor_told_you"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Deleting this question would create additional misalignments and further problems. We cannot proceed without further discussion with our team.</p>
<p>For now, let’s generate an array with all of the remaining differences in column names.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>names_differ <span class="ot">&lt;-</span> (<span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">!=</span> <span class="fu">names</span>(df_merge_287_cols_1))</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(names_differ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 103</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df_merge_287_cols_1)[names_differ], <span class="fu">names</span>(df_merge_287_cols_2)[names_differ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                                                                                                                                         
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies"      
     [,2]                                                                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies"    
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection"
     [,3]                                                                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma"       
     [,4]                                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma"     
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory"
     [,5]                                                                                                                                          
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory"     
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal"
     [,6]                                                                                                                                          
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc"                           
     [,7]                                                                                                               
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times"  
     [,8]                                                                                                             
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury"    
     [,9]                                                                                                                  
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury"         
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health"
     [,10]                                                                                                                 
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal"        
     [,11]                                                                                                         
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care"        
     [,12]                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care"    
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal"
     [,13]                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking"  
     [,14]                                                                                                      
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking"   
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1"
     [,15]                                                                                                      
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2"
     [,16]                                                                                                      
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3"
     [,17]                                                                                                      
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now"    
     [,18]                                                                                                         
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now"       
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount"
     [,19]                                                                                                         
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house"         
     [,20]                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car"  
     [,21]                                                                                                   
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car"     
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking"
     [,22]                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking"  
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking"
     [,23]                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking"   
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1"
     [,24]                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2"
     [,25]                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3"
     [,26]                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking"   
     [,27]                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4"            
     [,28]                                                                                                 
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4"        
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4"
     [,29]                                                                                                 
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous"     
     [,30]                                                                                             
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous" 
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying"
     [,31]                                                                                                   
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying"      
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest"
     [,32]                                                                                                   
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down"          
     [,33]                                                                                             
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down"    
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4"
     [,34]                                                                                             
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1"
     [,35]                                                                                             
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2"
     [,36]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2"                        
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3"
     [,37]                                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3"   
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson"
     [,38]                                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask"     
     [,39]                                                                                                                      
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask"   
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild"
     [,40]                                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild"  
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities"
     [,41]                                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung"     
     [,42]                                                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung"    
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors"
     [,43]                                                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10"     
     [,44]                                                                                                                         
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10"       
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks"
     [,45]                                                                                                                          
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks" 
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults"
     [,46]                                                                                                                          
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair"        
     [,47]                                                                                                                  
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy"
     [,48]                                                                                                                    
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy"  
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged"
     [,49]                                                                                                                           
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged"       
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity"
     [,50]                                                                                                                           
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly"        
     [,51]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly"  
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention"
     [,52]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags"         
     [,53]                                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags"            
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment"
     [,54]                                                                                                                        
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy"          
     [,55]                                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy"  
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles"
     [,56]                                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active"  
     [,57]                                                                                                                 
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active"   
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden"
     [,58]                                                                                                                    
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden"   
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful"
     [,59]                                                                                                                    
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue"    
     [,60]                                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse"
     [,61]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse"     
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent"
     [,62]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum"
     [,63]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently"
     [,64]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile"  
     [,65]                                                                                                                   
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold"       
     [,66]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold"         
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult"
     [,67]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful"      
     [,68]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful"      
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace"
     [,69]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3" 
     [,70]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3" 
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed"
     [,71]                                                                                                                     
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother"    
     [,72]                                                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother"      
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople"
     [,73]                                                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart"                               
     [,74]                                                                                             
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart"     
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1"
     [,75]                                                                                             
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology"       
     [,76]                                                                                         
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology"   
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv"
     [,77]                                                                                          
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv" 
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd"
     [,78]                                                                                               
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd"     
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer"
     [,79]                                                                                               
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad"    
     [,80]                                                                                                      
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad"           
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame"
     [,81]                                                                                                      
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame"      
     [,82]                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv"      
     [,83]                                                                                          
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how"             
     [,84]                                                                                           
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how"              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd"
     [,85]                                                                                           
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how"             
     [,86]                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how"                  
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer"
     [,87]                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how"             
     [,88]                                                                                            
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how"         
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad"
     [,89]                                                                                            
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how"             
     [,90]                                                                                                   
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how"                    
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational"
     [,91]                                                                                                   
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how"             
     [,92]                                                                                                 
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how"           
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame"
     [,93]                                                                                                 
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how"             
     [,94]                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how"   
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day"
     [,95]                                                                                            
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day"     
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day"
     [,96]                                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day"                    
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use"
     [,97]                                                                                                                
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale"       
     [,98]                                                                                                  
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday" 
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day"
     [,99]                                                                                            
[1,] "group_combinedquestionnaires.group_databrary.note_databraryspiel1"                              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1"
     [,100]                                                                                           
[1,] "group_combinedquestionnaires.group_databrary.note_databraryspiel2"                              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2"
     [,101]                                                                                           
[1,] "group_combinedquestionnaires.group_databrary.note_databraryspiel3"                              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3"
     [,102]                                                                                            
[1,] "group_combinedquestionnaires.group_databrary.acknowledge_databrary"                              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.acknowledge_databrary"
     [,103]                                                                                       
[1,] "group_combinedquestionnaires.group_databrary.note_saveasdraft"                              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_saveasdraft"</code></pre>
</div>
</div>
<p>Visual inspection suggests that these are similar with the following deviations:</p>
<ul>
<li>As noted, <code>df_merge_287_cols_1</code> has a column ending <code>doctor_told_you</code> that is not present in <code>df_merge_287_cols_2</code>.</li>
<li><code>df_merge_287_cols_2</code> has a column ending <code>technology_use_scale</code> that is not present in the <code>df_merge_287_cols_1</code></li>
<li>There are a set of fields in <code>group_databrary</code> that do not align exactly. We will almost certainly delete these, so the misalignment is not a huge problem.</li>
</ul>
<p>As an exploration, let’s see if we can reconcile these by deleting the non-aligning columns.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df_merge_287_cols_1</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df_merge_287_cols_2</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'doctor_told_you'</span>))</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'technology_use_scale'</span>))</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)</span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a>new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>], <span class="st">"group_locomotor_milestones</span><span class="sc">\\</span><span class="st">."</span>)</span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df2) <span class="ot">&lt;-</span> new_names</span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE
[277] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>This looks promising.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">263</span>], <span class="fu">names</span>(df2)[<span class="dv">263</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                                                                                                   
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday" 
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day"</code></pre>
</div>
</div>
<p>This is easily fixed.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1)[<span class="dv">263</span>] <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)[<span class="dv">263</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">273</span><span class="sc">:</span><span class="dv">275</span>], <span class="fu">names</span>(df2)[<span class="dv">273</span><span class="sc">:</span><span class="dv">275</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                                                                                             
[1,] "group_combinedquestionnaires.group_databrary.note_databraryspiel1"                              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1"
     [,2]                                                                                             
[1,] "group_combinedquestionnaires.group_databrary.note_databraryspiel2"                              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2"
     [,3]                                                                                             
[1,] "group_combinedquestionnaires.group_databrary.note_databraryspiel3"                              
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3"</code></pre>
</div>
</div>
<p>The last misalignments relate to Databrary fields.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'group_databrary'</span>))</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'group_databrary'</span>))</span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
 [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[181] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[196] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[211] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[226] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[241] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[271] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<p>Success!</p>
</section>
</section>
<section id="combining-the-two-groups-of-datasets" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="combining-the-two-groups-of-datasets">Combining the two groups of datasets</h2>
<p>Now, let’s go back to the data frame with 288 cols and see if we can bring these into alignment.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df_merge_288_cols</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'group_databrary'</span>))</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">dim</span>(df1), <span class="fu">dim</span>(df2), <span class="fu">dim</span>(df3))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 258 281  61 281 539 283</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in names(df1) == names(df3): longer object length is not a multiple of
shorter object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[109]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[277] FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">114</span><span class="sc">:</span><span class="dv">115</span>], <span class="fu">names</span>(df3)[<span class="dv">114</span><span class="sc">:</span><span class="dv">115</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                                                                                                                                         
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies"      
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you"
     [,2]                                                                                                                                       
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies"    </code></pre>
</div>
</div>
<p>Once again, there appears to be a problem with the ‘doctor_told_you’ field. We’ll delete it to see if this fixes one of the problems.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'doctor_told_you'</span>))</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in names(df1) == names(df3): longer object length is not a multiple of
shorter object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[205]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[277] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>We still have misalignments at column 210.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">210</span><span class="sc">:</span><span class="dv">213</span>], <span class="fu">names</span>(df3)[<span class="dv">210</span><span class="sc">:</span><span class="dv">213</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                                                                                                          
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals"               
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale"
     [,2]                                                                                              
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals"   
     [,3]                                                                                              
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime" 
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime"
     [,4]                                                                                                    
[1,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.transportation"
[2,] "group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime"       </code></pre>
</div>
</div>
<p>The ’technology_use_scale` exists in one but not the other.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'technology_use_scale'</span>))</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">dim</span>(df1), <span class="fu">dim</span>(df3))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]  258  281
[2,]  539  281</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
[265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[277]  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<div class="rmdimportant">
<p>Future versions of the workflow will need to handle this more elegantly.</p>
<p>Option 1: Fix the underlying forms.</p>
<p>Option 2: Add the ‘missing’ columns as NA in post-processing.</p>
</div>
<p>For now, I’m going to create functions that align these data frames. These are incorporated into <code>R/utils.R</code> so we do not source them again here.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>remove_technology_use_scale <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'technology_use_scale'</span>))</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>remove_doctor_told_you <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'doctor_told_you'</span>))</span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a>remove_databrary_fields <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'group_databrary'</span>))</span>
<span id="cb150-11"><a href="#cb150-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb150-12"><a href="#cb150-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-13"><a href="#cb150-13" aria-hidden="true" tabindex="-1"></a>reconcile_typicalday <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb150-14"><a href="#cb150-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="fu">names</span>(df), <span class="st">'typicalday'</span>, <span class="st">'typical_day'</span>)</span>
<span id="cb150-15"><a href="#cb150-15" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb150-16"><a href="#cb150-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb150-17"><a href="#cb150-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-18"><a href="#cb150-18" aria-hidden="true" tabindex="-1"></a>remove_permissive_locomotor_milestones_label <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb150-19"><a href="#cb150-19" aria-hidden="true" tabindex="-1"></a>  old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df)</span>
<span id="cb150-20"><a href="#cb150-20" aria-hidden="true" tabindex="-1"></a>  new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb150-21"><a href="#cb150-21" aria-hidden="true" tabindex="-1"></a>  contains_locomotor <span class="ot">&lt;-</span></span>
<span id="cb150-22"><a href="#cb150-22" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_detect</span>(new_names, <span class="at">pattern =</span> <span class="st">"locomotor_milestones.*health|division|rothbart|mediause|pets|typical|acknowledge"</span>)</span>
<span id="cb150-23"><a href="#cb150-23" aria-hidden="true" tabindex="-1"></a>  new_names[contains_locomotor] <span class="ot">&lt;-</span></span>
<span id="cb150-24"><a href="#cb150-24" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[contains_locomotor], <span class="st">"group_locomotor_milestones</span><span class="sc">\\</span><span class="st">."</span>)</span>
<span id="cb150-25"><a href="#cb150-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> new_names</span>
<span id="cb150-26"><a href="#cb150-26" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb150-27"><a href="#cb150-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb150-28"><a href="#cb150-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-29"><a href="#cb150-29" aria-hidden="true" tabindex="-1"></a>remove_X_meta_cols <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb150-30"><a href="#cb150-30" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">"X_"</span>), <span class="sc">-</span><span class="fu">contains</span>(<span class="st">"meta.instanceID"</span>))</span>
<span id="cb150-31"><a href="#cb150-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb150-32"><a href="#cb150-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-33"><a href="#cb150-33" aria-hidden="true" tabindex="-1"></a>remove_redundant_group_labels <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb150-34"><a href="#cb150-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="fu">names</span>(df), <span class="st">'group_homevisitquestionnaires</span><span class="sc">\\</span><span class="st">.'</span>)</span>
<span id="cb150-35"><a href="#cb150-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="fu">names</span>(df), <span class="st">'group_combinedquestionnaires</span><span class="sc">\\</span><span class="st">.'</span>)</span>
<span id="cb150-36"><a href="#cb150-36" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb150-37"><a href="#cb150-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb150-38"><a href="#cb150-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-39"><a href="#cb150-39" aria-hidden="true" tabindex="-1"></a>clean_dfs <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb150-40"><a href="#cb150-40" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb150-41"><a href="#cb150-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reconcile_typicalday</span>() <span class="sc">%&gt;%</span></span>
<span id="cb150-42"><a href="#cb150-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">remove_technology_use_scale</span>() <span class="sc">%&gt;%</span></span>
<span id="cb150-43"><a href="#cb150-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">remove_doctor_told_you</span>() <span class="sc">%&gt;%</span></span>
<span id="cb150-44"><a href="#cb150-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">remove_permissive_locomotor_milestones_label</span>() <span class="sc">%&gt;%</span></span>
<span id="cb150-45"><a href="#cb150-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">remove_databrary_fields</span>() <span class="sc">%&gt;%</span></span>
<span id="cb150-46"><a href="#cb150-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">remove_X_meta_cols</span>() <span class="sc">%&gt;%</span></span>
<span id="cb150-47"><a href="#cb150-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">remove_redundant_group_labels</span>()</span>
<span id="cb150-48"><a href="#cb150-48" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s test this workflow with the unmodified files.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>df1m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_287_cols_1)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df1m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 258 272</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>df2m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_287_cols_2)</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df2m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  61 272</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>df3m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_288_cols)</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df3m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 539 272</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">names</span>(df1m) <span class="sc">==</span> <span class="fu">names</span>(df2m)) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 272</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">names</span>(df1m) <span class="sc">==</span> <span class="fu">names</span>(df3m)) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 272</code></pre>
</div>
</div>
</section>
<section id="merging-and-exporting" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="merging-and-exporting">Merging and exporting</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df1m, df2m, df3m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Save exported aggregate file.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(df, <span class="at">file =</span> <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/agg"</span>, <span class="st">"PLAY-non-mcdi-raw-latest.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./home-visit-gather.html" class="pagination-link" aria-label="Gather">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Gather</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./home-visit-clean.html" class="pagination-link" aria-label="Clean">
        <span class="nav-page-text"><span class="chapter-title">Clean</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb163" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Aggregate</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## About</span></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>This page documents the process for combining separate files into aggregate files containing data from many participants.</span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="fu">## Setup</span></span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup}</span></span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a><span class="in">fl &lt;-</span></span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a><span class="in">  list.files(</span></span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a><span class="in">    file.path(here::here(), "R"),</span></span>
<span id="cb163-13"><a href="#cb163-13" aria-hidden="true" tabindex="-1"></a><span class="in">    "^load|^kobo_|^file_|^screen_|^ecbq_|^health_|^databrary|^home|^make|^export|^post_visit|CONSTANTS|utils",</span></span>
<span id="cb163-14"><a href="#cb163-14" aria-hidden="true" tabindex="-1"></a><span class="in">    full.names = TRUE</span></span>
<span id="cb163-15"><a href="#cb163-15" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb163-16"><a href="#cb163-16" aria-hidden="true" tabindex="-1"></a><span class="in">purrr::walk(fl, source)</span></span>
<span id="cb163-17"><a href="#cb163-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-18"><a href="#cb163-18" aria-hidden="true" tabindex="-1"></a><span class="in">suppressPackageStartupMessages(library(tidyverse))</span></span>
<span id="cb163-19"><a href="#cb163-19" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-20"><a href="#cb163-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-21"><a href="#cb163-21" aria-hidden="true" tabindex="-1"></a><span class="fu">## Remove identifiers {-}</span></span>
<span id="cb163-22"><a href="#cb163-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-23"><a href="#cb163-23" aria-hidden="true" tabindex="-1"></a>The **non-MBCDI file** contains the identifiers, so that is the target of this removal process.</span>
<span id="cb163-24"><a href="#cb163-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-25"><a href="#cb163-25" aria-hidden="true" tabindex="-1"></a>::: {.rmdnote}</span>
<span id="cb163-26"><a href="#cb163-26" aria-hidden="true" tabindex="-1"></a>Note that we have added <span class="in">`data`</span> to <span class="in">`.gitignore`</span> in <span class="in">`protocol/`</span>, the root directory for the HTML protocol, so *none* of the data files should be made available via git or GitHub. This also means that there is **no version control** being done on raw data files themselves.</span>
<span id="cb163-27"><a href="#cb163-27" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb163-28"><a href="#cb163-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-29"><a href="#cb163-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-30"><a href="#cb163-30" aria-hidden="true" tabindex="-1"></a><span class="in">tar_target(</span></span>
<span id="cb163-31"><a href="#cb163-31" aria-hidden="true" tabindex="-1"></a><span class="in">  home_visit_remove_identifiers,</span></span>
<span id="cb163-32"><a href="#cb163-32" aria-hidden="true" tabindex="-1"></a><span class="in">  purrr::map_chr(</span></span>
<span id="cb163-33"><a href="#cb163-33" aria-hidden="true" tabindex="-1"></a><span class="in">    home_visit_non_mbcdi,</span></span>
<span id="cb163-34"><a href="#cb163-34" aria-hidden="true" tabindex="-1"></a><span class="in">    open_deidentify_save,</span></span>
<span id="cb163-35"><a href="#cb163-35" aria-hidden="true" tabindex="-1"></a><span class="in">    csv_save_dir = "data/csv/home_visit/non_mbcdi/deid",</span></span>
<span id="cb163-36"><a href="#cb163-36" aria-hidden="true" tabindex="-1"></a><span class="in">      these_questions = 'non_mbcdi'</span></span>
<span id="cb163-37"><a href="#cb163-37" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb163-38"><a href="#cb163-38" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb163-39"><a href="#cb163-39" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-40"><a href="#cb163-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-41"><a href="#cb163-41" aria-hidden="true" tabindex="-1"></a><span class="in">```{r home-visit-remove-identifiers}</span></span>
<span id="cb163-42"><a href="#cb163-42" aria-hidden="true" tabindex="-1"></a><span class="in">home_visit_non_mbcdi &lt;- list.files(file.path(here::here(), "data/csv/home_visit/non_mbcdi/raw"),</span></span>
<span id="cb163-43"><a href="#cb163-43" aria-hidden="true" tabindex="-1"></a><span class="in">                 "\\.csv$", full.names = TRUE)</span></span>
<span id="cb163-44"><a href="#cb163-44" aria-hidden="true" tabindex="-1"></a><span class="in">purrr::map_chr(</span></span>
<span id="cb163-45"><a href="#cb163-45" aria-hidden="true" tabindex="-1"></a><span class="in">    home_visit_non_mbcdi,</span></span>
<span id="cb163-46"><a href="#cb163-46" aria-hidden="true" tabindex="-1"></a><span class="in">    file_open_deidentify_save,</span></span>
<span id="cb163-47"><a href="#cb163-47" aria-hidden="true" tabindex="-1"></a><span class="in">    csv_save_dir = file.path(here::here(), "data/csv/home_visit/non_mbcdi/deid"),</span></span>
<span id="cb163-48"><a href="#cb163-48" aria-hidden="true" tabindex="-1"></a><span class="in">      these_questions = 'non_mbcdi'</span></span>
<span id="cb163-49"><a href="#cb163-49" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb163-50"><a href="#cb163-50" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-51"><a href="#cb163-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-52"><a href="#cb163-52" aria-hidden="true" tabindex="-1"></a><span class="fu">## Quality assurance (QA) reviews {-}</span></span>
<span id="cb163-53"><a href="#cb163-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-54"><a href="#cb163-54" aria-hidden="true" tabindex="-1"></a><span class="fu">### MB-CDI files {-}</span></span>
<span id="cb163-55"><a href="#cb163-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-56"><a href="#cb163-56" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb163-57"><a href="#cb163-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-58"><a href="#cb163-58" aria-hidden="true" tabindex="-1"></a>To be completed.</span>
<span id="cb163-59"><a href="#cb163-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-60"><a href="#cb163-60" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb163-61"><a href="#cb163-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-62"><a href="#cb163-62" aria-hidden="true" tabindex="-1"></a><span class="fu">### Non-MB-CDI files {-}</span></span>
<span id="cb163-63"><a href="#cb163-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-64"><a href="#cb163-64" aria-hidden="true" tabindex="-1"></a>Create a helper function to create a data set with summary information about the data files.</span>
<span id="cb163-65"><a href="#cb163-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-66"><a href="#cb163-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{r define-qa-helper}</span></span>
<span id="cb163-67"><a href="#cb163-67" aria-hidden="true" tabindex="-1"></a><span class="in">summarize_non_mbcdi_qs &lt;- function(fn) {</span></span>
<span id="cb163-68"><a href="#cb163-68" aria-hidden="true" tabindex="-1"></a><span class="in">  stopifnot(is.character(fn))</span></span>
<span id="cb163-69"><a href="#cb163-69" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb163-70"><a href="#cb163-70" aria-hidden="true" tabindex="-1"></a><span class="in">  if (!file.exists(fn)) {</span></span>
<span id="cb163-71"><a href="#cb163-71" aria-hidden="true" tabindex="-1"></a><span class="in">    stop('File not found `', fn, '`')</span></span>
<span id="cb163-72"><a href="#cb163-72" aria-hidden="true" tabindex="-1"></a><span class="in">  } else {</span></span>
<span id="cb163-73"><a href="#cb163-73" aria-hidden="true" tabindex="-1"></a><span class="in">    df &lt;- readr::read_csv(fn, show_col_types = FALSE)</span></span>
<span id="cb163-74"><a href="#cb163-74" aria-hidden="true" tabindex="-1"></a><span class="in">    if (!is.data.frame(df)) {</span></span>
<span id="cb163-75"><a href="#cb163-75" aria-hidden="true" tabindex="-1"></a><span class="in">      stop('Error reading data frame')</span></span>
<span id="cb163-76"><a href="#cb163-76" aria-hidden="true" tabindex="-1"></a><span class="in">    } else {</span></span>
<span id="cb163-77"><a href="#cb163-77" aria-hidden="true" tabindex="-1"></a><span class="in">      out_df &lt;-</span></span>
<span id="cb163-78"><a href="#cb163-78" aria-hidden="true" tabindex="-1"></a><span class="in">        tibble(</span></span>
<span id="cb163-79"><a href="#cb163-79" aria-hidden="true" tabindex="-1"></a><span class="in">          file_name = basename(fn),</span></span>
<span id="cb163-80"><a href="#cb163-80" aria-hidden="true" tabindex="-1"></a><span class="in">          n_rows = dim(df)[1],</span></span>
<span id="cb163-81"><a href="#cb163-81" aria-hidden="true" tabindex="-1"></a><span class="in">          n_vars = dim(df)[2]</span></span>
<span id="cb163-82"><a href="#cb163-82" aria-hidden="true" tabindex="-1"></a><span class="in">        )</span></span>
<span id="cb163-83"><a href="#cb163-83" aria-hidden="true" tabindex="-1"></a><span class="in">      dplyr::arrange(out_df, file_name)</span></span>
<span id="cb163-84"><a href="#cb163-84" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb163-85"><a href="#cb163-85" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb163-86"><a href="#cb163-86" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-87"><a href="#cb163-87" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-88"><a href="#cb163-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-89"><a href="#cb163-89" aria-hidden="true" tabindex="-1"></a>Select the de-identified CSVs to examine.</span>
<span id="cb163-90"><a href="#cb163-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-91"><a href="#cb163-91" aria-hidden="true" tabindex="-1"></a><span class="in">```{r generate-qa-report}</span></span>
<span id="cb163-92"><a href="#cb163-92" aria-hidden="true" tabindex="-1"></a><span class="in">fl &lt;-</span></span>
<span id="cb163-93"><a href="#cb163-93" aria-hidden="true" tabindex="-1"></a><span class="in">  list.files(</span></span>
<span id="cb163-94"><a href="#cb163-94" aria-hidden="true" tabindex="-1"></a><span class="in">    file.path(here::here(), "data/csv/home_visit/non_mbcdi/deid"),</span></span>
<span id="cb163-95"><a href="#cb163-95" aria-hidden="true" tabindex="-1"></a><span class="in">    '^[0-9]+_non_mbcdi_[12|18|24].*deidentified',</span></span>
<span id="cb163-96"><a href="#cb163-96" aria-hidden="true" tabindex="-1"></a><span class="in">    full.names = TRUE</span></span>
<span id="cb163-97"><a href="#cb163-97" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb163-98"><a href="#cb163-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-99"><a href="#cb163-99" aria-hidden="true" tabindex="-1"></a><span class="in">PLAY_forms &lt;- purrr::map_df(fl, summarize_non_mbcdi_qs)</span></span>
<span id="cb163-100"><a href="#cb163-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-101"><a href="#cb163-101" aria-hidden="true" tabindex="-1"></a><span class="in">PLAY_forms %&gt;%</span></span>
<span id="cb163-102"><a href="#cb163-102" aria-hidden="true" tabindex="-1"></a><span class="in">  knitr::kable(., format = 'html') %&gt;%</span></span>
<span id="cb163-103"><a href="#cb163-103" aria-hidden="true" tabindex="-1"></a><span class="in">  kableExtra::kable_classic()</span></span>
<span id="cb163-104"><a href="#cb163-104" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-105"><a href="#cb163-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-106"><a href="#cb163-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-107"><a href="#cb163-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-108"><a href="#cb163-108" aria-hidden="true" tabindex="-1"></a>The later forms (with higher form numbers--the leading integers in the file names) are the newer ones.</span>
<span id="cb163-109"><a href="#cb163-109" aria-hidden="true" tabindex="-1"></a>These generally have the largest number of entries and have similar numbers of columns--either 287 or 288.</span>
<span id="cb163-110"><a href="#cb163-110" aria-hidden="true" tabindex="-1"></a>Accordingly, we focus our cleaning efforts here first.</span>
<span id="cb163-111"><a href="#cb163-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-112"><a href="#cb163-112" aria-hidden="true" tabindex="-1"></a>We start with the data files that have $n=288$ columns.</span>
<span id="cb163-113"><a href="#cb163-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-116"><a href="#cb163-116" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-117"><a href="#cb163-117" aria-hidden="true" tabindex="-1"></a>df740623 <span class="ot">&lt;-</span></span>
<span id="cb163-118"><a href="#cb163-118" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-119"><a href="#cb163-119" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-120"><a href="#cb163-120" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-121"><a href="#cb163-121" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv"</span></span>
<span id="cb163-122"><a href="#cb163-122" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-123"><a href="#cb163-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-124"><a href="#cb163-124" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-125"><a href="#cb163-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-126"><a href="#cb163-126" aria-hidden="true" tabindex="-1"></a>df740624 <span class="ot">&lt;-</span></span>
<span id="cb163-127"><a href="#cb163-127" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-128"><a href="#cb163-128" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-129"><a href="#cb163-129" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-130"><a href="#cb163-130" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv"</span></span>
<span id="cb163-131"><a href="#cb163-131" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-132"><a href="#cb163-132" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-133"><a href="#cb163-133" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-134"><a href="#cb163-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-135"><a href="#cb163-135" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740624))</span>
<span id="cb163-136"><a href="#cb163-136" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-137"><a href="#cb163-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-140"><a href="#cb163-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-141"><a href="#cb163-141" aria-hidden="true" tabindex="-1"></a>df740625 <span class="ot">&lt;-</span></span>
<span id="cb163-142"><a href="#cb163-142" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-143"><a href="#cb163-143" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-144"><a href="#cb163-144" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-145"><a href="#cb163-145" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv"</span></span>
<span id="cb163-146"><a href="#cb163-146" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-147"><a href="#cb163-147" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-148"><a href="#cb163-148" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-149"><a href="#cb163-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-150"><a href="#cb163-150" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740625))</span>
<span id="cb163-151"><a href="#cb163-151" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-152"><a href="#cb163-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-155"><a href="#cb163-155" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-156"><a href="#cb163-156" aria-hidden="true" tabindex="-1"></a>df740628 <span class="ot">&lt;-</span></span>
<span id="cb163-157"><a href="#cb163-157" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-158"><a href="#cb163-158" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-159"><a href="#cb163-159" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-160"><a href="#cb163-160" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv"</span></span>
<span id="cb163-161"><a href="#cb163-161" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-162"><a href="#cb163-162" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-163"><a href="#cb163-163" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-164"><a href="#cb163-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-165"><a href="#cb163-165" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740628))</span>
<span id="cb163-166"><a href="#cb163-166" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-167"><a href="#cb163-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-168"><a href="#cb163-168" aria-hidden="true" tabindex="-1"></a>So, four of the most recent data files with $n=288$ columns can be aggregated without modification.</span>
<span id="cb163-169"><a href="#cb163-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-170"><a href="#cb163-170" aria-hidden="true" tabindex="-1"></a>Let's turn to the more recent files with $n=287$ columns.</span>
<span id="cb163-171"><a href="#cb163-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-174"><a href="#cb163-174" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-175"><a href="#cb163-175" aria-hidden="true" tabindex="-1"></a>df740626 <span class="ot">&lt;-</span></span>
<span id="cb163-176"><a href="#cb163-176" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-177"><a href="#cb163-177" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-178"><a href="#cb163-178" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-179"><a href="#cb163-179" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv"</span></span>
<span id="cb163-180"><a href="#cb163-180" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-181"><a href="#cb163-181" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-182"><a href="#cb163-182" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-183"><a href="#cb163-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-184"><a href="#cb163-184" aria-hidden="true" tabindex="-1"></a>df740627 <span class="ot">&lt;-</span></span>
<span id="cb163-185"><a href="#cb163-185" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-186"><a href="#cb163-186" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-187"><a href="#cb163-187" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-188"><a href="#cb163-188" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv"</span></span>
<span id="cb163-189"><a href="#cb163-189" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-190"><a href="#cb163-190" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-191"><a href="#cb163-191" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-192"><a href="#cb163-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-193"><a href="#cb163-193" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740627))</span>
<span id="cb163-194"><a href="#cb163-194" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-195"><a href="#cb163-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-196"><a href="#cb163-196" aria-hidden="true" tabindex="-1"></a>Where does the misalignment arise?</span>
<span id="cb163-197"><a href="#cb163-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-200"><a href="#cb163-200" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-201"><a href="#cb163-201" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740627)</span>
<span id="cb163-202"><a href="#cb163-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-203"><a href="#cb163-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-204"><a href="#cb163-204" aria-hidden="true" tabindex="-1"></a>The misalignment arises somewhere near column 92.</span>
<span id="cb163-205"><a href="#cb163-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-208"><a href="#cb163-208" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-209"><a href="#cb163-209" aria-hidden="true" tabindex="-1"></a>df740629 <span class="ot">&lt;-</span></span>
<span id="cb163-210"><a href="#cb163-210" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-211"><a href="#cb163-211" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-212"><a href="#cb163-212" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-213"><a href="#cb163-213" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv"</span></span>
<span id="cb163-214"><a href="#cb163-214" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-215"><a href="#cb163-215" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-216"><a href="#cb163-216" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-217"><a href="#cb163-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-218"><a href="#cb163-218" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740629))</span>
<span id="cb163-219"><a href="#cb163-219" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-220"><a href="#cb163-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-221"><a href="#cb163-221" aria-hidden="true" tabindex="-1"></a>So, <span class="in">`df740626`</span> and <span class="in">`df740629`</span> are aligned and can be merged.</span>
<span id="cb163-222"><a href="#cb163-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-225"><a href="#cb163-225" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-226"><a href="#cb163-226" aria-hidden="true" tabindex="-1"></a>df740630 <span class="ot">&lt;-</span></span>
<span id="cb163-227"><a href="#cb163-227" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-228"><a href="#cb163-228" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv"</span>),</span>
<span id="cb163-229"><a href="#cb163-229" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-230"><a href="#cb163-230" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-231"><a href="#cb163-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-232"><a href="#cb163-232" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740630))</span>
<span id="cb163-233"><a href="#cb163-233" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740630)</span>
<span id="cb163-234"><a href="#cb163-234" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-235"><a href="#cb163-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-236"><a href="#cb163-236" aria-hidden="true" tabindex="-1"></a>These files also fall out of alignment near column 92.</span>
<span id="cb163-237"><a href="#cb163-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-240"><a href="#cb163-240" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-241"><a href="#cb163-241" aria-hidden="true" tabindex="-1"></a>df740631 <span class="ot">&lt;-</span></span>
<span id="cb163-242"><a href="#cb163-242" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb163-243"><a href="#cb163-243" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-244"><a href="#cb163-244" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-245"><a href="#cb163-245" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv"</span></span>
<span id="cb163-246"><a href="#cb163-246" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-247"><a href="#cb163-247" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-248"><a href="#cb163-248" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-249"><a href="#cb163-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-250"><a href="#cb163-250" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740631))</span>
<span id="cb163-251"><a href="#cb163-251" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740631)</span>
<span id="cb163-252"><a href="#cb163-252" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-253"><a href="#cb163-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-254"><a href="#cb163-254" aria-hidden="true" tabindex="-1"></a>And these files fall out of alignment near column 92.</span>
<span id="cb163-255"><a href="#cb163-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-256"><a href="#cb163-256" aria-hidden="true" tabindex="-1"></a>Let's see if <span class="in">`df740627`</span>, <span class="in">`df740630`</span>, and <span class="in">`df740631`</span> are aligned with one another.</span>
<span id="cb163-257"><a href="#cb163-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-260"><a href="#cb163-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-261"><a href="#cb163-261" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740627) <span class="sc">==</span> <span class="fu">names</span>(df740630))</span>
<span id="cb163-262"><a href="#cb163-262" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740627) <span class="sc">==</span> <span class="fu">names</span>(df740631))</span>
<span id="cb163-263"><a href="#cb163-263" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-264"><a href="#cb163-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-265"><a href="#cb163-265" aria-hidden="true" tabindex="-1"></a>Yes, they are. So, these three can be merged. </span>
<span id="cb163-266"><a href="#cb163-266" aria-hidden="true" tabindex="-1"></a>We do that first, then address the discrepancies between aggregates.</span>
<span id="cb163-267"><a href="#cb163-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-268"><a href="#cb163-268" aria-hidden="true" tabindex="-1"></a><span class="fu">### 'Older' forms {-}</span></span>
<span id="cb163-269"><a href="#cb163-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-270"><a href="#cb163-270" aria-hidden="true" tabindex="-1"></a>The "older" forms have varied numbers of columns.</span>
<span id="cb163-271"><a href="#cb163-271" aria-hidden="true" tabindex="-1"></a>We focus on thos with data (n_vars &gt; 0)</span>
<span id="cb163-272"><a href="#cb163-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-275"><a href="#cb163-275" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-276"><a href="#cb163-276" aria-hidden="true" tabindex="-1"></a>df307736 <span class="ot">&lt;-</span></span>
<span id="cb163-277"><a href="#cb163-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-278"><a href="#cb163-278" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-279"><a href="#cb163-279" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-280"><a href="#cb163-280" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv"</span></span>
<span id="cb163-281"><a href="#cb163-281" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-282"><a href="#cb163-282" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-283"><a href="#cb163-283" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-284"><a href="#cb163-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-285"><a href="#cb163-285" aria-hidden="true" tabindex="-1"></a>df331453 <span class="ot">&lt;-</span></span>
<span id="cb163-286"><a href="#cb163-286" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-287"><a href="#cb163-287" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-288"><a href="#cb163-288" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-289"><a href="#cb163-289" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv"</span></span>
<span id="cb163-290"><a href="#cb163-290" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb163-291"><a href="#cb163-291" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb163-292"><a href="#cb163-292" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-293"><a href="#cb163-293" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-294"><a href="#cb163-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-295"><a href="#cb163-295" aria-hidden="true" tabindex="-1"></a>df331848 <span class="ot">&lt;-</span></span>
<span id="cb163-296"><a href="#cb163-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-297"><a href="#cb163-297" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-298"><a href="#cb163-298" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-299"><a href="#cb163-299" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv"</span></span>
<span id="cb163-300"><a href="#cb163-300" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb163-301"><a href="#cb163-301" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb163-302"><a href="#cb163-302" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-303"><a href="#cb163-303" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-304"><a href="#cb163-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-305"><a href="#cb163-305" aria-hidden="true" tabindex="-1"></a>df334099 <span class="ot">&lt;-</span></span>
<span id="cb163-306"><a href="#cb163-306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-307"><a href="#cb163-307" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-308"><a href="#cb163-308" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-309"><a href="#cb163-309" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv"</span></span>
<span id="cb163-310"><a href="#cb163-310" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-311"><a href="#cb163-311" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-312"><a href="#cb163-312" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-313"><a href="#cb163-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-314"><a href="#cb163-314" aria-hidden="true" tabindex="-1"></a>df363349 <span class="ot">&lt;-</span></span>
<span id="cb163-315"><a href="#cb163-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-316"><a href="#cb163-316" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-317"><a href="#cb163-317" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-318"><a href="#cb163-318" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv"</span></span>
<span id="cb163-319"><a href="#cb163-319" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb163-320"><a href="#cb163-320" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb163-321"><a href="#cb163-321" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-322"><a href="#cb163-322" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-323"><a href="#cb163-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-324"><a href="#cb163-324" aria-hidden="true" tabindex="-1"></a>df363381 <span class="ot">&lt;-</span></span>
<span id="cb163-325"><a href="#cb163-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-326"><a href="#cb163-326" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-327"><a href="#cb163-327" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-328"><a href="#cb163-328" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv"</span></span>
<span id="cb163-329"><a href="#cb163-329" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb163-330"><a href="#cb163-330" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb163-331"><a href="#cb163-331" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-332"><a href="#cb163-332" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-333"><a href="#cb163-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-334"><a href="#cb163-334" aria-hidden="true" tabindex="-1"></a>df363431 <span class="ot">&lt;-</span></span>
<span id="cb163-335"><a href="#cb163-335" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-336"><a href="#cb163-336" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-337"><a href="#cb163-337" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-338"><a href="#cb163-338" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv"</span></span>
<span id="cb163-339"><a href="#cb163-339" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb163-340"><a href="#cb163-340" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb163-341"><a href="#cb163-341" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-342"><a href="#cb163-342" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-343"><a href="#cb163-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-344"><a href="#cb163-344" aria-hidden="true" tabindex="-1"></a>df408149 <span class="ot">&lt;-</span></span>
<span id="cb163-345"><a href="#cb163-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-346"><a href="#cb163-346" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-347"><a href="#cb163-347" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-348"><a href="#cb163-348" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv"</span></span>
<span id="cb163-349"><a href="#cb163-349" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb163-350"><a href="#cb163-350" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb163-351"><a href="#cb163-351" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-352"><a href="#cb163-352" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-353"><a href="#cb163-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-354"><a href="#cb163-354" aria-hidden="true" tabindex="-1"></a>df411456 <span class="ot">&lt;-</span></span>
<span id="cb163-355"><a href="#cb163-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-356"><a href="#cb163-356" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-357"><a href="#cb163-357" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-358"><a href="#cb163-358" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv"</span></span>
<span id="cb163-359"><a href="#cb163-359" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb163-360"><a href="#cb163-360" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb163-361"><a href="#cb163-361" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-362"><a href="#cb163-362" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-363"><a href="#cb163-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-364"><a href="#cb163-364" aria-hidden="true" tabindex="-1"></a>df411469 <span class="ot">&lt;-</span></span>
<span id="cb163-365"><a href="#cb163-365" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb163-366"><a href="#cb163-366" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.path</span>(</span>
<span id="cb163-367"><a href="#cb163-367" aria-hidden="true" tabindex="-1"></a>      here<span class="sc">::</span><span class="fu">here</span>(),</span>
<span id="cb163-368"><a href="#cb163-368" aria-hidden="true" tabindex="-1"></a>      <span class="st">"data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv"</span></span>
<span id="cb163-369"><a href="#cb163-369" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb163-370"><a href="#cb163-370" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb163-371"><a href="#cb163-371" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb163-372"><a href="#cb163-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-373"><a href="#cb163-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-374"><a href="#cb163-374" aria-hidden="true" tabindex="-1"></a>Let's look at the two forms that have the same number of columns, $n=274$, 307736 and 331453.</span>
<span id="cb163-375"><a href="#cb163-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-378"><a href="#cb163-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-379"><a href="#cb163-379" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df307736) <span class="sc">==</span> <span class="fu">names</span>(df331453)</span>
<span id="cb163-380"><a href="#cb163-380" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df307736) <span class="sc">==</span> <span class="fu">names</span>(df331453)) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">names</span>(df307736))</span>
<span id="cb163-381"><a href="#cb163-381" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-382"><a href="#cb163-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-383"><a href="#cb163-383" aria-hidden="true" tabindex="-1"></a>So, these two are identical and could be merged.</span>
<span id="cb163-384"><a href="#cb163-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-387"><a href="#cb163-387" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-388"><a href="#cb163-388" aria-hidden="true" tabindex="-1"></a>hv_deid_fl <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/non_mbcdi/deid"</span>), <span class="st">"</span><span class="sc">\\</span><span class="st">.csv$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb163-389"><a href="#cb163-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-390"><a href="#cb163-390" aria-hidden="true" tabindex="-1"></a>files_274_cols <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(hv_deid_fl, <span class="st">"/(307736|331453)"</span>)</span>
<span id="cb163-391"><a href="#cb163-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-392"><a href="#cb163-392" aria-hidden="true" tabindex="-1"></a>df_merge_274_cols <span class="ot">&lt;-</span> <span class="fu">file_make_aggregate_from_csvs</span>(hv_deid_fl[files_274_cols])</span>
<span id="cb163-393"><a href="#cb163-393" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-394"><a href="#cb163-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-395"><a href="#cb163-395" aria-hidden="true" tabindex="-1"></a>How about the files with $n=267$ columns, 331848 and 334099?</span>
<span id="cb163-396"><a href="#cb163-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-399"><a href="#cb163-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-400"><a href="#cb163-400" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">==</span> <span class="fu">names</span>(df334099)</span>
<span id="cb163-401"><a href="#cb163-401" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df331848) <span class="sc">==</span> <span class="fu">names</span>(df334099)) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">names</span>(df331848))</span>
<span id="cb163-402"><a href="#cb163-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-403"><a href="#cb163-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-406"><a href="#cb163-406" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-407"><a href="#cb163-407" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span>
<span id="cb163-408"><a href="#cb163-408" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span>
<span id="cb163-409"><a href="#cb163-409" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-410"><a href="#cb163-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-411"><a href="#cb163-411" aria-hidden="true" tabindex="-1"></a>There is an odd difference in the group label, <span class="in">`group_combinedquestionnaires`</span> vs. <span class="in">`group_jo84c13`</span>.</span>
<span id="cb163-412"><a href="#cb163-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-413"><a href="#cb163-413" aria-hidden="true" tabindex="-1"></a>Let's try deleting the initial group labels and compare again.</span>
<span id="cb163-414"><a href="#cb163-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-417"><a href="#cb163-417" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-418"><a href="#cb163-418" aria-hidden="true" tabindex="-1"></a>n1 <span class="ot">&lt;-</span> <span class="fu">names</span>(df331848)</span>
<span id="cb163-419"><a href="#cb163-419" aria-hidden="true" tabindex="-1"></a>n2 <span class="ot">&lt;-</span> <span class="fu">names</span>(df334099)</span>
<span id="cb163-420"><a href="#cb163-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-421"><a href="#cb163-421" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">"group_combinedquestionnaires/"</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span>
<span id="cb163-422"><a href="#cb163-422" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">"group_jo84c13/"</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span>
<span id="cb163-423"><a href="#cb163-423" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-424"><a href="#cb163-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-425"><a href="#cb163-425" aria-hidden="true" tabindex="-1"></a>That looks promising.</span>
<span id="cb163-426"><a href="#cb163-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-429"><a href="#cb163-429" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-430"><a href="#cb163-430" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">"group_combinedquestionnaires/"</span>) <span class="ot">-&gt;</span> n1</span>
<span id="cb163-431"><a href="#cb163-431" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">"group_jo84c13/"</span>) <span class="ot">-&gt;</span> n2</span>
<span id="cb163-432"><a href="#cb163-432" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">==</span> n2</span>
<span id="cb163-433"><a href="#cb163-433" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-434"><a href="#cb163-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-437"><a href="#cb163-437" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-438"><a href="#cb163-438" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>], n2[<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>])</span>
<span id="cb163-439"><a href="#cb163-439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-440"><a href="#cb163-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-441"><a href="#cb163-441" aria-hidden="true" tabindex="-1"></a><span class="in">`n2`</span> or <span class="in">`df334099`</span> has a <span class="in">`child_birth_date`</span> field in position 9 that the other data frame does not have.</span>
<span id="cb163-442"><a href="#cb163-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-445"><a href="#cb163-445" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-446"><a href="#cb163-446" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">|&gt;</span> <span class="fu">str_detect</span>(<span class="st">"child_birth_date"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span>
<span id="cb163-447"><a href="#cb163-447" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-448"><a href="#cb163-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-449"><a href="#cb163-449" aria-hidden="true" tabindex="-1"></a>If we delete that variable, the data frames will no longer have the same number of columns.</span>
<span id="cb163-450"><a href="#cb163-450" aria-hidden="true" tabindex="-1"></a>Let's explore that anyway.</span>
<span id="cb163-451"><a href="#cb163-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-454"><a href="#cb163-454" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-455"><a href="#cb163-455" aria-hidden="true" tabindex="-1"></a>n2_2 <span class="ot">&lt;-</span> n2[<span class="sc">-</span><span class="dv">9</span>]</span>
<span id="cb163-456"><a href="#cb163-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-457"><a href="#cb163-457" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">==</span> n2_2</span>
<span id="cb163-458"><a href="#cb163-458" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-459"><a href="#cb163-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-460"><a href="#cb163-460" aria-hidden="true" tabindex="-1"></a>That helps a bit, but we diverge around column 29.</span>
<span id="cb163-461"><a href="#cb163-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-464"><a href="#cb163-464" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-465"><a href="#cb163-465" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">28</span><span class="sc">:</span><span class="dv">51</span>], n2_2[<span class="dv">28</span><span class="sc">:</span><span class="dv">51</span>])</span>
<span id="cb163-466"><a href="#cb163-466" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-467"><a href="#cb163-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-468"><a href="#cb163-468" aria-hidden="true" tabindex="-1"></a>These question labels looks very similar.</span>
<span id="cb163-469"><a href="#cb163-469" aria-hidden="true" tabindex="-1"></a>There are just some minor changes in the variable names.</span>
<span id="cb163-470"><a href="#cb163-470" aria-hidden="true" tabindex="-1"></a><span class="in">`n2_2`</span> has an extra variable in column 40.</span>
<span id="cb163-471"><a href="#cb163-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-474"><a href="#cb163-474" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-475"><a href="#cb163-475" aria-hidden="true" tabindex="-1"></a>n2_3 <span class="ot">&lt;-</span> n2_2[<span class="sc">-</span><span class="dv">40</span>]</span>
<span id="cb163-476"><a href="#cb163-476" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-477"><a href="#cb163-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-478"><a href="#cb163-478" aria-hidden="true" tabindex="-1"></a>Then, we can rename some of the columns in <span class="in">`n2_3`</span> using corresponding names from <span class="in">`n1`</span>.</span>
<span id="cb163-479"><a href="#cb163-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-482"><a href="#cb163-482" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-483"><a href="#cb163-483" aria-hidden="true" tabindex="-1"></a>n2_3 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">"yes__in_the_bi"</span>, <span class="st">"birthhospital"</span>) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">"yes__after_goi"</span>, <span class="st">"afterhome"</span>) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">"don_t_know"</span>, <span class="st">"donotknow"</span>) <span class="ot">-&gt;</span> n2_4</span>
<span id="cb163-484"><a href="#cb163-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-485"><a href="#cb163-485" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">==</span> n2_4</span>
<span id="cb163-486"><a href="#cb163-486" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-487"><a href="#cb163-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-490"><a href="#cb163-490" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-491"><a href="#cb163-491" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">39</span><span class="sc">:</span><span class="dv">51</span>], n2_4[<span class="dv">39</span><span class="sc">:</span><span class="dv">51</span>])</span>
<span id="cb163-492"><a href="#cb163-492" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-493"><a href="#cb163-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-494"><a href="#cb163-494" aria-hidden="true" tabindex="-1"></a><span class="in">`n1`</span> has a <span class="in">`group_medicalprof`</span> label from <span class="in">`allergies`</span> through <span class="in">`gastrointestinal`</span>; <span class="in">`n2_4`</span> has <span class="in">`child_allergies_infections_ill`</span> for the same questions.</span>
<span id="cb163-495"><a href="#cb163-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-498"><a href="#cb163-498" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-499"><a href="#cb163-499" aria-hidden="true" tabindex="-1"></a>n2_4 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">"child_allergies_infections_ill"</span>, <span class="st">"group_medicalprof"</span>) <span class="ot">-&gt;</span> n2_5</span>
<span id="cb163-500"><a href="#cb163-500" aria-hidden="true" tabindex="-1"></a>n1 <span class="sc">==</span> n2_5</span>
<span id="cb163-501"><a href="#cb163-501" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-502"><a href="#cb163-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-503"><a href="#cb163-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-506"><a href="#cb163-506" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-507"><a href="#cb163-507" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">49</span><span class="sc">:</span><span class="dv">60</span>], n2_5[<span class="dv">49</span><span class="sc">:</span><span class="dv">60</span>])</span>
<span id="cb163-508"><a href="#cb163-508" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-509"><a href="#cb163-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-510"><a href="#cb163-510" aria-hidden="true" tabindex="-1"></a>It looks like these could be reconciled by deleting <span class="in">`prenatal_care`</span> from <span class="in">`n1`</span>.</span>
<span id="cb163-511"><a href="#cb163-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-514"><a href="#cb163-514" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-515"><a href="#cb163-515" aria-hidden="true" tabindex="-1"></a>n1_2 <span class="ot">&lt;-</span> n1[<span class="sc">-</span><span class="dv">50</span>]</span>
<span id="cb163-516"><a href="#cb163-516" aria-hidden="true" tabindex="-1"></a>n1_2 <span class="sc">==</span> n2_5</span>
<span id="cb163-517"><a href="#cb163-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-518"><a href="#cb163-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-521"><a href="#cb163-521" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-522"><a href="#cb163-522" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(n1_2[<span class="dv">64</span><span class="sc">:</span><span class="dv">75</span>], n2_5[<span class="dv">64</span><span class="sc">:</span><span class="dv">75</span>])</span>
<span id="cb163-523"><a href="#cb163-523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-524"><a href="#cb163-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-525"><a href="#cb163-525" aria-hidden="true" tabindex="-1"></a>It looks like the phq4 is *not* in <span class="in">`n2_5`</span>.</span>
<span id="cb163-526"><a href="#cb163-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-527"><a href="#cb163-527" aria-hidden="true" tabindex="-1"></a>Let's check.</span>
<span id="cb163-528"><a href="#cb163-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-531"><a href="#cb163-531" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-532"><a href="#cb163-532" aria-hidden="true" tabindex="-1"></a>n2_5 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="st">"phq4"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span>
<span id="cb163-533"><a href="#cb163-533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-534"><a href="#cb163-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-535"><a href="#cb163-535" aria-hidden="true" tabindex="-1"></a>Yes, there are only two PHQ4-related questions in <span class="in">`df334099`</span>.</span>
<span id="cb163-536"><a href="#cb163-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-539"><a href="#cb163-539" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-540"><a href="#cb163-540" aria-hidden="true" tabindex="-1"></a>df334099 <span class="sc">|&gt;</span> <span class="fu">names</span>() <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="st">"phq4"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span>
<span id="cb163-541"><a href="#cb163-541" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-542"><a href="#cb163-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-543"><a href="#cb163-543" aria-hidden="true" tabindex="-1"></a>This path of reconciliation does not appear fruitful.</span>
<span id="cb163-544"><a href="#cb163-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-545"><a href="#cb163-545" aria-hidden="true" tabindex="-1"></a><span class="fu">## Make aggregate files {-}</span></span>
<span id="cb163-546"><a href="#cb163-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-547"><a href="#cb163-547" aria-hidden="true" tabindex="-1"></a><span class="fu">### non-MB-CDI files with $n=288$ columns {-}</span></span>
<span id="cb163-548"><a href="#cb163-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-551"><a href="#cb163-551" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-552"><a href="#cb163-552" aria-hidden="true" tabindex="-1"></a>files_288_cols <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(hv_deid_fl, <span class="st">"2[3458]_non_mbcdi.*_deidentified</span><span class="sc">\\</span><span class="st">.csv"</span>)</span>
<span id="cb163-553"><a href="#cb163-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-554"><a href="#cb163-554" aria-hidden="true" tabindex="-1"></a>df_merge_288_cols <span class="ot">&lt;-</span> <span class="fu">file_make_aggregate_from_csvs</span>(hv_deid_fl[files_288_cols])</span>
<span id="cb163-555"><a href="#cb163-555" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-556"><a href="#cb163-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-557"><a href="#cb163-557" aria-hidden="true" tabindex="-1"></a><span class="fu">### non-MB-CDI files with $n=287$ columns {-}</span></span>
<span id="cb163-558"><a href="#cb163-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-561"><a href="#cb163-561" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-562"><a href="#cb163-562" aria-hidden="true" tabindex="-1"></a>files_287_cols_1 <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(hv_deid_fl, <span class="st">"2[69]_non_mbcdi.*_deidentified</span><span class="sc">\\</span><span class="st">.csv"</span>)</span>
<span id="cb163-563"><a href="#cb163-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-564"><a href="#cb163-564" aria-hidden="true" tabindex="-1"></a>files_287_cols_2 <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(hv_deid_fl, <span class="st">"(740627|740630|740631)_non.*_deidentified</span><span class="sc">\\</span><span class="st">.csv"</span>)</span>
<span id="cb163-565"><a href="#cb163-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-566"><a href="#cb163-566" aria-hidden="true" tabindex="-1"></a>df_merge_287_cols_1 <span class="ot">&lt;-</span> <span class="fu">file_make_aggregate_from_csvs</span>(hv_deid_fl[files_287_cols_1])</span>
<span id="cb163-567"><a href="#cb163-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-568"><a href="#cb163-568" aria-hidden="true" tabindex="-1"></a>df_merge_287_cols_2 <span class="ot">&lt;-</span> <span class="fu">file_make_aggregate_from_csvs</span>(hv_deid_fl[files_287_cols_2])</span>
<span id="cb163-569"><a href="#cb163-569" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-570"><a href="#cb163-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-571"><a href="#cb163-571" aria-hidden="true" tabindex="-1"></a><span class="fu">### Examine groups with $n=287$ cols {-}</span></span>
<span id="cb163-572"><a href="#cb163-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-573"><a href="#cb163-573" aria-hidden="true" tabindex="-1"></a>We focus on the starting column where the column names diverge, column 92.</span>
<span id="cb163-574"><a href="#cb163-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-577"><a href="#cb163-577" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-578"><a href="#cb163-578" aria-hidden="true" tabindex="-1"></a><span class="co"># targets::tar_load(df_merge_287_cols_1, store="../_targets")</span></span>
<span id="cb163-579"><a href="#cb163-579" aria-hidden="true" tabindex="-1"></a><span class="co"># targets::tar_load(df_merge_287_cols_2, store="../_targets")</span></span>
<span id="cb163-580"><a href="#cb163-580" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_1)[<span class="dv">92</span>]</span>
<span id="cb163-581"><a href="#cb163-581" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">92</span>]</span>
<span id="cb163-582"><a href="#cb163-582" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-583"><a href="#cb163-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-584"><a href="#cb163-584" aria-hidden="true" tabindex="-1"></a>There is an erroneous <span class="in">`group_locomotor_milestones.`</span> in the <span class="in">`df_merge_287_cols_2`</span> column name.</span>
<span id="cb163-585"><a href="#cb163-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-586"><a href="#cb163-586" aria-hidden="true" tabindex="-1"></a>A bit of sleuthing determines that this <span class="in">`group_locomotor_milestones.`</span> label is characteristic of columns 92 to 273.</span>
<span id="cb163-587"><a href="#cb163-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-590"><a href="#cb163-590" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-591"><a href="#cb163-591" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">"group_locomotor_milestones"</span>)</span>
<span id="cb163-592"><a href="#cb163-592" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-593"><a href="#cb163-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-594"><a href="#cb163-594" aria-hidden="true" tabindex="-1"></a>The following should fix this.</span>
<span id="cb163-595"><a href="#cb163-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-598"><a href="#cb163-598" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-599"><a href="#cb163-599" aria-hidden="true" tabindex="-1"></a>old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df_merge_287_cols_2)</span>
<span id="cb163-600"><a href="#cb163-600" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb163-601"><a href="#cb163-601" aria-hidden="true" tabindex="-1"></a>new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="ot">&lt;-</span></span>
<span id="cb163-602"><a href="#cb163-602" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>], <span class="st">"group_locomotor_milestones</span><span class="sc">\\</span><span class="st">."</span>)</span>
<span id="cb163-603"><a href="#cb163-603" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="ot">&lt;-</span> new_names</span>
<span id="cb163-604"><a href="#cb163-604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-605"><a href="#cb163-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-608"><a href="#cb163-608" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-609"><a href="#cb163-609" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">==</span> <span class="fu">names</span>(df_merge_287_cols_1)</span>
<span id="cb163-610"><a href="#cb163-610" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-611"><a href="#cb163-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-612"><a href="#cb163-612" aria-hidden="true" tabindex="-1"></a>We have a second problem with columns from 114 to 210.</span>
<span id="cb163-613"><a href="#cb163-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-616"><a href="#cb163-616" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-617"><a href="#cb163-617" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df_merge_287_cols_1)[<span class="dv">113</span><span class="sc">:</span><span class="dv">115</span>], <span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">113</span><span class="sc">:</span><span class="dv">115</span>])</span>
<span id="cb163-618"><a href="#cb163-618" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-619"><a href="#cb163-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-620"><a href="#cb163-620" aria-hidden="true" tabindex="-1"></a>One of the problems has to do with column 114. There is a question ending <span class="in">`doctor_told_you`</span> in <span class="in">`names(df_merge_287_cols_1)`</span> but not in <span class="in">`names(df_merge_287_cols_2)`</span>.</span>
<span id="cb163-621"><a href="#cb163-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-624"><a href="#cb163-624" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-625"><a href="#cb163-625" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_1) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">"doctor_told_you"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span>
<span id="cb163-626"><a href="#cb163-626" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">"doctor_told_you"</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span>
<span id="cb163-627"><a href="#cb163-627" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-628"><a href="#cb163-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-629"><a href="#cb163-629" aria-hidden="true" tabindex="-1"></a>Deleting this question would create additional misalignments and further problems.</span>
<span id="cb163-630"><a href="#cb163-630" aria-hidden="true" tabindex="-1"></a>We cannot proceed without further discussion with our team.</span>
<span id="cb163-631"><a href="#cb163-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-632"><a href="#cb163-632" aria-hidden="true" tabindex="-1"></a>For now, let's generate an array with all of the remaining differences in column names.</span>
<span id="cb163-633"><a href="#cb163-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-636"><a href="#cb163-636" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-637"><a href="#cb163-637" aria-hidden="true" tabindex="-1"></a>names_differ <span class="ot">&lt;-</span> (<span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">!=</span> <span class="fu">names</span>(df_merge_287_cols_1))</span>
<span id="cb163-638"><a href="#cb163-638" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(names_differ)</span>
<span id="cb163-639"><a href="#cb163-639" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-640"><a href="#cb163-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-643"><a href="#cb163-643" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-644"><a href="#cb163-644" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df_merge_287_cols_1)[names_differ], <span class="fu">names</span>(df_merge_287_cols_2)[names_differ])</span>
<span id="cb163-645"><a href="#cb163-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-646"><a href="#cb163-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-647"><a href="#cb163-647" aria-hidden="true" tabindex="-1"></a>Visual inspection suggests that these are similar with the following deviations:</span>
<span id="cb163-648"><a href="#cb163-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-649"><a href="#cb163-649" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>As noted, <span class="in">`df_merge_287_cols_1`</span> has a column ending <span class="in">`doctor_told_you`</span> that is not present in <span class="in">`df_merge_287_cols_2`</span>.</span>
<span id="cb163-650"><a href="#cb163-650" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`df_merge_287_cols_2`</span> has a column ending <span class="in">`technology_use_scale`</span> that is not present in the <span class="in">`df_merge_287_cols_1`</span></span>
<span id="cb163-651"><a href="#cb163-651" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>There are a set of fields in <span class="in">`group_databrary`</span> that do not align exactly. We will almost certainly delete these, so the misalignment is not a huge problem.</span>
<span id="cb163-652"><a href="#cb163-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-653"><a href="#cb163-653" aria-hidden="true" tabindex="-1"></a>As an exploration, let's see if we can reconcile these by deleting the non-aligning columns.</span>
<span id="cb163-654"><a href="#cb163-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-657"><a href="#cb163-657" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-658"><a href="#cb163-658" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df_merge_287_cols_1</span>
<span id="cb163-659"><a href="#cb163-659" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df_merge_287_cols_2</span>
<span id="cb163-660"><a href="#cb163-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-661"><a href="#cb163-661" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb163-662"><a href="#cb163-662" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'doctor_told_you'</span>))</span>
<span id="cb163-663"><a href="#cb163-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-664"><a href="#cb163-664" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb163-665"><a href="#cb163-665" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'technology_use_scale'</span>))</span>
<span id="cb163-666"><a href="#cb163-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-667"><a href="#cb163-667" aria-hidden="true" tabindex="-1"></a>old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)</span>
<span id="cb163-668"><a href="#cb163-668" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb163-669"><a href="#cb163-669" aria-hidden="true" tabindex="-1"></a>new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>], <span class="st">"group_locomotor_milestones</span><span class="sc">\\</span><span class="st">."</span>)</span>
<span id="cb163-670"><a href="#cb163-670" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df2) <span class="ot">&lt;-</span> new_names</span>
<span id="cb163-671"><a href="#cb163-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-672"><a href="#cb163-672" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df2)</span>
<span id="cb163-673"><a href="#cb163-673" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-674"><a href="#cb163-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-675"><a href="#cb163-675" aria-hidden="true" tabindex="-1"></a>This looks promising.</span>
<span id="cb163-676"><a href="#cb163-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-679"><a href="#cb163-679" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-680"><a href="#cb163-680" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">263</span>], <span class="fu">names</span>(df2)[<span class="dv">263</span>])</span>
<span id="cb163-681"><a href="#cb163-681" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-682"><a href="#cb163-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-683"><a href="#cb163-683" aria-hidden="true" tabindex="-1"></a>This is easily fixed.</span>
<span id="cb163-684"><a href="#cb163-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-687"><a href="#cb163-687" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-688"><a href="#cb163-688" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1)[<span class="dv">263</span>] <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)[<span class="dv">263</span>]</span>
<span id="cb163-689"><a href="#cb163-689" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-690"><a href="#cb163-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-693"><a href="#cb163-693" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-694"><a href="#cb163-694" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">273</span><span class="sc">:</span><span class="dv">275</span>], <span class="fu">names</span>(df2)[<span class="dv">273</span><span class="sc">:</span><span class="dv">275</span>])</span>
<span id="cb163-695"><a href="#cb163-695" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-696"><a href="#cb163-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-697"><a href="#cb163-697" aria-hidden="true" tabindex="-1"></a>The last misalignments relate to Databrary fields.</span>
<span id="cb163-698"><a href="#cb163-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-701"><a href="#cb163-701" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-702"><a href="#cb163-702" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb163-703"><a href="#cb163-703" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'group_databrary'</span>))</span>
<span id="cb163-704"><a href="#cb163-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-705"><a href="#cb163-705" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb163-706"><a href="#cb163-706" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'group_databrary'</span>))</span>
<span id="cb163-707"><a href="#cb163-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-708"><a href="#cb163-708" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df2)</span>
<span id="cb163-709"><a href="#cb163-709" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-710"><a href="#cb163-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-711"><a href="#cb163-711" aria-hidden="true" tabindex="-1"></a>Success!</span>
<span id="cb163-712"><a href="#cb163-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-713"><a href="#cb163-713" aria-hidden="true" tabindex="-1"></a><span class="fu">## Combining the two groups of datasets {-}</span></span>
<span id="cb163-714"><a href="#cb163-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-715"><a href="#cb163-715" aria-hidden="true" tabindex="-1"></a>Now, let's go back to the data frame with 288 cols and see if we can bring these into alignment.</span>
<span id="cb163-716"><a href="#cb163-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-719"><a href="#cb163-719" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-720"><a href="#cb163-720" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df_merge_288_cols</span>
<span id="cb163-721"><a href="#cb163-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-722"><a href="#cb163-722" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb163-723"><a href="#cb163-723" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'group_databrary'</span>))</span>
<span id="cb163-724"><a href="#cb163-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-725"><a href="#cb163-725" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">dim</span>(df1), <span class="fu">dim</span>(df2), <span class="fu">dim</span>(df3))</span>
<span id="cb163-726"><a href="#cb163-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-727"><a href="#cb163-727" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span>
<span id="cb163-728"><a href="#cb163-728" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">114</span><span class="sc">:</span><span class="dv">115</span>], <span class="fu">names</span>(df3)[<span class="dv">114</span><span class="sc">:</span><span class="dv">115</span>])</span>
<span id="cb163-729"><a href="#cb163-729" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-730"><a href="#cb163-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-731"><a href="#cb163-731" aria-hidden="true" tabindex="-1"></a>Once again, there appears to be a problem with the 'doctor_told_you' field. We'll delete it to see if this fixes one of the problems.</span>
<span id="cb163-732"><a href="#cb163-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-735"><a href="#cb163-735" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-736"><a href="#cb163-736" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb163-737"><a href="#cb163-737" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'doctor_told_you'</span>))</span>
<span id="cb163-738"><a href="#cb163-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-739"><a href="#cb163-739" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span>
<span id="cb163-740"><a href="#cb163-740" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-741"><a href="#cb163-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-742"><a href="#cb163-742" aria-hidden="true" tabindex="-1"></a>We still have misalignments at column 210.</span>
<span id="cb163-743"><a href="#cb163-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-746"><a href="#cb163-746" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-747"><a href="#cb163-747" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">210</span><span class="sc">:</span><span class="dv">213</span>], <span class="fu">names</span>(df3)[<span class="dv">210</span><span class="sc">:</span><span class="dv">213</span>])</span>
<span id="cb163-748"><a href="#cb163-748" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-749"><a href="#cb163-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-750"><a href="#cb163-750" aria-hidden="true" tabindex="-1"></a>The 'technology_use_scale` exists in one but not the other.</span>
<span id="cb163-751"><a href="#cb163-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-754"><a href="#cb163-754" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-755"><a href="#cb163-755" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb163-756"><a href="#cb163-756" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">'technology_use_scale'</span>))</span>
<span id="cb163-757"><a href="#cb163-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-758"><a href="#cb163-758" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">dim</span>(df1), <span class="fu">dim</span>(df3))</span>
<span id="cb163-759"><a href="#cb163-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-760"><a href="#cb163-760" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span>
<span id="cb163-761"><a href="#cb163-761" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-762"><a href="#cb163-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-763"><a href="#cb163-763" aria-hidden="true" tabindex="-1"></a>:::{.rmdimportant}</span>
<span id="cb163-764"><a href="#cb163-764" aria-hidden="true" tabindex="-1"></a>Future versions of the workflow will need to handle this more elegantly. </span>
<span id="cb163-765"><a href="#cb163-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-766"><a href="#cb163-766" aria-hidden="true" tabindex="-1"></a>Option 1: Fix the underlying forms.</span>
<span id="cb163-767"><a href="#cb163-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-768"><a href="#cb163-768" aria-hidden="true" tabindex="-1"></a>Option 2: Add the 'missing' columns as NA in post-processing.</span>
<span id="cb163-769"><a href="#cb163-769" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb163-770"><a href="#cb163-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-771"><a href="#cb163-771" aria-hidden="true" tabindex="-1"></a>For now, I'm going to create functions that align these data frames.</span>
<span id="cb163-772"><a href="#cb163-772" aria-hidden="true" tabindex="-1"></a>These are incorporated into <span class="in">`R/utils.R`</span> so we do not source them again here.</span>
<span id="cb163-773"><a href="#cb163-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-774"><a href="#cb163-774" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb163-775"><a href="#cb163-775" aria-hidden="true" tabindex="-1"></a><span class="in">remove_technology_use_scale &lt;- function(df) {</span></span>
<span id="cb163-776"><a href="#cb163-776" aria-hidden="true" tabindex="-1"></a><span class="in">  dplyr::select(df, -contains('technology_use_scale'))</span></span>
<span id="cb163-777"><a href="#cb163-777" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-778"><a href="#cb163-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-779"><a href="#cb163-779" aria-hidden="true" tabindex="-1"></a><span class="in">remove_doctor_told_you &lt;- function(df) {</span></span>
<span id="cb163-780"><a href="#cb163-780" aria-hidden="true" tabindex="-1"></a><span class="in">  dplyr::select(df, -contains('doctor_told_you'))</span></span>
<span id="cb163-781"><a href="#cb163-781" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-782"><a href="#cb163-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-783"><a href="#cb163-783" aria-hidden="true" tabindex="-1"></a><span class="in">remove_databrary_fields &lt;- function(df) {</span></span>
<span id="cb163-784"><a href="#cb163-784" aria-hidden="true" tabindex="-1"></a><span class="in">  dplyr::select(df, -contains('group_databrary'))</span></span>
<span id="cb163-785"><a href="#cb163-785" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-786"><a href="#cb163-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-787"><a href="#cb163-787" aria-hidden="true" tabindex="-1"></a><span class="in">reconcile_typicalday &lt;- function(df) {</span></span>
<span id="cb163-788"><a href="#cb163-788" aria-hidden="true" tabindex="-1"></a><span class="in">  names(df) &lt;- stringr::str_replace_all(names(df), 'typicalday', 'typical_day')</span></span>
<span id="cb163-789"><a href="#cb163-789" aria-hidden="true" tabindex="-1"></a><span class="in">  df</span></span>
<span id="cb163-790"><a href="#cb163-790" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-791"><a href="#cb163-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-792"><a href="#cb163-792" aria-hidden="true" tabindex="-1"></a><span class="in">remove_permissive_locomotor_milestones_label &lt;- function(df) {</span></span>
<span id="cb163-793"><a href="#cb163-793" aria-hidden="true" tabindex="-1"></a><span class="in">  old_names &lt;- names(df)</span></span>
<span id="cb163-794"><a href="#cb163-794" aria-hidden="true" tabindex="-1"></a><span class="in">  new_names &lt;- old_names</span></span>
<span id="cb163-795"><a href="#cb163-795" aria-hidden="true" tabindex="-1"></a><span class="in">  contains_locomotor &lt;-</span></span>
<span id="cb163-796"><a href="#cb163-796" aria-hidden="true" tabindex="-1"></a><span class="in">    stringr::str_detect(new_names, pattern = "locomotor_milestones.*health|division|rothbart|mediause|pets|typical|acknowledge")</span></span>
<span id="cb163-797"><a href="#cb163-797" aria-hidden="true" tabindex="-1"></a><span class="in">  new_names[contains_locomotor] &lt;-</span></span>
<span id="cb163-798"><a href="#cb163-798" aria-hidden="true" tabindex="-1"></a><span class="in">    stringr::str_remove(new_names[contains_locomotor], "group_locomotor_milestones\\.")</span></span>
<span id="cb163-799"><a href="#cb163-799" aria-hidden="true" tabindex="-1"></a><span class="in">  names(df) &lt;- new_names</span></span>
<span id="cb163-800"><a href="#cb163-800" aria-hidden="true" tabindex="-1"></a><span class="in">  df</span></span>
<span id="cb163-801"><a href="#cb163-801" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-802"><a href="#cb163-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-803"><a href="#cb163-803" aria-hidden="true" tabindex="-1"></a><span class="in">remove_X_meta_cols &lt;- function(df) {</span></span>
<span id="cb163-804"><a href="#cb163-804" aria-hidden="true" tabindex="-1"></a><span class="in">  dplyr::select(df, -contains("X_"), -contains("meta.instanceID"))</span></span>
<span id="cb163-805"><a href="#cb163-805" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-806"><a href="#cb163-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-807"><a href="#cb163-807" aria-hidden="true" tabindex="-1"></a><span class="in">remove_redundant_group_labels &lt;- function(df) {</span></span>
<span id="cb163-808"><a href="#cb163-808" aria-hidden="true" tabindex="-1"></a><span class="in">  names(df) &lt;- stringr::str_remove_all(names(df), 'group_homevisitquestionnaires\\.')</span></span>
<span id="cb163-809"><a href="#cb163-809" aria-hidden="true" tabindex="-1"></a><span class="in">  names(df) &lt;- stringr::str_remove_all(names(df), 'group_combinedquestionnaires\\.')</span></span>
<span id="cb163-810"><a href="#cb163-810" aria-hidden="true" tabindex="-1"></a><span class="in">  df</span></span>
<span id="cb163-811"><a href="#cb163-811" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-812"><a href="#cb163-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-813"><a href="#cb163-813" aria-hidden="true" tabindex="-1"></a><span class="in">clean_dfs &lt;- function(df) {</span></span>
<span id="cb163-814"><a href="#cb163-814" aria-hidden="true" tabindex="-1"></a><span class="in">  df %&gt;%</span></span>
<span id="cb163-815"><a href="#cb163-815" aria-hidden="true" tabindex="-1"></a><span class="in">    reconcile_typicalday() %&gt;%</span></span>
<span id="cb163-816"><a href="#cb163-816" aria-hidden="true" tabindex="-1"></a><span class="in">    remove_technology_use_scale() %&gt;%</span></span>
<span id="cb163-817"><a href="#cb163-817" aria-hidden="true" tabindex="-1"></a><span class="in">    remove_doctor_told_you() %&gt;%</span></span>
<span id="cb163-818"><a href="#cb163-818" aria-hidden="true" tabindex="-1"></a><span class="in">    remove_permissive_locomotor_milestones_label() %&gt;%</span></span>
<span id="cb163-819"><a href="#cb163-819" aria-hidden="true" tabindex="-1"></a><span class="in">    remove_databrary_fields() %&gt;%</span></span>
<span id="cb163-820"><a href="#cb163-820" aria-hidden="true" tabindex="-1"></a><span class="in">    remove_X_meta_cols() %&gt;%</span></span>
<span id="cb163-821"><a href="#cb163-821" aria-hidden="true" tabindex="-1"></a><span class="in">    remove_redundant_group_labels()</span></span>
<span id="cb163-822"><a href="#cb163-822" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb163-823"><a href="#cb163-823" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-824"><a href="#cb163-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-825"><a href="#cb163-825" aria-hidden="true" tabindex="-1"></a>Let's test this workflow with the unmodified files.</span>
<span id="cb163-826"><a href="#cb163-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-829"><a href="#cb163-829" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-830"><a href="#cb163-830" aria-hidden="true" tabindex="-1"></a>df1m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_287_cols_1)</span>
<span id="cb163-831"><a href="#cb163-831" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df1m)</span>
<span id="cb163-832"><a href="#cb163-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-833"><a href="#cb163-833" aria-hidden="true" tabindex="-1"></a>df2m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_287_cols_2)</span>
<span id="cb163-834"><a href="#cb163-834" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df2m)</span>
<span id="cb163-835"><a href="#cb163-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-836"><a href="#cb163-836" aria-hidden="true" tabindex="-1"></a>df3m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_288_cols)</span>
<span id="cb163-837"><a href="#cb163-837" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df3m)</span>
<span id="cb163-838"><a href="#cb163-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-839"><a href="#cb163-839" aria-hidden="true" tabindex="-1"></a>(<span class="fu">names</span>(df1m) <span class="sc">==</span> <span class="fu">names</span>(df2m)) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span>
<span id="cb163-840"><a href="#cb163-840" aria-hidden="true" tabindex="-1"></a>(<span class="fu">names</span>(df1m) <span class="sc">==</span> <span class="fu">names</span>(df3m)) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span>
<span id="cb163-841"><a href="#cb163-841" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-842"><a href="#cb163-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-843"><a href="#cb163-843" aria-hidden="true" tabindex="-1"></a><span class="fu">## Merging and exporting {-}</span></span>
<span id="cb163-844"><a href="#cb163-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-847"><a href="#cb163-847" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-848"><a href="#cb163-848" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df1m, df2m, df3m)</span>
<span id="cb163-849"><a href="#cb163-849" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb163-850"><a href="#cb163-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-851"><a href="#cb163-851" aria-hidden="true" tabindex="-1"></a>Save exported aggregate file.</span>
<span id="cb163-852"><a href="#cb163-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-855"><a href="#cb163-855" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb163-856"><a href="#cb163-856" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(df, <span class="at">file =</span> <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">"data/csv/home_visit/agg"</span>, <span class="st">"PLAY-non-mcdi-raw-latest.csv"</span>))</span>
<span id="cb163-857"><a href="#cb163-857" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/PLAY-behaviorome/KoBoToolbox/edit/main/src/home-visit-aggregate.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/PLAY-behaviorome/KoBoToolbox/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>