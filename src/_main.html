<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>PLAY Project: Surveys</title>

    <meta name="author" content="Rick Gilmore" />
  
   <meta name="description" content="Protocol for processing PLAY Project survey data" />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="PLAY Project: Surveys" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Protocol for processing PLAY Project survey data" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="PLAY Project: Surveys" />
  
  <meta name="twitter:description" content="Protocol for processing PLAY Project survey data" />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.4.2/transition.js"></script>
    <script src="libs/bs3compat-0.4.2/tabs.js"></script>
    <script src="libs/bs3compat-0.4.2/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="include/css/style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<!--bookdown:title:start-->
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">PLAY Project: Surveys</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="about" class="section level1 unnumbered">
<h1 class="unnumbered">About</h1>
<p><a href="https://play-project.org" target="_blank"><img src="include/img/PLAY-logo.png" width="75%" style="display: block; margin: auto;" /></a></p>
<div id="purpose" class="section level2 unnumbered">
<h2 class="unnumbered">Purpose</h2>
<p>PLAY project researchers use <a href="https://www.kobotoolbox.org/">KoBoToolbox</a> to collect data from participant families.
Data from all sessions at all PLAY data collection sites are pushed to a common set of files on the KoBoToolbox server.</p>
<p>This document describes the process of i) downloading, ii) parsing, iii) cleaning, and iv) exporting these files into forms more suitable for data analysis.</p>
<p>For details about the PLAY Project data collection protocol, see <a href="https://PLAY-behaviorome.github.io/protocol/" class="uri">https://PLAY-behaviorome.github.io/protocol/</a>.</p>
</div>
<div id="overview-of-data-sets" class="section level2 unnumbered">
<h2 class="unnumbered">Overview of data sets</h2>
<p>There are three sets of data collected using KoBoToolbox.
One set is collected during the recruiting and screening calls for the study.
The second set is collected during the home visit.
The third set consists of notes generated by the experimenter after the visit.</p>
<div id="data-access-and-processing" class="section level3 unnumbered">
<h3 class="unnumbered">Data access and processing</h3>
<p>All data are downloaded and manipulated locally but are <strong>not</strong> synched to GitHub.
This is accomplished by adding <code>data</code> to <a href=".gitignore"><code>.gitignore</code></a>.</p>
<p>There are separate processes for detecting and deleting personal identifiers from specific data files and exporting ‘cleaned’ versions that may be shared on Databrary.</p>
</div>
<div id="home-visit-data" class="section level3 unnumbered">
<h3 class="unnumbered">Home visit data</h3>
<p>There are three (3) age groups (12-, 18-, and 24-month-olds) and four (4) different language environment groups (English-only, Spanish-only, Bilingual-English-dominant, Bilingual-Spanish-dominant).
Since the language of the questions and some of the specific questions vary by age group and by language environment group, there multiple KoBoToolbox survey form files that must be processed.</p>
<!--chapter:end:index.Rmd-->
</div>
</div>
</div>
<div id="part-tools-and-processes" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Tools and Processes</h1>
<!--chapter:end:00-tools.Rmd-->
</div>
<div id="setup" class="section level1 unnumbered">
<h1 class="unnumbered">Setup</h1>
<p>This section describes the setup procedure.</p>
<div id="authentication" class="section level2 unnumbered">
<h2 class="unnumbered">Authentication</h2>
<p>The data are stored in an account on <a href="https://kf.kobotoolbox.org" class="uri">https://kf.kobotoolbox.org</a>.
The login credentials for that account are shared among the PLAY Project staff.
To access the site’s API programmatically, an API key was downloaded and added to the local <code>~/.Renviron</code> file.</p>
<!-- https://bookdown.org/yihui/bookdown/html.html#callout-blocks -->
<!--Available blocks are: .rmdnote, .rmdcaution, .rmdimportant, .rmdtip, and .rmdwarning -->
<div class="rmdimportant">
<p>The KoBoToolBox API key is <strong>not</strong> synched to GitHub.</p>
</div>
</div>
<div id="set-up" class="section level2 unnumbered">
<h2 class="unnumbered">Set-up</h2>
<p>To test whether the local system has the API key installed, we run the command <code>Sys.getenv("KOBO_API_KEY")</code>.</p>
<div id="check-kobo-api-key" class="section level3 unnumbered">
<h3 class="unnumbered">Check KoBo API Key</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>kb_api <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;KOBO_API_KEY&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="cf">if</span> ((<span class="fu">length</span>(kb_api) <span class="sc">!=</span> <span class="dv">1</span>) <span class="sc">||</span> (<span class="sc">!</span><span class="fu">is.character</span>(kb_api))) {</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">&quot;&#39;KOBO_API_KEY&#39; not installed in .Renviron&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;&#39;KOBO_API_KEY&#39; installed.&quot;</span>)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## &#39;KOBO_API_KEY&#39; installed.</code></pre>
</div>
<div id="check-databrary-credentials" class="section level3 unnumbered">
<h3 class="unnumbered">Check Databrary credentials</h3>
<p>The <code>databraryr</code> package handles authenticating to Databrary.
For scripting access to Databrary that require authentication, it is useful to store the user’s Databrary login (email) in <code>.Renviron</code> using the R command <code>Sys.setenv(DATABRARY_LOGIN = "&lt;email@provider.com&gt;")</code> where you substitute your Databrary login (email) for <code>&lt;email@provider.com&gt;</code>.
When this has been accomplished the following code can be run to check the status of the saved variable.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>db_logon <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;DATABRARY_LOGIN&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="cf">if</span> ((<span class="fu">length</span>(db_logon) <span class="sc">!=</span> <span class="dv">1</span>) <span class="sc">||</span> (<span class="sc">!</span><span class="fu">is.character</span>(db_logon)) <span class="sc">||</span> (db_logon <span class="sc">==</span> <span class="st">&quot;&quot;</span>)) {</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">&quot;&#39;DATABRARY_LOGIN&#39; not installed in .Renviron&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;&#39;DATABRARY_LOGIN&#39; installed.&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## &#39;DATABRARY_LOGIN&#39; installed.</code></pre>
</div>
<div id="install-dependencies" class="section level3 unnumbered">
<h3 class="unnumbered">Install dependencies</h3>
<p>We now use the <a href="https://cran.r-project.org/web/packages/renv/index.html"><code>renv</code></a> package to manage package dependencies.</p>
</div>
<div id="loadsource-helper-functions" class="section level3 unnumbered">
<h3 class="unnumbered">Load/source helper functions</h3>
<p>Most of the work is contained in <code>R/functions.R</code>.
This is sourced when we run <code>tar_make()</code> from the <code>{targets}</code> package.</p>
<div class="rmdimportant">
<p>We run <code>targets::tar_make()</code> manually for the time being.</p>
<p>None of the outputs are synced to GitHub.</p>
</div>
</div>
</div>
<div id="approach" class="section level2" number="0.1">
<h2><span class="header-section-number">0.1</span> Approach</h2>
<p>To make the workflow more robust and reproducible, much of the work is embedded in functions and extensive use is made of the <a href="https://cran.r-project.org/web/packages/targets/"><code>{targets}</code></a> package.
This document describes the workflow, but none of these code chunks are executed.</p>
<p>We leave execution to the <code>targets::tar_make()</code> function which updates components as needed.</p>
<div class="rmdnote">
<p>I am currently working on implementing most of the functions using the <code>box</code> package. This allows better isolation of dependencies within different components of the workflow.</p>
<p>The box-related functions are in a new <code>play/</code> directory, and the R source files are divided into categories.
The functions related to processing the screening/demographic data are in <code>play/screen.R</code>.</p>
<p>They will be loaded into the workspace via <code>box::use(play/screen)</code> or for modules within <code>play/</code> via <code>box::use(./screen)</code>.</p>
</div>
<!--chapter:end:01-setup.Rmd-->
</div>
</div>
<div id="part-data-wrangling" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Data Wrangling</h1>
<!--chapter:end:10-wrangling.Rmd-->
</div>
<div id="screening-call" class="section level1 unnumbered">
<h1 class="unnumbered">Screening call</h1>
<div id="collection-protocol" class="section level2 unnumbered">
<h2 class="unnumbered">Collection protocol</h2>
<p>Details about the data collection <a href="https://www.play-project.org/collection.html#Participant_Recruitment">protocol for participant screening and recruiting</a> can be found on the <a href="https://play-project.org">PLAY Project website</a>.</p>
</div>
<div id="retrieve-from-kobotoolbox-kbt" class="section level2 unnumbered">
<h2 class="unnumbered">Retrieve from KoBoToolbox (KBT)</h2>
<p>We make use of the <code>targets</code> package for downloading data files from KoBoToolbox
and for saving local XLSX and CSV copies.
This allows us to download and process those files on a regular basis.</p>
<div id="setup-1" class="section level3 unnumbered">
<h3 class="unnumbered">Setup</h3>
<p>Load functions needed to download KBT screening/demographic questionnaire files.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>fl <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;R&quot;</span>), <span class="st">&quot;^kobo_|^file_&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">walk</span>(fl, source)</span></code></pre></div>
</div>
<div id="download" class="section level3 unnumbered">
<h3 class="unnumbered">Download</h3>
<p>We list the screening call data files available on KBT.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>(kb_screen_df <span class="ot">&lt;-</span> <span class="fu">kobo_list_data_filtered</span>(<span class="st">&quot;[Dd]emographic&quot;</span>))</span></code></pre></div>
<pre><code>##       id              id_string                                    title
## 1 334134 agChfbnGHc6fiUdfYUaZ2z PLAY Demographic Questionnaire (Spanish)
## 2 359546 aGLEqT7eRBhuPgizCQBeqA           PLAY Demographic Questionnaire
## 3 275882 anqhvxKtQieo7gc9uPqJ3y           PLAY Demographic Questionnaire
##                                description
## 1 PLAY Demographic Questionnaire (Spanish)
## 2            New Demographic Questionnaire
## 3                 PLAY Phone Questionnaire
##                                             url
## 1 https://kc.kobotoolbox.org/api/v1/data/334134
## 2 https://kc.kobotoolbox.org/api/v1/data/359546
## 3 https://kc.kobotoolbox.org/api/v1/data/275882</code></pre>
<p>The following target captures this step:</p>
<pre><code># Not evaluated
  tar_target(
    kb_screen_df,
    kobo_list_data_filtered(&quot;[Dd]emographic&quot;),
    cue = tarchetypes::tar_cue_age(
      name = kb_screen,
      age = as.difftime(update_interval, units = update_interval_units)
    )
  ),</code></pre>
<div class="rmdnote">
<p>This next step could be incorporated into the <code>targets</code> workflow, but is not
as of 2023-06-23.</p>
</div>
<p>We download and save the raw XLSX files.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">kobo_retrieve_save_many_xlsx</span>(kb_screen_df, <span class="at">save_dir =</span> <span class="st">&quot;../data/xlsx/screening&quot;</span>)</span></code></pre></div>
<pre><code>## Retrieving 3 files from KoBoToolbox site.</code></pre>
<pre><code>## [1] &quot;../data/xlsx/screening/334134_PLAY_Demographic_Questionnaire_Spanish.xlsx&quot;
## [2] &quot;../data/xlsx/screening/359546_PLAY_Demographic_Questionnaire.xlsx&quot;        
## [3] &quot;../data/xlsx/screening/275882_PLAY_Demographic_Questionnaire.xlsx&quot;</code></pre>
<p>Next, we convert the XLSX files to CSVs via a function from the <code>play/files</code> module.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">file_load_xlsx_save_many_csv</span>(<span class="st">&quot;../data/xlsx/screening&quot;</span>, <span class="st">&quot;../data/csv/screening&quot;</span>, <span class="st">&quot;Demographic&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;../data/csv/screening/275882_PLAY_Demographic_Questionnaire.csv&quot;        
## [2] &quot;../data/csv/screening/334134_PLAY_Demographic_Questionnaire_Spanish.csv&quot;
## [3] &quot;../data/csv/screening/359546_PLAY_Demographic_Questionnaire.csv&quot;</code></pre>
</div>
</div>
<div id="clean-and-merge" class="section level2 unnumbered">
<h2 class="unnumbered">Clean and merge</h2>
<div id="setup-2" class="section level3 unnumbered">
<h3 class="unnumbered">Setup</h3>
<p>A set of cleaning functions have the <code>screen_</code> prefix.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">walk</span>(<span class="fu">list.files</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;R&quot;</span>), </span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>                    <span class="st">&quot;^screen_&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>), source)</span></code></pre></div>
<p>There are three CSV files to clean:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>(fn <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;../data/csv/screening&quot;</span>, <span class="st">&quot;[Dd]emographic&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## [1] &quot;../data/csv/screening/275882_PLAY_Demographic_Questionnaire.csv&quot;        
## [2] &quot;../data/csv/screening/334134_PLAY_Demographic_Questionnaire_Spanish.csv&quot;
## [3] &quot;../data/csv/screening/359546_PLAY_Demographic_Questionnaire.csv&quot;</code></pre>
<p>We clean them separately, as needed, then merge them.</p>
</div>
<div id="clean-variable-names" class="section level3 unnumbered">
<h3 class="unnumbered">Clean variable names</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(fn[<span class="dv">1</span>],</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>                  <span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(<span class="at">.default =</span> <span class="st">&#39;c&#39;</span>),</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>                  <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>df2 <span class="ot">&lt;-</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(fn[<span class="dv">2</span>],</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>                  <span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(<span class="at">.default =</span> <span class="st">&#39;c&#39;</span>),</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>                  <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>df3 <span class="ot">&lt;-</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(fn[<span class="dv">3</span>],</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>                  <span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(<span class="at">.default =</span> <span class="st">&#39;c&#39;</span>),</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>                  <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">names</span>(df1), <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;start&quot;                                                                        
##  [2] &quot;end&quot;                                                                          
##  [3] &quot;c_today&quot;                                                                      
##  [4] &quot;play_phone_questionnaire/update_date&quot;                                         
##  [5] &quot;play_phone_questionnaire/group_contact_info/instructions_contactinfo&quot;         
##  [6] &quot;play_phone_questionnaire/group_contact_info/parent_phone&quot;                     
##  [7] &quot;play_phone_questionnaire/group_contact_info/parent_email&quot;                     
##  [8] &quot;play_phone_questionnaire/group_contact_info/group_address/note_parent_address&quot;
##  [9] &quot;play_phone_questionnaire/group_contact_info/group_address/parent_address_1&quot;   
## [10] &quot;play_phone_questionnaire/group_contact_info/group_address/parent_address_2&quot;   
## [11] &quot;play_phone_questionnaire/group_contact_info/group_address/city&quot;               
## [12] &quot;play_phone_questionnaire/group_contact_info/group_address/state&quot;              
## [13] &quot;play_phone_questionnaire/group_contact_info/acknowledge_contact_info&quot;         
## [14] &quot;play_phone_questionnaire/instructions_guid&quot;                                   
## [15] &quot;play_phone_questionnaire/child_first_name&quot;</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">names</span>(df2), <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;start&quot;                                                                                                                                                                                                                                    
##  [2] &quot;end&quot;                                                                                                                                                                                                                                      
##  [3] &quot;c_today&quot;                                                                                                                                                                                                                                  
##  [4] &quot;play_demo_questionnaire/update_date&quot;                                                                                                                                                                                                      
##  [5] &quot;play_demo_questionnaire/NOTA_El_cuestionario_demogr_fico_debe_ser_completado_por_el_investigador_que_va_a_ir_a_la_visita_al_hogar_con_la_madre_por_tel_fono_La_madre_deber_a_ser_la_madre_que_va_a_participar_en_el_estudio_con_su_ni_o_a&quot;
##  [6] &quot;play_demo_questionnaire/group_siteinfo/site_id&quot;                                                                                                                                                                                           
##  [7] &quot;play_demo_questionnaire/group_siteinfo/subject_number&quot;                                                                                                                                                                                    
##  [8] &quot;play_demo_questionnaire/exp_name&quot;                                                                                                                                                                                                         
##  [9] &quot;play_demo_questionnaire/group_contact_info/instructions_contactinfo&quot;                                                                                                                                                                      
## [10] &quot;play_demo_questionnaire/group_contact_info/parent_phone&quot;                                                                                                                                                                                  
## [11] &quot;play_demo_questionnaire/group_contact_info/parent_email&quot;                                                                                                                                                                                  
## [12] &quot;play_demo_questionnaire/group_contact_info/group_address/note_parent_address&quot;                                                                                                                                                             
## [13] &quot;play_demo_questionnaire/group_contact_info/group_address/parent_address_1&quot;                                                                                                                                                                
## [14] &quot;play_demo_questionnaire/group_contact_info/group_address/parent_address_2&quot;                                                                                                                                                                
## [15] &quot;play_demo_questionnaire/group_contact_info/group_address/city&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">names</span>(df3), <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;start&quot;                                                                       
##  [2] &quot;end&quot;                                                                         
##  [3] &quot;c_today&quot;                                                                     
##  [4] &quot;play_demo_questionnaire/update_date&quot;                                         
##  [5] &quot;play_demo_questionnaire/note_exp&quot;                                            
##  [6] &quot;play_demo_questionnaire/group_siteinfo/site_id&quot;                              
##  [7] &quot;play_demo_questionnaire/group_siteinfo/subject_number&quot;                       
##  [8] &quot;play_demo_questionnaire/group_siteinfo/exp_name&quot;                             
##  [9] &quot;play_demo_questionnaire/group_contact_info/instructions_contactinfo&quot;         
## [10] &quot;play_demo_questionnaire/group_contact_info/parent_phone&quot;                     
## [11] &quot;play_demo_questionnaire/group_contact_info/parent_email&quot;                     
## [12] &quot;play_demo_questionnaire/group_contact_info/group_address/note_parent_address&quot;
## [13] &quot;play_demo_questionnaire/group_contact_info/group_address/parent_address_1&quot;   
## [14] &quot;play_demo_questionnaire/group_contact_info/group_address/parent_address_2&quot;   
## [15] &quot;play_demo_questionnaire/group_contact_info/group_address/city&quot;</code></pre>
<p>There are a separate set of variable-by-variable cleaning functions in <code>R/screen_clean_utils.R</code>.</p>
<p>We remove the unneeded ’play_demo_*’ and ‘play_phone_questionnaire_’ variable headers using <code>screen_remove_variable_headers()</code>.</p>
<p>We remove fields that contain administrative metadata with <code>screen_remove_metadata_fields()</code>.</p>
<p>We remove fields used only by staff in uploading data to Databrary using <code>screen_remove_databrary_fields()</code>.</p>
<p>We have name and address information in the screening data (e.g., ‘..parent_phone’, ‘..parent_email’, etc.)</p>
<div class="rmdnote">
<p>In a future workflow, we will add Census FIPS IDs for the State and Country
<strong>before</strong> removing the address information.</p>
<p>The Census queries stopped working around 2023-06-16.</p>
<p>For now, we remove identifiers without querying the Census.</p>
</div>
<p>We remove identifiable information using <code>screen_remove_identifiers()</code>.</p>
<p>Then, we use <code>dplyr::full_join()</code> to combine the set of individually
cleaned data files.
The <code>screen_clean_raw_csv()</code> function combines the previous <code>screen_remove*</code> functions.
The <code>screen_clean_raw_join()</code> function cleans each CSV then joins them.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>(scr_df <span class="ot">&lt;-</span> <span class="fu">screen_clean_raw_join</span>())</span></code></pre></div>
<pre><code>## Cleaning &#39;/Users/rog1/rrr/KoBoToolbox/data/csv/screening/275882_PLAY_Demographic_Questionnaire.csv&#39;.</code></pre>
<pre><code>## Removed n = 31 of 168 columns.</code></pre>
<pre><code>## Cleaning &#39;/Users/rog1/rrr/KoBoToolbox/data/csv/screening/334134_PLAY_Demographic_Questionnaire_Spanish.csv&#39;.</code></pre>
<pre><code>## Removed n = 47 of 235 columns.</code></pre>
<pre><code>## Cleaning &#39;/Users/rog1/rrr/KoBoToolbox/data/csv/screening/359546_PLAY_Demographic_Questionnaire.csv&#39;.</code></pre>
<pre><code>## Removed n = 47 of 238 columns.</code></pre>
<pre><code>## Joining with `by = join_by(start, end, c_today, update_date, site_id,
## subject_number, state, check_childage, check_childage_weeks, child_sex, day,
## day2, day1, play_id, language_spoken_mom, `language_spoken_mom/english`,
## `language_spoken_mom/spanish`, `language_spoken_mom/other`,
## language_spoken_mom_other, language_spoken_child,
## `language_spoken_child/english`, `language_spoken_child/spanish`,
## `language_spoken_child/other`, language_spoken_child_other,
## language_spoken_house, `language_spoken_house/english`,
## `language_spoken_house/spanish`, `language_spoken_house/other`,
## language_spoken_house_other, `child_information/child_bornonduedate`,
## `child_information/child_onterm`, `child_information/child_duedate`,
## `child_information/child_birthage`, `child_information/child_weight_pounds`,
## `child_information/child_weight_ounces`,
## `child_information/child_birth_complications`,
## `child_information/specify_birth_complications`,
## `child_information/hearing_disabilities`, `child_information/specify_hearing`,
## `child_information/vision_disabilities`, `child_information/specify_vision`,
## `child_information/major_illnesses_injuries`,
## `child_information/specify_illnesses_injuries`,
## `child_information/other_developmentaldelays`,
## `child_information/specify_developmentaldelays`, `child_information/child_race`,
## `child_information/child_sleep_time`, `child_information/child_wake_time`,
## `child_information/child_nap_hours`, `child_information/child_sleep_location`,
## `child_information/specify_child_sleep_location`,
## `child_information/indicate_child`, `child_information/indicate_child_2`,
## `group_family_structure/only_child`, `group_family_structure/specify_onlychild`,
## `group_family_structure/household_members`,
## `group_family_structure/household_members/father_biological`,
## `group_family_structure/household_members/male_partner`,
## `group_family_structure/household_members/mother_biological`,
## `group_family_structure/household_members/female_partner`,
## `group_family_structure/household_members/other_partner`,
## `group_family_structure/household_members/sibling_biological`,
## `group_family_structure/household_members/sibling_nonbiological`,
## `group_family_structure/household_members/grandmother`,
## `group_family_structure/household_members/grandfather`,
## `group_family_structure/household_members/great_grandmother`,
## `group_family_structure/household_members/great_grandfather`,
## `group_family_structure/household_members/aunt`,
## `group_family_structure/household_members/uncle`,
## `group_family_structure/household_members/cousin`,
## `group_family_structure/household_members/relative`,
## `group_family_structure/household_members/non_relative`,
## `group_family_structure/household_members/none`,
## `group_family_structure/other_relatives`,
## `group_family_structure/other_non_relatives`,
## `group_family_structure/indicate_familystructure`,
## `group_mominfo/mom_biological`, `group_mominfo/mom_relation`,
## `group_mominfo/mom_datecare`, `group_mominfo/mom_childbirth_age`,
## `group_mominfo/check_mom_childbirth_age`, `group_mominfo/mom_race`,
## `group_mominfo/mom_birth_country`, `group_mominfo/specify_mom_birth_country`,
## `group_mominfo/mom_education`, `group_mominfo/mom_employment`,
## `group_mominfo/mom_occupation`, `group_mominfo/mom_jobs_number`,
## `group_mominfo/mom_training`, `group_mominfo/mom_condition`,
## `group_mominfo/specify_mom_condition`, `group_mominfo/indicate_mom`,
## `group_biodad/biodad_childbirth_age`,
## `group_biodad/check_biodad_childbirth_age`, `group_biodad/biodad_race`,
## `group_biodad/indicate_biodad`, `group_biomom/biomom_childbirth_age`,
## `group_biomom/check_biomom_childbirth_age`, `group_biomom/biomom_race`,
## `group_biomom/indicate_biomom`, `group_nonbiopartner/nonbiopartner_race`,
## `group_nonbiopartner/indicate_nonbiopartner`,
## `group_genpartner_info/partner_education`,
## `group_genpartner_info/partner_employment`,
## `group_genpartner_info/partner_occupation`,
## `group_genpartner_info/partner_jobs_number`,
## `group_genpartner_info/partner_program`,
## `group_genpartner_info/indicate_genpartner`,
## `group_child_care_arrangements/childcare_types`,
## `group_child_care_arrangements/childcare_types/nanny_home`,
## `group_child_care_arrangements/childcare_types/nanny_nothome`,
## `group_child_care_arrangements/childcare_types/relative`,
## `group_child_care_arrangements/childcare_types/childcare`,
## `group_child_care_arrangements/childcare_types/none`,
## `group_child_care_arrangements/childcare_location`,
## `group_child_care_arrangements/childcare_hours`,
## `group_child_care_arrangements/childcare_number`,
## `group_child_care_arrangements/childcare_age`,
## `group_child_care_arrangements/childcare_language`,
## `group_inclusioncheck/inclusionreason`,
## `group_inclusioncheck/indicate_inclusion`, indicate_demoquestionnaire,
## indicate_databrary, `_id`)`
## Joining with `by = join_by(start, end, c_today, update_date, site_id,
## subject_number, state, check_childage, check_childage_weeks, child_sex, day,
## day2, day1, language_spoken_child, `language_spoken_child/english`,
## `language_spoken_child/spanish`, `language_spoken_child/other`,
## language_spoken_child_other, `child_information/child_bornonduedate`,
## `child_information/child_onterm`, `child_information/child_duedate`,
## `child_information/child_birthage`, `child_information/child_weight_pounds`,
## `child_information/child_weight_ounces`,
## `child_information/child_birth_complications`,
## `child_information/specify_birth_complications`,
## `child_information/hearing_disabilities`, `child_information/specify_hearing`,
## `child_information/vision_disabilities`, `child_information/specify_vision`,
## `child_information/major_illnesses_injuries`,
## `child_information/specify_illnesses_injuries`,
## `child_information/child_sleep_time`, `child_information/child_wake_time`,
## `child_information/child_nap_hours`, `child_information/child_sleep_location`,
## `child_information/specify_child_sleep_location`,
## `child_information/indicate_child`, `child_information/indicate_child_2`,
## `group_family_structure/household_members`,
## `group_family_structure/household_members/male_partner`,
## `group_family_structure/household_members/female_partner`,
## `group_family_structure/household_members/other_partner`,
## `group_family_structure/household_members/grandmother`,
## `group_family_structure/household_members/grandfather`,
## `group_family_structure/household_members/great_grandmother`,
## `group_family_structure/household_members/great_grandfather`,
## `group_family_structure/household_members/aunt`,
## `group_family_structure/household_members/uncle`,
## `group_family_structure/household_members/cousin`,
## `group_family_structure/household_members/relative`,
## `group_family_structure/household_members/non_relative`,
## `group_family_structure/other_relatives`,
## `group_family_structure/other_non_relatives`,
## `group_family_structure/indicate_familystructure`,
## `group_child_care_arrangements/childcare_types`,
## `group_child_care_arrangements/childcare_types/relative`,
## `group_child_care_arrangements/childcare_types/childcare`,
## `group_child_care_arrangements/childcare_types/none`,
## `group_child_care_arrangements/childcare_hours`,
## `group_child_care_arrangements/childcare_number`,
## `group_child_care_arrangements/childcare_age`,
## `group_child_care_arrangements/childcare_language`, `_id`)`</code></pre>
<pre><code>## # A tibble: 546 × 162
##    start    end   c_today update_date site_id subject_number state check_childage
##    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;         
##  1 2020-02… 2020… 2020-0… &lt;NA&gt;        NYUNI   230            New … 32.6772408503…
##  2 2020-02… 2020… 2020-0… &lt;NA&gt;        NYUNI   229            New … 32.3813828621…
##  3 2019-12… 2020… 2020-0… &lt;NA&gt;        VCOMU   002            VA    26.7258382642…
##  4 2020-01… 2020… 2020-0… &lt;NA&gt;        GEORG   010            Virg… 12.7547666009…
##  5 2020-01… 2020… 2020-0… &lt;NA&gt;        NYUNI   008            New … 13.4122287968…
##  6 2020-01… 2020… 2020-0… &lt;NA&gt;        NYUNI   009            New … 19.3636313828…
##  7 2020-01… 2020… 2020-0… &lt;NA&gt;        GEORG   011            Virg… 17.8514683322…
##  8 2020-01… 2020… 2020-0… &lt;NA&gt;        NYUNI   010            NY    17.8514683322…
##  9 2020-02… 2020… 2020-0… &lt;NA&gt;        NYUNI   011            New … 23.8001314924…
## 10 2020-02… 2020… 2020-0… &lt;NA&gt;        VCOMU   003            VA    17.5884834538…
## # ℹ 536 more rows
## # ℹ 154 more variables: check_childage_weeks &lt;chr&gt;, child_sex &lt;chr&gt;, day &lt;chr&gt;,
## #   day2 &lt;chr&gt;, day1 &lt;chr&gt;, play_id &lt;chr&gt;, language_spoken_mom &lt;chr&gt;,
## #   `language_spoken_mom/english` &lt;chr&gt;, `language_spoken_mom/spanish` &lt;chr&gt;,
## #   `language_spoken_mom/other` &lt;chr&gt;, language_spoken_mom_other &lt;chr&gt;,
## #   language_spoken_child &lt;chr&gt;, `language_spoken_child/english` &lt;chr&gt;,
## #   `language_spoken_child/spanish` &lt;chr&gt;, …</code></pre>
</div>
<div id="clean-individual-fields" class="section level3 unnumbered">
<h3 class="unnumbered">Clean individual fields</h3>
<p>Now, we can proceed to clean-up the merged data frame.
The sequence of functions called below cleans ‘construct-specific’ variables
as indicated by the function names.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>scr_df <span class="ot">&lt;-</span> scr_df <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>    <span class="fu">screen_clean_child_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>    <span class="fu">screen_clean_lang_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>    <span class="fu">screen_clean_mom_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>    <span class="fu">screen_clean_biodad_father_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a>    <span class="fu">screen_clean_childcare_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a>    <span class="fu">screen_clean_family_structure</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>    <span class="fu">screen_clean_play_id</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a>    <span class="fu">screen_remove_selected_cols</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a>    <span class="fu">screen_select_reorder_cols</span>()</span></code></pre></div>
<p>For convenience, we package this sequence in its own function, <code>screen_clean_fields()</code>.</p>
<div class="rmdnote">
<p>Note that all of the variables are considered character strings. The <code>tidyverse</code>
suite does a great job of guessing what variables are what, but sometimes it
guesses wrongly. So, in preliminary stages, it has proved easier to make everything
a character string.</p>
</div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>scr_df <span class="ot">&lt;-</span> <span class="fu">screen_clean_fields</span>(scr_df)</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="fu">str</span>(scr_df)</span></code></pre></div>
<pre><code>## tibble [546 × 51] (S3: tbl_df/tbl/data.frame)
##  $ submit_date                       : chr [1:546] &quot;2020-02-27T08:24:10.551-05:00&quot; &quot;2020-02-27T08:43:34.275-05:00&quot; &quot;2019-12-18T16:37:17.554-05:00&quot; &quot;2020-01-01T12:54:04.550-05:00&quot; ...
##  $ site_id                           : chr [1:546] &quot;NYUNI&quot; &quot;NYUNI&quot; &quot;VCOMU&quot; &quot;GEORG&quot; ...
##  $ subject_number                    : chr [1:546] &quot;230&quot; &quot;229&quot; &quot;002&quot; &quot;010&quot; ...
##  $ play_id                           : chr [1:546] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ child_age_mos                     : chr [1:546] &quot;32.677240850317695&quot; &quot;32.38138286215201&quot; &quot;26.725838264299803&quot; &quot;12.754766600920446&quot; ...
##  $ child_sex                         : chr [1:546] &quot;male&quot; &quot;female&quot; &quot;female&quot; &quot;male&quot; ...
##  $ child_bornonduedate               : chr [1:546] &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; ...
##  $ child_onterm                      : chr [1:546] NA NA NA NA ...
##  $ child_birthage                    : chr [1:546] &quot;-7&quot; &quot;-10&quot; &quot;0&quot; &quot;1&quot; ...
##  $ child_weight_pounds               : chr [1:546] &quot;8&quot; &quot;7&quot; &quot;6&quot; &quot;7&quot; ...
##  $ child_weight_ounces               : chr [1:546] &quot;12&quot; &quot;10&quot; &quot;12&quot; &quot;15&quot; ...
##  $ child_birth_complications         : chr [1:546] &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ child_birth_complications_specify : chr [1:546] NA NA NA NA ...
##  $ child_hearing_disabilities        : chr [1:546] &quot;yes&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ child_hearing_disabilities_specify: chr [1:546] &quot;Temporary hearing loss so tubes in his ears, one still remaining&quot; NA NA NA ...
##  $ child_vision_disabilities         : chr [1:546] &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ child_vision_disabilities_specify : chr [1:546] NA NA NA NA ...
##  $ child_major_illnesses_injuries    : chr [1:546] &quot;yes&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ child_illnesses_injuries_specify  : chr [1:546] &quot;Pneumonia at 5 months&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ child_developmentaldelays         : chr [1:546] NA NA NA NA ...
##  $ child_developmentaldelays_specify : chr [1:546] NA NA NA NA ...
##  $ child_sleep_time                  : chr [1:546] &quot;20:15:00.000-05:00&quot; &quot;20:15:00.000-05:00&quot; &quot;19:00:00.000-05:00&quot; &quot;19:00:00.000-05:00&quot; ...
##  $ child_wake_time                   : chr [1:546] &quot;07:15:00.000-05:00&quot; &quot;06:45:00.000-05:00&quot; &quot;07:30:00.000-05:00&quot; &quot;06:15:00.000-05:00&quot; ...
##  $ child_nap_hours                   : chr [1:546] &quot;2&quot; &quot;3&quot; &quot;1.5&quot; &quot;2&quot; ...
##  $ child_sleep_location              : chr [1:546] &quot;crib_separate&quot; &quot;crib_separate&quot; &quot;crib_separate&quot; &quot;crib_separate&quot; ...
##  $ mom_bio                           : chr [1:546] &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; ...
##  $ mom_childbirth_age                : chr [1:546] &quot;33.41&quot; &quot;38.84&quot; &quot;32.2&quot; &quot;30.38&quot; ...
##  $ mom_race                          : chr [1:546] &quot;white&quot; &quot;white&quot; &quot;white&quot; &quot;white&quot; ...
##  $ mom_birth_country                 : chr [1:546] &quot;unitedstates&quot; &quot;unitedstates&quot; &quot;unitedstates&quot; &quot;unitedstates&quot; ...
##  $ mom_birth_country_specify         : chr [1:546] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ mom_education                     : chr [1:546] &quot;masters&quot; &quot;doctorate&quot; &quot;doctorate&quot; &quot;masters&quot; ...
##  $ mom_employment                    : chr [1:546] &quot;full_time&quot; &quot;full_time&quot; &quot;full_time&quot; &quot;full_time&quot; ...
##  $ mom_occupation                    : chr [1:546] &quot;Architect&quot; &quot;Spanish teacher&quot; &quot;Nurse instructor&quot; &quot;School Psychologist&quot; ...
##  $ mom_jobs_number                   : chr [1:546] &quot;1&quot; &quot;1&quot; &quot;1&quot; &quot;1&quot; ...
##  $ mom_training                      : chr [1:546] &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ biodad_childbirth_age             : chr [1:546] &quot;33.85_NA&quot; &quot;30.42_NA&quot; &quot;37.32_NA&quot; &quot;30.53_NA&quot; ...
##  $ biodad_race                       : chr [1:546] &quot;white_NA&quot; &quot;white_NA&quot; &quot;NA_NA&quot; &quot;NA_NA&quot; ...
##  $ language_spoken_mom               : chr [1:546] &quot;english&quot; &quot;english spanish&quot; &quot;english&quot; &quot;english&quot; ...
##  $ language_spoken_mom_comments      : chr [1:546] NA NA NA NA ...
##  $ language_spoken_child             : chr [1:546] &quot;english&quot; &quot;spanish&quot; &quot;english&quot; &quot;english&quot; ...
##  $ language_spoken_home_comments     : chr [1:546] &quot;FALSE_47706996&quot; &quot;TRUE_47707423&quot; &quot;FALSE_43397823&quot; &quot;FALSE_44074192&quot; ...
##  $ language_spoken_child_comments    : chr [1:546] NA NA NA NA ...
##  $ language_spoken_home              : chr [1:546] &quot;english&quot; &quot;english spanish&quot; &quot;english&quot; &quot;english&quot; ...
##  $ language_spoken_house_other       : chr [1:546] NA NA NA NA ...
##  $ language_spoken_home_other        : chr [1:546] NA NA NA NA ...
##  $ childcare_types                   : chr [1:546] NA NA NA NA ...
##  $ childcare_location                : chr [1:546] NA NA NA NA ...
##  $ childcare_hours                   : chr [1:546] NA NA NA NA ...
##  $ childcare_number                  : chr [1:546] NA NA NA NA ...
##  $ childcare_age                     : chr [1:546] NA NA NA NA ...
##  $ childcare_language                : chr [1:546] NA NA NA NA ...</code></pre>
<p>There is more work to do, but we have a version worth exporting.</p>
</div>
</div>
<div id="export-cleaned-file" class="section level2 unnumbered">
<h2 class="unnumbered">Export cleaned file</h2>
<p>We date-stamp the exported file so we can monitor progress as this workflow develops.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>sfn <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;PLAY-screening-&quot;</span>, <span class="fu">Sys.Date</span>(), <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(scr_df, <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;data/csv/screening/agg/&quot;</span>, sfn))</span></code></pre></div>
<p>We also save a copy with “latest”.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>sfn <span class="ot">&lt;-</span> <span class="st">&quot;PLAY-screening-latest.csv&quot;</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(scr_df, <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;data/csv/screening/agg/&quot;</span>, sfn))</span></code></pre></div>
<!--chapter:end:12-screening.Rmd-->
</div>
</div>
<div id="home-visit" class="section level1 unnumbered">
<h1 class="unnumbered">Home visit</h1>
<div id="protocol" class="section level2 unnumbered">
<h2 class="unnumbered">Protocol</h2>
<p>Details about the data collection protocol for the home visit can be found on the <a href="https://www.play-project.org/collection.html#Home_Visit">PLAY Project website</a>.</p>
</div>
<div id="overview" class="section level2 unnumbered">
<h2 class="unnumbered">Overview</h2>
<p>The notes below summarize the steps needed to process the home visit survey data.
Most of the R chunks are <strong>not</strong> run, however, since we have moved the work into a <a href="https://docs.ropensci.org/targets/"><code>\{targets\}</code></a>-based workflow.</p>
</div>
<div id="download-data" class="section level2 unnumbered">
<h2 class="unnumbered">Download data</h2>
<p>Data files for each of the language by age-group conditions are stored on KoBoToolbox (KBT).</p>
<p>Store all of the data files on KBT in <code>kb_df</code>.</p>
<pre><code>tar_target(kb_df, list_kobo_data()),</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(kb_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>kb_df</span></code></pre></div>
<p>List data forms specific to the home visit by filtering the files with names that contain “Home”.</p>
<pre><code>tar_target(kb_home, dplyr::filter(kb_df, stringr::str_detect(title, &quot;Home&quot;)))</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(kb_home, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>kb_home</span></code></pre></div>
<pre><code>##         id              id_string
## 1   411456 a58ZhjX6M8WXtzLGvBaEaG
## 2   740625 a8HyzdxnVjK53dt4fX3Vup
## 3   331453 aae4wz2tpkSnAkea2PAzin
## 4   363465 abYGMsrMvkGsnA4xm9kqC9
## 5   363431 acCBJaRqBkSMPYdvaaWCSu
## 6   334099 ad3NtS6TDPuKTUKCAyCuby
## 7   363349 aEMERWLYQAdhaMKMt5QkD7
## 8   307736 aeMJQLo56HWyVHkKX9oaJD
## 9   740631 ahYJ7XRUcit8gbFYwaxnAV
## 10 1151489 aLqdPLTCZb8jvFkDxcFwzy
## 11 1136694 aMteoHisncRUStdyZfsjMB
## 12  740623 aoLcmmN8KWG4N6A3XpUiRT
## 13  740628 aRJW7SwKsVyZu8b4FighiM
## 14  363466 asv7tL6CEYjiW2XCkLxhcX
## 15  411469 aswcEAtxj24u9MfuBmS9AW
## 16  740630 aThMD6zuEFjtTfptwcpZPg
## 17  411388 aTyGBYk6HvRXmki9ksb29p
## 18  740624 aUeYzPfq6WED4dDF28VT9D
## 19  363381 aWd7wujF5d5HYaYMhT4jBZ
## 20  740626 awMnFDna5kWR3LXKyGmFMd
## 21  331848 axYbEbLcJxzUNFbqMVySjJ
## 22  740629 axyJSgLRDeSk3BHB6cJmYk
## 23  408149 ayhCy68ZTaDGc7tuGthQpJ
## 24  740627 aYokcZAjTZ9JCyVXz4R5rh
##                                                                      title
## 1              PLAY Home Questionaires - 12 Bilingual English (2020-03-04)
## 2                                        PLAY_HomeQuestionaires_12_English
## 3                                    PLAY Home Questionnaires (24 English)
## 4             PLAY Home Questionnaires - 24 Bilingual English (2020-03-04)
## 5                       PLAY Home Questionnaires - 12 English (2020-03-04)
## 6                        PLAY Home Questionnaires (12 Bilingual - English)
## 7                       PLAY Home Questionnaires - 18 English (2020-03-04)
## 8                                    PLAY Home Questionnaires (18 English)
## 9                              PLAY_HomeQuestionaires_24_Bilingual_English
## 10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA
## 11             Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO TODAY
## 12                             PLAY_HomeQuestionaires_12_Bilingual_English
## 13                                      PLAY_HomeQuestionnaires_18_English
## 14            PLAY Home Questionnaires - 18 Bilingual English (2020-03-04)
## 15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)
## 16                             PLAY_HomeQuestionaires_24_Bilingual_Spanish
## 17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)
## 18                             PLAY_HomeQuestionaires_12_Bilingual_Spanish
## 19                      PLAY Home Questionnaires - 24 English (2020-03-04)
## 20                             PLAY_HomeQuestionaires_18_Bilingual_English
## 21                                   PLAY Home Questionnaires (12 English)
## 22                                      PLAY_HomeQuestionnaires_24_English
## 23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-03-04)
## 24                             PLAY_HomeQuestionaires_18_Bilingual_Spanish
##                                                                description
## 1            PLAY Home Questionaires - 12 Bilingual (English) (2020-03-04)
## 2                             PLAY_HomeQuestionaires_12_English-2021-07-29
## 3                                    PLAY Home Questionnaires (24 English)
## 4             PLAY Home Questionnaires - 24 Bilingual English (2019-11-20)
## 5                       PLAY Home Questionnaires - 12 English (2019-11-20)
## 6                        PLAY Home Questionnaires (12 Bilingual - English)
## 7                       PLAY Home Questionnaires - 18 English (2018-11-20)
## 8                                    PLAY Home Questionnaires (18 English)
## 9                   PLAY_HomeQuestionaires_24_Bilingual_English-2021-07-30
## 10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA
## 11                             Clone of PLAY_HomeQuestionnaires_18_English
## 12                  PLAY_HomeQuestionaires_12_Bilingual_English-2021-07-29
## 13                           PLAY_HomeQuestionnaires_18_English-2021-07-29
## 14            PLAY Home Questionnaires - 18 Bilingual English (2019-11-20)
## 15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)
## 16                  PLAY_HomeQuestionaires_24_Bilingual_Spanish-2021-07-30
## 17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)
## 18                  PLAY_HomeQuestionaires_12_Bilingual_Spanish-2021-07-29
## 19                      PLAY Home Questionnaires - 24 English (2019-11-20)
## 20                  PLAY_HomeQuestionaires_18_Bilingual_English-2021-07-29
## 21                                   PLAY Home Questionnaires (12 English)
## 22                           PLAY_HomeQuestionnaires_24_English-2021-07-30
## 23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-02-27)
## 24                  PLAY_HomeQuestionaires_18_Bilingual_Spanish-2021-07-29
##                                               url
## 1   https://kc.kobotoolbox.org/api/v1/data/411456
## 2   https://kc.kobotoolbox.org/api/v1/data/740625
## 3   https://kc.kobotoolbox.org/api/v1/data/331453
## 4   https://kc.kobotoolbox.org/api/v1/data/363465
## 5   https://kc.kobotoolbox.org/api/v1/data/363431
## 6   https://kc.kobotoolbox.org/api/v1/data/334099
## 7   https://kc.kobotoolbox.org/api/v1/data/363349
## 8   https://kc.kobotoolbox.org/api/v1/data/307736
## 9   https://kc.kobotoolbox.org/api/v1/data/740631
## 10 https://kc.kobotoolbox.org/api/v1/data/1151489
## 11 https://kc.kobotoolbox.org/api/v1/data/1136694
## 12  https://kc.kobotoolbox.org/api/v1/data/740623
## 13  https://kc.kobotoolbox.org/api/v1/data/740628
## 14  https://kc.kobotoolbox.org/api/v1/data/363466
## 15  https://kc.kobotoolbox.org/api/v1/data/411469
## 16  https://kc.kobotoolbox.org/api/v1/data/740630
## 17  https://kc.kobotoolbox.org/api/v1/data/411388
## 18  https://kc.kobotoolbox.org/api/v1/data/740624
## 19  https://kc.kobotoolbox.org/api/v1/data/363381
## 20  https://kc.kobotoolbox.org/api/v1/data/740626
## 21  https://kc.kobotoolbox.org/api/v1/data/331848
## 22  https://kc.kobotoolbox.org/api/v1/data/740629
## 23  https://kc.kobotoolbox.org/api/v1/data/408149
## 24  https://kc.kobotoolbox.org/api/v1/data/740627</code></pre>
<div id="save-selected-raw-files-to-local-directory" class="section level3 unnumbered">
<h3 class="unnumbered">Save selected raw files to local directory</h3>
<p>Prepare to retrieve all home visit files.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>n_files <span class="ot">&lt;-</span> <span class="fu">dim</span>(kb_home)[<span class="dv">1</span>]</span></code></pre></div>
<p>There are <span class="math inline">\(n=\)</span> 24 home visit data files.</p>
<pre><code>tar_target(
  home_visit_downloads,
  retrieve_kobo_xlsx(kb_home, 
    &quot;data/xlsx/home_visit/raw&quot;),
  cue = tarchetypes::tar_cue_age(
    name = home_visit_downloads,
    age = as.difftime(update_interval, 
      units = update_interval_units)
  )
)</code></pre>
</div>
<div id="normalize-file-names" class="section level3 unnumbered">
<h3 class="unnumbered">Normalize file names</h3>
<p>Some of the form names are inconsistent, so we normalize them to fit the following pattern:</p>
<p><code>&lt;form_id&gt;_PLAY_HomeQuestionnaires_&lt;age_group&gt;_&lt;lang_group&gt;.xlsx</code></p>
<pre><code>tar_target(
  home_visit_renamed,
  rename_home_xlsx(home_visit_downloads,
                     &quot;data/xlsx/home_visit/std_name&quot;),
  cue = tarchetypes::tar_cue_age(
    name = home_visit_renamed,
    age = as.difftime(update_interval, 
      units = update_interval_units)
  )
)</code></pre>
</div>
<div id="save-xlsx-as-csv" class="section level3 unnumbered">
<h3 class="unnumbered">Save xlsx as csv</h3>
<pre><code>tar_target(
  home_visit_xlsx_to_csv,
  load_xlsx_save_many_csvs_2(home_visit_renamed, 
    &quot;data/csv/home_visit/raw&quot;)
)</code></pre>
</div>
<div id="split-mb-cdi-from-other-questions" class="section level3 unnumbered">
<h3 class="unnumbered">Split MB-CDI from other questions</h3>
<p>Next we import a CSV for a given form year, age group, and language group, and create two new CSV files: one with the MB-CDI data and one with all of the other survey questions.</p>
<p>By default, the document presumes that we want to convert <strong>all</strong> of the CSV files</p>
<p>Extract the ‘non-mbcdi’ questions first and add ‘non_mbcdi’ to the filename.</p>
<pre><code>tar_target(
  home_visit_non_mbcdi,
  split_non_mbcdi_csvs(home_visit_xlsx_to_csv,
                        &quot;data/csv/home_visit/non_mbcdi&quot;)
)</code></pre>
<p>Extracting the MB-CDI data has nearly the same function call, but the <code>these_questions</code> parameter is set to ‘mbcdi’.</p>
<pre><code>tar_target(
  home_visit_mbcdi,
  split_mbcdi_csvs(home_visit_xlsx_to_csv,
                    &quot;data/csv/home_visit/mbcdi&quot;)
)</code></pre>
</div>
</div>
<div id="clean-data" class="section level2 unnumbered">
<h2 class="unnumbered">Clean data</h2>
<div id="remove-identifiers" class="section level3 unnumbered">
<h3 class="unnumbered">Remove identifiers</h3>
<p>The function <code>remove_identifiers()</code> in <code>R/kobo_export</code> detects the presence of names, addresses, phone numbers, email, and dates in the field names for an input file and removes these fields.
It also modifies the file name by appending <code>_deidentified</code>.</p>
<p>The <code>remove_identifiers()</code> function detects these fields
For clarity, we print it here.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;~/rrr/KoBoToolbox/R/_OLD/functions.R&quot;</span>, <span class="at">echo =</span> <span class="cn">FALSE</span>, <span class="at">print.eval =</span> <span class="cn">FALSE</span>)</span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a>remove_identifiers</span></code></pre></div>
<pre><code>## function(df) {
##   require(stringr)
##   stopifnot(is.data.frame(df))
##   
##   contains_name &lt;- stringr::str_detect(names(df), &#39;name&#39;)
##   contains_address &lt;- stringr::str_detect(names(df), &#39;address&#39;)
##   contains_phone &lt;- stringr::str_detect(names(df), &#39;phone&#39;)
##   contains_email &lt;- stringr::str_detect(names(df), &#39;email&#39;)
##   contains_birthdate &lt;- stringr::str_detect(names(df), &#39;birthdate&#39;)
##   contains_first &lt;- stringr::str_detect(names(df), &#39;first[12]?&#39;)
##   contains_last &lt;- stringr::str_detect(names(df), &#39;last[12]?&#39;)
##   contains_city &lt;- stringr::str_detect(names(df), &#39;city&#39;)
##   contains_year &lt;- stringr::str_detect(names(df), &#39;year[12]?&#39;)
##   contains_month &lt;- stringr::str_detect(names(df), &#39;month[12]?&#39;)
##   contains_day &lt;- stringr::str_detect(names(df), &#39;/day[12]?$&#39;)
##   
##   identifiable_data &lt;- contains_name | contains_address |
##     contains_phone |
##     contains_email | contains_birthdate | contains_first |
##     contains_last |
##     contains_city | contains_year | contains_month | contains_day
##   
##   identifiable_cols &lt;- (1:length(names(df)))[identifiable_data]
##   
##   df_deidentified &lt;- df %&gt;%
##     dplyr::select(., -all_of(identifiable_cols))
##   
##   df_deidentified
## }</code></pre>
<p>The <strong>non-MBCDI file</strong> contains the identifiers, so that is the target of this removal process.</p>
<div class="rmdnote">
<p>Note that we have added <code>data</code> to <code>.gitignore</code> in <code>protocol/</code>, the root directory for the HTML protocol, so <em>none</em> of the data files should be made available via git or GitHub. This also means that there is <strong>no version control</strong> being done on raw data files themselves.</p>
</div>
<pre><code>tar_target(
  home_visit_remove_identifiers,
  purrr::map_chr(
    home_visit_non_mbcdi,
    open_deidentify_save,
    csv_save_dir = &quot;data/csv/home_visit/non_mbcdi/deid&quot;,
      these_questions = &#39;non_mbcdi&#39;
  )
)</code></pre>
</div>
</div>
<div id="quality-assurance-qa-reviews" class="section level2 unnumbered">
<h2 class="unnumbered">Quality assurance (QA) reviews</h2>
<div id="mb-cdi-files" class="section level3 unnumbered">
<h3 class="unnumbered">MB-CDI files</h3>
</div>
<div id="non-mb-cdi-files" class="section level3 unnumbered">
<h3 class="unnumbered">Non-MB-CDI files</h3>
<p>Create a helper function to create a data set with summary information about the data files.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>summarize_non_mbcdi_qs <span class="ot">&lt;-</span> <span class="cf">function</span>(fn) {</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">is.character</span>(fn))</span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a>  </span>
<span id="cb52-4"><a href="#cb52-4" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(fn)) {</span>
<span id="cb52-5"><a href="#cb52-5" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&#39;File not found `&#39;</span>, fn, <span class="st">&#39;`&#39;</span>)</span>
<span id="cb52-6"><a href="#cb52-6" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb52-7"><a href="#cb52-7" tabindex="-1"></a>    df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(fn, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb52-8"><a href="#cb52-8" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.data.frame</span>(df)) {</span>
<span id="cb52-9"><a href="#cb52-9" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&#39;Error reading data frame&#39;</span>)</span>
<span id="cb52-10"><a href="#cb52-10" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb52-11"><a href="#cb52-11" tabindex="-1"></a>      out_df <span class="ot">&lt;-</span></span>
<span id="cb52-12"><a href="#cb52-12" tabindex="-1"></a>        <span class="fu">tibble</span>(</span>
<span id="cb52-13"><a href="#cb52-13" tabindex="-1"></a>          <span class="at">file_name =</span> <span class="fu">basename</span>(fn),</span>
<span id="cb52-14"><a href="#cb52-14" tabindex="-1"></a>          <span class="at">n_rows =</span> <span class="fu">dim</span>(df)[<span class="dv">1</span>],</span>
<span id="cb52-15"><a href="#cb52-15" tabindex="-1"></a>          <span class="at">n_vars =</span> <span class="fu">dim</span>(df)[<span class="dv">2</span>]</span>
<span id="cb52-16"><a href="#cb52-16" tabindex="-1"></a>        )</span>
<span id="cb52-17"><a href="#cb52-17" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">arrange</span>(out_df, file_name)</span>
<span id="cb52-18"><a href="#cb52-18" tabindex="-1"></a>    }</span>
<span id="cb52-19"><a href="#cb52-19" tabindex="-1"></a>  }</span>
<span id="cb52-20"><a href="#cb52-20" tabindex="-1"></a>}</span></code></pre></div>
<p>Select the de-identified CSVs to examine.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>fl <span class="ot">&lt;-</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>  <span class="fu">list.files</span>(</span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a>    <span class="fu">file.path</span>(<span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid&quot;</span>),</span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a>    <span class="st">&#39;^[0-9]+_non_mbcdi_[12|18|24].*deidentified&#39;</span>,</span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>    <span class="at">full.names =</span> <span class="cn">TRUE</span></span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a>  )</span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a>PLAY_forms <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_df</span>(fl, summarize_non_mbcdi_qs)</span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a>PLAY_forms <span class="sc">%&gt;%</span></span>
<span id="cb53-11"><a href="#cb53-11" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(., <span class="at">format =</span> <span class="st">&#39;html&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-12"><a href="#cb53-12" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
file_name
</th>
<th style="text-align:right;">
n_rows
</th>
<th style="text-align:right;">
n_vars
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1136694_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
1151489_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
286
</td>
</tr>
<tr>
<td style="text-align:left;">
307736_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
274
</td>
</tr>
<tr>
<td style="text-align:left;">
331453_non_mbcdi_24_english_deidentified.csv
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
274
</td>
</tr>
<tr>
<td style="text-align:left;">
331848_non_mbcdi_12_english_deidentified.csv
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
267
</td>
</tr>
<tr>
<td style="text-align:left;">
334099_non_mbcdi_12_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
267
</td>
</tr>
<tr>
<td style="text-align:left;">
363349_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
363381_non_mbcdi_24_english_deidentified.csv
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
363431_non_mbcdi_12_english_deidentified.csv
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
281
</td>
</tr>
<tr>
<td style="text-align:left;">
363465_non_mbcdi_24_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
363466_non_mbcdi_18_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
408149_non_mbcdi_24_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
411388_non_mbcdi_18_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
411456_non_mbcdi_12_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
411469_non_mbcdi_12_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
740623_non_mbcdi_12_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
740624_non_mbcdi_12_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
740625_non_mbcdi_12_english_deidentified.csv
</td>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
740626_non_mbcdi_18_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740627_non_mbcdi_18_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740628_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
103
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
740629_non_mbcdi_24_english_deidentified.csv
</td>
<td style="text-align:right;">
89
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740630_non_mbcdi_24_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740631_non_mbcdi_24_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740631_non_mbcdi_24_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
287
</td>
</tr>
</tbody>
</table>
<p>The later forms (with higher form numbers–the leading integers in the file names) are the newer ones.
These generally have the largest number of entries and have similar numbers of columns–either 287 or 288.
Accordingly, we focus our cleaning efforts here first.</p>
<p>We start with the data files that have <span class="math inline">\(n=288\)</span> columns.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>df740623 <span class="ot">&lt;-</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a>  )</span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a></span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a>df740624 <span class="ot">&lt;-</span></span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb54-9"><a href="#cb54-9" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb54-10"><a href="#cb54-10" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb54-11"><a href="#cb54-11" tabindex="-1"></a>  )</span>
<span id="cb54-12"><a href="#cb54-12" tabindex="-1"></a></span>
<span id="cb54-13"><a href="#cb54-13" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740624))</span></code></pre></div>
<pre><code>## [1] 288</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a>df740625 <span class="ot">&lt;-</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv&quot;</span>,</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a>  )</span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a></span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740625))</span></code></pre></div>
<pre><code>## [1] 288</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a>df740628 <span class="ot">&lt;-</span></span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv&quot;</span>,</span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a>  )</span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a></span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740628))</span></code></pre></div>
<pre><code>## [1] 288</code></pre>
<p>So, four of the most recent data files with <span class="math inline">\(n=288\)</span> columns can be aggregated without modification.</p>
<p>Let’s turn to the more recent files with <span class="math inline">\(n=287\)</span> columns.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a>df740626 <span class="ot">&lt;-</span></span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb60-4"><a href="#cb60-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb60-5"><a href="#cb60-5" tabindex="-1"></a>  )</span>
<span id="cb60-6"><a href="#cb60-6" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" tabindex="-1"></a>df740627 <span class="ot">&lt;-</span></span>
<span id="cb60-8"><a href="#cb60-8" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb60-9"><a href="#cb60-9" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb60-10"><a href="#cb60-10" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb60-11"><a href="#cb60-11" tabindex="-1"></a>  )</span>
<span id="cb60-12"><a href="#cb60-12" tabindex="-1"></a></span>
<span id="cb60-13"><a href="#cb60-13" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740627))</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<p>Where does the misalignment arise?</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740627)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>The misalignment arises somewhere near column 92.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a>df740629 <span class="ot">&lt;-</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv&quot;</span>,</span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb64-5"><a href="#cb64-5" tabindex="-1"></a>  )</span>
<span id="cb64-6"><a href="#cb64-6" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740629))</span></code></pre></div>
<pre><code>## [1] 287</code></pre>
<p>So, <code>df740626</code> and <code>df740629</code> are aligned and can be merged.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a>df740630 <span class="ot">&lt;-</span></span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a>  )</span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a></span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740630))</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740630)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>These files also fall out of alignment near column 92.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>df740631 <span class="ot">&lt;-</span></span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb70-5"><a href="#cb70-5" tabindex="-1"></a>  )</span>
<span id="cb70-6"><a href="#cb70-6" tabindex="-1"></a></span>
<span id="cb70-7"><a href="#cb70-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740631))</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740631)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>And these files fall out of alignment near column 92.</p>
<p>Let’s see if <code>df740627</code>, <code>df740630</code>, and <code>df740631</code> are aligned with one another.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740627) <span class="sc">==</span> <span class="fu">names</span>(df740630))</span></code></pre></div>
<pre><code>## [1] 287</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740627) <span class="sc">==</span> <span class="fu">names</span>(df740631))</span></code></pre></div>
<pre><code>## [1] 287</code></pre>
<p>Yes, they are. So, these three can be merged.
We do that first, then address the discrepancies between aggregates.</p>
</div>
<div id="older-forms" class="section level3 unnumbered">
<h3 class="unnumbered">‘Older’ forms</h3>
<p>The “older” forms have varied numbers of columns.
We focus on thos with data (n_vars &gt; 0)</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a>df307736 <span class="ot">&lt;-</span></span>
<span id="cb78-2"><a href="#cb78-2" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-3"><a href="#cb78-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv&quot;</span>,</span>
<span id="cb78-4"><a href="#cb78-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-5"><a href="#cb78-5" tabindex="-1"></a>  )</span>
<span id="cb78-6"><a href="#cb78-6" tabindex="-1"></a>df331453 <span class="ot">&lt;-</span></span>
<span id="cb78-7"><a href="#cb78-7" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-8"><a href="#cb78-8" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv&quot;</span>,</span>
<span id="cb78-9"><a href="#cb78-9" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-10"><a href="#cb78-10" tabindex="-1"></a>  )</span>
<span id="cb78-11"><a href="#cb78-11" tabindex="-1"></a>df331848 <span class="ot">&lt;-</span></span>
<span id="cb78-12"><a href="#cb78-12" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-13"><a href="#cb78-13" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv&quot;</span>,</span>
<span id="cb78-14"><a href="#cb78-14" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-15"><a href="#cb78-15" tabindex="-1"></a>  )</span>
<span id="cb78-16"><a href="#cb78-16" tabindex="-1"></a>df334099 <span class="ot">&lt;-</span></span>
<span id="cb78-17"><a href="#cb78-17" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-18"><a href="#cb78-18" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb78-19"><a href="#cb78-19" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-20"><a href="#cb78-20" tabindex="-1"></a>  )</span>
<span id="cb78-21"><a href="#cb78-21" tabindex="-1"></a>df363349 <span class="ot">&lt;-</span></span>
<span id="cb78-22"><a href="#cb78-22" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-23"><a href="#cb78-23" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv&quot;</span>,</span>
<span id="cb78-24"><a href="#cb78-24" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-25"><a href="#cb78-25" tabindex="-1"></a>  )</span>
<span id="cb78-26"><a href="#cb78-26" tabindex="-1"></a>df363381 <span class="ot">&lt;-</span></span>
<span id="cb78-27"><a href="#cb78-27" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-28"><a href="#cb78-28" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv&quot;</span>,</span>
<span id="cb78-29"><a href="#cb78-29" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-30"><a href="#cb78-30" tabindex="-1"></a>  )</span>
<span id="cb78-31"><a href="#cb78-31" tabindex="-1"></a>df363431 <span class="ot">&lt;-</span></span>
<span id="cb78-32"><a href="#cb78-32" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-33"><a href="#cb78-33" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv&quot;</span>,</span>
<span id="cb78-34"><a href="#cb78-34" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-35"><a href="#cb78-35" tabindex="-1"></a>  )</span>
<span id="cb78-36"><a href="#cb78-36" tabindex="-1"></a>df408149 <span class="ot">&lt;-</span></span>
<span id="cb78-37"><a href="#cb78-37" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-38"><a href="#cb78-38" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb78-39"><a href="#cb78-39" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-40"><a href="#cb78-40" tabindex="-1"></a>  )</span>
<span id="cb78-41"><a href="#cb78-41" tabindex="-1"></a>df411456 <span class="ot">&lt;-</span></span>
<span id="cb78-42"><a href="#cb78-42" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-43"><a href="#cb78-43" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb78-44"><a href="#cb78-44" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-45"><a href="#cb78-45" tabindex="-1"></a>  )</span>
<span id="cb78-46"><a href="#cb78-46" tabindex="-1"></a>df411469 <span class="ot">&lt;-</span></span>
<span id="cb78-47"><a href="#cb78-47" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb78-48"><a href="#cb78-48" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb78-49"><a href="#cb78-49" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb78-50"><a href="#cb78-50" tabindex="-1"></a>  )</span></code></pre></div>
<p>Let’s look at the two forms that have the same number of columns, <span class="math inline">\(n=274\)</span>, 307736 and 331453.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="fu">names</span>(df307736) <span class="sc">==</span> <span class="fu">names</span>(df331453)</span></code></pre></div>
<pre><code>##   [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [181] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [196] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [211] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [226] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [241] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [271] TRUE TRUE TRUE TRUE</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df307736) <span class="sc">==</span> <span class="fu">names</span>(df331453)) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">names</span>(df307736))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>So, these two are identical and could be merged.</p>
<pre><code>tar_target(files_274_cols, stringr::str_detect(home_visit_remove_identifiers, &quot;/(307736|331453)&quot;))

tar_target(df_merge_274_cols, make_aggregate_data_file(home_visit_remove_identifiers[files_274_cols]))</code></pre>
<p>How about the files with <span class="math inline">\(n=267\)</span> columns, 331848 and 334099?</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">==</span> <span class="fu">names</span>(df334099)</span></code></pre></div>
<pre><code>##   [1] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [265]  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df331848) <span class="sc">==</span> <span class="fu">names</span>(df334099)) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">names</span>(df331848))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;group_combinedquestionnaires/participant_id&quot;             
## [2] &quot;start&quot;                                                   
## [3] &quot;end&quot;                                                     
## [4] &quot;group_combinedquestionnaires/note_fillthisoutbeforestudy&quot;
## [5] &quot;group_combinedquestionnaires/site_id&quot;                    
## [6] &quot;group_combinedquestionnaires/subject_number&quot;</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;group_jo84c13/participant_id&quot;             
## [2] &quot;start&quot;                                    
## [3] &quot;end&quot;                                      
## [4] &quot;group_jo84c13/note_fillthisoutbeforestudy&quot;
## [5] &quot;group_jo84c13/site_id&quot;                    
## [6] &quot;group_jo84c13/subject_number&quot;</code></pre>
<p>There is an odd difference in the group label, <code>group_combinedquestionnaires</code> vs. <code>group_jo84c13</code>.</p>
<p>Let’s try deleting the initial group labels and compare again.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" tabindex="-1"></a>n1 <span class="ot">&lt;-</span> <span class="fu">names</span>(df331848)</span>
<span id="cb92-2"><a href="#cb92-2" tabindex="-1"></a>n2 <span class="ot">&lt;-</span> <span class="fu">names</span>(df334099)</span>
<span id="cb92-3"><a href="#cb92-3" tabindex="-1"></a></span>
<span id="cb92-4"><a href="#cb92-4" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;group_combinedquestionnaires/&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;participant_id&quot;              &quot;start&quot;                      
## [3] &quot;end&quot;                         &quot;note_fillthisoutbeforestudy&quot;
## [5] &quot;site_id&quot;                     &quot;subject_number&quot;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;group_jo84c13/&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;participant_id&quot;              &quot;start&quot;                      
## [3] &quot;end&quot;                         &quot;note_fillthisoutbeforestudy&quot;
## [5] &quot;site_id&quot;                     &quot;subject_number&quot;</code></pre>
<p>That looks promising.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;group_combinedquestionnaires/&quot;</span>) <span class="ot">-&gt;</span> n1</span>
<span id="cb96-2"><a href="#cb96-2" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;group_jo84c13/&quot;</span>) <span class="ot">-&gt;</span> n2</span>
<span id="cb96-3"><a href="#cb96-3" tabindex="-1"></a>n1 <span class="sc">==</span> n2</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE
##  [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [265]  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>], n2[<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>])</span></code></pre></div>
<pre><code>##      [,1]                     [,2]                    
## [1,] &quot;test_date&quot;              &quot;test_date&quot;             
## [2,] &quot;child_sex&quot;              &quot;child_birth_date&quot;      
## [3,] &quot;age_group&quot;              &quot;child_sex&quot;             
## [4,] &quot;language_child&quot;         &quot;age_group&quot;             
## [5,] &quot;language_child/english&quot; &quot;language_child&quot;        
## [6,] &quot;language_child/spanish&quot; &quot;language_child/english&quot;
## [7,] &quot;language_instruction&quot;   &quot;language_child/spanish&quot;
## [8,] &quot;acknowledge_site&quot;       &quot;language_instruction&quot;</code></pre>
<p><code>n2</code> or <code>df334099</code> has a <code>child_birth_date</code> field in position 9 that the other data frame does not have.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" tabindex="-1"></a>n1 <span class="sc">|&gt;</span> <span class="fu">str_detect</span>(<span class="st">&quot;child_birth_date&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>If we delete that variable, the data frames will no longer have the same number of columns.
Let’s explore that anyway.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" tabindex="-1"></a>n2_2 <span class="ot">&lt;-</span> n2[<span class="sc">-</span><span class="dv">9</span>]</span>
<span id="cb102-2"><a href="#cb102-2" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" tabindex="-1"></a>n1 <span class="sc">==</span> n2_2</span></code></pre></div>
<pre><code>## Warning in n1 == n2_2: longer object length is not a multiple of shorter object
## length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE
##  [37]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [49] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE FALSE</code></pre>
<p>That helps a bit, but we diverge around column 29.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">28</span><span class="sc">:</span><span class="dv">51</span>], n2_2[<span class="dv">28</span><span class="sc">:</span><span class="dv">51</span>])</span></code></pre></div>
<pre><code>##       [,1]                                                                                                
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested&quot;              
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/birthhospital&quot;
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/afterhome&quot;    
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no&quot;           
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused&quot;      
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/donotknow&quot;    
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested&quot;               
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/birthhospital&quot; 
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/afterhome&quot;     
## [10,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no&quot;            
## [11,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused&quot;       
## [12,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow&quot;     
## [13,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies&quot;       
## [14,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection&quot;   
## [15,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma&quot;          
## [16,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory&quot;     
## [17,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal&quot;
## [18,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc&quot;              
## [19,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_injury_times&quot;                
## [20,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comment_injury&quot;                    
## [21,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_general_health&quot;           
## [22,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;                   
## [23,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care&quot;                           
## [24,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;                       
##       [,2]                                                                                                                                  
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested&quot;                                                
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__in_the_bi&quot;                                 
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__after_goi&quot;                                 
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no&quot;                                             
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused&quot;                                        
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/don_t_know&quot;                                     
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested&quot;                                                 
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__in_the_bi&quot;                                  
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__after_goi&quot;                                  
## [10,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no&quot;                                              
## [11,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused&quot;                                         
## [12,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/don_t_know&quot;                                      
## [13,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/child_allergies_infections_ill_header&quot;
## [14,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies&quot;                            
## [15,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection&quot;                        
## [16,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma&quot;                               
## [17,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory&quot;                          
## [18,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal&quot;                     
## [19,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc&quot;                                                
## [20,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_injury_times&quot;                                                  
## [21,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comment_injury&quot;                                                      
## [22,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_general_health&quot;                                             
## [23,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;                                                     
## [24,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;</code></pre>
<p>These question labels looks very similar.
There are just some minor changes in the variable names.
<code>n2_2</code> has an extra variable in column 40.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" tabindex="-1"></a>n2_3 <span class="ot">&lt;-</span> n2_2[<span class="sc">-</span><span class="dv">40</span>]</span></code></pre></div>
<p>Then, we can rename some of the columns in <code>n2_3</code> using corresponding names from <code>n1</code>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" tabindex="-1"></a>n2_3 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;yes__in_the_bi&quot;</span>, <span class="st">&quot;birthhospital&quot;</span>) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;yes__after_goi&quot;</span>, <span class="st">&quot;afterhome&quot;</span>) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;don_t_know&quot;</span>, <span class="st">&quot;donotknow&quot;</span>) <span class="ot">-&gt;</span> n2_4</span>
<span id="cb108-2"><a href="#cb108-2" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" tabindex="-1"></a>n1 <span class="sc">==</span> n2_4</span></code></pre></div>
<pre><code>## Warning in n1 == n2_4: longer object length is not a multiple of shorter object
## length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
## [229]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">39</span><span class="sc">:</span><span class="dv">51</span>], n2_4[<span class="dv">39</span><span class="sc">:</span><span class="dv">51</span>])</span></code></pre></div>
<pre><code>##       [,1]                                                                                                
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow&quot;     
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies&quot;       
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection&quot;   
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma&quot;          
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory&quot;     
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal&quot;
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc&quot;              
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_injury_times&quot;                
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comment_injury&quot;                    
## [10,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_general_health&quot;           
## [11,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;                   
## [12,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care&quot;                           
## [13,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;                       
##       [,2]                                                                                                             
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow&quot;                  
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies&quot;       
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection&quot;   
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma&quot;          
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory&quot;     
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal&quot;
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc&quot;                           
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_injury_times&quot;                             
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comment_injury&quot;                                 
## [10,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_general_health&quot;                        
## [11,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;                                
## [12,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;                                    
## [13,] &quot;group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking&quot;</code></pre>
<p><code>n1</code> has a <code>group_medicalprof</code> label from <code>allergies</code> through <code>gastrointestinal</code>; <code>n2_4</code> has <code>child_allergies_infections_ill</code> for the same questions.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" tabindex="-1"></a>n2_4 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;child_allergies_infections_ill&quot;</span>, <span class="st">&quot;group_medicalprof&quot;</span>) <span class="ot">-&gt;</span> n2_5</span>
<span id="cb113-2"><a href="#cb113-2" tabindex="-1"></a>n1 <span class="sc">==</span> n2_5</span></code></pre></div>
<pre><code>## Warning in n1 == n2_5: longer object length is not a multiple of shorter object
## length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
## [229]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">49</span><span class="sc">:</span><span class="dv">60</span>], n2_5[<span class="dv">49</span><span class="sc">:</span><span class="dv">60</span>])</span></code></pre></div>
<pre><code>##       [,1]                                                                             
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care&quot;        
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;    
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking&quot;      
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1&quot;   
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2&quot;   
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3&quot;   
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now&quot;       
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount&quot;
## [10,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_house&quot;         
## [11,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_car&quot;           
## [12,] &quot;group_homevisitquestionnaires/group_health/group_smoking/comments_smoking&quot;      
##       [,2]                                                                             
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;    
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking&quot;      
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1&quot;   
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2&quot;   
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3&quot;   
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now&quot;       
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount&quot;
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_house&quot;         
## [10,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_car&quot;           
## [11,] &quot;group_homevisitquestionnaires/group_health/group_smoking/comments_smoking&quot;      
## [12,] &quot;group_homevisitquestionnaires/group_health/group_drinking/pregnant_drinking&quot;</code></pre>
<p>It looks like these could be reconciled by deleting <code>prenatal_care</code> from <code>n1</code>.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" tabindex="-1"></a>n1_2 <span class="ot">&lt;-</span> n1[<span class="sc">-</span><span class="dv">50</span>]</span>
<span id="cb118-2"><a href="#cb118-2" tabindex="-1"></a>n1_2 <span class="sc">==</span> n2_5</span></code></pre></div>
<pre><code>## Warning in n1_2 == n2_5: longer object length is not a multiple of shorter
## object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" tabindex="-1"></a><span class="fu">cbind</span>(n1_2[<span class="dv">64</span><span class="sc">:</span><span class="dv">75</span>], n2_5[<span class="dv">64</span><span class="sc">:</span><span class="dv">75</span>])</span></code></pre></div>
<pre><code>##       [,1]                                                                                                          
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_drinking/comments_drinking&quot;                                 
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_phq4/note_phq4&quot;                                             
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_nervous&quot;                           
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_worrying&quot;                          
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_littleinterest&quot;                    
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_down&quot;                              
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_phq4/comments_phq4&quot;                                         
##  [8,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions1&quot;              
##  [9,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions2&quot;              
## [10,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_unfamiliarperson&quot;
## [11,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_troubletask&quot;     
## [12,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_companyofchild&quot;  
##       [,2]                                                                                                       
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_drinking/comments_drinking&quot;                              
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_phq4/Experimenter_These_stions_are_about_you&quot;            
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_phq4/comments_phq4&quot;                                      
##  [4,] &quot;group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructor_rothbart&quot;                           
##  [5,] &quot;group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructions_rothbart2&quot;                        
##  [6,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/rothbart_questions_header&quot;                
##  [7,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_approached_by_a_ld_cling_to_a_parent&quot;
##  [8,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_having_trouble_get_easily_irritated&quot;
##  [9,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_a_familiar_chil_company_of_the_child&quot;
## [10,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_offered_a_choic_uickly_and_go_for_it&quot;
## [11,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/During_daily_or_even_eing_quietly_sung_to&quot;
## [12,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_playing_outdoo_and_excitement_of_it&quot;</code></pre>
<p>It looks like the phq4 is <em>not</em> in <code>n2_5</code>.</p>
<p>Let’s check.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" tabindex="-1"></a>n2_5 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="st">&quot;phq4&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Yes, there are only two PHQ4-related questions in <code>df334099</code>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" tabindex="-1"></a>df334099 <span class="sc">|&gt;</span> <span class="fu">names</span>() <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="st">&quot;phq4&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>This path of reconciliation does not appear fruitful.</p>
</div>
</div>
<div id="make-aggregate-files" class="section level2 unnumbered">
<h2 class="unnumbered">Make aggregate files</h2>
<div id="non-mb-cdi-files-with-n288-columns" class="section level3 unnumbered">
<h3 class="unnumbered">non-MB-CDI files with <span class="math inline">\(n=288\)</span> columns</h3>
<pre><code>tar_target(files_288_cols, 
  stringr::str_detect(home_visit_remove_identifiers, 
                      &quot;2[3458]_non_mbcdi.*_deidentified\\.csv&quot;)
)

tar_target(df_merge_288_cols,
    make_aggregate_data_file(
        home_visit_remove_identifiers[files_288_cols])
)</code></pre>
</div>
<div id="non-mb-cdi-files-with-n287-columns" class="section level3 unnumbered">
<h3 class="unnumbered">non-MB-CDI files with <span class="math inline">\(n=287\)</span> columns</h3>
<pre><code>tar_target(files_287_cols_1, 
  stringr::str_detect(home_visit_remove_identifiers, 
          &quot;2[69]_non_mbcdi.*_deidentified\\.csv&quot;)),
tar_target(files_287_cols_2, 
  stringr::str_detect(home_visit_remove_identifiers, 
          &quot;(740627|740630|740631)_non.*_deidentified\\.csv&quot;)),
tar_target(df_merge_287_cols_1,
  make_aggregate_data_file(
          home_visit_remove_identifiers[files_287_cols_1])),
tar_target(df_merge_287_cols_2,
  make_aggregate_data_file(
          home_visit_remove_identifiers[files_287_cols_2])),</code></pre>
</div>
<div id="examine-groups-with-n287-cols" class="section level3 unnumbered">
<h3 class="unnumbered">Examine groups with <span class="math inline">\(n=287\)</span> cols</h3>
<p>We focus on the starting column where the column names diverge, column 92.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_287_cols_1, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb129-2"><a href="#cb129-2" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_287_cols_2, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb129-3"><a href="#cb129-3" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_1)[<span class="dv">92</span>]</span></code></pre></div>
<pre><code>## [1] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_feeding_nutrition.instructions_feeding&quot;</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">92</span>]</span></code></pre></div>
<pre><code>## [1] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_locomotor_milestones.group_health.group_feeding_nutrition.instructions_feeding&quot;</code></pre>
<p>There is an erroneous <code>group_locomotor_milestones.</code> in the <code>df_merge_287_cols_2</code> column name.</p>
<p>A bit of sleuthing determines that this <code>group_locomotor_milestones.</code> label is characteristic of columns 92 to 273.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">&quot;group_locomotor_milestones&quot;</span>)</span></code></pre></div>
<pre><code>##   [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [181] TRUE TRUE</code></pre>
<p>The following should fix this.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" tabindex="-1"></a>old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df_merge_287_cols_2)</span>
<span id="cb135-2"><a href="#cb135-2" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb135-3"><a href="#cb135-3" tabindex="-1"></a>new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="ot">&lt;-</span></span>
<span id="cb135-4"><a href="#cb135-4" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>], <span class="st">&quot;group_locomotor_milestones</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb135-5"><a href="#cb135-5" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="ot">&lt;-</span> new_names</span></code></pre></div>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">==</span> <span class="fu">names</span>(df_merge_287_cols_1)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [109]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
## [265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE
## [277] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>We have a second problem with columns from 114 to 210.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df_merge_287_cols_1)[<span class="dv">113</span><span class="sc">:</span><span class="dv">115</span>], <span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">113</span><span class="sc">:</span><span class="dv">115</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow&quot;
##      [,2]                                                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;      
##      [,3]                                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection&quot;</code></pre>
<p>One of the problems has to do with column 114. There is a question ending <code>doctor_told_you</code> in <code>names(df_merge_287_cols_1)</code> but not in <code>names(df_merge_287_cols_2)</code>.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_1) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">&quot;doctor_told_you&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">&quot;doctor_told_you&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>Deleting this question would create additional misalignments and further problems.
We cannot proceed without further discussion with our team.</p>
<p>For now, let’s generate an array with all of the remaining differences in column names.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" tabindex="-1"></a>names_differ <span class="ot">&lt;-</span> (<span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">!=</span> <span class="fu">names</span>(df_merge_287_cols_1))</span>
<span id="cb144-2"><a href="#cb144-2" tabindex="-1"></a><span class="fu">sum</span>(names_differ)</span></code></pre></div>
<pre><code>## [1] 103</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df_merge_287_cols_1)[names_differ], <span class="fu">names</span>(df_merge_287_cols_2)[names_differ])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;      
##      [,2]                                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection&quot;
##      [,3]                                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma&quot;       
##      [,4]                                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory&quot;
##      [,5]                                                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal&quot;
##      [,6]                                                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc&quot;                           
##      [,7]                                                                                                               
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times&quot;  
##      [,8]                                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury&quot;    
##      [,9]                                                                                                                  
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury&quot;         
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health&quot;
##      [,10]                                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal&quot;        
##      [,11]                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care&quot;        
##      [,12]                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal&quot;
##      [,13]                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking&quot;  
##      [,14]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1&quot;
##      [,15]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2&quot;
##      [,16]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3&quot;
##      [,17]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now&quot;    
##      [,18]                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now&quot;       
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount&quot;
##      [,19]                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house&quot;         
##      [,20]                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car&quot;  
##      [,21]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking&quot;
##      [,22]                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking&quot;
##      [,23]                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1&quot;
##      [,24]                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2&quot;
##      [,25]                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3&quot;
##      [,26]                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking&quot;   
##      [,27]                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4&quot;            
##      [,28]                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4&quot;        
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4&quot;
##      [,29]                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous&quot;     
##      [,30]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying&quot;
##      [,31]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying&quot;      
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest&quot;
##      [,32]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down&quot;          
##      [,33]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4&quot;
##      [,34]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1&quot;
##      [,35]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2&quot;
##      [,36]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2&quot;                        
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3&quot;
##      [,37]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson&quot;
##      [,38]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask&quot;     
##      [,39]                                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild&quot;
##      [,40]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities&quot;
##      [,41]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung&quot;     
##      [,42]                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors&quot;
##      [,43]                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10&quot;     
##      [,44]                                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10&quot;       
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks&quot;
##      [,45]                                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults&quot;
##      [,46]                                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair&quot;        
##      [,47]                                                                                                                  
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy&quot;
##      [,48]                                                                                                                    
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged&quot;
##      [,49]                                                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged&quot;       
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity&quot;
##      [,50]                                                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly&quot;        
##      [,51]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention&quot;
##      [,52]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags&quot;         
##      [,53]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags&quot;            
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment&quot;
##      [,54]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy&quot;          
##      [,55]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles&quot;
##      [,56]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active&quot;  
##      [,57]                                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden&quot;
##      [,58]                                                                                                                    
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful&quot;
##      [,59]                                                                                                                    
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue&quot;    
##      [,60]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse&quot;
##      [,61]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent&quot;
##      [,62]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum&quot;
##      [,63]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently&quot;
##      [,64]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile&quot;  
##      [,65]                                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold&quot;       
##      [,66]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold&quot;         
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult&quot;
##      [,67]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful&quot;      
##      [,68]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful&quot;      
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace&quot;
##      [,69]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3&quot; 
##      [,70]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed&quot;
##      [,71]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother&quot;    
##      [,72]                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother&quot;      
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople&quot;
##      [,73]                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart&quot;                               
##      [,74]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1&quot;
##      [,75]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology&quot;       
##      [,76]                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv&quot;
##      [,77]                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd&quot;
##      [,78]                                                                                               
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer&quot;
##      [,79]                                                                                               
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad&quot;    
##      [,80]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad&quot;           
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame&quot;
##      [,81]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame&quot;      
##      [,82]                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv&quot;      
##      [,83]                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how&quot;             
##      [,84]                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how&quot;              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd&quot;
##      [,85]                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how&quot;             
##      [,86]                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how&quot;                  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer&quot;
##      [,87]                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how&quot;             
##      [,88]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how&quot;         
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad&quot;
##      [,89]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how&quot;             
##      [,90]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how&quot;                    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational&quot;
##      [,91]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how&quot;             
##      [,92]                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how&quot;           
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame&quot;
##      [,93]                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how&quot;             
##      [,94]                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day&quot;
##      [,95]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day&quot;
##      [,96]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day&quot;                    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use&quot;
##      [,97]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale&quot;       
##      [,98]                                                                                                  
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day&quot;
##      [,99]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel1&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1&quot;
##      [,100]                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel2&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2&quot;
##      [,101]                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel3&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3&quot;
##      [,102]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_databrary.acknowledge_databrary&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.acknowledge_databrary&quot;
##      [,103]                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_saveasdraft&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_saveasdraft&quot;</code></pre>
<p>Visual inspection suggests that these are similar with the following deviations:</p>
<ul>
<li>As noted, <code>df_merge_287_cols_1</code> has a column ending <code>doctor_told_you</code> that is not present in <code>df_merge_287_cols_2</code>.</li>
<li><code>df_merge_287_cols_2</code> has a column ending <code>technology_use_scale</code> that is not present in the <code>df_merge_287_cols_1</code></li>
<li>There are a set of fields in <code>group_databrary</code> that do not align exactly. We will almost certainly delete these, so the misalignment is not a huge problem.</li>
</ul>
<p>As an exploration, let’s see if we can reconcile these by deleting the non-aligning columns.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df_merge_287_cols_1</span>
<span id="cb148-2"><a href="#cb148-2" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df_merge_287_cols_2</span>
<span id="cb148-3"><a href="#cb148-3" tabindex="-1"></a></span>
<span id="cb148-4"><a href="#cb148-4" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb148-5"><a href="#cb148-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;doctor_told_you&#39;</span>))</span>
<span id="cb148-6"><a href="#cb148-6" tabindex="-1"></a></span>
<span id="cb148-7"><a href="#cb148-7" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb148-8"><a href="#cb148-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;technology_use_scale&#39;</span>))</span>
<span id="cb148-9"><a href="#cb148-9" tabindex="-1"></a></span>
<span id="cb148-10"><a href="#cb148-10" tabindex="-1"></a>old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)</span>
<span id="cb148-11"><a href="#cb148-11" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb148-12"><a href="#cb148-12" tabindex="-1"></a>new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>], <span class="st">&quot;group_locomotor_milestones</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb148-13"><a href="#cb148-13" tabindex="-1"></a><span class="fu">names</span>(df2) <span class="ot">&lt;-</span> new_names</span>
<span id="cb148-14"><a href="#cb148-14" tabindex="-1"></a></span>
<span id="cb148-15"><a href="#cb148-15" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df2)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
## [265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE
## [277] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>This looks promising.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">263</span>], <span class="fu">names</span>(df2)[<span class="dv">263</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day&quot;</code></pre>
<p>This is easily fixed.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" tabindex="-1"></a><span class="fu">names</span>(df1)[<span class="dv">263</span>] <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)[<span class="dv">263</span>]</span></code></pre></div>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">273</span><span class="sc">:</span><span class="dv">275</span>], <span class="fu">names</span>(df2)[<span class="dv">273</span><span class="sc">:</span><span class="dv">275</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel1&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1&quot;
##      [,2]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel2&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2&quot;
##      [,3]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel3&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3&quot;</code></pre>
<p>The last misalignments relate to Databrary fields.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb155-2"><a href="#cb155-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;group_databrary&#39;</span>))</span>
<span id="cb155-3"><a href="#cb155-3" tabindex="-1"></a></span>
<span id="cb155-4"><a href="#cb155-4" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb155-5"><a href="#cb155-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;group_databrary&#39;</span>))</span>
<span id="cb155-6"><a href="#cb155-6" tabindex="-1"></a></span>
<span id="cb155-7"><a href="#cb155-7" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df2)</span></code></pre></div>
<pre><code>##   [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [61] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [76] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [91] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [106] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [121] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [136] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [151] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [166] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [181] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [196] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [211] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [226] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [241] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [271] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<p>Success!</p>
</div>
</div>
<div id="combining-the-two-groups-of-datasets" class="section level2 unnumbered">
<h2 class="unnumbered">Combining the two groups of datasets</h2>
<p>Now, let’s go back to the data frame with 288 cols and see if we can bring these into alignment.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_288_cols, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb157-2"><a href="#cb157-2" tabindex="-1"></a></span>
<span id="cb157-3"><a href="#cb157-3" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df_merge_288_cols</span>
<span id="cb157-4"><a href="#cb157-4" tabindex="-1"></a></span>
<span id="cb157-5"><a href="#cb157-5" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb157-6"><a href="#cb157-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;group_databrary&#39;</span>))</span>
<span id="cb157-7"><a href="#cb157-7" tabindex="-1"></a></span>
<span id="cb157-8"><a href="#cb157-8" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">dim</span>(df1), <span class="fu">dim</span>(df2), <span class="fu">dim</span>(df3))</span></code></pre></div>
<pre><code>## [1] 119 281  29 281 237 283</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code></pre></div>
<pre><code>## Warning in names(df1) == names(df3): longer object length is not a multiple of
## shorter object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [109]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [277] FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">114</span><span class="sc">:</span><span class="dv">115</span>], <span class="fu">names</span>(df3)[<span class="dv">114</span><span class="sc">:</span><span class="dv">115</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;      
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you&quot;
##      [,2]                                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;</code></pre>
<p>Once again, there appears to be a problem with the ‘doctor_told_you’ field. We’ll delete it to see if this fixes one of the problems.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb164-2"><a href="#cb164-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;doctor_told_you&#39;</span>))</span>
<span id="cb164-3"><a href="#cb164-3" tabindex="-1"></a></span>
<span id="cb164-4"><a href="#cb164-4" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code></pre></div>
<pre><code>## Warning in names(df1) == names(df3): longer object length is not a multiple of
## shorter object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [205]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [277] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>We still have misalignments at column 210.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">210</span><span class="sc">:</span><span class="dv">213</span>], <span class="fu">names</span>(df3)[<span class="dv">210</span><span class="sc">:</span><span class="dv">213</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals&quot;               
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale&quot;
##      [,2]                                                                                              
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals&quot;   
##      [,3]                                                                                              
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime&quot;
##      [,4]                                                                                                    
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.transportation&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime&quot;</code></pre>
<p>The ’technology_use_scale` exists in one but not the other.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb169-2"><a href="#cb169-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;technology_use_scale&#39;</span>))</span>
<span id="cb169-3"><a href="#cb169-3" tabindex="-1"></a></span>
<span id="cb169-4"><a href="#cb169-4" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">dim</span>(df1), <span class="fu">dim</span>(df3))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]  119  281
## [2,]  237  281</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [97]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [121]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [145]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [157]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [181]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [193]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [205]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [217]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [229]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [241]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
## [265]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [277]  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="rmdimportant">
<p>Future versions of the workflow will need to handle this more elegantly.</p>
<p>Option 1: Fix the underlying forms.</p>
<p>Option 2: Add the ‘missing’ columns as NA in post-processing.</p>
</div>
<p>For now, I’m going to create functions that align these data frames.
These are incorporated into <code>R/functions.R</code> so we do not source them again here.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" tabindex="-1"></a>remove_technology_use_scale <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb173-2"><a href="#cb173-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;technology_use_scale&#39;</span>))</span>
<span id="cb173-3"><a href="#cb173-3" tabindex="-1"></a>}</span>
<span id="cb173-4"><a href="#cb173-4" tabindex="-1"></a></span>
<span id="cb173-5"><a href="#cb173-5" tabindex="-1"></a>remove_doctor_told_you <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb173-6"><a href="#cb173-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;doctor_told_you&#39;</span>))</span>
<span id="cb173-7"><a href="#cb173-7" tabindex="-1"></a>}</span>
<span id="cb173-8"><a href="#cb173-8" tabindex="-1"></a></span>
<span id="cb173-9"><a href="#cb173-9" tabindex="-1"></a>remove_databrary_fields <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb173-10"><a href="#cb173-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;group_databrary&#39;</span>))</span>
<span id="cb173-11"><a href="#cb173-11" tabindex="-1"></a>}</span>
<span id="cb173-12"><a href="#cb173-12" tabindex="-1"></a></span>
<span id="cb173-13"><a href="#cb173-13" tabindex="-1"></a>reconcile_typicalday <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb173-14"><a href="#cb173-14" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="fu">names</span>(df), <span class="st">&#39;typicalday&#39;</span>, <span class="st">&#39;typical_day&#39;</span>)</span>
<span id="cb173-15"><a href="#cb173-15" tabindex="-1"></a>  df</span>
<span id="cb173-16"><a href="#cb173-16" tabindex="-1"></a>}</span>
<span id="cb173-17"><a href="#cb173-17" tabindex="-1"></a></span>
<span id="cb173-18"><a href="#cb173-18" tabindex="-1"></a>remove_permissive_locomotor_milestones_label <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb173-19"><a href="#cb173-19" tabindex="-1"></a>  old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df)</span>
<span id="cb173-20"><a href="#cb173-20" tabindex="-1"></a>  new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb173-21"><a href="#cb173-21" tabindex="-1"></a>  contains_locomotor <span class="ot">&lt;-</span></span>
<span id="cb173-22"><a href="#cb173-22" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_detect</span>(new_names, <span class="at">pattern =</span> <span class="st">&quot;locomotor_milestones.*health|division|rothbart|mediause|pets|typical|acknowledge&quot;</span>)</span>
<span id="cb173-23"><a href="#cb173-23" tabindex="-1"></a>  new_names[contains_locomotor] <span class="ot">&lt;-</span></span>
<span id="cb173-24"><a href="#cb173-24" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[contains_locomotor], <span class="st">&quot;group_locomotor_milestones</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb173-25"><a href="#cb173-25" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> new_names</span>
<span id="cb173-26"><a href="#cb173-26" tabindex="-1"></a>  df</span>
<span id="cb173-27"><a href="#cb173-27" tabindex="-1"></a>}</span>
<span id="cb173-28"><a href="#cb173-28" tabindex="-1"></a></span>
<span id="cb173-29"><a href="#cb173-29" tabindex="-1"></a>remove_X_meta_cols <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb173-30"><a href="#cb173-30" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;X_&quot;</span>), <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;meta.instanceID&quot;</span>))</span>
<span id="cb173-31"><a href="#cb173-31" tabindex="-1"></a>}</span>
<span id="cb173-32"><a href="#cb173-32" tabindex="-1"></a></span>
<span id="cb173-33"><a href="#cb173-33" tabindex="-1"></a>remove_redundant_group_labels <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb173-34"><a href="#cb173-34" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="fu">names</span>(df), <span class="st">&#39;group_homevisitquestionnaires</span><span class="sc">\\</span><span class="st">.&#39;</span>)</span>
<span id="cb173-35"><a href="#cb173-35" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="fu">names</span>(df), <span class="st">&#39;group_combinedquestionnaires</span><span class="sc">\\</span><span class="st">.&#39;</span>)</span>
<span id="cb173-36"><a href="#cb173-36" tabindex="-1"></a>  df</span>
<span id="cb173-37"><a href="#cb173-37" tabindex="-1"></a>}</span>
<span id="cb173-38"><a href="#cb173-38" tabindex="-1"></a></span>
<span id="cb173-39"><a href="#cb173-39" tabindex="-1"></a>clean_dfs <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb173-40"><a href="#cb173-40" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb173-41"><a href="#cb173-41" tabindex="-1"></a>    <span class="fu">reconcile_typicalday</span>() <span class="sc">%&gt;%</span></span>
<span id="cb173-42"><a href="#cb173-42" tabindex="-1"></a>    <span class="fu">remove_technology_use_scale</span>() <span class="sc">%&gt;%</span></span>
<span id="cb173-43"><a href="#cb173-43" tabindex="-1"></a>    <span class="fu">remove_doctor_told_you</span>() <span class="sc">%&gt;%</span></span>
<span id="cb173-44"><a href="#cb173-44" tabindex="-1"></a>    <span class="fu">remove_permissive_locomotor_milestones_label</span>() <span class="sc">%&gt;%</span></span>
<span id="cb173-45"><a href="#cb173-45" tabindex="-1"></a>    <span class="fu">remove_databrary_fields</span>() <span class="sc">%&gt;%</span></span>
<span id="cb173-46"><a href="#cb173-46" tabindex="-1"></a>    <span class="fu">remove_X_meta_cols</span>() <span class="sc">%&gt;%</span></span>
<span id="cb173-47"><a href="#cb173-47" tabindex="-1"></a>    <span class="fu">remove_redundant_group_labels</span>()</span>
<span id="cb173-48"><a href="#cb173-48" tabindex="-1"></a>}</span></code></pre></div>
<p>Let’s test this workflow with the unmodified files.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_287_cols_1, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb174-2"><a href="#cb174-2" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_287_cols_2, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb174-3"><a href="#cb174-3" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_288_cols, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb174-4"><a href="#cb174-4" tabindex="-1"></a></span>
<span id="cb174-5"><a href="#cb174-5" tabindex="-1"></a>df1m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_287_cols_1)</span>
<span id="cb174-6"><a href="#cb174-6" tabindex="-1"></a><span class="fu">dim</span>(df1m)</span></code></pre></div>
<pre><code>## [1] 119 272</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" tabindex="-1"></a>df2m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_287_cols_2)</span>
<span id="cb176-2"><a href="#cb176-2" tabindex="-1"></a><span class="fu">dim</span>(df2m)</span></code></pre></div>
<pre><code>## [1]  29 272</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" tabindex="-1"></a>df3m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_288_cols)</span>
<span id="cb178-2"><a href="#cb178-2" tabindex="-1"></a><span class="fu">dim</span>(df3m)</span></code></pre></div>
<pre><code>## [1] 237 272</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" tabindex="-1"></a>(<span class="fu">names</span>(df1m) <span class="sc">==</span> <span class="fu">names</span>(df2m)) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 272</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" tabindex="-1"></a>(<span class="fu">names</span>(df1m) <span class="sc">==</span> <span class="fu">names</span>(df3m)) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 272</code></pre>
<div id="merging-files-at-last" class="section level3 unnumbered">
<h3 class="unnumbered">Merging files at last</h3>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df1m, df2m, df3m)</span></code></pre></div>
<div class="rmdnote">
<p>As of 2022-12-15, the above has now been incorporated into <code>R/functions.R</code> and into the <code>_targets.R</code> workflow.</p>
</div>
</div>
</div>
<div id="merge-with-databrary-info" class="section level2 unnumbered">
<h2 class="unnumbered">Merge with Databrary info</h2>
<p>For each session (row) in the merged data frame, we pull data from the associated Databrary volume and session.
These data are merged with that drawn from KBT.</p>
<pre><code>tar_target(
  home_visit_w_databrary_df,
  add_databrary_info_to_home_visit_df(home_visit_df)
)</code></pre>
<p>The <code>add_databrary_info_to_home_visit()</code> function in <code>R/functions.R</code> does most of the work.</p>
</div>
<div id="clean-and-prepare-for-export" class="section level2 unnumbered">
<h2 class="unnumbered">Clean and prepare for export</h2>
<!--chapter:end:13-home-visit.Rmd-->
</div>
</div>
<div id="data-dictionary" class="section level1 unnumbered">
<h1 class="unnumbered">Data dictionary</h1>
<!--chapter:end:14-data-dictionary.Rmd-->
</div>
<div id="post-visit-notes" class="section level1 unnumbered">
<h1 class="unnumbered">Post-visit notes</h1>
<div id="select-forms-from-kbt" class="section level2 unnumbered">
<h2 class="unnumbered">Select forms from KBT</h2>
<p>The post-visit notes are stored in a separate KBT form with “Post-Visit” in the title.</p>
<pre><code>tar_target(kb_post_visit, dplyr::filter(
    kb_df, stringr::str_detect(title, &quot;Post\\-Visit&quot;)
  ))</code></pre>
</div>
<div id="download-forms-as-xlsx" class="section level2 unnumbered">
<h2 class="unnumbered">Download forms as XLSX</h2>
<p>A special function <code>make_post_visit_df()</code> downloads the XLSX forms, converts them to CSVs,
saves the CSVs in a specific directory, and then selects one of them–the most recent form–to open as a data frame.</p>
<p>There is a smaller, older post-visit data file with fewer fields that can be reconciled with the current active one at a later date.</p>
<pre><code>tar_target(
    post_visit_df,
    make_post_visit_df(kb_post_visit,
                       &quot;data/xlsx/post_visit&quot;,
                       &quot;data/csv/post_visit&quot;)
  ),</code></pre>
<!--chapter:end:15-post-visit-notes.Rmd-->
</div>
</div>
<div id="part-data-visualization" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Data Visualization</h1>
<!--chapter:end:20-visualizing.Rmd-->
</div>
<div id="screening-visualizations" class="section level1 unnumbered">
<h1 class="unnumbered">Screening visualizations</h1>
<p>These visualizations are intended as a way to test the integrity and utility of the data export and cleaning workflow.</p>
<div id="setup-3" class="section level2 unnumbered">
<h2 class="unnumbered">Setup</h2>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb188-2"><a href="#cb188-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb188-3"><a href="#cb188-3" tabindex="-1"></a><span class="fu">library</span>(forcats)</span></code></pre></div>
<p>To calculate cumulative screening/recruiting calls by site, we have to add an index variable</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(screen_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" tabindex="-1"></a>screen_df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;data/csv/screening/agg/PLAY-screening-latest.csv&quot;</span>))</span></code></pre></div>
<pre><code>## Rows: 546 Columns: 51
## ── Column specification ─────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (42): site_id, subject_number, play_id, child_sex, child_bornonduedate, ...
## dbl   (8): child_age_mos, child_birthage, child_weight_pounds, child_weight_o...
## dttm  (1): submit_date
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div id="dates-times" class="section level2 unnumbered">
<h2 class="unnumbered">Dates &amp; times</h2>
<p>To calculate cumulative screening/recruiting calls by site, we have to add an index variable</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb192-2"><a href="#cb192-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(submit_date) <span class="sc">%&gt;%</span></span>
<span id="cb192-3"><a href="#cb192-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">n_calls =</span> <span class="fu">seq_along</span>(submit_date))</span></code></pre></div>
<div id="calls-across-time" class="section level3 unnumbered">
<h3 class="unnumbered">Calls across time</h3>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb193-2"><a href="#cb193-2" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(submit_date), <span class="sc">!</span><span class="fu">is.na</span>(n_calls), <span class="sc">!</span><span class="fu">is.na</span>(site_id)) <span class="sc">%&gt;%</span></span>
<span id="cb193-3"><a href="#cb193-3" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb193-4"><a href="#cb193-4" tabindex="-1"></a>    <span class="fu">aes</span>(submit_date, n_calls, <span class="at">color =</span> site_id) <span class="sc">+</span></span>
<span id="cb193-5"><a href="#cb193-5" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-screening-calls-time-series-1.png" alt="Cumulative screening calls by year and site" width="672" />
<p class="caption">
(#fig:fig-screening-calls-time-series)Cumulative screening calls by year and site
</p>
</div>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" tabindex="-1"></a><span class="fu">plot_call_timeseries</span>(df)</span></code></pre></div>
</div>
<div id="calls-by-site" class="section level3 unnumbered">
<h3 class="unnumbered">Calls by site</h3>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" tabindex="-1"></a>calls_by_site_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb195-2"><a href="#cb195-2" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb195-3"><a href="#cb195-3" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(site_id)) <span class="sc">%&gt;%</span></span>
<span id="cb195-4"><a href="#cb195-4" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb195-5"><a href="#cb195-5" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="fu">fct_infreq</span>(site_id), <span class="at">fill =</span> site_id) <span class="sc">+</span></span>
<span id="cb195-6"><a href="#cb195-6" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb195-7"><a href="#cb195-7" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb195-8"><a href="#cb195-8" tabindex="-1"></a>      <span class="at">angle =</span> <span class="dv">90</span>,</span>
<span id="cb195-9"><a href="#cb195-9" tabindex="-1"></a>      <span class="at">vjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb195-10"><a href="#cb195-10" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="dv">1</span></span>
<span id="cb195-11"><a href="#cb195-11" tabindex="-1"></a>    )) <span class="sc">+</span> <span class="co"># Rotate text</span></span>
<span id="cb195-12"><a href="#cb195-12" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;site&quot;</span>) <span class="sc">+</span></span>
<span id="cb195-13"><a href="#cb195-13" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb195-14"><a href="#cb195-14" tabindex="-1"></a>}</span>
<span id="cb195-15"><a href="#cb195-15" tabindex="-1"></a></span>
<span id="cb195-16"><a href="#cb195-16" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-screening-calls-by-site-1.png" alt="Cumulative screening calls by site" width="672" />
<p class="caption">
(#fig:fig-screening-calls-by-site)Cumulative screening calls by site
</p>
</div>
</div>
</div>
<div id="demographics" class="section level2 unnumbered">
<h2 class="unnumbered">Demographics</h2>
<div id="child-age" class="section level3 unnumbered">
<h3 class="unnumbered">Child age</h3>
<p>Child age in months (<code>child_age_mos</code>) by <code>child_sex</code>.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" tabindex="-1"></a>screen_df <span class="sc">|&gt;</span></span>
<span id="cb196-2"><a href="#cb196-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_age_mos),<span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb196-3"><a href="#cb196-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb196-4"><a href="#cb196-4" tabindex="-1"></a>  <span class="fu">aes</span>(child_age_mos, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb196-5"><a href="#cb196-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-age-hist-screening-1.png" alt="Histogram of child age at time of recruiting call." width="672" />
<p class="caption">
(#fig:fig-age-hist-screening)Histogram of child age at time of recruiting call.
</p>
</div>
<div class="rmdnote">
<p>Some of the code to clean the <code>screen_df</code> variables could be incorporated into an earlier stage of the workflow.</p>
</div>
</div>
</div>
<div id="language" class="section level2 unnumbered">
<h2 class="unnumbered">Language</h2>
<div id="to-child" class="section level3 unnumbered">
<h3 class="unnumbered">To child</h3>
<p>Language(s) spoken to child by <code>child_sex</code>.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb197-2"><a href="#cb197-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">language_spoken_child =</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(language_spoken_child, <span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>),</span>
<span id="cb197-3"><a href="#cb197-3" tabindex="-1"></a>                <span class="at">language_spoken_home =</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(language_spoken_home, <span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>))</span>
<span id="cb197-4"><a href="#cb197-4" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> language_spoken_child,</span>
<span id="cb197-5"><a href="#cb197-5" tabindex="-1"></a>      <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##          language_spoken_child
## child_sex english english_other english_spanish english_spanish_other spanish
##    female     217             2              39                     2      10
##    male       201             4              48                     2       8</code></pre>
</div>
<div id="at-home" class="section level3 unnumbered">
<h3 class="unnumbered">At home</h3>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> language_spoken_home, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##          language_spoken_home
## child_sex english english_other english_spanish english_spanish_other other
##    female     217             2              34                     1     1
##    male       195             2              51                     2     1
##          language_spoken_home
## child_sex spanish
##    female      10
##    male        11</code></pre>
</div>
<div id="to-child-vs.-at-home" class="section level3 unnumbered">
<h3 class="unnumbered">To child vs. at home</h3>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> language_spoken_child <span class="sc">+</span> language_spoken_home, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##                        language_spoken_home
## language_spoken_child   english english_other english_spanish
##   english                   399             1              16
##   english_other               1             3               0
##   english_spanish            11             0              64
##   english_spanish_other       4             0               0
##   spanish                     1             0               5
##                        language_spoken_home
## language_spoken_child   english_spanish_other other spanish
##   english                                   2     0       4
##   english_other                             0     0       0
##   english_spanish                           1     2       5
##   english_spanish_other                     0     0       0
##   spanish                                   0     0      12</code></pre>
</div>
</div>
<div id="child-health" class="section level2 unnumbered">
<h2 class="unnumbered">Child health</h2>
<div id="child-born-on-due-date" class="section level3 unnumbered">
<h3 class="unnumbered">Child born on due date</h3>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_bornonduedate,</span>
<span id="cb203-2"><a href="#cb203-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_bornonduedate
## child_sex  no yes
##    female   7 258
##    male     6 256</code></pre>
<div class="rmdnote">
<p>There are a large number of NAs. Cross-check with the earlier version
of the survey. It’s possible that this question was not asked early-on.</p>
</div>
</div>
<div id="child-weight" class="section level3 unnumbered">
<h3 class="unnumbered">Child weight</h3>
<p>Must convert pounds and ounces to decimal pounds.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">%&gt;%</span></span>
<span id="cb205-2"><a href="#cb205-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(.,</span>
<span id="cb205-3"><a href="#cb205-3" tabindex="-1"></a>                <span class="at">birth_weight_lbs =</span> child_weight_pounds <span class="sc">+</span> child_weight_ounces<span class="sc">/</span><span class="dv">16</span>)</span>
<span id="cb205-4"><a href="#cb205-4" tabindex="-1"></a></span>
<span id="cb205-5"><a href="#cb205-5" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb205-6"><a href="#cb205-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(birth_weight_lbs), <span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb205-7"><a href="#cb205-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(birth_weight_lbs <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb205-8"><a href="#cb205-8" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb205-9"><a href="#cb205-9" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> birth_weight_lbs, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb205-10"><a href="#cb205-10" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.33</span>) <span class="sc">+</span></span>
<span id="cb205-11"><a href="#cb205-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb205-12"><a href="#cb205-12" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="include/img/fig-birthwt-hist-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="birth-complications" class="section level3 unnumbered">
<h3 class="unnumbered">Birth complications</h3>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_birth_complications,</span>
<span id="cb206-2"><a href="#cb206-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_birth_complications
## child_sex  no yes
##    female 240  23
##    male   234  25</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" tabindex="-1"></a>screen_df <span class="sc">|&gt;</span></span>
<span id="cb208-2"><a href="#cb208-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_birth_complications_specify)) <span class="sc">|&gt;</span></span>
<span id="cb208-3"><a href="#cb208-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(child_age_mos, child_sex, child_birth_complications_specify) <span class="sc">|&gt;</span></span>
<span id="cb208-4"><a href="#cb208-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(child_age_mos) <span class="sc">|&gt;</span></span>
<span id="cb208-5"><a href="#cb208-5" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
child_age_mos
</th>
<th style="text-align:left;">
child_sex
</th>
<th style="text-align:left;">
child_birth_complications_specify
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
11.40697
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Respiratory distress, CPAP for a few hours.
</td>
</tr>
<tr>
<td style="text-align:right;">
11.40697
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Charlotte was breech and had to be turned. No complications arose.
</td>
</tr>
<tr>
<td style="text-align:right;">
11.57133
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Had elevated respiratory rate after birth and was on CPAP for 10 hours; 5 days spent in the NICU; no disability/delays/impairments resulted from this
</td>
</tr>
<tr>
<td style="text-align:right;">
11.63708
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Mom was induced because baby had oligohydrosis, also born face up, hypospadias
</td>
</tr>
<tr>
<td style="text-align:right;">
11.80145
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Breached
</td>
</tr>
<tr>
<td style="text-align:right;">
11.83432
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
He had a right testicle hydrocele, but it resolved on its own. No current complications from this.
</td>
</tr>
<tr>
<td style="text-align:right;">
12.03156
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Mother had a second degree tear, Rylie’s heart rate declined later during birth and mother had to do a purple birth, Rylie inhaled meconium and child was put on antibiotics. Mother and child stayed at hospital until day 5. There were temporary respiratory side effects but these went away with antibiotics.
</td>
</tr>
<tr>
<td style="text-align:right;">
12.13018
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Mom explained that there was an issue with meconium during birth and NICU team visited, but everything was alright
</td>
</tr>
<tr>
<td style="text-align:right;">
12.35892
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
episiotomy, mom hemorrhage after birth, baby didn’t urinate first few days
</td>
</tr>
<tr>
<td style="text-align:right;">
12.45891
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Cord was wrapped around the child’s neck. Child had fluid in stomach and lungs when born. Child was transferred to the NICU for 4-5 days for oxygen and antibiotics. He improved as doctors expected.
</td>
</tr>
<tr>
<td style="text-align:right;">
12.52465
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Umbilical cord was wrapped around the baby’s neck - resolved
</td>
</tr>
<tr>
<td style="text-align:right;">
12.68902
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Jaundice and apnea, hospital acquired infaction - all good now
</td>
</tr>
<tr>
<td style="text-align:right;">
12.75477
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Born with Erb’s palsy, hasn’t been to therapy since February and is currently using both arms and hands
</td>
</tr>
<tr>
<td style="text-align:right;">
13.02186
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Respiratory failure sepsis. Baby was in NICU for 1 week. Resolved.
</td>
</tr>
<tr>
<td style="text-align:right;">
15.91195
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Newborn Complication resulted in NICU for 5 days due to apnea and low blood glucose but did not result in any disabilities or long term health concerns.
</td>
</tr>
<tr>
<td style="text-align:right;">
16.46806
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
He experienced jaundice and a heart murmur at birth but did not have any long term effects result from this.
</td>
</tr>
<tr>
<td style="text-align:right;">
16.66804
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Breached
</td>
</tr>
<tr>
<td style="text-align:right;">
16.99403
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
jaundice
</td>
</tr>
<tr>
<td style="text-align:right;">
17.42275
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Needed Oxygen at birth, but never needed to see a specialist and did not have any adverse outcomes
</td>
</tr>
<tr>
<td style="text-align:right;">
17.71998
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Admitted to NICU for neumothroax
</td>
</tr>
<tr>
<td style="text-align:right;">
17.78572
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
He was on CPAP after birth due to mother’s preeclampsia
</td>
</tr>
<tr>
<td style="text-align:right;">
17.81860
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Mother had gestational diabetes, so they watched AVI for a bit longer in the NICU.
</td>
</tr>
<tr>
<td style="text-align:right;">
17.91448
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
his shoulders got stuck when giving birth, that is why mom had to be induced. mom and baby are perfectly fine
</td>
</tr>
<tr>
<td style="text-align:right;">
18.21307
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
No sabía respirar
</td>
</tr>
<tr>
<td style="text-align:right;">
18.27608
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Different blood type from mother, at risk of jaundice
</td>
</tr>
<tr>
<td style="text-align:right;">
18.41031
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
low blood sugar, jaundice, in NICU for 2 days
</td>
</tr>
<tr>
<td style="text-align:right;">
18.70617
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Preeclampsia, mother induced, child was a little jaundiced
</td>
</tr>
<tr>
<td style="text-align:right;">
18.73630
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
He was perfectly fine, he just didn’t come so they had to do a C-section, other than that there were no complications.
</td>
</tr>
<tr>
<td style="text-align:right;">
19.03901
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
meconium in lungs, in the nicu 3-4 days
</td>
</tr>
<tr>
<td style="text-align:right;">
19.59374
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Jaundice and low blood sugar: NICU for 2 days
</td>
</tr>
<tr>
<td style="text-align:right;">
20.61007
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
She had a Nicu stay, where she was having seizures in the first 3 days and was put on medication until 4 months, but has been clear since then for anything neurological
</td>
</tr>
<tr>
<td style="text-align:right;">
22.71532
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
minor respiratory distress led to short NICU stay
</td>
</tr>
<tr>
<td style="text-align:right;">
22.84681
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
OMIT (breathing) - did not result in any vision, hearing or motor disability
</td>
</tr>
<tr>
<td style="text-align:right;">
23.01118
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
NICU for 4 days but everything was fine and the doctors were just keeping him as a precaution
</td>
</tr>
<tr>
<td style="text-align:right;">
23.37278
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
when she was born she had some seizures, but she is okay now– was on medication until 4 months of age– all follow ups have been clear
</td>
</tr>
<tr>
<td style="text-align:right;">
23.66864
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
She was breach, they went in to try and turn her around, her heart rate was slow so they had to do an emergency c-section.
</td>
</tr>
<tr>
<td style="text-align:right;">
23.66864
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Annie had some liquid in her lungs and they kept her in NICU for three days.
</td>
</tr>
<tr>
<td style="text-align:right;">
23.66864
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
HIE, Oxygen Deprived during birth— nothing resulted in a long term disability
</td>
</tr>
<tr>
<td style="text-align:right;">
23.66864
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Breech, born via C-section
</td>
</tr>
<tr>
<td style="text-align:right;">
23.80013
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Different blood type from mother, at risk of jaundice
</td>
</tr>
<tr>
<td style="text-align:right;">
23.96450
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Excess Amniotic Fluid - Resolved
</td>
</tr>
<tr>
<td style="text-align:right;">
24.03024
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
heart surgery at birth
</td>
</tr>
<tr>
<td style="text-align:right;">
24.12886
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
rapid heartbeat; possible meconium aspiration
</td>
</tr>
<tr>
<td style="text-align:right;">
24.17269
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
breech
</td>
</tr>
<tr>
<td style="text-align:right;">
24.32610
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Swallowed some amniotic fluid, but no long-term complications
</td>
</tr>
<tr>
<td style="text-align:right;">
25.08218
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
mom had preeclampsia
</td>
</tr>
<tr>
<td style="text-align:right;">
25.14656
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Jaundice
</td>
</tr>
<tr>
<td style="text-align:right;">
26.66009
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Breech, born via C-section
</td>
</tr>
</tbody>
</table>
</div>
<div id="major-illnesses-or-injuries" class="section level3 unnumbered">
<h3 class="unnumbered">Major illnesses or injuries</h3>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_major_illnesses_injuries,</span>
<span id="cb209-2"><a href="#cb209-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_major_illnesses_injuries
## child_sex  no yes
##    female 253   9
##    male   247  12</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" tabindex="-1"></a>screen_df <span class="sc">|&gt;</span></span>
<span id="cb211-2"><a href="#cb211-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_illnesses_injuries_specify),</span>
<span id="cb211-3"><a href="#cb211-3" tabindex="-1"></a>                <span class="sc">!</span>stringr<span class="sc">::</span><span class="fu">str_detect</span>(child_illnesses_injuries_specify, <span class="st">&quot;OK&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb211-4"><a href="#cb211-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(child_age_mos, child_sex, child_illnesses_injuries_specify) <span class="sc">|&gt;</span></span>
<span id="cb211-5"><a href="#cb211-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(child_age_mos) <span class="sc">|&gt;</span></span>
<span id="cb211-6"><a href="#cb211-6" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
child_age_mos
</th>
<th style="text-align:left;">
child_sex
</th>
<th style="text-align:left;">
child_illnesses_injuries_specify
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
11.40697
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
COVID in January, no later complications.
</td>
</tr>
<tr>
<td style="text-align:right;">
11.63708
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
RSV
</td>
</tr>
<tr>
<td style="text-align:right;">
11.70420
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Croup (upper airway infection)
</td>
</tr>
<tr>
<td style="text-align:right;">
11.86719
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
RSV when she 3 months; was in hospital for 2 nights
</td>
</tr>
<tr>
<td style="text-align:right;">
12.68902
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
fractured wrist when she was 9 months
</td>
</tr>
<tr>
<td style="text-align:right;">
12.73285
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
He had Covid once.
</td>
</tr>
<tr>
<td style="text-align:right;">
12.76162
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
RSV when 10 weeks old, hospitalized for 1 week
</td>
</tr>
<tr>
<td style="text-align:right;">
13.01775
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Covid in December but this did NOT result in a visual, auditory, motor, or cognitive disability according to mom
</td>
</tr>
<tr>
<td style="text-align:right;">
13.02186
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Respiratory failure and sepsis after birth that was resolved
</td>
</tr>
<tr>
<td style="text-align:right;">
16.17494
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Child had a fall but she was fine.
</td>
</tr>
<tr>
<td style="text-align:right;">
18.04597
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
broke leg in April - all healed now. slide accident, she was 16 months. in a cast for three weeks, and then a week phantom limping.
</td>
</tr>
<tr>
<td style="text-align:right;">
18.67330
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
tibial stress factor
</td>
</tr>
<tr>
<td style="text-align:right;">
18.77055
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Child had COVID twice (fever, etc.)
</td>
</tr>
<tr>
<td style="text-align:right;">
20.67856
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Anaphylactic reaction to peanuts
</td>
</tr>
<tr>
<td style="text-align:right;">
23.01118
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
He had RSV then COVID around 13-14 months old, but they were both very mild. No complications arose from either.
</td>
</tr>
<tr>
<td style="text-align:right;">
23.54400
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Sick quite a bit after her first year, low immunity; three seizures associated with fevers
</td>
</tr>
<tr>
<td style="text-align:right;">
24.03024
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
had COVID at 7 months
</td>
</tr>
<tr>
<td style="text-align:right;">
24.91782
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
She had COVID, and when she was little had an cardiac issue (her heart was "working" too hard) but she was okay soon after (this was first 2-3 months after birth). March of 2021 she had fully recovered from this, and received treatment
</td>
</tr>
<tr>
<td style="text-align:right;">
26.76008
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Has had a fall, was a concussion but not diagnosed with any disabilities
</td>
</tr>
<tr>
<td style="text-align:right;">
32.67724
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Pneumonia at 5 months
</td>
</tr>
</tbody>
</table>
</div>
<div id="child-vision" class="section level3 unnumbered">
<h3 class="unnumbered">Child vision</h3>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_vision_disabilities,</span>
<span id="cb212-2"><a href="#cb212-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_vision_disabilities
## child_sex  no yes
##    female 263   0
##    male   257   2</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" tabindex="-1"></a>screen_df <span class="sc">|&gt;</span></span>
<span id="cb214-2"><a href="#cb214-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_vision_disabilities_specify)) <span class="sc">|&gt;</span></span>
<span id="cb214-3"><a href="#cb214-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(child_age_mos, child_sex, child_vision_disabilities_specify) <span class="sc">|&gt;</span></span>
<span id="cb214-4"><a href="#cb214-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(child_age_mos) <span class="sc">|&gt;</span></span>
<span id="cb214-5"><a href="#cb214-5" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
child_age_mos
</th>
<th style="text-align:left;">
child_sex
</th>
<th style="text-align:left;">
child_vision_disabilities_specify
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
23.60974
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
intermittent alternating extrotropia, hyperopiia bilateral, ampliopia
</td>
</tr>
<tr>
<td style="text-align:right;">
24.03024
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
lazy eye but corrected
</td>
</tr>
</tbody>
</table>
</div>
<div id="child-hearing" class="section level3 unnumbered">
<h3 class="unnumbered">Child hearing</h3>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_hearing_disabilities,</span>
<span id="cb215-2"><a href="#cb215-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_hearing_disabilities
## child_sex  no yes
##    female 263   0
##    male   257   2</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" tabindex="-1"></a>screen_df <span class="sc">|&gt;</span></span>
<span id="cb217-2"><a href="#cb217-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_hearing_disabilities_specify)) <span class="sc">|&gt;</span></span>
<span id="cb217-3"><a href="#cb217-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(child_age_mos, child_sex, child_hearing_disabilities_specify) <span class="sc">|&gt;</span></span>
<span id="cb217-4"><a href="#cb217-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(child_age_mos) <span class="sc">|&gt;</span></span>
<span id="cb217-5"><a href="#cb217-5" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
child_age_mos
</th>
<th style="text-align:left;">
child_sex
</th>
<th style="text-align:left;">
child_hearing_disabilities_specify
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
16.89541
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Failed hearing screenings - concerns about his speech and doctor recommended ruling out hearing issues. Failed first hearing test on 5/10/23 and failed another on 5/19/23. Think it might be related to unresolved ear infection.
</td>
</tr>
<tr>
<td style="text-align:right;">
32.67724
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Temporary hearing loss so tubes in his ears, one still remaining
</td>
</tr>
</tbody>
</table>
</div>
<div id="child-developmental-delays" class="section level3 unnumbered">
<h3 class="unnumbered">Child developmental delays</h3>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_developmentaldelays,</span>
<span id="cb218-2"><a href="#cb218-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_developmentaldelays
## child_sex  no yes
##    female 182   3
##    male   180   6</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" tabindex="-1"></a>screen_df <span class="sc">|&gt;</span></span>
<span id="cb220-2"><a href="#cb220-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_developmentaldelays_specify)) <span class="sc">|&gt;</span></span>
<span id="cb220-3"><a href="#cb220-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(child_age_mos, child_sex, child_developmentaldelays_specify) <span class="sc">|&gt;</span></span>
<span id="cb220-4"><a href="#cb220-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(child_age_mos) <span class="sc">|&gt;</span></span>
<span id="cb220-5"><a href="#cb220-5" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
child_age_mos
</th>
<th style="text-align:left;">
child_sex
</th>
<th style="text-align:left;">
child_developmentaldelays_specify
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
16.89541
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
He is seeing a hearing specialist for some worries about hearing delays. Doctor is visiting Jack in the home every 2 weeks.
</td>
</tr>
<tr>
<td style="text-align:right;">
16.99403
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
motor delay
</td>
</tr>
<tr>
<td style="text-align:right;">
18.77055
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Lead poisoning
</td>
</tr>
<tr>
<td style="text-align:right;">
20.67719
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Gross motor delay around 10 months; they enrolled in services and after PT, they recovered in 2 months
</td>
</tr>
<tr>
<td style="text-align:right;">
24.03024
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
speech therapist for lisp
</td>
</tr>
<tr>
<td style="text-align:right;">
24.52334
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Recently referred to see a speech therapist but hasn’t been diagnosed
</td>
</tr>
<tr>
<td style="text-align:right;">
24.55621
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Torticollis, treated with physical therapy and issue was resolved
</td>
</tr>
<tr>
<td style="text-align:right;">
24.91782
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
Was in early intervention because of the cardiac issue (she said any baby with this condition qualifies for it– gross motor skills at the time were behind) but she is caught up now.
</td>
</tr>
<tr>
<td style="text-align:right;">
28.99545
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
Speech Delay
</td>
</tr>
</tbody>
</table>
</div>
<div id="child-sleep" class="section level3 unnumbered">
<h3 class="unnumbered">Child sleep</h3>
<div class="rmdimportant">
<p>This is work yet-to-be-done. The time stamps need to be reformatted prior to
visualization.</p>
</div>
<div id="bed-time" class="section level4 unnumbered">
<h4 class="unnumbered">Bed time</h4>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" tabindex="-1"></a>extract_sleep_hr <span class="ot">&lt;-</span> <span class="cf">function</span>(t) {</span>
<span id="cb221-2"><a href="#cb221-2" tabindex="-1"></a>  t <span class="sc">|&gt;</span></span>
<span id="cb221-3"><a href="#cb221-3" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_extract</span>(<span class="st">&quot;^[0-9]{2}</span><span class="sc">\\</span><span class="st">:[0-9]{2}</span><span class="sc">\\</span><span class="st">:[0-9]{2}&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb221-4"><a href="#cb221-4" tabindex="-1"></a>    hms<span class="sc">::</span><span class="fu">as_hms</span>()</span>
<span id="cb221-5"><a href="#cb221-5" tabindex="-1"></a>}</span>
<span id="cb221-6"><a href="#cb221-6" tabindex="-1"></a></span>
<span id="cb221-7"><a href="#cb221-7" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb221-8"><a href="#cb221-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">child_sleep_time =</span> <span class="fu">extract_sleep_hr</span>(child_sleep_time)) <span class="sc">|&gt;</span></span>
<span id="cb221-9"><a href="#cb221-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_sleep_time)) </span>
<span id="cb221-10"><a href="#cb221-10" tabindex="-1"></a></span>
<span id="cb221-11"><a href="#cb221-11" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb221-12"><a href="#cb221-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_sleep_time),</span>
<span id="cb221-13"><a href="#cb221-13" tabindex="-1"></a>                <span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb221-14"><a href="#cb221-14" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb221-15"><a href="#cb221-15" tabindex="-1"></a>  <span class="fu">aes</span>(child_sleep_time, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb221-16"><a href="#cb221-16" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb221-17"><a href="#cb221-17" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb221-18"><a href="#cb221-18" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="include/img/fig-bed-time-hist-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Some of the bed times are probably not in correct 24 hr time.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb222-2"><a href="#cb222-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(child_sleep_time <span class="sc">&lt;</span> hms<span class="sc">::</span><span class="fu">as_hms</span>(<span class="st">&quot;16:00:00&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb222-3"><a href="#cb222-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, subject_number, child_sleep_time) <span class="sc">|&gt;</span></span>
<span id="cb222-4"><a href="#cb222-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(site_id, subject_number) <span class="sc">|&gt;</span></span>
<span id="cb222-5"><a href="#cb222-5" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:left;">
child_sleep_time
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
CSUFL
</td>
<td style="text-align:left;">
013
</td>
<td style="text-align:left;">
07:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
CSULB
</td>
<td style="text-align:left;">
006
</td>
<td style="text-align:left;">
07:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
INDNA
</td>
<td style="text-align:left;">
004
</td>
<td style="text-align:left;">
09:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
INDNA
</td>
<td style="text-align:left;">
006
</td>
<td style="text-align:left;">
07:45:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
002
</td>
<td style="text-align:left;">
10:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
12:15:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
018
</td>
<td style="text-align:left;">
07:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PURDU
</td>
<td style="text-align:left;">
020
</td>
<td style="text-align:left;">
08:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PURDU
</td>
<td style="text-align:left;">
021
</td>
<td style="text-align:left;">
11:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UCSCR
</td>
<td style="text-align:left;">
011
</td>
<td style="text-align:left;">
07:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UGEOR
</td>
<td style="text-align:left;">
016
</td>
<td style="text-align:left;">
07:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UMIAM
</td>
<td style="text-align:left;">
008
</td>
<td style="text-align:left;">
05:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
023
</td>
<td style="text-align:left;">
08:00:00
</td>
</tr>
</tbody>
</table>
</div>
<div id="wake-time" class="section level4 unnumbered">
<h4 class="unnumbered">Wake time</h4>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb223-2"><a href="#cb223-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">child_wake_time =</span> <span class="fu">extract_sleep_hr</span>(child_wake_time)) <span class="sc">|&gt;</span></span>
<span id="cb223-3"><a href="#cb223-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_wake_time)) </span>
<span id="cb223-4"><a href="#cb223-4" tabindex="-1"></a></span>
<span id="cb223-5"><a href="#cb223-5" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb223-6"><a href="#cb223-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_wake_time),</span>
<span id="cb223-7"><a href="#cb223-7" tabindex="-1"></a>                <span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb223-8"><a href="#cb223-8" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb223-9"><a href="#cb223-9" tabindex="-1"></a>  <span class="fu">aes</span>(child_wake_time, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb223-10"><a href="#cb223-10" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb223-11"><a href="#cb223-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb223-12"><a href="#cb223-12" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="include/img/fig-wake-time-hist-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>There are some unusual wake times, too.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb224-2"><a href="#cb224-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(child_wake_time <span class="sc">&gt;</span> hms<span class="sc">::</span><span class="fu">as_hms</span>(<span class="st">&quot;16:00:00&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb224-3"><a href="#cb224-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, subject_number, child_wake_time) <span class="sc">|&gt;</span></span>
<span id="cb224-4"><a href="#cb224-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(site_id, subject_number) <span class="sc">|&gt;</span></span>
<span id="cb224-5"><a href="#cb224-5" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:left;">
child_wake_time
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
BOSTU
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
19:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
CHOPH
</td>
<td style="text-align:left;">
017
</td>
<td style="text-align:left;">
19:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
GEORG
</td>
<td style="text-align:left;">
026
</td>
<td style="text-align:left;">
19:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
NYUNI
</td>
<td style="text-align:left;">
999
</td>
<td style="text-align:left;">
17:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
004
</td>
<td style="text-align:left;">
18:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
009
</td>
<td style="text-align:left;">
18:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
012
</td>
<td style="text-align:left;">
19:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
013
</td>
<td style="text-align:left;">
18:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
014
</td>
<td style="text-align:left;">
18:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
018
</td>
<td style="text-align:left;">
18:45:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
019
</td>
<td style="text-align:left;">
19:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
021
</td>
<td style="text-align:left;">
19:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
029
</td>
<td style="text-align:left;">
19:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
031
</td>
<td style="text-align:left;">
19:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
035
</td>
<td style="text-align:left;">
19:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
062
</td>
<td style="text-align:left;">
18:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
015
</td>
<td style="text-align:left;">
19:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
018
</td>
<td style="text-align:left;">
19:45:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PURDU
</td>
<td style="text-align:left;">
020
</td>
<td style="text-align:left;">
21:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PURDU
</td>
<td style="text-align:left;">
021
</td>
<td style="text-align:left;">
23:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
PURDU
</td>
<td style="text-align:left;">
023
</td>
<td style="text-align:left;">
23:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UCRIV
</td>
<td style="text-align:left;">
007
</td>
<td style="text-align:left;">
18:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UCSCR
</td>
<td style="text-align:left;">
035
</td>
<td style="text-align:left;">
18:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UGEOR
</td>
<td style="text-align:left;">
002
</td>
<td style="text-align:left;">
19:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UHOUS
</td>
<td style="text-align:left;">
014
</td>
<td style="text-align:left;">
19:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UMIAM
</td>
<td style="text-align:left;">
008
</td>
<td style="text-align:left;">
20:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UMIAM
</td>
<td style="text-align:left;">
013
</td>
<td style="text-align:left;">
20:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
013
</td>
<td style="text-align:left;">
18:00:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
020
</td>
<td style="text-align:left;">
18:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
040
</td>
<td style="text-align:left;">
19:00:00
</td>
</tr>
</tbody>
</table>
</div>
<div id="sleep-duration" class="section level4 unnumbered">
<h4 class="unnumbered">Sleep duration</h4>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb225-2"><a href="#cb225-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">child_sleep_time =</span> <span class="fu">extract_sleep_hr</span>(child_sleep_time),</span>
<span id="cb225-3"><a href="#cb225-3" tabindex="-1"></a>                  <span class="at">child_wake_time =</span> <span class="fu">extract_sleep_hr</span>(child_wake_time)) <span class="sc">|&gt;</span></span>
<span id="cb225-4"><a href="#cb225-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_sleep_time),</span>
<span id="cb225-5"><a href="#cb225-5" tabindex="-1"></a>                <span class="sc">!</span><span class="fu">is.na</span>(child_wake_time)) <span class="sc">|&gt;</span></span>
<span id="cb225-6"><a href="#cb225-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">child_sleep_secs =</span> (child_sleep_time <span class="sc">-</span> child_wake_time))</span>
<span id="cb225-7"><a href="#cb225-7" tabindex="-1"></a></span>
<span id="cb225-8"><a href="#cb225-8" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb225-9"><a href="#cb225-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_sleep_secs)) <span class="sc">|&gt;</span></span>
<span id="cb225-10"><a href="#cb225-10" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb225-11"><a href="#cb225-11" tabindex="-1"></a>  <span class="fu">aes</span>(child_sleep_secs, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb225-12"><a href="#cb225-12" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb225-13"><a href="#cb225-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb225-14"><a href="#cb225-14" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<pre><code>## Don&#39;t know how to automatically pick scale for object of type &lt;difftime&gt;.
## Defaulting to continuous.</code></pre>
<p><img src="include/img/fig-sleep-dur-hist-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Again, there are some unusual values.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb227-2"><a href="#cb227-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(child_sleep_secs <span class="sc">&lt;</span> <span class="dv">12000</span>) <span class="sc">|&gt;</span></span>
<span id="cb227-3"><a href="#cb227-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, subject_number, child_sleep_time, child_wake_time, child_sleep_secs) <span class="sc">|&gt;</span></span>
<span id="cb227-4"><a href="#cb227-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(site_id, subject_number) <span class="sc">|&gt;</span></span>
<span id="cb227-5"><a href="#cb227-5" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:left;">
child_sleep_time
</th>
<th style="text-align:left;">
child_wake_time
</th>
<th style="text-align:left;">
child_sleep_secs
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
BOSTU
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
0 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
CHOPH
</td>
<td style="text-align:left;">
017
</td>
<td style="text-align:left;">
20:45:00
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
4500 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
CSUFL
</td>
<td style="text-align:left;">
013
</td>
<td style="text-align:left;">
07:00:00
</td>
<td style="text-align:left;">
06:00:00
</td>
<td style="text-align:left;">
3600 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
CSULB
</td>
<td style="text-align:left;">
006
</td>
<td style="text-align:left;">
07:30:00
</td>
<td style="text-align:left;">
07:30:00
</td>
<td style="text-align:left;">
0 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
GEORG
</td>
<td style="text-align:left;">
026
</td>
<td style="text-align:left;">
19:45:00
</td>
<td style="text-align:left;">
19:00:00
</td>
<td style="text-align:left;">
2700 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
INDNA
</td>
<td style="text-align:left;">
004
</td>
<td style="text-align:left;">
09:00:00
</td>
<td style="text-align:left;">
08:00:00
</td>
<td style="text-align:left;">
3600 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
INDNA
</td>
<td style="text-align:left;">
006
</td>
<td style="text-align:left;">
07:45:00
</td>
<td style="text-align:left;">
06:30:00
</td>
<td style="text-align:left;">
4500 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
NYUNI
</td>
<td style="text-align:left;">
999
</td>
<td style="text-align:left;">
17:00:00
</td>
<td style="text-align:left;">
17:00:00
</td>
<td style="text-align:left;">
0 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
002
</td>
<td style="text-align:left;">
10:00:00
</td>
<td style="text-align:left;">
08:00:00
</td>
<td style="text-align:left;">
7200 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
004
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
18:30:00
</td>
<td style="text-align:left;">
5400 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
009
</td>
<td style="text-align:left;">
18:30:00
</td>
<td style="text-align:left;">
18:30:00
</td>
<td style="text-align:left;">
0 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
012
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
1800 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
013
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
18:30:00
</td>
<td style="text-align:left;">
3600 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
014
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
18:30:00
</td>
<td style="text-align:left;">
5400 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
018
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
18:45:00
</td>
<td style="text-align:left;">
4500 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
019
</td>
<td style="text-align:left;">
20:30:00
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
3600 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
021
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
1800 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
029
</td>
<td style="text-align:left;">
20:45:00
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
4500 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
031
</td>
<td style="text-align:left;">
20:30:00
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
3600 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
035
</td>
<td style="text-align:left;">
20:30:00
</td>
<td style="text-align:left;">
19:00:00
</td>
<td style="text-align:left;">
5400 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
OHIOS
</td>
<td style="text-align:left;">
062
</td>
<td style="text-align:left;">
20:30:00
</td>
<td style="text-align:left;">
18:30:00
</td>
<td style="text-align:left;">
7200 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
015
</td>
<td style="text-align:left;">
19:00:00
</td>
<td style="text-align:left;">
19:00:00
</td>
<td style="text-align:left;">
0 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
018
</td>
<td style="text-align:left;">
07:30:00
</td>
<td style="text-align:left;">
19:45:00
</td>
<td style="text-align:left;">
-44100 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
PURDU
</td>
<td style="text-align:left;">
020
</td>
<td style="text-align:left;">
08:30:00
</td>
<td style="text-align:left;">
21:30:00
</td>
<td style="text-align:left;">
-46800 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
PURDU
</td>
<td style="text-align:left;">
021
</td>
<td style="text-align:left;">
11:30:00
</td>
<td style="text-align:left;">
23:30:00
</td>
<td style="text-align:left;">
-43200 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
PURDU
</td>
<td style="text-align:left;">
023
</td>
<td style="text-align:left;">
22:30:00
</td>
<td style="text-align:left;">
23:00:00
</td>
<td style="text-align:left;">
-1800 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UCRIV
</td>
<td style="text-align:left;">
007
</td>
<td style="text-align:left;">
21:00:00
</td>
<td style="text-align:left;">
18:00:00
</td>
<td style="text-align:left;">
10800 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UCSCR
</td>
<td style="text-align:left;">
011
</td>
<td style="text-align:left;">
07:30:00
</td>
<td style="text-align:left;">
06:30:00
</td>
<td style="text-align:left;">
3600 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UCSCR
</td>
<td style="text-align:left;">
035
</td>
<td style="text-align:left;">
20:45:00
</td>
<td style="text-align:left;">
18:30:00
</td>
<td style="text-align:left;">
8100 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UGEOR
</td>
<td style="text-align:left;">
002
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
1800 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UGEOR
</td>
<td style="text-align:left;">
016
</td>
<td style="text-align:left;">
07:30:00
</td>
<td style="text-align:left;">
08:00:00
</td>
<td style="text-align:left;">
-1800 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UHOUS
</td>
<td style="text-align:left;">
014
</td>
<td style="text-align:left;">
19:00:00
</td>
<td style="text-align:left;">
19:00:00
</td>
<td style="text-align:left;">
0 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UMIAM
</td>
<td style="text-align:left;">
008
</td>
<td style="text-align:left;">
05:30:00
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
-52200 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UMIAM
</td>
<td style="text-align:left;">
013
</td>
<td style="text-align:left;">
21:00:00
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
3600 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
013
</td>
<td style="text-align:left;">
19:30:00
</td>
<td style="text-align:left;">
18:00:00
</td>
<td style="text-align:left;">
5400 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
020
</td>
<td style="text-align:left;">
20:00:00
</td>
<td style="text-align:left;">
18:30:00
</td>
<td style="text-align:left;">
5400 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
023
</td>
<td style="text-align:left;">
08:00:00
</td>
<td style="text-align:left;">
07:00:00
</td>
<td style="text-align:left;">
3600 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
040
</td>
<td style="text-align:left;">
19:00:00
</td>
<td style="text-align:left;">
19:00:00
</td>
<td style="text-align:left;">
0 secs
</td>
</tr>
</tbody>
</table>
</div>
<div id="nap-hours" class="section level4 unnumbered">
<h4 class="unnumbered">Nap hours</h4>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb228-2"><a href="#cb228-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">child_nap_hours =</span> <span class="fu">as.numeric</span>(child_nap_hours)) <span class="sc">|&gt;</span></span>
<span id="cb228-3"><a href="#cb228-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_sleep_time)) </span></code></pre></div>
<pre><code>## Warning: There was 1 warning in `dplyr::mutate()`.
## ℹ In argument: `child_nap_hours = as.numeric(child_nap_hours)`.
## Caused by warning:
## ! NAs introduced by coercion</code></pre>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb230-2"><a href="#cb230-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(child_nap_hours),</span>
<span id="cb230-3"><a href="#cb230-3" tabindex="-1"></a>                <span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb230-4"><a href="#cb230-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb230-5"><a href="#cb230-5" tabindex="-1"></a>  <span class="fu">aes</span>(child_nap_hours, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb230-6"><a href="#cb230-6" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb230-7"><a href="#cb230-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb230-8"><a href="#cb230-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="include/img/fig-nap-hrs-hist-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>And there are some very long nappers or null values we need to capture.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb231-2"><a href="#cb231-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(child_nap_hours <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb231-3"><a href="#cb231-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, subject_number, child_nap_hours) <span class="sc">|&gt;</span></span>
<span id="cb231-4"><a href="#cb231-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(site_id, subject_number) <span class="sc">|&gt;</span></span>
<span id="cb231-5"><a href="#cb231-5" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
child_nap_hours
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
UMIAM
</td>
<td style="text-align:left;">
003
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
UTAUS
</td>
<td style="text-align:left;">
009
</td>
<td style="text-align:right;">
6
</td>
</tr>
</tbody>
</table>
</div>
<div id="sleep-location" class="section level4 unnumbered">
<h4 class="unnumbered">Sleep location</h4>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_sleep_location,</span>
<span id="cb232-2"><a href="#cb232-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
</div>
</div>
</div>
<div id="mother" class="section level2 unnumbered">
<h2 class="unnumbered">Mother</h2>
<div id="biological-or-adoptive" class="section level3 unnumbered">
<h3 class="unnumbered">Biological or adoptive</h3>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> mom_bio,</span>
<span id="cb233-2"><a href="#cb233-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          mom_bio
## child_sex no_adoptive no_partnerchild yes
##    female           0               1 247
##    male             1               0 251</code></pre>
</div>
<div id="age-at-childbirth" class="section level3 unnumbered">
<h3 class="unnumbered">Age at childbirth</h3>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" tabindex="-1"></a>screen_df <span class="sc">|&gt;</span></span>
<span id="cb235-2"><a href="#cb235-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mom_childbirth_age), <span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb235-3"><a href="#cb235-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb235-4"><a href="#cb235-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> mom_childbirth_age, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb235-5"><a href="#cb235-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb235-6"><a href="#cb235-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb235-7"><a href="#cb235-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="include/img/fig-mom-age-childbirth-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Clearly, there are some impossible (erroneous) maternal ages &gt; 100. Here are details:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" tabindex="-1"></a>old_moms <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb236-2"><a href="#cb236-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(mom_childbirth_age <span class="sc">&gt;</span> <span class="dv">55</span>)</span>
<span id="cb236-3"><a href="#cb236-3" tabindex="-1"></a></span>
<span id="cb236-4"><a href="#cb236-4" tabindex="-1"></a>old_moms <span class="sc">|&gt;</span></span>
<span id="cb236-5"><a href="#cb236-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(submit_date, site_id, subject_number, mom_childbirth_age) <span class="sc">|&gt;</span></span>
<span id="cb236-6"><a href="#cb236-6" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
submit_date
</th>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
mom_childbirth_age
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2020-02-25 17:33:28
</td>
<td style="text-align:left;">
GEORG
</td>
<td style="text-align:left;">
007
</td>
<td style="text-align:right;">
118.92
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-25 17:58:45
</td>
<td style="text-align:left;">
GEORG
</td>
<td style="text-align:left;">
006
</td>
<td style="text-align:right;">
118.01
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-07-07 15:03:20
</td>
<td style="text-align:left;">
VBLTU
</td>
<td style="text-align:left;">
005
</td>
<td style="text-align:right;">
121.22
</td>
</tr>
</tbody>
</table>
</div>
<div id="birth-country" class="section level3 unnumbered">
<h3 class="unnumbered">Birth country</h3>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb237-2"><a href="#cb237-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">mom_birth_country =</span> dplyr<span class="sc">::</span><span class="fu">recode</span>(</span>
<span id="cb237-3"><a href="#cb237-3" tabindex="-1"></a>    mom_birth_country, </span>
<span id="cb237-4"><a href="#cb237-4" tabindex="-1"></a>    <span class="at">unitedstates =</span> <span class="st">&quot;US&quot;</span>,</span>
<span id="cb237-5"><a href="#cb237-5" tabindex="-1"></a>    <span class="at">united_states =</span> <span class="st">&quot;US&quot;</span>,</span>
<span id="cb237-6"><a href="#cb237-6" tabindex="-1"></a>    <span class="at">othercountry =</span> <span class="st">&quot;Other&quot;</span>,</span>
<span id="cb237-7"><a href="#cb237-7" tabindex="-1"></a>    <span class="at">other_country =</span> <span class="st">&quot;Other&quot;</span>,</span>
<span id="cb237-8"><a href="#cb237-8" tabindex="-1"></a>    <span class="at">refused =</span> <span class="st">&quot;Refused&quot;</span></span>
<span id="cb237-9"><a href="#cb237-9" tabindex="-1"></a>  ))</span>
<span id="cb237-10"><a href="#cb237-10" tabindex="-1"></a></span>
<span id="cb237-11"><a href="#cb237-11" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> mom_birth_country, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>## mom_birth_country
##      Other puertorico    Refused         US 
##         65          1          1        452</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb239-2"><a href="#cb239-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">mom_birth_country_specify =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(mom_birth_country_specify)) <span class="sc">|&gt;</span></span>
<span id="cb239-3"><a href="#cb239-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mom_birth_country_specify)) <span class="sc">|&gt;</span></span>
<span id="cb239-4"><a href="#cb239-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(child_sex, mom_birth_country_specify)</span>
<span id="cb239-5"><a href="#cb239-5" tabindex="-1"></a></span>
<span id="cb239-6"><a href="#cb239-6" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>mom_birth_country_specify)</span></code></pre></div>
<pre><code>##  [1] &quot;Montenegro&quot;         &quot;Chile&quot;              &quot;Uk&quot;                
##  [4] &quot;Refused&quot;            &quot;Australia&quot;          &quot;Venezuela&quot;         
##  [7] &quot;Canada&quot;             &quot;India&quot;              &quot;Kenya&quot;             
## [10] &quot;China&quot;              &quot;South Korea&quot;        &quot;Costa Rica&quot;        
## [13] &quot;England&quot;            &quot;Mexico&quot;             &quot;Italy&quot;             
## [16] &quot;Colombia&quot;           &quot;Malaysia&quot;           &quot;Argentina&quot;         
## [19] &quot;Panama&quot;             &quot;United Kingdom&quot;     &quot;Bolivia&quot;           
## [22] &quot;Phillipines&quot;        &quot;Dominican Republic&quot; &quot;Spain&quot;             
## [25] &quot;Zimbabwe&quot;           &quot;Colomobia&quot;          &quot;Guatemala&quot;         
## [28] &quot;Ireland&quot;            &quot;Ecuador&quot;            &quot;Honduras&quot;          
## [31] &quot;El Salvador&quot;</code></pre>
</div>
<div id="education" class="section level3 unnumbered">
<h3 class="unnumbered">Education</h3>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb241-2"><a href="#cb241-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mom_education)) <span class="sc">|&gt;</span></span>
<span id="cb241-3"><a href="#cb241-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(child_sex, mom_education)</span>
<span id="cb241-4"><a href="#cb241-4" tabindex="-1"></a></span>
<span id="cb241-5"><a href="#cb241-5" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> mom_education, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>## mom_education
##        associates    bachelor_s_deg         bachelors           diploma 
##                18                 6               165                17 
##         doctorate          eleventh               ged graduate_nodegree 
##                73                 1                 4                13 
##    graduate_or_pr    master_s_degre           masters noformalschooling 
##                 1                 3               158                 1 
##      professional    professional_d           refused       somecollege 
##                27                 2                 2                25 
##       voc_diplima     voc_nodiplima 
##                 1                 1</code></pre>
<div class="rmdnote">
<p>This requires some recoding work.</p>
</div>
</div>
<div id="employment" class="section level3 unnumbered">
<h3 class="unnumbered">Employment</h3>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb243-2"><a href="#cb243-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mom_employment))</span>
<span id="cb243-3"><a href="#cb243-3" tabindex="-1"></a></span>
<span id="cb243-4"><a href="#cb243-4" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> mom_employment, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>## mom_employment
## full_time        no part_time   refused 
##       313       117        86         2</code></pre>
</div>
<div id="occupation" class="section level3 unnumbered">
<h3 class="unnumbered">Occupation</h3>
<p>This information is available, but would need to be substantially recoded to be useful in summary form.</p>
</div>
<div id="jobs-number" class="section level3 unnumbered">
<h3 class="unnumbered">Jobs number</h3>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb245-2"><a href="#cb245-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mom_jobs_number))</span>
<span id="cb245-3"><a href="#cb245-3" tabindex="-1"></a></span>
<span id="cb245-4"><a href="#cb245-4" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> mom_jobs_number, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>## mom_jobs_number
##   0   1   2   3   4 
##   2 350  42   3   1</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb247-2"><a href="#cb247-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mom_jobs_number),</span>
<span id="cb247-3"><a href="#cb247-3" tabindex="-1"></a>                <span class="sc">!</span><span class="fu">is.na</span>(mom_employment))</span>
<span id="cb247-4"><a href="#cb247-4" tabindex="-1"></a></span>
<span id="cb247-5"><a href="#cb247-5" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> mom_jobs_number <span class="sc">+</span> mom_employment, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##                mom_employment
## mom_jobs_number full_time part_time
##               0         1         1
##               1       282        68
##               2        25        17
##               3         3         0
##               4         1         0</code></pre>
</div>
<div id="race-and-ethnicity" class="section level3 unnumbered">
<h3 class="unnumbered">Race and ethnicity</h3>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" tabindex="-1"></a><span class="co"># df &lt;- screen_df %&gt;%</span></span>
<span id="cb249-2"><a href="#cb249-2" tabindex="-1"></a><span class="co">#   dplyr::mutate(</span></span>
<span id="cb249-3"><a href="#cb249-3" tabindex="-1"></a><span class="co">#     .,</span></span>
<span id="cb249-4"><a href="#cb249-4" tabindex="-1"></a><span class="co">#     mom_race = dplyr::recode(</span></span>
<span id="cb249-5"><a href="#cb249-5" tabindex="-1"></a><span class="co">#       mom_race,</span></span>
<span id="cb249-6"><a href="#cb249-6" tabindex="-1"></a><span class="co">#       morethanone = &quot;more_than_one&quot;,</span></span>
<span id="cb249-7"><a href="#cb249-7" tabindex="-1"></a><span class="co">#       americanindian = &quot;american_indian&quot;</span></span>
<span id="cb249-8"><a href="#cb249-8" tabindex="-1"></a><span class="co">#     ),</span></span>
<span id="cb249-9"><a href="#cb249-9" tabindex="-1"></a><span class="co">#     mother_ethnicity = dplyr::recode(</span></span>
<span id="cb249-10"><a href="#cb249-10" tabindex="-1"></a><span class="co">#       mother_ethnicity,</span></span>
<span id="cb249-11"><a href="#cb249-11" tabindex="-1"></a><span class="co">#       hispanic_or_la = &quot;hispanic&quot;,</span></span>
<span id="cb249-12"><a href="#cb249-12" tabindex="-1"></a><span class="co">#       not_hispanic_o = &quot;not_hispanic&quot;,</span></span>
<span id="cb249-13"><a href="#cb249-13" tabindex="-1"></a><span class="co">#       nothispanic = &quot;not_hispanic&quot;</span></span>
<span id="cb249-14"><a href="#cb249-14" tabindex="-1"></a><span class="co">#     )</span></span>
<span id="cb249-15"><a href="#cb249-15" tabindex="-1"></a><span class="co">#   )</span></span>
<span id="cb249-16"><a href="#cb249-16" tabindex="-1"></a><span class="co"># xtabs(formula = ~ mother_race + mother_ethnicity,</span></span>
<span id="cb249-17"><a href="#cb249-17" tabindex="-1"></a><span class="co">#       data = df)</span></span></code></pre></div>
</div>
</div>
<div id="childcare" class="section level2 unnumbered">
<h2 class="unnumbered">Childcare</h2>
<div id="types" class="section level3 unnumbered">
<h3 class="unnumbered">Types</h3>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb250-2"><a href="#cb250-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(childcare_types))</span>
<span id="cb250-3"><a href="#cb250-3" tabindex="-1"></a>                </span>
<span id="cb250-4"><a href="#cb250-4" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> childcare_types, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>## childcare_types
##                childcare           childcare_cent                    nanny 
##                      106                        3                        4 
##           nanny_babysitt               nanny_home     nanny_home childcare 
##                        3                       22                        7 
## nanny_home nanny_nothome      nanny_home relative            nanny_nothome 
##                        2                        2                        8 
##       nanny_nothome none                     none                 relative 
##                        1                       80                       45 
##       relative childcare 
##                        7</code></pre>
<div class="rmdnote">
<p>This requires some cleaning.</p>
</div>
</div>
<div id="hours" class="section level3 unnumbered">
<h3 class="unnumbered">Hours</h3>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb252-2"><a href="#cb252-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(childcare_hours)) <span class="sc">|&gt;</span></span>
<span id="cb252-3"><a href="#cb252-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(childcare_hours)</span>
<span id="cb252-4"><a href="#cb252-4" tabindex="-1"></a></span>
<span id="cb252-5"><a href="#cb252-5" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>childcare_hours)</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;        &quot;10&quot;       &quot;12&quot;       &quot;14.5&quot;     &quot;15&quot;       &quot;15-20&quot;    &quot;16&quot;      
##  [8] &quot;16-20&quot;    &quot;17.5&quot;     &quot;18&quot;       &quot;2&quot;        &quot;20&quot;       &quot;24&quot;       &quot;25&quot;      
## [15] &quot;27&quot;       &quot;3&quot;        &quot;3.5&quot;      &quot;30&quot;       &quot;30-35&quot;    &quot;30-40&quot;    &quot;32&quot;      
## [22] &quot;33&quot;       &quot;34&quot;       &quot;35&quot;       &quot;35-40&quot;    &quot;36&quot;       &quot;37&quot;       &quot;4&quot;       
## [29] &quot;40&quot;       &quot;40+&quot;      &quot;40-45&quot;    &quot;42&quot;       &quot;42.5&quot;     &quot;43&quot;       &quot;45&quot;      
## [36] &quot;47&quot;       &quot;5&quot;        &quot;50&quot;       &quot;50 to 53&quot; &quot;6&quot;        &quot;8&quot;        &quot;9&quot;</code></pre>
<div class="rmdnote">
<p>This requires some cleaning.</p>
</div>
</div>
<div id="language-1" class="section level3 unnumbered">
<h3 class="unnumbered">Language</h3>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb254-2"><a href="#cb254-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(childcare_language))</span>
<span id="cb254-3"><a href="#cb254-3" tabindex="-1"></a></span>
<span id="cb254-4"><a href="#cb254-4" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>childcare_language)</span></code></pre></div>
<pre><code>##  [1] &quot;Spanish&quot;                                                                   
##  [2] &quot;English&quot;                                                                   
##  [3] &quot;English and Spanish (50/50)&quot;                                               
##  [4] &quot;english&quot;                                                                   
##  [5] &quot;test&quot;                                                                      
##  [6] &quot;English and speaks a little bit of Japanese but not directly to Lucas&quot;     
##  [7] &quot;English and Spanish equally&quot;                                               
##  [8] &quot;Spanish at the center&quot;                                                     
##  [9] &quot;English and Creole&quot;                                                        
## [10] &quot;Nanny in Spanish at home. At school both English and Spanish.&quot;             
## [11] &quot;English and ASL&quot;                                                           
## [12] &quot;English (majority of the time) and sometimes Spanish&quot;                      
## [13] &quot;English and Spanish&quot;                                                       
## [14] &quot;English, Mandarin&quot;                                                         
## [15] &quot;Spanish (sometimes English)&quot;                                               
## [16] &quot;English when speaking with children, but Arabic when speaking to eachother&quot;
## [17] &quot;English and Spanish 50/50&quot;                                                 
## [18] &quot;Mostly English, some Spanish&quot;                                              
## [19] &quot;English and some Spanish&quot;                                                  
## [20] &quot;English, sometimes a little bit of Spanish&quot;                                
## [21] &quot;English and some sign language&quot;                                            
## [22] &quot;english and spanish&quot;                                                       
## [23] &quot;Primary English, very little Hebrew&quot;                                       
## [24] &quot;Ingles&quot;                                                                    
## [25] &quot;English (sometimes Spanish 40%)&quot;</code></pre>
<div class="rmdnote">
<p>This requires some cleaning.</p>
</div>
<!--chapter:end:21-viz-screening.Rmd-->
</div>
</div>
</div>
<div id="demographics-visualizations" class="section level1 unnumbered">
<h1 class="unnumbered">Demographics visualizations</h1>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&#39;home_visit_df&#39;</span> <span class="sc">%in%</span> <span class="fu">ls</span>())) {</span>
<span id="cb256-2"><a href="#cb256-2" tabindex="-1"></a>  targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb256-3"><a href="#cb256-3" tabindex="-1"></a>}</span></code></pre></div>
<div id="child-age-1" class="section level2 unnumbered">
<h2 class="unnumbered">Child age</h2>
<p>Child age in months (<code>age_group</code>) by <code>child_sex</code>.</p>
<p>Note: The child’s exact age in months is part of the Databrary-related data.
That is on the work plan.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" tabindex="-1"></a>home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb257-2"><a href="#cb257-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(.,<span class="sc">!</span><span class="fu">is.na</span>(age_group),<span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">%&gt;%</span></span>
<span id="cb257-3"><a href="#cb257-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb257-4"><a href="#cb257-4" tabindex="-1"></a>  <span class="fu">aes</span>(age_group, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb257-5"><a href="#cb257-5" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb257-6"><a href="#cb257-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb257-7"><a href="#cb257-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-age-grp-by-sex-1.png" alt="Participants by age group and sex" width="672" />
<p class="caption">
(#fig:fig-age-grp-by-sex)Participants by age group and sex
</p>
</div>
<!--chapter:end:22-viz-demographics.Rmd-->
</div>
</div>
<div id="language-visualizations" class="section level1 unnumbered">
<h1 class="unnumbered">Language visualizations</h1>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&#39;home_visit_df&#39;</span> <span class="sc">%in%</span> <span class="fu">ls</span>())) {</span>
<span id="cb258-2"><a href="#cb258-2" tabindex="-1"></a>  targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb258-3"><a href="#cb258-3" tabindex="-1"></a>}</span></code></pre></div>
<!-- ### Demographics {-} -->
<!-- #### Child age {-} -->
<!-- Child age in months (`age_group`) by `child_sex`. -->
<!-- Note: The child's exact age in months is part of the Databrary-related data.  -->
<!-- That is on the work plan. -->
<!-- ```{r fig-age-grp-by-sex, fig.cap="Participants by age group and sex"} -->
<!-- home_visit_df %>% -->
<!--   dplyr::filter(.,!is.na(age_group),!is.na(child_sex)) %>% -->
<!--   ggplot() + -->
<!--   aes(age_group, fill = child_sex) + -->
<!--   geom_bar() + -->
<!--   theme(legend.position = "bottom") + -->
<!--   theme(legend.title = element_blank()) -->
<!-- ``` -->
<div id="language-exposure" class="section level2 unnumbered">
<h2 class="unnumbered">Language exposure</h2>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb259-2"><a href="#cb259-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(., <span class="at">language_child =</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(language_child, <span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>))</span>
<span id="cb259-3"><a href="#cb259-3" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> language_child, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##          language_child
## child_sex english english_spanish
##    female     157              32
##    male       146              50</code></pre>
<!-- ### Locomotor milestones {-} -->
<!-- ```{r make-loco-df} -->
<!-- play_loco <- home_visit_df %>% -->
<!--   dplyr::select( -->
<!--     ., -->
<!--     age_group, -->
<!--     child_sex, -->
<!--     language_child, -->
<!--     site_id, -->
<!--     subject_number, -->
<!--     locomotor_milestones.who_walk.who_walk_onset_mo, -->
<!--     locomotor_milestones.k_walk.k_walk_onset_mo, -->
<!--     locomotor_milestones.crawl_onset.crawl_onset_mo -->
<!--   ) %>% -->
<!--   dplyr::rename( -->
<!--     ., -->
<!--     walk_mos_who = locomotor_milestones.who_walk.who_walk_onset_mo, -->
<!--     walk_mos_kea = locomotor_milestones.k_walk.k_walk_onset_mo, -->
<!--     crawl_mos = locomotor_milestones.crawl_onset.crawl_onset_mo -->
<!--   ) %>% -->
<!--   dplyr::mutate( -->
<!--     ., -->
<!--     walk_mos_who = as.numeric(walk_mos_who), -->
<!--     walk_mos_kea = as.numeric(walk_mos_kea), -->
<!--     crawl_mos = as.numeric(crawl_mos) -->
<!--   ) -->
<!-- ``` -->
<!-- #### Check for anomalous values {-} -->
<!-- ```{r} -->
<!-- crawl_mos_min <- 4 -->
<!-- walk_mos_min <- 6 -->
<!-- ``` -->
<!-- ##### Anomalous crawling onset {-} -->
<!-- ```{r} -->
<!-- play_loco %>% -->
<!--   dplyr::select(., site_id, subject_number, crawl_mos) %>% -->
<!--   dplyr::filter(., crawl_mos < crawl_mos_min) %>% -->
<!--   knitr::kable(format = 'html')  -->
<!-- ``` -->
<!-- ##### Anomalous walking onset (KEA criteria) {-} -->
<!-- ```{r} -->
<!-- play_loco %>% -->
<!--   dplyr::select(., site_id, subject_number, walk_mos_kea) %>% -->
<!--   dplyr::filter(., walk_mos_kea < walk_mos_min) %>% -->
<!--   knitr::kable(format = 'html')  -->
<!-- ``` -->
<!-- ##### Anomalous walking onset (WHO criteria) {-} -->
<!-- ```{r} -->
<!-- play_loco %>% -->
<!--   dplyr::select(., site_id, subject_number, walk_mos_who) %>% -->
<!--   dplyr::filter(., walk_mos_who < walk_mos_min) %>% -->
<!--   knitr::kable(format = 'html')  -->
<!-- ``` -->
<!-- #### Crawl onset {-} -->
<!-- ```{r fig-crawl-onset-hist, fig.cap="Age of crawling onset (mos) by sex"} -->
<!-- play_loco %>% -->
<!--   dplyr::filter(., crawl_mos > crawl_mos_min, !is.na(crawl_mos)) %>% -->
<!--   ggplot(.) + -->
<!--   aes(crawl_mos, fill = child_sex) + -->
<!--   geom_histogram(bins = 12) + -->
<!--   theme(legend.position = "bottom") + -->
<!--   theme(legend.title = element_blank()) -->
<!-- ``` -->
<!-- #### Walk onset {-} -->
<!-- ```{r fig-walk-mos-kea, fig.cap="Age (mos) of walking onset (KEA criteria) by sex"} -->
<!-- play_loco %>% -->
<!--   dplyr::filter(., walk_mos_kea > walk_mos_min, !is.na(walk_mos_kea)) %>% -->
<!--   ggplot(.) + -->
<!--   aes(walk_mos_kea, fill = child_sex) + -->
<!--   theme(legend.position="bottom") + -->
<!--   geom_histogram(bins = 10) -->
<!-- ``` -->
<!-- ```{r fig-walk-mos-who, fig.cap="Age (mos) of walking onset (WHO criteria) by sex"} -->
<!-- play_loco %>% -->
<!--   dplyr::filter(., walk_mos_who > walk_mos_min, !is.na(walk_mos_who)) %>% -->
<!--   ggplot(.) + -->
<!--   aes(walk_mos_who, fill = child_sex) + -->
<!--   geom_histogram(bins=12) + -->
<!--   theme(legend.position="bottom") + -->
<!--   theme(legend.title = element_blank()) -->
<!-- ``` -->
<!-- ```{r fig-walk-mos-kea-who, fig.cap="Walking onset by WHO vs. KEA criteria"} -->
<!-- play_loco %>% -->
<!--   dplyr::filter(., walk_mos_who > walk_mos_min, !is.na(walk_mos_who), walk_mos_kea > walk_mos_min, !is.na(walk_mos_kea)) %>% -->
<!--   ggplot(.) + -->
<!--   aes(walk_mos_who, walk_mos_kea, color = child_sex) + -->
<!--   geom_point() + -->
<!--   geom_smooth(method = "lm") + -->
<!--   xlim(8, 18) + -->
<!--   ylim(8, 18) + -->
<!--   theme(legend.position = "bottom") + -->
<!--   theme(aspect.ratio = 1) + -->
<!--   theme(legend.title = element_blank()) -> walk_p -->
<!-- ggExtra::ggMarginal( -->
<!--   walk_p, -->
<!--   play_loco, -->
<!--   walk_mos_who, -->
<!--   walk_mos_kea, -->
<!--   type = "density", -->
<!--   margins = "both", -->
<!--   groupColour = TRUE, -->
<!--   groupFill = TRUE -->
<!-- ) -->
<!-- ``` -->
<!-- ```{r fig-walk-mos-kea-crawl-mos, fig.cap="Walking onset vs. Crawling"} -->
<!-- play_loco %>% -->
<!--   dplyr::filter(., crawl_mos > crawl_mos_min, !is.na(crawl_mos), walk_mos_kea > walk_mos_min, !is.na(walk_mos_kea)) %>% -->
<!--   ggplot(.) + -->
<!--   aes(crawl_mos, walk_mos_kea, color = child_sex) + -->
<!--   geom_point() + -->
<!--   geom_smooth(method = "lm") + -->
<!--   theme(legend.position = "bottom") + -->
<!--   theme(aspect.ratio = 1) + -->
<!--   theme(legend.title = element_blank()) -> walk_p -->
<!-- ggExtra::ggMarginal( -->
<!--   walk_p, -->
<!--   play_loco, -->
<!--   walk_mos_who, -->
<!--   walk_mos_kea, -->
<!--   type = "density", -->
<!--   margins = "both", -->
<!--   groupColour = TRUE, -->
<!--   groupFill = TRUE -->
<!-- ) -->
<!-- ``` -->
<!-- ### Health {-} -->
<!-- #### Feeding {-} -->
<!-- ```{r make-feeding-df} -->
<!-- feeding <- home_visit_df %>% -->
<!--   dplyr::select( -->
<!--     ., -->
<!--     age_group, -->
<!--     child_sex, -->
<!--     site_id, -->
<!--     subject_number, -->
<!--     language_child, -->
<!--     health.feeding_nutrition.breastfeed, -->
<!--     health.feeding_nutrition.solidfood_age -->
<!--   ) %>% -->
<!--   dplyr::rename(., breastfeed = health.feeding_nutrition.breastfeed, -->
<!--                 solid_food_mos = health.feeding_nutrition.solidfood_age) %>% -->
<!--   dplyr::mutate(., solid_food_mos = as.numeric(solid_food_mos)) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- xtabs(formula = ~ child_sex + breastfeed, data = feeding) -->
<!-- ``` -->
<!-- ```{r fig-solid-food-mos, fig.cap="Age at introduction of solid foods"} -->
<!-- feeding %>% -->
<!--   ggplot(.) + -->
<!--   aes(x = solid_food_mos, color = child_sex, fill = child_sex) + -->
<!--   geom_histogram(bins = 15) + -->
<!--   theme(legend.title = element_blank()) -->
<!-- ``` -->
<!-- Clearly, there are some impossible values here. -->
<!-- ```{r anomalous-feeding} -->
<!-- feeding |> -->
<!--   dplyr::select(site_id, subject_number, solid_food_mos) %>% -->
<!--   dplyr::filter(., solid_food_mos > 12) %>% -->
<!--   knitr::kable(format = 'html') -->
<!-- ``` -->
<!-- #### Smoking/drinking {-} -->
<!-- ```{r xtabs-smoking-drinking} -->
<!-- smoking_drinking <- home_visit_df %>% -->
<!--   dplyr::select( -->
<!--     ., -->
<!--     age_group, -->
<!--     child_sex, -->
<!--     language_child, -->
<!--     health.smoking.pregnant_smoking, -->
<!--     health.drinking.pregnant_drinking -->
<!--   ) %>% -->
<!--   dplyr::rename(., preg_smoking = health.smoking.pregnant_smoking, -->
<!--                 preg_drinking = health.drinking.pregnant_drinking) -->
<!-- xtabs(formula = ~ preg_smoking + preg_drinking, smoking_drinking) -->
<!-- ``` -->
<!-- #### Sleeping position {-} -->
<!-- ```{r xtabs-sleeping} -->
<!-- sleeping_pos <- home_visit_df %>% -->
<!--   dplyr::select( -->
<!--     ., -->
<!--     age_group, -->
<!--     child_sex, -->
<!--     language_child, -->
<!--     health.general_health.child_sleeping_position -->
<!--   ) %>% -->
<!--   dplyr::rename(., child_sleeping_position = health.general_health.child_sleeping_position) -->
<!-- xtabs(formula = ~ child_sleeping_position, data = sleeping_pos) -->
<!-- ``` -->
<!--chapter:end:23-viz-language.Rmd-->
</div>
</div>
<div id="locomotion-visualizations" class="section level1 unnumbered">
<h1 class="unnumbered">Locomotion visualizations</h1>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&#39;home_visit_df&#39;</span> <span class="sc">%in%</span> <span class="fu">ls</span>())) {</span>
<span id="cb261-2"><a href="#cb261-2" tabindex="-1"></a>  targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb261-3"><a href="#cb261-3" tabindex="-1"></a>}</span></code></pre></div>
<div id="select-summarize" class="section level2 unnumbered">
<h2 class="unnumbered">Select &amp; Summarize</h2>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" tabindex="-1"></a>play_loco <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb262-2"><a href="#cb262-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb262-3"><a href="#cb262-3" tabindex="-1"></a>    .,</span>
<span id="cb262-4"><a href="#cb262-4" tabindex="-1"></a>    age_group,</span>
<span id="cb262-5"><a href="#cb262-5" tabindex="-1"></a>    child_sex,</span>
<span id="cb262-6"><a href="#cb262-6" tabindex="-1"></a>    language_child,</span>
<span id="cb262-7"><a href="#cb262-7" tabindex="-1"></a>    site_id,</span>
<span id="cb262-8"><a href="#cb262-8" tabindex="-1"></a>    subject_number,</span>
<span id="cb262-9"><a href="#cb262-9" tabindex="-1"></a>    locomotor_milestones.who_walk.who_walk_onset_mo,</span>
<span id="cb262-10"><a href="#cb262-10" tabindex="-1"></a>    locomotor_milestones.k_walk.k_walk_onset_mo,</span>
<span id="cb262-11"><a href="#cb262-11" tabindex="-1"></a>    locomotor_milestones.crawl_onset.crawl_onset_mo</span>
<span id="cb262-12"><a href="#cb262-12" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb262-13"><a href="#cb262-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb262-14"><a href="#cb262-14" tabindex="-1"></a>    .,</span>
<span id="cb262-15"><a href="#cb262-15" tabindex="-1"></a>    <span class="at">walk_mos_who =</span> locomotor_milestones.who_walk.who_walk_onset_mo,</span>
<span id="cb262-16"><a href="#cb262-16" tabindex="-1"></a>    <span class="at">walk_mos_kea =</span> locomotor_milestones.k_walk.k_walk_onset_mo,</span>
<span id="cb262-17"><a href="#cb262-17" tabindex="-1"></a>    <span class="at">crawl_mos =</span> locomotor_milestones.crawl_onset.crawl_onset_mo</span>
<span id="cb262-18"><a href="#cb262-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb262-19"><a href="#cb262-19" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb262-20"><a href="#cb262-20" tabindex="-1"></a>    .,</span>
<span id="cb262-21"><a href="#cb262-21" tabindex="-1"></a>    <span class="at">walk_mos_who =</span> <span class="fu">as.numeric</span>(walk_mos_who),</span>
<span id="cb262-22"><a href="#cb262-22" tabindex="-1"></a>    <span class="at">walk_mos_kea =</span> <span class="fu">as.numeric</span>(walk_mos_kea),</span>
<span id="cb262-23"><a href="#cb262-23" tabindex="-1"></a>    <span class="at">crawl_mos =</span> <span class="fu">as.numeric</span>(crawl_mos)</span>
<span id="cb262-24"><a href="#cb262-24" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> age_group, <span class="at">data =</span> play_loco)</span></code></pre></div>
<pre><code>##          age_group
## child_sex 12mo 18mo 24mo
##    female   72   60   57
##    male     62   76   58</code></pre>
<div id="check-for-anomalous-values" class="section level3 unnumbered">
<h3 class="unnumbered">Check for anomalous values</h3>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" tabindex="-1"></a>crawl_mos_min <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb265-2"><a href="#cb265-2" tabindex="-1"></a>walk_mos_min <span class="ot">&lt;-</span> <span class="dv">6</span></span></code></pre></div>
<div id="anomalous-crawling-onset" class="section level4 unnumbered">
<h4 class="unnumbered">Anomalous crawling onset</h4>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb266-2"><a href="#cb266-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., site_id, subject_number, crawl_mos) <span class="sc">%&gt;%</span></span>
<span id="cb266-3"><a href="#cb266-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., crawl_mos <span class="sc">&lt;</span> crawl_mos_min) <span class="sc">%&gt;%</span></span>
<span id="cb266-4"><a href="#cb266-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
crawl_mos
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
CHOPH
</td>
<td style="text-align:left;">
003
</td>
<td style="text-align:right;">
3.72
</td>
</tr>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
020
</td>
<td style="text-align:right;">
-5.69
</td>
</tr>
</tbody>
</table>
</div>
<div id="anomalous-walking-onset-kea-criteria" class="section level4 unnumbered">
<h4 class="unnumbered">Anomalous walking onset (KEA criteria)</h4>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb267-2"><a href="#cb267-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., site_id, subject_number, walk_mos_kea) <span class="sc">%&gt;%</span></span>
<span id="cb267-3"><a href="#cb267-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_kea <span class="sc">&lt;</span> walk_mos_min) <span class="sc">%&gt;%</span></span>
<span id="cb267-4"><a href="#cb267-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
walk_mos_kea
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
CSUFL
</td>
<td style="text-align:left;">
011
</td>
<td style="text-align:right;">
0.76
</td>
</tr>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
020
</td>
<td style="text-align:right;">
-2.93
</td>
</tr>
</tbody>
</table>
<div id="anomalous-walking-onset-who-criteria" class="section level5 unnumbered">
<h5 class="unnumbered">Anomalous walking onset (WHO criteria)</h5>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb268-2"><a href="#cb268-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., site_id, subject_number, walk_mos_who) <span class="sc">%&gt;%</span></span>
<span id="cb268-3"><a href="#cb268-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_who <span class="sc">&lt;</span> walk_mos_min) <span class="sc">%&gt;%</span></span>
<span id="cb268-4"><a href="#cb268-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
walk_mos_who
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
PRINU
</td>
<td style="text-align:left;">
020
</td>
<td style="text-align:right;">
-3.29
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="crawl-onset" class="section level3 unnumbered">
<h3 class="unnumbered">Crawl onset</h3>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb269-2"><a href="#cb269-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., crawl_mos <span class="sc">&gt;</span> crawl_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(crawl_mos)) <span class="sc">%&gt;%</span></span>
<span id="cb269-3"><a href="#cb269-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb269-4"><a href="#cb269-4" tabindex="-1"></a>  <span class="fu">aes</span>(crawl_mos, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb269-5"><a href="#cb269-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb269-6"><a href="#cb269-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb269-7"><a href="#cb269-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-crawl-onset-hist-1.png" alt="Age of crawling onset (mos) by sex" width="672" />
<p class="caption">
(#fig:fig-crawl-onset-hist)Age of crawling onset (mos) by sex
</p>
</div>
</div>
<div id="walk-onset" class="section level3 unnumbered">
<h3 class="unnumbered">Walk onset</h3>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb270-2"><a href="#cb270-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_kea <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_kea)) <span class="sc">%&gt;%</span></span>
<span id="cb270-3"><a href="#cb270-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb270-4"><a href="#cb270-4" tabindex="-1"></a>  <span class="fu">aes</span>(walk_mos_kea, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb270-5"><a href="#cb270-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb270-6"><a href="#cb270-6" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-walk-mos-kea-1.png" alt="Age (mos) of walking onset (KEA criteria) by sex" width="672" />
<p class="caption">
(#fig:fig-walk-mos-kea)Age (mos) of walking onset (KEA criteria) by sex
</p>
</div>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb271-2"><a href="#cb271-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_who <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_who)) <span class="sc">%&gt;%</span></span>
<span id="cb271-3"><a href="#cb271-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb271-4"><a href="#cb271-4" tabindex="-1"></a>  <span class="fu">aes</span>(walk_mos_who, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb271-5"><a href="#cb271-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb271-6"><a href="#cb271-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb271-7"><a href="#cb271-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-walk-mos-who-1.png" alt="Age (mos) of walking onset (WHO criteria) by sex" width="672" />
<p class="caption">
(#fig:fig-walk-mos-who)Age (mos) of walking onset (WHO criteria) by sex
</p>
</div>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb272-2"><a href="#cb272-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_who <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_who), walk_mos_kea <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_kea)) <span class="sc">%&gt;%</span></span>
<span id="cb272-3"><a href="#cb272-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb272-4"><a href="#cb272-4" tabindex="-1"></a>  <span class="fu">aes</span>(walk_mos_who, walk_mos_kea, <span class="at">color =</span> child_sex) <span class="sc">+</span></span>
<span id="cb272-5"><a href="#cb272-5" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb272-6"><a href="#cb272-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb272-7"><a href="#cb272-7" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">8</span>, <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb272-8"><a href="#cb272-8" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">8</span>, <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb272-9"><a href="#cb272-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb272-10"><a href="#cb272-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb272-11"><a href="#cb272-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="ot">-&gt;</span> walk_p</span>
<span id="cb272-12"><a href="#cb272-12" tabindex="-1"></a></span>
<span id="cb272-13"><a href="#cb272-13" tabindex="-1"></a>ggExtra<span class="sc">::</span><span class="fu">ggMarginal</span>(</span>
<span id="cb272-14"><a href="#cb272-14" tabindex="-1"></a>  walk_p,</span>
<span id="cb272-15"><a href="#cb272-15" tabindex="-1"></a>  play_loco,</span>
<span id="cb272-16"><a href="#cb272-16" tabindex="-1"></a>  walk_mos_who,</span>
<span id="cb272-17"><a href="#cb272-17" tabindex="-1"></a>  walk_mos_kea,</span>
<span id="cb272-18"><a href="#cb272-18" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;density&quot;</span>,</span>
<span id="cb272-19"><a href="#cb272-19" tabindex="-1"></a>  <span class="at">margins =</span> <span class="st">&quot;both&quot;</span>,</span>
<span id="cb272-20"><a href="#cb272-20" tabindex="-1"></a>  <span class="at">groupColour =</span> <span class="cn">TRUE</span>,</span>
<span id="cb272-21"><a href="#cb272-21" tabindex="-1"></a>  <span class="at">groupFill =</span> <span class="cn">TRUE</span></span>
<span id="cb272-22"><a href="#cb272-22" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 4 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 4 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing missing values (`geom_point()`).</code></pre>
<div class="figure" style="text-align: center">
<img src="include/img/fig-walk-mos-kea-who-1.png" alt="Walking onset by WHO vs. KEA criteria" width="672" />
<p class="caption">
(#fig:fig-walk-mos-kea-who)Walking onset by WHO vs. KEA criteria
</p>
</div>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb278-2"><a href="#cb278-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., crawl_mos <span class="sc">&gt;</span> crawl_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(crawl_mos), walk_mos_kea <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_kea)) <span class="sc">%&gt;%</span></span>
<span id="cb278-3"><a href="#cb278-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb278-4"><a href="#cb278-4" tabindex="-1"></a>  <span class="fu">aes</span>(crawl_mos, walk_mos_kea, <span class="at">color =</span> child_sex) <span class="sc">+</span></span>
<span id="cb278-5"><a href="#cb278-5" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb278-6"><a href="#cb278-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb278-7"><a href="#cb278-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb278-8"><a href="#cb278-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb278-9"><a href="#cb278-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="ot">-&gt;</span> walk_p</span>
<span id="cb278-10"><a href="#cb278-10" tabindex="-1"></a></span>
<span id="cb278-11"><a href="#cb278-11" tabindex="-1"></a>ggExtra<span class="sc">::</span><span class="fu">ggMarginal</span>(</span>
<span id="cb278-12"><a href="#cb278-12" tabindex="-1"></a>  walk_p,</span>
<span id="cb278-13"><a href="#cb278-13" tabindex="-1"></a>  play_loco,</span>
<span id="cb278-14"><a href="#cb278-14" tabindex="-1"></a>  walk_mos_who,</span>
<span id="cb278-15"><a href="#cb278-15" tabindex="-1"></a>  walk_mos_kea,</span>
<span id="cb278-16"><a href="#cb278-16" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;density&quot;</span>,</span>
<span id="cb278-17"><a href="#cb278-17" tabindex="-1"></a>  <span class="at">margins =</span> <span class="st">&quot;both&quot;</span>,</span>
<span id="cb278-18"><a href="#cb278-18" tabindex="-1"></a>  <span class="at">groupColour =</span> <span class="cn">TRUE</span>,</span>
<span id="cb278-19"><a href="#cb278-19" tabindex="-1"></a>  <span class="at">groupFill =</span> <span class="cn">TRUE</span></span>
<span id="cb278-20"><a href="#cb278-20" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;
## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<div class="figure" style="text-align: center">
<img src="include/img/fig-walk-mos-kea-crawl-mos-1.png" alt="Walking onset vs. Crawling" width="672" />
<p class="caption">
(#fig:fig-walk-mos-kea-crawl-mos)Walking onset vs. Crawling
</p>
</div>
<!--chapter:end:24-viz-locomotion.Rmd-->
</div>
</div>
</div>
<div id="health" class="section level1 unnumbered">
<h1 class="unnumbered">Health</h1>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" tabindex="-1"></a><span class="co"># Load home_visit_df if not in environment</span></span>
<span id="cb280-2"><a href="#cb280-2" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&quot;home_visit_df&quot;</span> <span class="sc">%in%</span> <span class="fu">ls</span>())) {</span>
<span id="cb280-3"><a href="#cb280-3" tabindex="-1"></a> targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>) </span>
<span id="cb280-4"><a href="#cb280-4" tabindex="-1"></a>}</span></code></pre></div>
<div id="feeding" class="section level2 unnumbered">
<h2 class="unnumbered">Feeding</h2>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" tabindex="-1"></a>feeding <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb281-2"><a href="#cb281-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb281-3"><a href="#cb281-3" tabindex="-1"></a>    .,</span>
<span id="cb281-4"><a href="#cb281-4" tabindex="-1"></a>    age_group,</span>
<span id="cb281-5"><a href="#cb281-5" tabindex="-1"></a>    child_sex,</span>
<span id="cb281-6"><a href="#cb281-6" tabindex="-1"></a>    site_id,</span>
<span id="cb281-7"><a href="#cb281-7" tabindex="-1"></a>    subject_number,</span>
<span id="cb281-8"><a href="#cb281-8" tabindex="-1"></a>    language_child,</span>
<span id="cb281-9"><a href="#cb281-9" tabindex="-1"></a>    health.feeding_nutrition.breastfeed,</span>
<span id="cb281-10"><a href="#cb281-10" tabindex="-1"></a>    health.feeding_nutrition.solidfood_age</span>
<span id="cb281-11"><a href="#cb281-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb281-12"><a href="#cb281-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(., <span class="at">breastfeed =</span> health.feeding_nutrition.breastfeed,</span>
<span id="cb281-13"><a href="#cb281-13" tabindex="-1"></a>                <span class="at">solid_food_mos =</span> health.feeding_nutrition.solidfood_age) <span class="sc">%&gt;%</span></span>
<span id="cb281-14"><a href="#cb281-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(., <span class="at">solid_food_mos =</span> <span class="fu">as.numeric</span>(solid_food_mos))</span></code></pre></div>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> breastfeed, <span class="at">data =</span> feeding)</span></code></pre></div>
<pre><code>##          breastfeed
## child_sex donotknow  no refused yes
##    female         1   3       0 184
##    male           0  12       1 179</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" tabindex="-1"></a>feeding <span class="sc">%&gt;%</span></span>
<span id="cb284-2"><a href="#cb284-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb284-3"><a href="#cb284-3" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> solid_food_mos, <span class="at">color =</span> child_sex, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb284-4"><a href="#cb284-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb284-5"><a href="#cb284-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<pre><code>## Warning: Removed 5 rows containing non-finite values (`stat_bin()`).</code></pre>
<div class="figure" style="text-align: center">
<img src="include/img/fig-solid-food-mos-1.png" alt="Age at introduction of solid foods" width="672" />
<p class="caption">
(#fig:fig-solid-food-mos)Age at introduction of solid foods
</p>
</div>
<p>Clearly, there are some impossible values here.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" tabindex="-1"></a>feeding <span class="sc">|&gt;</span></span>
<span id="cb286-2"><a href="#cb286-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, subject_number, solid_food_mos) <span class="sc">%&gt;%</span></span>
<span id="cb286-3"><a href="#cb286-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., solid_food_mos <span class="sc">&gt;</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span></span>
<span id="cb286-4"><a href="#cb286-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
solid_food_mos
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NYUNI
</td>
<td style="text-align:left;">
996
</td>
<td style="text-align:right;">
999
</td>
</tr>
</tbody>
</table>
</div>
<div id="smokingdrinking" class="section level2 unnumbered">
<h2 class="unnumbered">Smoking/drinking</h2>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" tabindex="-1"></a>smoking_drinking <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb287-2"><a href="#cb287-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb287-3"><a href="#cb287-3" tabindex="-1"></a>    .,</span>
<span id="cb287-4"><a href="#cb287-4" tabindex="-1"></a>    age_group,</span>
<span id="cb287-5"><a href="#cb287-5" tabindex="-1"></a>    child_sex,</span>
<span id="cb287-6"><a href="#cb287-6" tabindex="-1"></a>    language_child,</span>
<span id="cb287-7"><a href="#cb287-7" tabindex="-1"></a>    health.smoking.pregnant_smoking,</span>
<span id="cb287-8"><a href="#cb287-8" tabindex="-1"></a>    health.drinking.pregnant_drinking</span>
<span id="cb287-9"><a href="#cb287-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb287-10"><a href="#cb287-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(., <span class="at">preg_smoking =</span> health.smoking.pregnant_smoking,</span>
<span id="cb287-11"><a href="#cb287-11" tabindex="-1"></a>                <span class="at">preg_drinking =</span> health.drinking.pregnant_drinking)</span>
<span id="cb287-12"><a href="#cb287-12" tabindex="-1"></a></span>
<span id="cb287-13"><a href="#cb287-13" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> preg_smoking <span class="sc">+</span> preg_drinking, smoking_drinking)</span></code></pre></div>
<pre><code>##             preg_drinking
## preg_smoking  no refused yes
##    donotknow   1       0   0
##    no        306       0  69
##    refused     0       1   0
##    yes         0       0   1</code></pre>
</div>
<div id="sleeping-position" class="section level2 unnumbered">
<h2 class="unnumbered">Sleeping position</h2>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" tabindex="-1"></a>sleeping_pos <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb289-2"><a href="#cb289-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb289-3"><a href="#cb289-3" tabindex="-1"></a>    .,</span>
<span id="cb289-4"><a href="#cb289-4" tabindex="-1"></a>    age_group,</span>
<span id="cb289-5"><a href="#cb289-5" tabindex="-1"></a>    child_sex,</span>
<span id="cb289-6"><a href="#cb289-6" tabindex="-1"></a>    language_child,</span>
<span id="cb289-7"><a href="#cb289-7" tabindex="-1"></a>    health.general_health.child_sleeping_position</span>
<span id="cb289-8"><a href="#cb289-8" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb289-9"><a href="#cb289-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(., <span class="at">child_sleeping_position =</span> health.general_health.child_sleeping_position)</span>
<span id="cb289-10"><a href="#cb289-10" tabindex="-1"></a></span>
<span id="cb289-11"><a href="#cb289-11" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sleeping_position, <span class="at">data =</span> sleeping_pos)</span></code></pre></div>
<pre><code>## child_sleeping_position
##         back      changed    donotknow        other      refused         side 
##          361            4            1            2            1            3 
## stomach_down stomach_side 
##            1            7</code></pre>
<!--chapter:end:25-viz-health.Rmd-->
</div>
</div>
<div id="temperament-visualizations" class="section level1 unnumbered">
<h1 class="unnumbered">Temperament visualizations</h1>
<p>This page provides visualizations of the Early Childhood Behavior Questionnaire (ECBQ) data related to child temperament.</p>
<div id="setup-4" class="section level2 unnumbered">
<h2 class="unnumbered">Setup</h2>
<p>As of 2023-09-21, this workflow uses a separate set of functions specifically designed to extract ECBQ data from the raw KoBoToolbox files for <em>English-speaking families only</em>.</p>
<p>The functions are found in <code>R/</code> with the prefix <code>ecbq_</code>.</p>
<p>We create a “wide” data frame <code>ecbq_wide_df</code> as one of the targets of <code>targets:tar_make()</code>.
We attempt to load that here and ensure that all <code>R/ecbq_</code> functions are in the local environment.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&#39;ecbq_wide_df&#39;</span> <span class="sc">%in%</span> <span class="fu">ls</span>())) {</span>
<span id="cb291-2"><a href="#cb291-2" tabindex="-1"></a>  targets<span class="sc">::</span><span class="fu">tar_load</span>(ecbq_wide_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb291-3"><a href="#cb291-3" tabindex="-1"></a>}</span>
<span id="cb291-4"><a href="#cb291-4" tabindex="-1"></a></span>
<span id="cb291-5"><a href="#cb291-5" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span>(<span class="st">&#39;ecbq_plot_all&#39;</span> <span class="sc">%in%</span> <span class="fu">ls</span>())) {</span>
<span id="cb291-6"><a href="#cb291-6" tabindex="-1"></a>  ecbq_fl <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;../R&quot;</span>, <span class="st">&quot;^ecbq_&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb291-7"><a href="#cb291-7" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">walk</span>(ecbq_fl, source)</span>
<span id="cb291-8"><a href="#cb291-8" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="summarize" class="section level2 unnumbered">
<h2 class="unnumbered">Summarize</h2>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1" tabindex="-1"></a>ecbq_complete <span class="ot">&lt;-</span> ecbq_wide_df <span class="sc">|&gt;</span></span>
<span id="cb292-2"><a href="#cb292-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">complete</span>()</span>
<span id="cb292-3"><a href="#cb292-3" tabindex="-1"></a></span>
<span id="cb292-4"><a href="#cb292-4" tabindex="-1"></a><span class="fu">str</span>(ecbq_complete)</span></code></pre></div>
<pre><code>## tibble [413 × 40] (S3: tbl_df/tbl/data.frame)
##  $ participant_id              : chr [1:413] &quot;PILOT&quot; &quot;o6Ri9H8Ka0A&quot; &quot;U1Ro3M7Ri&quot; &quot;e0N4H8O2A&quot; ...
##  $ child_sex                   : chr [1:413] &quot;male&quot; &quot;female&quot; &quot;male&quot; &quot;female&quot; ...
##  $ age_group                   : chr [1:413] &quot;18mo&quot; &quot;18mo&quot; &quot;24mo&quot; &quot;12mo&quot; ...
##  $ rothbart_unfamiliarperson   : chr [1:413] &quot;very_rarely&quot; &quot;very_rarely&quot; &quot;always&quot; &quot;very_rarely&quot; ...
##  $ rothbart_troubletask        : chr [1:413] &quot;less_than_half&quot; &quot;less_than_half&quot; &quot;less_than_half&quot; &quot;very_rarely&quot; ...
##  $ rothbart_companyofchild     : chr [1:413] &quot;more_than_half&quot; NA &quot;always&quot; &quot;almost_always&quot; ...
##  $ rothbart_choiceactivities   : chr [1:413] &quot;almost_always&quot; &quot;always&quot; &quot;almost_always&quot; &quot;almost_always&quot; ...
##  $ rothbart_quietlysung        : chr [1:413] NA &quot;almost_always&quot; &quot;less_than_half&quot; &quot;more_than_half&quot; ...
##  $ rothbart_playingoutdoors    : chr [1:413] &quot;about_half&quot; &quot;more_than_half&quot; &quot;always&quot; &quot;always&quot; ...
##  $ rothbart_morethan10         : chr [1:413] &quot;less_than_half&quot; &quot;never&quot; &quot;more_than_half&quot; &quot;more_than_half&quot; ...
##  $ rothbart_respondingremarks  : chr [1:413] &quot;almost_always&quot; &quot;almost_always&quot; &quot;about_half&quot; &quot;about_half&quot; ...
##  $ rothbart_excitedlovedadults : chr [1:413] NA &quot;very_rarely&quot; &quot;almost_always&quot; NA ...
##  $ rothbart_fiddlehair         : chr [1:413] &quot;about_half&quot; &quot;very_rarely&quot; &quot;very_rarely&quot; &quot;more_than_half&quot; ...
##  $ rothbart_roughrowdy         : chr [1:413] &quot;about_half&quot; &quot;very_rarely&quot; &quot;more_than_half&quot; &quot;about_half&quot; ...
##  $ rothbart_rockedhugged       : chr [1:413] &quot;never&quot; &quot;about_half&quot; &quot;less_than_half&quot; &quot;less_than_half&quot; ...
##  $ rothbart_involvednewactivity: chr [1:413] &quot;almost_always&quot; &quot;more_than_half&quot; &quot;more_than_half&quot; &quot;almost_always&quot; ...
##  $ rothbart_tirequickly        : chr [1:413] &quot;very_rarely&quot; &quot;almost_always&quot; &quot;about_half&quot; &quot;less_than_half&quot; ...
##  $ rothbart_callattention      : chr [1:413] &quot;more_than_half&quot; &quot;more_than_half&quot; &quot;almost_always&quot; &quot;more_than_half&quot; ...
##  $ rothbart_tags               : chr [1:413] &quot;never&quot; &quot;never&quot; &quot;never&quot; &quot;never&quot; ...
##  $ rothbart_noisyenvironment   : chr [1:413] &quot;very_rarely&quot; &quot;never&quot; NA &quot;never&quot; ...
##  $ rothbart_energy             : chr [1:413] &quot;almost_always&quot; &quot;more_than_half&quot; &quot;almost_always&quot; &quot;almost_always&quot; ...
##  $ rothbart_vehicles           : chr [1:413] &quot;very_rarely&quot; &quot;never&quot; &quot;never&quot; &quot;very_rarely&quot; ...
##  $ rothbart_active             : chr [1:413] &quot;almost_always&quot; &quot;never&quot; &quot;less_than_half&quot; &quot;almost_always&quot; ...
##  $ rothbart_forbidden          : chr [1:413] &quot;more_than_half&quot; &quot;almost_always&quot; &quot;very_rarely&quot; &quot;almost_always&quot; ...
##  $ rothbart_sadlytearful       : chr [1:413] &quot;less_than_half&quot; &quot;very_rarely&quot; &quot;almost_always&quot; &quot;very_rarely&quot; ...
##  $ rothbart_downblue           : chr [1:413] &quot;never&quot; &quot;never&quot; &quot;very_rarely&quot; &quot;never&quot; ...
##  $ rothbart_runhouse           : chr [1:413] &quot;less_than_half&quot; &quot;about_half&quot; &quot;always&quot; NA ...
##  $ rothbart_excitingevent      : chr [1:413] &quot;less_than_half&quot; NA &quot;almost_always&quot; &quot;almost_always&quot; ...
##  $ rothbart_tempertantrum      : chr [1:413] &quot;very_rarely&quot; &quot;more_than_half&quot; &quot;about_half&quot; &quot;very_rarely&quot; ...
##  $ rothbart_waitpatiently      : chr [1:413] &quot;about_half&quot; &quot;very_rarely&quot; &quot;very_rarely&quot; &quot;almost_always&quot; ...
##  $ rothbart_rockedsmile        : chr [1:413] &quot;almost_always&quot; NA NA &quot;almost_always&quot; ...
##  $ rothbart_mold               : chr [1:413] &quot;almost_always&quot; &quot;about_half&quot; &quot;more_than_half&quot; &quot;more_than_half&quot; ...
##  $ rothbart_interactadult      : chr [1:413] &quot;always&quot; &quot;always&quot; &quot;always&quot; &quot;always&quot; ...
##  $ rothbart_careful            : chr [1:413] NA &quot;almost_always&quot; &quot;almost_always&quot; NA ...
##  $ rothbart_enternewplace      : chr [1:413] &quot;never&quot; &quot;never&quot; &quot;almost_always&quot; &quot;very_rarely&quot; ...
##  $ rothbart_crymorethan3       : chr [1:413] &quot;never&quot; &quot;never&quot; &quot;less_than_half&quot; &quot;very_rarely&quot; ...
##  $ rothbart_easilysoothed      : chr [1:413] &quot;almost_always&quot; &quot;almost_always&quot; &quot;almost_always&quot; &quot;almost_always&quot; ...
##  $ rothbart_busyother          : chr [1:413] &quot;less_than_half&quot; &quot;about_half&quot; &quot;more_than_half&quot; &quot;almost_always&quot; ...
##  $ rothbart_differentpeople    : chr [1:413] &quot;always&quot; &quot;more_than_half&quot; &quot;almost_always&quot; &quot;always&quot; ...
##  $ rothbart_comments           : chr [1:413] NA NA NA NA ...</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> age_group <span class="sc">+</span> child_sex, ecbq_complete)</span></code></pre></div>
<pre><code>##          child_sex
## age_group female male
##      12mo     80   65
##      18mo     64   80
##      24mo     59   65</code></pre>
</div>
<div id="visualize" class="section level2 unnumbered">
<h2 class="unnumbered">Visualize</h2>
<p>For now, we just plot a couple of variables.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" tabindex="-1"></a>ecbq_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(ecbq_complete)[stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">names</span>(ecbq_complete),<span class="st">&quot;rothbart_&quot;</span>)]</span></code></pre></div>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" tabindex="-1"></a><span class="fu">ecbq_plot</span>(ecbq_complete, ecbq_vars[<span class="dv">1</span>])</span></code></pre></div>
<p><img src="include/img/unnamed-chunk-75-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1" tabindex="-1"></a><span class="fu">ecbq_plot</span>(ecbq_complete, ecbq_vars[<span class="dv">2</span>])</span></code></pre></div>
<p><img src="include/img/unnamed-chunk-76-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" tabindex="-1"></a><span class="fu">ecbq_plot</span>(ecbq_complete, ecbq_vars[<span class="dv">3</span>])</span></code></pre></div>
<p><img src="include/img/unnamed-chunk-77-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" tabindex="-1"></a><span class="fu">ecbq_plot</span>(ecbq_complete, ecbq_vars[<span class="dv">4</span>])</span></code></pre></div>
<p><img src="include/img/unnamed-chunk-78-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1" tabindex="-1"></a><span class="fu">ecbq_plot</span>(ecbq_complete, ecbq_vars[<span class="dv">5</span>])</span></code></pre></div>
<p><img src="include/img/unnamed-chunk-79-1.png" width="672" style="display: block; margin: auto;" /></p>
<!--chapter:end:26-viz-temperament.Rmd-->
</div>
</div>
<div id="post-visit-data" class="section level1 unnumbered">
<h1 class="unnumbered">Post-visit data</h1>
<p>We load the post-visit survey data.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1" tabindex="-1"></a><span class="fu">tar_load</span>(post_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb302-2"><a href="#cb302-2" tabindex="-1"></a></span>
<span id="cb302-3"><a href="#cb302-3" tabindex="-1"></a><span class="fu">dim</span>(post_visit_df)</span></code></pre></div>
<pre><code>## [1] 384 178</code></pre>
<div class="rmdnote">
<p>Cleaning this data is set aside for future work.</p>
</div>
<!--chapter:end:29-post-visit.Rmd-->
</div>
<div id="part-project-monitoring" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Project Monitoring</h1>
<!--chapter:end:30-management.Rmd-->
</div>
<div id="state-of-play" class="section level1 unnumbered">
<h1 class="unnumbered">State of PLAY</h1>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(tidyverse))</span>
<span id="cb304-2"><a href="#cb304-2" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(lubridate))</span>
<span id="cb304-3"><a href="#cb304-3" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(forcats))</span></code></pre></div>
<p>The following summarizes the current state of the project as of 2023-09-21.</p>
<div id="recent-data" class="section level2 unnumbered">
<h2 class="unnumbered">Recent data</h2>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(screen_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb305-2"><a href="#cb305-2" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb305-3"><a href="#cb305-3" tabindex="-1"></a></span>
<span id="cb305-4"><a href="#cb305-4" tabindex="-1"></a>screen_df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;data/csv/screening/agg/PLAY-screening-latest.csv&quot;</span>))</span></code></pre></div>
<pre><code>## Rows: 546 Columns: 51
## ── Column specification ─────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (42): site_id, subject_number, play_id, child_sex, child_bornonduedate, ...
## dbl   (8): child_age_mos, child_birthage, child_weight_pounds, child_weight_o...
## dttm  (1): submit_date
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div id="last-month" class="section level3 unnumbered">
<h3 class="unnumbered">Last month</h3>
<div id="screening-calls" class="section level4 unnumbered">
<h4 class="unnumbered">Screening calls</h4>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" tabindex="-1"></a>month_ago <span class="ot">&lt;-</span> now <span class="sc">-</span> <span class="fu">dmonths</span>(<span class="dv">1</span>)</span>
<span id="cb307-2"><a href="#cb307-2" tabindex="-1"></a>screen_last_month_df <span class="ot">&lt;-</span> screen_df <span class="sc">%&gt;%</span></span>
<span id="cb307-3"><a href="#cb307-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(submit_date <span class="sc">&gt;</span> month_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 18 recruiting calls since 2023-08-21 13:30:00.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(screen_last_month_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/unnamed-chunk-80-1.png" alt="Screening calls in last month by site" width="672" />
<p class="caption">
(#fig:unnamed-chunk-80)Screening calls in last month by site
</p>
</div>
</div>
<div id="home-visits" class="section level4 unnumbered">
<h4 class="unnumbered">Home visits</h4>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" tabindex="-1"></a>home_last_month_df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb309-2"><a href="#cb309-2" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(date_today <span class="sc">&gt;</span> month_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 15 home visits since 2023-08-21 13:30:00.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(home_last_month_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-mo-home-visit-1.png" alt="Home visits in last month by site" width="672" />
<p class="caption">
(#fig:fig-last-mo-home-visit)Home visits in last month by site
</p>
</div>
</div>
</div>
<div id="last-3-mos" class="section level3 unnumbered">
<h3 class="unnumbered">Last 3 mos</h3>
<div id="screening-calls-1" class="section level4 unnumbered">
<h4 class="unnumbered">Screening calls</h4>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" tabindex="-1"></a>three_mos_ago <span class="ot">&lt;-</span> now <span class="sc">-</span> <span class="fu">dmonths</span>(<span class="dv">3</span>)</span>
<span id="cb311-2"><a href="#cb311-2" tabindex="-1"></a>screen_last_3_df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb311-3"><a href="#cb311-3" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(submit_date <span class="sc">&gt;</span> three_mos_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 66 screening calls since 2023-06-21 16:30:00.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(screen_last_3_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-3mo-calls-1.png" alt="Screening calls in last 3 months by site" width="672" />
<p class="caption">
(#fig:fig-last-3mo-calls)Screening calls in last 3 months by site
</p>
</div>
</div>
<div id="home-visits-1" class="section level4 unnumbered">
<h4 class="unnumbered">Home visits</h4>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" tabindex="-1"></a>home_last_3_month_df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb313-2"><a href="#cb313-2" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(date_today <span class="sc">&gt;</span> three_mos_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 60 home visits since 2023-06-21 16:30:00.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(home_last_3_month_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-3mo-home-visit-1.png" alt="Home visits in last 3 months by site" width="672" />
<p class="caption">
(#fig:fig-last-3mo-home-visit)Home visits in last 3 months by site
</p>
</div>
</div>
</div>
<div id="last-6-mos" class="section level3 unnumbered">
<h3 class="unnumbered">Last 6 mos</h3>
<div id="screening-calls-2" class="section level4 unnumbered">
<h4 class="unnumbered">Screening calls</h4>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" tabindex="-1"></a>six_mos_ago <span class="ot">&lt;-</span> now <span class="sc">-</span> <span class="fu">dmonths</span>(<span class="dv">6</span>)</span>
<span id="cb315-2"><a href="#cb315-2" tabindex="-1"></a>screen_last_6_df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb315-3"><a href="#cb315-3" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(submit_date <span class="sc">&gt;</span> six_mos_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 174 screening calls since 2023-03-22 09:00:00.</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(screen_last_6_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-6mo-calls-1.png" alt="Screening calls in last 6 months by site" width="672" />
<p class="caption">
(#fig:fig-last-6mo-calls)Screening calls in last 6 months by site
</p>
</div>
</div>
<div id="home-visits-2" class="section level4 unnumbered">
<h4 class="unnumbered">Home visits</h4>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" tabindex="-1"></a>home_last_6_month_df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb317-2"><a href="#cb317-2" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(date_today <span class="sc">&gt;</span> six_mos_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 169 home visits since 2023-03-22 09:00:00.</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(home_last_6_month_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-6mo-home-visit-1.png" alt="Home visits in last 6 months by site" width="672" />
<p class="caption">
(#fig:fig-last-6mo-home-visit)Home visits in last 6 months by site
</p>
</div>
</div>
</div>
</div>
<div id="overall" class="section level2 unnumbered">
<h2 class="unnumbered">Overall</h2>
<div id="from-databrary" class="section level3 unnumbered">
<h3 class="unnumbered">From Databrary</h3>
<p>Because of some minor anomalies merging the older KBT surveys, we query the Databrary API for the most complete data about PLAY sessions.
For debugging purposes, we set <code>vb = TRUE</code> so we get complete information about what’s working and what is not.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" tabindex="-1"></a>databraryr<span class="sc">::</span><span class="fu">login_db</span>(<span class="fu">Sys.getenv</span>(<span class="st">&quot;DATABRARY_LOGIN&quot;</span>))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" tabindex="-1"></a>databrary_df <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_df</span>(play_vols<span class="sc">$</span>play_site_id, make_site_session_summary, <span class="at">vb =</span> <span class="cn">TRUE</span>) </span>
<span id="cb321-2"><a href="#cb321-2" tabindex="-1"></a></span>
<span id="cb321-3"><a href="#cb321-3" tabindex="-1"></a>databrary_df <span class="sc">%&gt;%</span></span>
<span id="cb321-4"><a href="#cb321-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., site_name, site_id, site_vol_id, PLAY_Gold, PLAY_Silver, No_Visit, <span class="st">`</span><span class="at">NA</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb321-5"><a href="#cb321-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(., <span class="fu">desc</span>(PLAY_Gold)) <span class="sc">%&gt;%</span></span>
<span id="cb321-6"><a href="#cb321-6" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(., <span class="at">format =</span> <span class="st">&#39;html&#39;</span>) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
site_name
</th>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:right;">
site_vol_id
</th>
<th style="text-align:right;">
PLAY_Gold
</th>
<th style="text-align:right;">
PLAY_Silver
</th>
<th style="text-align:right;">
No_Visit
</th>
<th style="text-align:right;">
NA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Ohio State University
</td>
<td style="text-align:left;">
PLAYProject_OHIOS
</td>
<td style="text-align:right;">
1103
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
New York University
</td>
<td style="text-align:left;">
PLAYProject_NYUNI
</td>
<td style="text-align:right;">
899
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Georgia
</td>
<td style="text-align:left;">
PLAYProject_UGEOR
</td>
<td style="text-align:right;">
1515
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Georgetown University
</td>
<td style="text-align:left;">
PLAYProject_GEORG
</td>
<td style="text-align:right;">
954
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
UC Santa Cruz
</td>
<td style="text-align:left;">
PLAYProject_UCSCR
</td>
<td style="text-align:right;">
1066
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Texas at Austin
</td>
<td style="text-align:left;">
PLAYProject_UTAUS
</td>
<td style="text-align:right;">
1517
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Houston
</td>
<td style="text-align:left;">
PLAYProject_UHOUS
</td>
<td style="text-align:right;">
1397
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Children’s Hospital of Philadelphia
</td>
<td style="text-align:left;">
PLAYProject_CHOPH
</td>
<td style="text-align:right;">
1370
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Purdue University
</td>
<td style="text-align:left;">
PLAYProject_PURDU
</td>
<td style="text-align:right;">
1363
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Vanderbilt University
</td>
<td style="text-align:left;">
PLAYProject_VBLTU
</td>
<td style="text-align:right;">
1391
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Cal State Long Beach
</td>
<td style="text-align:left;">
PLAYProject_CSULB
</td>
<td style="text-align:right;">
1376
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Iowa
</td>
<td style="text-align:left;">
PLAYProject_UIOWA
</td>
<td style="text-align:right;">
1422
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Boston University
</td>
<td style="text-align:left;">
PLAYProject_BOSTU
</td>
<td style="text-align:right;">
1008
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
UC Riverside
</td>
<td style="text-align:left;">
PLAYProject_UCRIV
</td>
<td style="text-align:right;">
966
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Cal State Fullerton
</td>
<td style="text-align:left;">
PLAYProject_CSUFL
</td>
<td style="text-align:right;">
1481
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Miami
</td>
<td style="text-align:left;">
PLAYProject_UMIAM
</td>
<td style="text-align:right;">
996
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
Indiana University
</td>
<td style="text-align:left;">
PLAYProject_INDNA
</td>
<td style="text-align:right;">
1400
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Michigan State University
</td>
<td style="text-align:left;">
PLAYProject_MICHS
</td>
<td style="text-align:right;">
1590
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Stanford University
</td>
<td style="text-align:left;">
PLAYProject_STANF
</td>
<td style="text-align:right;">
1362
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Virginia Commonwealth University
</td>
<td style="text-align:left;">
PLAYProject_VCOMU
</td>
<td style="text-align:right;">
982
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Cornell University
</td>
<td style="text-align:left;">
PLAYProject_CORNL
</td>
<td style="text-align:right;">
1576
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div id="from-kbt" class="section level3 unnumbered">
<h3 class="unnumbered">From KBT</h3>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_w_databrary_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb322-2"><a href="#cb322-2" tabindex="-1"></a></span>
<span id="cb322-3"><a href="#cb322-3" tabindex="-1"></a>gold_silver <span class="ot">&lt;-</span> home_visit_w_databrary_df <span class="sc">%&gt;%</span></span>
<span id="cb322-4"><a href="#cb322-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(group_name))</span>
<span id="cb322-5"><a href="#cb322-5" tabindex="-1"></a></span>
<span id="cb322-6"><a href="#cb322-6" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> group_name <span class="sc">+</span> age_group, gold_silver)</span></code></pre></div>
<pre><code>##              age_group
## group_name    12mo 18mo 24mo
##   PLAY_Gold    109  103   84
##   PLAY_Silver   12   29   24</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> group_name <span class="sc">+</span> child_sex, gold_silver)</span></code></pre></div>
<pre><code>##              child_sex
## group_name    female male
##   PLAY_Gold      143  153
##   PLAY_Silver     28   37</code></pre>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" tabindex="-1"></a>df_race_eth <span class="ot">&lt;-</span> gold_silver <span class="sc">%&gt;%</span></span>
<span id="cb326-2"><a href="#cb326-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(group_name)) <span class="sc">%&gt;%</span></span>
<span id="cb326-3"><a href="#cb326-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(., <span class="at">participant_race =</span> <span class="fu">recode</span>(participant_race, </span>
<span id="cb326-4"><a href="#cb326-4" tabindex="-1"></a>                                             <span class="st">`</span><span class="at">Black or African American</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Black_or_African_American&quot;</span>,</span>
<span id="cb326-5"><a href="#cb326-5" tabindex="-1"></a>                                             <span class="st">`</span><span class="at">More than one</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;More_than_one&quot;</span>),</span>
<span id="cb326-6"><a href="#cb326-6" tabindex="-1"></a>                <span class="at">participant_ethnicity =</span> <span class="fu">recode</span>(participant_ethnicity, </span>
<span id="cb326-7"><a href="#cb326-7" tabindex="-1"></a>                                               <span class="st">`</span><span class="at">Hispanic or Latino</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Hispanic_or_Latino&quot;</span>,</span>
<span id="cb326-8"><a href="#cb326-8" tabindex="-1"></a>                                               <span class="st">`</span><span class="at">Not Hispanic or Latino</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Not_Hispanic_or_Latino&quot;</span>))</span>
<span id="cb326-9"><a href="#cb326-9" tabindex="-1"></a></span>
<span id="cb326-10"><a href="#cb326-10" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> participant_race <span class="sc">+</span> participant_ethnicity, df_race_eth)</span></code></pre></div>
<pre><code>##                                    participant_ethnicity
## participant_race                    Hispanic_or_Latino Not_Hispanic_or_Latino
##   Asian                                              0                      3
##   Black_or_African_American                          1                      6
##   More_than_one                                     19                     28
##   Native American or Alaskan Native                  1                      0
##   Other                                             22                      6
##   Refused                                            1                      0
##   White                                             52                    222</code></pre>
</div>
<div id="by-site-location-qa-status" class="section level3 unnumbered">
<h3 class="unnumbered">By site, location, &amp; QA status</h3>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> site_id <span class="sc">+</span> group_name, gold_silver)</span></code></pre></div>
<pre><code>##        group_name
## site_id PLAY_Gold PLAY_Silver
##   BOSTU         8           6
##   CHOPH        19           5
##   CORNL         0           2
##   CSUFL         6           4
##   CSULB         9           1
##   GEORG        23           2
##   INDNA         4           2
##   MICHS         2           2
##   NYUNI        30          10
##   OHIOS        47           3
##   PURDU        12           5
##   STANF         1           1
##   UCRIV         8           1
##   UCSCR        25           1
##   UGEOR        31           6
##   UHOUS        22           3
##   UIOWA         8           3
##   UMIAM         6           2
##   UTAUS        25           4
##   VBLTU        10           2</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" tabindex="-1"></a>gold_silver <span class="sc">%&gt;%</span></span>
<span id="cb330-2"><a href="#cb330-2" tabindex="-1"></a>    <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb330-3"><a href="#cb330-3" tabindex="-1"></a>    <span class="fu">aes</span>(forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(context_state), <span class="at">fill =</span> context_state) <span class="sc">+</span></span>
<span id="cb330-4"><a href="#cb330-4" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb330-5"><a href="#cb330-5" tabindex="-1"></a>    <span class="fu">facet_grid</span>(. <span class="sc">~</span> group_name) <span class="sc">+</span></span>
<span id="cb330-6"><a href="#cb330-6" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb330-7"><a href="#cb330-7" tabindex="-1"></a>      <span class="at">angle =</span> <span class="dv">90</span>,</span>
<span id="cb330-8"><a href="#cb330-8" tabindex="-1"></a>      <span class="at">vjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb330-9"><a href="#cb330-9" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="dv">1</span></span>
<span id="cb330-10"><a href="#cb330-10" tabindex="-1"></a>    )) <span class="sc">+</span> <span class="co"># Rotate text</span></span>
<span id="cb330-11"><a href="#cb330-11" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;State&quot;</span>, <span class="at">y =</span> <span class="st">&quot;N participants&quot;</span>) <span class="sc">+</span></span>
<span id="cb330-12"><a href="#cb330-12" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-qa-level-by-state-1.png" alt="QA level by State" width="672" />
<p class="caption">
(#fig:fig-qa-level-by-state)QA level by State
</p>
</div>
</div>
</div>
<div id="clean-up" class="section level2 unnumbered">
<h2 class="unnumbered">Clean-up</h2>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;../.databrary.RData&quot;</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb331-2"><a href="#cb331-2" tabindex="-1"></a>databraryr<span class="sc">::</span><span class="fu">logout_db</span>()</span></code></pre></div>
<pre><code>## Logout Successful.</code></pre>
<pre><code>## [1] TRUE</code></pre>
<!--chapter:end:32-state-of-PLAY.Rmd-->
</div>
</div>
<!--bookdown:body:end-->
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>PLAY Project: Surveys</strong>" was written by Rick Gilmore. It was last built on 2023-09-21.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
