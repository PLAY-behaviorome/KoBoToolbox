<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>PLAY Project: Surveys</title>

    <meta name="author" content="Rick Gilmore" />
  
   <meta name="description" content="Protocol for processing PLAY Project survey data" />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="PLAY Project: Surveys" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Protocol for processing PLAY Project survey data" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="PLAY Project: Surveys" />
  
  <meta name="twitter:description" content="Protocol for processing PLAY Project survey data" />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.5.0/transition.js"></script>
    <script src="libs/bs3compat-0.5.0/tabs.js"></script>
    <script src="libs/bs3compat-0.5.0/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="include/css/style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<!--bookdown:title:start-->
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">PLAY Project: Surveys</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="about" class="section level1 unnumbered">
<h1 class="unnumbered">About</h1>
<p><a href="https://play-project.org" target="_blank"><img src="include/img/PLAY-logo.png" width="75%" style="display: block; margin: auto;" /></a></p>
<div id="purpose" class="section level2 unnumbered">
<h2 class="unnumbered">Purpose</h2>
<p>PLAY project researchers use <a href="https://www.kobotoolbox.org/">KoBoToolbox</a> to collect data from participant families.
Data from all sessions at all PLAY data collection sites are pushed to a common set of files on the KoBoToolbox server.</p>
<p>This document describes the process of i) downloading, ii) parsing, iii) cleaning, and iv) exporting these files into forms more suitable for data analysis.</p>
<p>For details about the PLAY Project data collection protocol, see <a href="https://PLAY-behaviorome.github.io/protocol/" class="uri">https://PLAY-behaviorome.github.io/protocol/</a>.</p>
</div>
<div id="overview-of-data-sets" class="section level2 unnumbered">
<h2 class="unnumbered">Overview of data sets</h2>
<p>There are three sets of data collected using KoBoToolbox.
One set is collected during the recruiting and screening calls for the study.
The second set is collected during the home visit.
The third set consists of notes generated by the experimenter after the visit.</p>
<div id="data-access-and-processing" class="section level3 unnumbered">
<h3 class="unnumbered">Data access and processing</h3>
<p>All data are downloaded and manipulated locally but are <strong>not</strong> synched to GitHub.
This is accomplished by adding <code>data</code> to <a href=".gitignore"><code>.gitignore</code></a>.</p>
<p>There are separate processes for detecting and deleting personal identifiers from specific data files and exporting ‘cleaned’ versions that may be shared on Databrary.</p>
</div>
<div id="home-visit-data" class="section level3 unnumbered">
<h3 class="unnumbered">Home visit data</h3>
<p>There are three (3) age groups (12-, 18-, and 24-month-olds) and four (4) different language environment groups (English-only, Spanish-only, Bilingual-English-dominant, Bilingual-Spanish-dominant).
Since the language of the questions and some of the specific questions vary by age group and by language environment group, there multiple KoBoToolbox survey form files that must be processed.</p>
<!--chapter:end:index.Rmd-->
</div>
</div>
</div>
<div id="part-tools-and-processes" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Tools and Processes</h1>
<!--chapter:end:00-tools.Rmd-->
</div>
<div id="setup" class="section level1 unnumbered">
<h1 class="unnumbered">Setup</h1>
<p>This section describes the setup procedure.</p>
<div id="authentication" class="section level2 unnumbered">
<h2 class="unnumbered">Authentication</h2>
<p>The data are stored in an account on <a href="https://kf.kobotoolbox.org" class="uri">https://kf.kobotoolbox.org</a>.
The login credentials for that account are shared among the PLAY Project staff.
To access the site’s API programmatically, an API key was downloaded and added to the local <code>~/.Renviron</code> file.</p>
<!-- https://bookdown.org/yihui/bookdown/html.html#callout-blocks -->
<!--Available blocks are: .rmdnote, .rmdcaution, .rmdimportant, .rmdtip, and .rmdwarning -->
<div class="rmdimportant">
<p>The KoBoToolBox API key is <strong>not</strong> synched to GitHub.</p>
</div>
</div>
<div id="set-up" class="section level2 unnumbered">
<h2 class="unnumbered">Set-up</h2>
<p>To test whether the local system has the API key installed, we run the command <code>Sys.getenv("KOBO_API_KEY")</code>.</p>
<div id="check-kobo-api-key" class="section level3 unnumbered">
<h3 class="unnumbered">Check KoBo API Key</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>kb_api <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;KOBO_API_KEY&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="cf">if</span> ((<span class="fu">length</span>(kb_api) <span class="sc">!=</span> <span class="dv">1</span>) <span class="sc">||</span> (<span class="sc">!</span><span class="fu">is.character</span>(kb_api))) {</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">&quot;&#39;KOBO_API_KEY&#39; not installed in .Renviron&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;&#39;KOBO_API_KEY&#39; installed.&quot;</span>)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## &#39;KOBO_API_KEY&#39; installed.</code></pre>
</div>
<div id="check-databrary-credentials" class="section level3 unnumbered">
<h3 class="unnumbered">Check Databrary credentials</h3>
<p>The <code>databraryapi</code> package handles authenticating to Databrary.
For scripting access to Databrary that require authentication, it is useful to store the user’s Databrary login (email) in <code>.Renviron</code> using the R command <code>Sys.setenv(DATABRARY_LOGIN = "&lt;email@provider.com&gt;")</code> where you substitute your Databrary login (email) for <code>&lt;email@provider.com&gt;</code>.
When this has been accomplished the following code can be run to check the status of the saved variable.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>db_logon <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">&quot;DATABRARY_LOGIN&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="cf">if</span> ((<span class="fu">length</span>(db_logon) <span class="sc">!=</span> <span class="dv">1</span>) <span class="sc">||</span> (<span class="sc">!</span><span class="fu">is.character</span>(db_logon)) <span class="sc">||</span> (db_logon <span class="sc">==</span> <span class="st">&quot;&quot;</span>)) {</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">&quot;&#39;DATABRARY_LOGIN&#39; not installed in .Renviron&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;&#39;DATABRARY_LOGIN&#39; installed.&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## &#39;DATABRARY_LOGIN&#39; installed.</code></pre>
</div>
<div id="install-dependencies" class="section level3 unnumbered">
<h3 class="unnumbered">Install dependencies</h3>
<p>We now use the <a href="https://cran.r-project.org/web/packages/renv/index.html"><code>renv</code></a> package to manage package dependencies.</p>
</div>
<div id="loadsource-helper-functions" class="section level3 unnumbered">
<h3 class="unnumbered">Load/source helper functions</h3>
<p>Most of the work is contained in <code>R/functions.R</code>.
This is sourced when we run <code>tar_make()</code> from the <code>{targets}</code> package.</p>
<div class="rmdimportant">
<p>We run <code>targets::tar_make()</code> manually for the time being.</p>
<p>None of the outputs are synced to GitHub.</p>
</div>
</div>
</div>
<div id="approach" class="section level2" number="0.1">
<h2><span class="header-section-number">0.1</span> Approach</h2>
<p>To make the workflow more robust and reproducible, much of the work is embedded in functions and extensive use is made of the <a href="https://cran.r-project.org/web/packages/targets/"><code>{targets}</code></a> package.
This document describes the workflow, but none of these code chunks are executed.</p>
<p>We leave execution to the <code>targets::tar_make()</code> function which updates components as needed.</p>
<div class="rmdnote">
<p>I am currently working on implementing most of the functions using the <code>box</code> package. This allows better isolation of dependencies within different components of the workflow.</p>
<p>The box-related functions are in a new <code>play/</code> directory, and the R source files are divided into categories.
The functions related to processing the screening/demographic data are in <code>play/screen.R</code>.</p>
<p>They will be loaded into the workspace via <code>box::use(play/screen)</code> or for modules within <code>play/</code> via <code>box::use(./screen)</code>.</p>
</div>
<!--chapter:end:01-setup.Rmd-->
</div>
</div>
<div id="part-data-wrangling" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Data Wrangling</h1>
<!--chapter:end:10-wrangling.Rmd-->
</div>
<div id="screening-call" class="section level1 unnumbered">
<h1 class="unnumbered">Screening call</h1>
<div id="collection-protocol" class="section level2 unnumbered">
<h2 class="unnumbered">Collection protocol</h2>
<p>Details about the data collection <a href="https://www.play-project.org/collection.html#Participant_Recruitment">protocol for participant screening and recruiting</a> can be found on the <a href="https://play-project.org">PLAY Project website</a>.</p>
</div>
<div id="retrieve-from-kobotoolbox-kbt" class="section level2 unnumbered">
<h2 class="unnumbered">Retrieve from KoBoToolbox (KBT)</h2>
<div id="setup-1" class="section level3 unnumbered">
<h3 class="unnumbered">Setup</h3>
<p>Load functions needed to download KBT screening/demographic questionnaire files.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>kb_fl <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;R&quot;</span>), <span class="st">&quot;^kobo_&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">walk</span>(kb_fl, source)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>file_fl <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;R&quot;</span>), <span class="st">&quot;^file_&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">walk</span>(file_fl, source)</span></code></pre></div>
</div>
<div id="download" class="section level3 unnumbered">
<h3 class="unnumbered">Download</h3>
<p>First, we list the screening call data files available on KBT.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>(kb_screen_df <span class="ot">&lt;-</span> <span class="fu">kobo_list_data_filtered</span>(<span class="st">&quot;[Dd]emographic&quot;</span>))</span></code></pre></div>
<pre><code>##       id              id_string                                    title
## 1 334134 agChfbnGHc6fiUdfYUaZ2z PLAY Demographic Questionnaire (Spanish)
## 2 359546 aGLEqT7eRBhuPgizCQBeqA           PLAY Demographic Questionnaire
## 3 275882 anqhvxKtQieo7gc9uPqJ3y           PLAY Demographic Questionnaire
##                                description                                           url
## 1 PLAY Demographic Questionnaire (Spanish) https://kc.kobotoolbox.org/api/v1/data/334134
## 2            New Demographic Questionnaire https://kc.kobotoolbox.org/api/v1/data/359546
## 3                 PLAY Phone Questionnaire https://kc.kobotoolbox.org/api/v1/data/275882</code></pre>
<p>Then we retrieve and save these files.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">kobo_retrieve_save_many_xlsx</span>(kb_screen_df, <span class="at">save_dir =</span> <span class="st">&quot;../data/xlsx/screening&quot;</span>)</span></code></pre></div>
<pre><code>## Retrieving 3 files from KoBoToolbox site.</code></pre>
<pre><code>## [1] &quot;../data/xlsx/screening/334134_PLAY_Demographic_Questionnaire_Spanish.xlsx&quot;
## [2] &quot;../data/xlsx/screening/359546_PLAY_Demographic_Questionnaire.xlsx&quot;        
## [3] &quot;../data/xlsx/screening/275882_PLAY_Demographic_Questionnaire.xlsx&quot;</code></pre>
<p>Next, we convert the XLSX files to CSVs via a function from the <code>play/files</code> module.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">file_load_xlsx_save_many_csv</span>(<span class="st">&quot;../data/xlsx/screening&quot;</span>, <span class="st">&quot;../data/csv/screening&quot;</span>, <span class="st">&quot;Demographic&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in read_fun(path = path, sheet_i = sheet, limits = limits, shim = shim, : NA
## inserted for an unsupported date prior to 1900</code></pre>
<pre><code>## [1] &quot;../data/csv/screening/275882_PLAY_Demographic_Questionnaire.csv&quot;        
## [2] &quot;../data/csv/screening/334134_PLAY_Demographic_Questionnaire_Spanish.csv&quot;
## [3] &quot;../data/csv/screening/359546_PLAY_Demographic_Questionnaire.csv&quot;</code></pre>
</div>
</div>
<div id="clean-and-merge" class="section level2 unnumbered">
<h2 class="unnumbered">Clean and merge</h2>
<div id="setup-2" class="section level3 unnumbered">
<h3 class="unnumbered">Setup</h3>
<p>A set of cleaning functions have the <code>screen_</code> prefix.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">walk</span>(<span class="fu">list.files</span>(<span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;R&quot;</span>), </span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>                    <span class="st">&quot;^screen_&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>), source)</span></code></pre></div>
<p>There are three CSV files to clean:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>(fn <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;../data/csv/screening&quot;</span>, <span class="st">&quot;[Dd]emographic&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## [1] &quot;../data/csv/screening/275882_PLAY_Demographic_Questionnaire.csv&quot;        
## [2] &quot;../data/csv/screening/334134_PLAY_Demographic_Questionnaire_Spanish.csv&quot;
## [3] &quot;../data/csv/screening/359546_PLAY_Demographic_Questionnaire.csv&quot;</code></pre>
<p>We clean them separately, as needed, then merge them.</p>
</div>
<div id="clean-variable-names" class="section level3 unnumbered">
<h3 class="unnumbered">Clean variable names</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(fn[<span class="dv">1</span>],</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>                  <span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(<span class="at">.default =</span> <span class="st">&#39;c&#39;</span>),</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>                  <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>df2 <span class="ot">&lt;-</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(fn[<span class="dv">2</span>],</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>                  <span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(<span class="at">.default =</span> <span class="st">&#39;c&#39;</span>),</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>                  <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>df3 <span class="ot">&lt;-</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(fn[<span class="dv">3</span>],</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>                  <span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(<span class="at">.default =</span> <span class="st">&#39;c&#39;</span>),</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>                  <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">names</span>(df1), <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;start&quot;                                                                        
##  [2] &quot;end&quot;                                                                          
##  [3] &quot;c_today&quot;                                                                      
##  [4] &quot;play_phone_questionnaire/update_date&quot;                                         
##  [5] &quot;play_phone_questionnaire/group_contact_info/instructions_contactinfo&quot;         
##  [6] &quot;play_phone_questionnaire/group_contact_info/parent_phone&quot;                     
##  [7] &quot;play_phone_questionnaire/group_contact_info/parent_email&quot;                     
##  [8] &quot;play_phone_questionnaire/group_contact_info/group_address/note_parent_address&quot;
##  [9] &quot;play_phone_questionnaire/group_contact_info/group_address/parent_address_1&quot;   
## [10] &quot;play_phone_questionnaire/group_contact_info/group_address/parent_address_2&quot;   
## [11] &quot;play_phone_questionnaire/group_contact_info/group_address/city&quot;               
## [12] &quot;play_phone_questionnaire/group_contact_info/group_address/state&quot;              
## [13] &quot;play_phone_questionnaire/group_contact_info/acknowledge_contact_info&quot;         
## [14] &quot;play_phone_questionnaire/instructions_guid&quot;                                   
## [15] &quot;play_phone_questionnaire/child_first_name&quot;</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">names</span>(df2), <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;start&quot;                                                                                                                                                                                                                                    
##  [2] &quot;end&quot;                                                                                                                                                                                                                                      
##  [3] &quot;c_today&quot;                                                                                                                                                                                                                                  
##  [4] &quot;play_demo_questionnaire/update_date&quot;                                                                                                                                                                                                      
##  [5] &quot;play_demo_questionnaire/NOTA_El_cuestionario_demogr_fico_debe_ser_completado_por_el_investigador_que_va_a_ir_a_la_visita_al_hogar_con_la_madre_por_tel_fono_La_madre_deber_a_ser_la_madre_que_va_a_participar_en_el_estudio_con_su_ni_o_a&quot;
##  [6] &quot;play_demo_questionnaire/group_siteinfo/site_id&quot;                                                                                                                                                                                           
##  [7] &quot;play_demo_questionnaire/group_siteinfo/subject_number&quot;                                                                                                                                                                                    
##  [8] &quot;play_demo_questionnaire/exp_name&quot;                                                                                                                                                                                                         
##  [9] &quot;play_demo_questionnaire/group_contact_info/instructions_contactinfo&quot;                                                                                                                                                                      
## [10] &quot;play_demo_questionnaire/group_contact_info/parent_phone&quot;                                                                                                                                                                                  
## [11] &quot;play_demo_questionnaire/group_contact_info/parent_email&quot;                                                                                                                                                                                  
## [12] &quot;play_demo_questionnaire/group_contact_info/group_address/note_parent_address&quot;                                                                                                                                                             
## [13] &quot;play_demo_questionnaire/group_contact_info/group_address/parent_address_1&quot;                                                                                                                                                                
## [14] &quot;play_demo_questionnaire/group_contact_info/group_address/parent_address_2&quot;                                                                                                                                                                
## [15] &quot;play_demo_questionnaire/group_contact_info/group_address/city&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">names</span>(df3), <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;start&quot;                                                                       
##  [2] &quot;end&quot;                                                                         
##  [3] &quot;c_today&quot;                                                                     
##  [4] &quot;play_demo_questionnaire/update_date&quot;                                         
##  [5] &quot;play_demo_questionnaire/note_exp&quot;                                            
##  [6] &quot;play_demo_questionnaire/group_siteinfo/site_id&quot;                              
##  [7] &quot;play_demo_questionnaire/group_siteinfo/subject_number&quot;                       
##  [8] &quot;play_demo_questionnaire/group_siteinfo/exp_name&quot;                             
##  [9] &quot;play_demo_questionnaire/group_contact_info/instructions_contactinfo&quot;         
## [10] &quot;play_demo_questionnaire/group_contact_info/parent_phone&quot;                     
## [11] &quot;play_demo_questionnaire/group_contact_info/parent_email&quot;                     
## [12] &quot;play_demo_questionnaire/group_contact_info/group_address/note_parent_address&quot;
## [13] &quot;play_demo_questionnaire/group_contact_info/group_address/parent_address_1&quot;   
## [14] &quot;play_demo_questionnaire/group_contact_info/group_address/parent_address_2&quot;   
## [15] &quot;play_demo_questionnaire/group_contact_info/group_address/city&quot;</code></pre>
<p>There are a separate set of variable-by-variable cleaning functions in <code>R/screen_clean_utils.R</code>.</p>
<p>We remove the unneeded ’play_demo_*’ and ‘play_phone_questionnaire_’ variable headers using <code>screen_remove_variable_headers()</code>.</p>
<p>We remove fields that contain administrative metadata with <code>screen_remove_metadata_fields()</code>.</p>
<p>We remove fields used only by staff in uploading data to Databrary using <code>screen_remove_databrary_fields()</code>.</p>
<p>We have name and address information in the screening data (e.g., ‘..parent_phone’, ‘..parent_email’, etc.)</p>
<div class="rmdnote">
<p>In a future workflow, we will add Census FIPS IDs for the State and Country
<strong>before</strong> removing the address information.</p>
<p>The Census queries stopped working around 2023-06-16.</p>
<p>For now, we remove identifiers without querying the Census.</p>
</div>
<p>We remove identifiable information using <code>screen_remove_identifiers()</code>.</p>
<p>Then, we use <code>dplyr::full_join()</code> to combine the set of individually
cleaned data files.
The <code>screen_clean_raw_csv()</code> function combines the previous <code>screen_remove*</code> functions.
The <code>screen_clean_raw_join()</code> function cleans each CSV then joins them.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>(scr_df <span class="ot">&lt;-</span> <span class="fu">screen_clean_raw_join</span>())</span></code></pre></div>
<pre><code>## Cleaning &#39;/Users/rog1/rrr/KoBoToolbox/data/csv/screening/275882_PLAY_Demographic_Questionnaire.csv&#39;.</code></pre>
<pre><code>## Removed n = 31 of 168 columns.</code></pre>
<pre><code>## Cleaning &#39;/Users/rog1/rrr/KoBoToolbox/data/csv/screening/334134_PLAY_Demographic_Questionnaire_Spanish.csv&#39;.</code></pre>
<pre><code>## Removed n = 47 of 236 columns.</code></pre>
<pre><code>## Cleaning &#39;/Users/rog1/rrr/KoBoToolbox/data/csv/screening/359546_PLAY_Demographic_Questionnaire.csv&#39;.</code></pre>
<pre><code>## Removed n = 47 of 239 columns.</code></pre>
<pre><code>## Joining with `by = join_by(start, end, c_today, update_date, site_id, subject_number,
## state, check_childage, check_childage_weeks, child_sex, day, day2, day1, play_id,
## language_spoken_mom, `language_spoken_mom/english`, `language_spoken_mom/spanish`,
## `language_spoken_mom/other`, language_spoken_mom_other, language_spoken_child,
## `language_spoken_child/english`, `language_spoken_child/spanish`,
## `language_spoken_child/other`, language_spoken_child_other, language_spoken_house,
## `language_spoken_house/english`, `language_spoken_house/spanish`,
## `language_spoken_house/other`, language_spoken_house_other,
## `child_information/child_bornonduedate`, `child_information/child_onterm`,
## `child_information/child_duedate`, `child_information/child_birthage`,
## `child_information/child_weight_pounds`, `child_information/child_weight_ounces`,
## `child_information/child_birth_complications`,
## `child_information/specify_birth_complications`,
## `child_information/hearing_disabilities`, `child_information/specify_hearing`,
## `child_information/vision_disabilities`, `child_information/specify_vision`,
## `child_information/major_illnesses_injuries`,
## `child_information/specify_illnesses_injuries`,
## `child_information/other_developmentaldelays`,
## `child_information/specify_developmentaldelays`, `child_information/child_race`,
## `child_information/child_sleep_time`, `child_information/child_wake_time`,
## `child_information/child_nap_hours`, `child_information/child_sleep_location`,
## `child_information/specify_child_sleep_location`, `child_information/indicate_child`,
## `child_information/indicate_child_2`, `group_family_structure/only_child`,
## `group_family_structure/specify_onlychild`, `group_family_structure/household_members`,
## `group_family_structure/household_members/father_biological`,
## `group_family_structure/household_members/male_partner`,
## `group_family_structure/household_members/mother_biological`,
## `group_family_structure/household_members/female_partner`,
## `group_family_structure/household_members/other_partner`,
## `group_family_structure/household_members/sibling_biological`,
## `group_family_structure/household_members/sibling_nonbiological`,
## `group_family_structure/household_members/grandmother`,
## `group_family_structure/household_members/grandfather`,
## `group_family_structure/household_members/great_grandmother`,
## `group_family_structure/household_members/great_grandfather`,
## `group_family_structure/household_members/aunt`,
## `group_family_structure/household_members/uncle`,
## `group_family_structure/household_members/cousin`,
## `group_family_structure/household_members/relative`,
## `group_family_structure/household_members/non_relative`,
## `group_family_structure/household_members/none`,
## `group_family_structure/other_relatives`, `group_family_structure/other_non_relatives`,
## `group_family_structure/indicate_familystructure`, `group_mominfo/mom_biological`,
## `group_mominfo/mom_relation`, `group_mominfo/mom_datecare`,
## `group_mominfo/mom_childbirth_age`, `group_mominfo/check_mom_childbirth_age`,
## `group_mominfo/mom_race`, `group_mominfo/mom_birth_country`,
## `group_mominfo/specify_mom_birth_country`, `group_mominfo/mom_education`,
## `group_mominfo/mom_employment`, `group_mominfo/mom_occupation`,
## `group_mominfo/mom_jobs_number`, `group_mominfo/mom_training`,
## `group_mominfo/mom_condition`, `group_mominfo/specify_mom_condition`,
## `group_mominfo/indicate_mom`, `group_biodad/biodad_childbirth_age`,
## `group_biodad/check_biodad_childbirth_age`, `group_biodad/biodad_race`,
## `group_biodad/indicate_biodad`, `group_biomom/biomom_childbirth_age`,
## `group_biomom/check_biomom_childbirth_age`, `group_biomom/biomom_race`,
## `group_biomom/indicate_biomom`, `group_nonbiopartner/nonbiopartner_race`,
## `group_nonbiopartner/indicate_nonbiopartner`, `group_genpartner_info/partner_education`,
## `group_genpartner_info/partner_employment`, `group_genpartner_info/partner_occupation`,
## `group_genpartner_info/partner_jobs_number`, `group_genpartner_info/partner_program`,
## `group_genpartner_info/indicate_genpartner`,
## `group_child_care_arrangements/childcare_types`,
## `group_child_care_arrangements/childcare_types/nanny_home`,
## `group_child_care_arrangements/childcare_types/nanny_nothome`,
## `group_child_care_arrangements/childcare_types/relative`,
## `group_child_care_arrangements/childcare_types/childcare`,
## `group_child_care_arrangements/childcare_types/none`,
## `group_child_care_arrangements/childcare_location`,
## `group_child_care_arrangements/childcare_hours`,
## `group_child_care_arrangements/childcare_number`,
## `group_child_care_arrangements/childcare_age`,
## `group_child_care_arrangements/childcare_language`,
## `group_inclusioncheck/inclusionreason`, `group_inclusioncheck/indicate_inclusion`,
## indicate_demoquestionnaire, indicate_databrary, `_id`)`
## Joining with `by = join_by(start, end, c_today, update_date, site_id, subject_number,
## state, check_childage, check_childage_weeks, child_sex, day, day2, day1,
## language_spoken_child, `language_spoken_child/english`, `language_spoken_child/spanish`,
## `language_spoken_child/other`, language_spoken_child_other,
## `child_information/child_bornonduedate`, `child_information/child_onterm`,
## `child_information/child_duedate`, `child_information/child_birthage`,
## `child_information/child_weight_pounds`, `child_information/child_weight_ounces`,
## `child_information/child_birth_complications`,
## `child_information/specify_birth_complications`,
## `child_information/hearing_disabilities`, `child_information/specify_hearing`,
## `child_information/vision_disabilities`, `child_information/specify_vision`,
## `child_information/major_illnesses_injuries`,
## `child_information/specify_illnesses_injuries`, `child_information/child_sleep_time`,
## `child_information/child_wake_time`, `child_information/child_nap_hours`,
## `child_information/child_sleep_location`,
## `child_information/specify_child_sleep_location`, `child_information/indicate_child`,
## `child_information/indicate_child_2`, `group_family_structure/household_members`,
## `group_family_structure/household_members/male_partner`,
## `group_family_structure/household_members/female_partner`,
## `group_family_structure/household_members/other_partner`,
## `group_family_structure/household_members/grandmother`,
## `group_family_structure/household_members/grandfather`,
## `group_family_structure/household_members/great_grandmother`,
## `group_family_structure/household_members/great_grandfather`,
## `group_family_structure/household_members/aunt`,
## `group_family_structure/household_members/uncle`,
## `group_family_structure/household_members/cousin`,
## `group_family_structure/household_members/relative`,
## `group_family_structure/household_members/non_relative`,
## `group_family_structure/other_relatives`, `group_family_structure/other_non_relatives`,
## `group_family_structure/indicate_familystructure`,
## `group_child_care_arrangements/childcare_types`,
## `group_child_care_arrangements/childcare_types/relative`,
## `group_child_care_arrangements/childcare_types/childcare`,
## `group_child_care_arrangements/childcare_types/none`,
## `group_child_care_arrangements/childcare_hours`,
## `group_child_care_arrangements/childcare_number`,
## `group_child_care_arrangements/childcare_age`,
## `group_child_care_arrangements/childcare_language`, `_id`)`</code></pre>
<pre><code>## # A tibble: 477 × 162
##    start             end   c_today update_date site_id subject_number state check_childage
##    &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;         
##  1 2020-02-27T08:24… 2020… 2020-0… &lt;NA&gt;        NYUNI   230            New … 32.6772408503…
##  2 2020-02-27T08:43… 2020… 2020-0… &lt;NA&gt;        NYUNI   229            New … 32.3813828621…
##  3 2019-12-18T16:37… 2020… 2020-0… &lt;NA&gt;        VCOMU   002            VA    26.7258382642…
##  4 2020-01-01T12:54… 2020… 2020-0… &lt;NA&gt;        GEORG   010            Virg… 12.7547666009…
##  5 2020-01-15T14:53… 2020… 2020-0… &lt;NA&gt;        NYUNI   008            New … 13.4122287968…
##  6 2020-01-15T15:47… 2020… 2020-0… &lt;NA&gt;        NYUNI   009            New … 19.3636313828…
##  7 2020-01-24T14:22… 2020… 2020-0… &lt;NA&gt;        GEORG   011            Virg… 17.8514683322…
##  8 2020-01-30T13:30… 2020… 2020-0… &lt;NA&gt;        NYUNI   010            NY    17.8514683322…
##  9 2020-02-03T17:40… 2020… 2020-0… &lt;NA&gt;        NYUNI   011            New … 23.8001314924…
## 10 2020-02-05T09:39… 2020… 2020-0… &lt;NA&gt;        VCOMU   003            VA    17.5884834538…
## # ℹ 467 more rows
## # ℹ 154 more variables: check_childage_weeks &lt;chr&gt;, child_sex &lt;chr&gt;, day &lt;chr&gt;,
## #   day2 &lt;chr&gt;, day1 &lt;chr&gt;, play_id &lt;chr&gt;, language_spoken_mom &lt;chr&gt;,
## #   `language_spoken_mom/english` &lt;chr&gt;, `language_spoken_mom/spanish` &lt;chr&gt;,
## #   `language_spoken_mom/other` &lt;chr&gt;, language_spoken_mom_other &lt;chr&gt;,
## #   language_spoken_child &lt;chr&gt;, `language_spoken_child/english` &lt;chr&gt;,
## #   `language_spoken_child/spanish` &lt;chr&gt;, `language_spoken_child/other` &lt;chr&gt;, …</code></pre>
</div>
<div id="clean-individual-fields" class="section level3 unnumbered">
<h3 class="unnumbered">Clean individual fields</h3>
<p>Now, we can proceed to clean-up the merged data frame.
The sequence of functions called below cleans ‘construct-specific’ variables
as indicated by the function names.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>scr_df <span class="ot">&lt;-</span> scr_df <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>    <span class="fu">screen_clean_child_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>    <span class="fu">screen_clean_lang_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>    <span class="fu">screen_clean_mom_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>    <span class="fu">screen_clean_biodad_father_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a>    <span class="fu">screen_clean_childcare_info</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a>    <span class="fu">screen_clean_family_structure</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>    <span class="fu">screen_clean_play_id</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a>    <span class="fu">screen_remove_selected_cols</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a>    <span class="fu">screen_select_reorder_cols</span>()</span></code></pre></div>
<p>For convenience, we package this sequence in its own function, <code>screen_clean_fields()</code>.</p>
<div class="rmdnote">
<p>Note that all of the variables are considered character strings. The <code>tidyverse</code>
suite does a great job of guessing what variables are what, but sometimes it
guesses wrongly. So, in preliminary stages, it has proved easier to make everything
a character string.</p>
</div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>scr_df <span class="ot">&lt;-</span> <span class="fu">screen_clean_fields</span>(scr_df)</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="fu">str</span>(scr_df)</span></code></pre></div>
<pre><code>## tibble [477 × 46] (S3: tbl_df/tbl/data.frame)
##  $ site_id                           : chr [1:477] &quot;NYUNI&quot; &quot;NYUNI&quot; &quot;VCOMU&quot; &quot;GEORG&quot; ...
##  $ subject_number                    : chr [1:477] &quot;230&quot; &quot;229&quot; &quot;002&quot; &quot;010&quot; ...
##  $ play_id                           : chr [1:477] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ child_age_wks                     : chr [1:477] &quot;32.677240850317695&quot; &quot;32.38138286215201&quot; &quot;26.725838264299803&quot; &quot;12.754766600920446&quot; ...
##  $ child_sex                         : chr [1:477] &quot;male&quot; &quot;female&quot; &quot;female&quot; &quot;male&quot; ...
##  $ child_bornonduedate               : chr [1:477] &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; ...
##  $ child_onterm                      : chr [1:477] NA NA NA NA ...
##  $ child_birthage                    : chr [1:477] &quot;-7&quot; &quot;-10&quot; &quot;0&quot; &quot;1&quot; ...
##  $ child_weight_pounds               : chr [1:477] &quot;8&quot; &quot;7&quot; &quot;6&quot; &quot;7&quot; ...
##  $ child_weight_ounces               : chr [1:477] &quot;12&quot; &quot;10&quot; &quot;12&quot; &quot;15&quot; ...
##  $ child_birth_complications         : chr [1:477] &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ child_birth_complications_specify : chr [1:477] NA NA NA NA ...
##  $ child_hearing_disabilities        : chr [1:477] &quot;yes&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ child_hearing_disabilities_specify: chr [1:477] &quot;Temporary hearing loss so tubes in his ears, one still remaining&quot; NA NA NA ...
##  $ child_vision_disabilities         : chr [1:477] &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ child_vision_disabilities_specify : chr [1:477] NA NA NA NA ...
##  $ child_major_illnesses_injuries    : chr [1:477] &quot;yes&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ child_ilnesses_injuries_specify   : chr [1:477] &quot;Pneumonia at 5 months&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ child_developmentaldelays         : chr [1:477] NA NA NA NA ...
##  $ child_developmentaldelays_specify : chr [1:477] NA NA NA NA ...
##  $ mom_bio_adoptive                  : chr [1:477] &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; &quot;yes&quot; ...
##  $ mom_childbirth_age                : chr [1:477] &quot;33.41&quot; &quot;38.84&quot; &quot;32.2&quot; &quot;30.38&quot; ...
##  $ mom_race                          : chr [1:477] &quot;white&quot; &quot;white&quot; &quot;white&quot; &quot;white&quot; ...
##  $ mom_birth_country                 : chr [1:477] &quot;unitedstates&quot; &quot;unitedstates&quot; &quot;unitedstates&quot; &quot;unitedstates&quot; ...
##  $ mom_birth_country_specify         : chr [1:477] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ mom_education                     : chr [1:477] &quot;masters&quot; &quot;doctorate&quot; &quot;doctorate&quot; &quot;masters&quot; ...
##  $ mom_employment                    : chr [1:477] &quot;full_time&quot; &quot;full_time&quot; &quot;full_time&quot; &quot;full_time&quot; ...
##  $ mom_occupation                    : chr [1:477] &quot;Architect&quot; &quot;Spanish teacher&quot; &quot;Nurse instructor&quot; &quot;School Psychologist&quot; ...
##  $ mom_jobs_number                   : chr [1:477] &quot;1&quot; &quot;1&quot; &quot;1&quot; &quot;1&quot; ...
##  $ mom_training                      : chr [1:477] &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...
##  $ biodad_childbirth_age             : chr [1:477] &quot;33.85_NA&quot; &quot;30.42_NA&quot; &quot;37.32_NA&quot; &quot;30.53_NA&quot; ...
##  $ biodad_race                       : chr [1:477] &quot;white_NA&quot; &quot;white_NA&quot; &quot;NA_NA&quot; &quot;NA_NA&quot; ...
##  $ language_spoken_mom               : chr [1:477] &quot;english&quot; &quot;english spanish&quot; &quot;english&quot; &quot;english&quot; ...
##  $ language_spoken_mom_comments      : chr [1:477] NA NA NA NA ...
##  $ language_spoken_child             : chr [1:477] &quot;english&quot; &quot;spanish&quot; &quot;english&quot; &quot;english&quot; ...
##  $ language_spoken_home_comments     : chr [1:477] &quot;FALSE_47706996&quot; &quot;TRUE_47707423&quot; &quot;FALSE_43397823&quot; &quot;FALSE_44074192&quot; ...
##  $ language_spoken_child_comments    : chr [1:477] NA NA NA NA ...
##  $ language_spoken_home              : chr [1:477] &quot;english&quot; &quot;english spanish&quot; &quot;english&quot; &quot;english&quot; ...
##  $ language_spoken_house_other       : chr [1:477] NA NA NA NA ...
##  $ language_spoken_home_other        : chr [1:477] NA NA NA NA ...
##  $ childcare_types                   : chr [1:477] NA NA NA NA ...
##  $ childcare_location                : chr [1:477] NA NA NA NA ...
##  $ childcare_hours                   : chr [1:477] NA NA NA NA ...
##  $ childcare_number                  : chr [1:477] NA NA NA NA ...
##  $ childcare_age                     : chr [1:477] NA NA NA NA ...
##  $ childcare_language                : chr [1:477] NA NA NA NA ...</code></pre>
<p>There is more work to do, but we have a version worth exporting.</p>
</div>
</div>
<div id="export-cleaned-file" class="section level2 unnumbered">
<h2 class="unnumbered">Export cleaned file</h2>
<p>We date-stamp the exported file so we can monitor progress as this workflow develops.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>sfn <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;PLAY-screening-&quot;</span>, <span class="fu">Sys.Date</span>(), <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(scr_df, <span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(), <span class="st">&quot;data/csv/screening/agg/&quot;</span>, sfn))</span></code></pre></div>
<!--chapter:end:12-screening.Rmd-->
</div>
</div>
<div id="home-visit" class="section level1 unnumbered">
<h1 class="unnumbered">Home visit</h1>
<div id="protocol" class="section level2 unnumbered">
<h2 class="unnumbered">Protocol</h2>
<p>Details about the data collection protocol for the home visit can be found on the <a href="https://www.play-project.org/collection.html#Home_Visit">PLAY Project website</a>.</p>
</div>
<div id="overview" class="section level2 unnumbered">
<h2 class="unnumbered">Overview</h2>
<p>The notes below summarize the steps needed to process the home visit survey data.
Most of the R chunks are <strong>not</strong> run, however, since we have moved the work into a <a href="https://docs.ropensci.org/targets/"><code>\{targets\}</code></a>-based workflow.</p>
</div>
<div id="download-data" class="section level2 unnumbered">
<h2 class="unnumbered">Download data</h2>
<p>Data files for each of the language by age-group conditions are stored on KoBoToolbox (KBT).</p>
<p>Store all of the data files on KBT in <code>kb_df</code>.</p>
<pre><code>tar_target(kb_df, list_kobo_data()),</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(kb_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>kb_df</span></code></pre></div>
<p>List data forms specific to the home visit by filtering the files with names that contain “Home”.</p>
<pre><code>tar_target(kb_home, dplyr::filter(kb_df, stringr::str_detect(title, &quot;Home&quot;)))</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(kb_home, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>kb_home</span></code></pre></div>
<pre><code>##         id              id_string
## 1   411456 a58ZhjX6M8WXtzLGvBaEaG
## 2   740625 a8HyzdxnVjK53dt4fX3Vup
## 3   331453 aae4wz2tpkSnAkea2PAzin
## 4   363465 abYGMsrMvkGsnA4xm9kqC9
## 5   363431 acCBJaRqBkSMPYdvaaWCSu
## 6   334099 ad3NtS6TDPuKTUKCAyCuby
## 7   363349 aEMERWLYQAdhaMKMt5QkD7
## 8   307736 aeMJQLo56HWyVHkKX9oaJD
## 9   740631 ahYJ7XRUcit8gbFYwaxnAV
## 10 1151489 aLqdPLTCZb8jvFkDxcFwzy
## 11 1136694 aMteoHisncRUStdyZfsjMB
## 12  740623 aoLcmmN8KWG4N6A3XpUiRT
## 13  740628 aRJW7SwKsVyZu8b4FighiM
## 14  363466 asv7tL6CEYjiW2XCkLxhcX
## 15  411469 aswcEAtxj24u9MfuBmS9AW
## 16  740630 aThMD6zuEFjtTfptwcpZPg
## 17  411388 aTyGBYk6HvRXmki9ksb29p
## 18  740624 aUeYzPfq6WED4dDF28VT9D
## 19  363381 aWd7wujF5d5HYaYMhT4jBZ
## 20  740626 awMnFDna5kWR3LXKyGmFMd
## 21  331848 axYbEbLcJxzUNFbqMVySjJ
## 22  740629 axyJSgLRDeSk3BHB6cJmYk
## 23  408149 ayhCy68ZTaDGc7tuGthQpJ
## 24  740627 aYokcZAjTZ9JCyVXz4R5rh
##                                                                      title
## 1              PLAY Home Questionaires - 12 Bilingual English (2020-03-04)
## 2                                        PLAY_HomeQuestionaires_12_English
## 3                                    PLAY Home Questionnaires (24 English)
## 4             PLAY Home Questionnaires - 24 Bilingual English (2020-03-04)
## 5                       PLAY Home Questionnaires - 12 English (2020-03-04)
## 6                        PLAY Home Questionnaires (12 Bilingual - English)
## 7                       PLAY Home Questionnaires - 18 English (2020-03-04)
## 8                                    PLAY Home Questionnaires (18 English)
## 9                              PLAY_HomeQuestionaires_24_Bilingual_English
## 10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA
## 11             Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO TODAY
## 12                             PLAY_HomeQuestionaires_12_Bilingual_English
## 13                                      PLAY_HomeQuestionnaires_18_English
## 14            PLAY Home Questionnaires - 18 Bilingual English (2020-03-04)
## 15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)
## 16                             PLAY_HomeQuestionaires_24_Bilingual_Spanish
## 17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)
## 18                             PLAY_HomeQuestionaires_12_Bilingual_Spanish
## 19                      PLAY Home Questionnaires - 24 English (2020-03-04)
## 20                             PLAY_HomeQuestionaires_18_Bilingual_English
## 21                                   PLAY Home Questionnaires (12 English)
## 22                                      PLAY_HomeQuestionnaires_24_English
## 23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-03-04)
## 24                             PLAY_HomeQuestionaires_18_Bilingual_Spanish
##                                                                description
## 1            PLAY Home Questionaires - 12 Bilingual (English) (2020-03-04)
## 2                             PLAY_HomeQuestionaires_12_English-2021-07-29
## 3                                    PLAY Home Questionnaires (24 English)
## 4             PLAY Home Questionnaires - 24 Bilingual English (2019-11-20)
## 5                       PLAY Home Questionnaires - 12 English (2019-11-20)
## 6                        PLAY Home Questionnaires (12 Bilingual - English)
## 7                       PLAY Home Questionnaires - 18 English (2018-11-20)
## 8                                    PLAY Home Questionnaires (18 English)
## 9                   PLAY_HomeQuestionaires_24_Bilingual_English-2021-07-30
## 10 Clone of Clone of PLAY_HomeQuestionnaires_18_English - NO AUTO METADATA
## 11                             Clone of PLAY_HomeQuestionnaires_18_English
## 12                  PLAY_HomeQuestionaires_12_Bilingual_English-2021-07-29
## 13                           PLAY_HomeQuestionnaires_18_English-2021-07-29
## 14            PLAY Home Questionnaires - 18 Bilingual English (2019-11-20)
## 15            PLAY Home Questionnaires - 12 Bilingual Spanish (2020-03-04)
## 16                  PLAY_HomeQuestionaires_24_Bilingual_Spanish-2021-07-30
## 17            PLAY Home Questionnaires - 18 Bilingual Spanish (2020-03-04)
## 18                  PLAY_HomeQuestionaires_12_Bilingual_Spanish-2021-07-29
## 19                      PLAY Home Questionnaires - 24 English (2019-11-20)
## 20                  PLAY_HomeQuestionaires_18_Bilingual_English-2021-07-29
## 21                                   PLAY Home Questionnaires (12 English)
## 22                           PLAY_HomeQuestionnaires_24_English-2021-07-30
## 23            PLAY Home Questionnaires - 24 Bilingual Spanish (2020-02-27)
## 24                  PLAY_HomeQuestionaires_18_Bilingual_Spanish-2021-07-29
##                                               url
## 1   https://kc.kobotoolbox.org/api/v1/data/411456
## 2   https://kc.kobotoolbox.org/api/v1/data/740625
## 3   https://kc.kobotoolbox.org/api/v1/data/331453
## 4   https://kc.kobotoolbox.org/api/v1/data/363465
## 5   https://kc.kobotoolbox.org/api/v1/data/363431
## 6   https://kc.kobotoolbox.org/api/v1/data/334099
## 7   https://kc.kobotoolbox.org/api/v1/data/363349
## 8   https://kc.kobotoolbox.org/api/v1/data/307736
## 9   https://kc.kobotoolbox.org/api/v1/data/740631
## 10 https://kc.kobotoolbox.org/api/v1/data/1151489
## 11 https://kc.kobotoolbox.org/api/v1/data/1136694
## 12  https://kc.kobotoolbox.org/api/v1/data/740623
## 13  https://kc.kobotoolbox.org/api/v1/data/740628
## 14  https://kc.kobotoolbox.org/api/v1/data/363466
## 15  https://kc.kobotoolbox.org/api/v1/data/411469
## 16  https://kc.kobotoolbox.org/api/v1/data/740630
## 17  https://kc.kobotoolbox.org/api/v1/data/411388
## 18  https://kc.kobotoolbox.org/api/v1/data/740624
## 19  https://kc.kobotoolbox.org/api/v1/data/363381
## 20  https://kc.kobotoolbox.org/api/v1/data/740626
## 21  https://kc.kobotoolbox.org/api/v1/data/331848
## 22  https://kc.kobotoolbox.org/api/v1/data/740629
## 23  https://kc.kobotoolbox.org/api/v1/data/408149
## 24  https://kc.kobotoolbox.org/api/v1/data/740627</code></pre>
<div id="save-selected-raw-files-to-local-directory" class="section level3 unnumbered">
<h3 class="unnumbered">Save selected raw files to local directory</h3>
<p>Prepare to retrieve all home visit files.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>n_files <span class="ot">&lt;-</span> <span class="fu">dim</span>(kb_home)[<span class="dv">1</span>]</span></code></pre></div>
<p>There are <span class="math inline">\(n=\)</span> 24 home visit data files.</p>
<pre><code>tar_target(
  home_visit_downloads,
  retrieve_kobo_xlsx(kb_home, 
    &quot;data/xlsx/home_visit/raw&quot;),
  cue = tarchetypes::tar_cue_age(
    name = home_visit_downloads,
    age = as.difftime(update_interval, 
      units = update_interval_units)
  )
)</code></pre>
</div>
<div id="normalize-file-names" class="section level3 unnumbered">
<h3 class="unnumbered">Normalize file names</h3>
<p>Some of the form names are inconsistent, so we normalize them to fit the following pattern:</p>
<p><code>&lt;form_id&gt;_PLAY_HomeQuestionnaires_&lt;age_group&gt;_&lt;lang_group&gt;.xlsx</code></p>
<pre><code>tar_target(
  home_visit_renamed,
  rename_home_xlsx(home_visit_downloads,
                     &quot;data/xlsx/home_visit/std_name&quot;),
  cue = tarchetypes::tar_cue_age(
    name = home_visit_renamed,
    age = as.difftime(update_interval, 
      units = update_interval_units)
  )
)</code></pre>
</div>
<div id="save-xlsx-as-csv" class="section level3 unnumbered">
<h3 class="unnumbered">Save xlsx as csv</h3>
<pre><code>tar_target(
  home_visit_xlsx_to_csv,
  load_xlsx_save_many_csvs_2(home_visit_renamed, 
    &quot;data/csv/home_visit/raw&quot;)
)</code></pre>
</div>
<div id="split-mb-cdi-from-other-questions" class="section level3 unnumbered">
<h3 class="unnumbered">Split MB-CDI from other questions</h3>
<p>Next we import a CSV for a given form year, age group, and language group, and create two new CSV files: one with the MB-CDI data and one with all of the other survey questions.</p>
<p>By default, the document presumes that we want to convert <strong>all</strong> of the CSV files</p>
<p>Extract the ‘non-mbcdi’ questions first and add ‘non_mbcdi’ to the filename.</p>
<pre><code>tar_target(
  home_visit_non_mbcdi,
  split_non_mbcdi_csvs(home_visit_xlsx_to_csv,
                        &quot;data/csv/home_visit/non_mbcdi&quot;)
)</code></pre>
<p>Extracting the MB-CDI data has nearly the same function call, but the <code>these_questions</code> parameter is set to ‘mbcdi’.</p>
<pre><code>tar_target(
  home_visit_mbcdi,
  split_mbcdi_csvs(home_visit_xlsx_to_csv,
                    &quot;data/csv/home_visit/mbcdi&quot;)
)</code></pre>
</div>
</div>
<div id="clean-data" class="section level2 unnumbered">
<h2 class="unnumbered">Clean data</h2>
<div id="remove-identifiers" class="section level3 unnumbered">
<h3 class="unnumbered">Remove identifiers</h3>
<p>The function <code>remove_identifiers()</code> in <code>R/kobo_export</code> detects the presence of names, addresses, phone numbers, email, and dates in the field names for an input file and removes these fields.
It also modifies the file name by appending <code>_deidentified</code>.</p>
<p>The <code>remove_identifiers()</code> function detects these fields
For clarity, we print it here.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;~/rrr/KoBoToolbox/R/_OLD/functions.R&quot;</span>, <span class="at">echo =</span> <span class="cn">FALSE</span>, <span class="at">print.eval =</span> <span class="cn">FALSE</span>)</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>remove_identifiers</span></code></pre></div>
<pre><code>## function(df) {
##   require(stringr)
##   stopifnot(is.data.frame(df))
##   
##   contains_name &lt;- stringr::str_detect(names(df), &#39;name&#39;)
##   contains_address &lt;- stringr::str_detect(names(df), &#39;address&#39;)
##   contains_phone &lt;- stringr::str_detect(names(df), &#39;phone&#39;)
##   contains_email &lt;- stringr::str_detect(names(df), &#39;email&#39;)
##   contains_birthdate &lt;- stringr::str_detect(names(df), &#39;birthdate&#39;)
##   contains_first &lt;- stringr::str_detect(names(df), &#39;first[12]?&#39;)
##   contains_last &lt;- stringr::str_detect(names(df), &#39;last[12]?&#39;)
##   contains_city &lt;- stringr::str_detect(names(df), &#39;city&#39;)
##   contains_year &lt;- stringr::str_detect(names(df), &#39;year[12]?&#39;)
##   contains_month &lt;- stringr::str_detect(names(df), &#39;month[12]?&#39;)
##   contains_day &lt;- stringr::str_detect(names(df), &#39;/day[12]?$&#39;)
##   
##   identifiable_data &lt;- contains_name | contains_address |
##     contains_phone |
##     contains_email | contains_birthdate | contains_first |
##     contains_last |
##     contains_city | contains_year | contains_month | contains_day
##   
##   identifiable_cols &lt;- (1:length(names(df)))[identifiable_data]
##   
##   df_deidentified &lt;- df %&gt;%
##     dplyr::select(., -all_of(identifiable_cols))
##   
##   df_deidentified
## }</code></pre>
<p>The <strong>non-MBCDI file</strong> contains the identifiers, so that is the target of this removal process.</p>
<div class="rmdnote">
<p>Note that we have added <code>data</code> to <code>.gitignore</code> in <code>protocol/</code>, the root directory for the HTML protocol, so <em>none</em> of the data files should be made available via git or GitHub. This also means that there is <strong>no version control</strong> being done on raw data files themselves.</p>
</div>
<pre><code>tar_target(
  home_visit_remove_identifiers,
  purrr::map_chr(
    home_visit_non_mbcdi,
    open_deidentify_save,
    csv_save_dir = &quot;data/csv/home_visit/non_mbcdi/deid&quot;,
      these_questions = &#39;non_mbcdi&#39;
  )
)</code></pre>
</div>
</div>
<div id="quality-assurance-qa-reviews" class="section level2 unnumbered">
<h2 class="unnumbered">Quality assurance (QA) reviews</h2>
<div id="mb-cdi-files" class="section level3 unnumbered">
<h3 class="unnumbered">MB-CDI files</h3>
</div>
<div id="non-mb-cdi-files" class="section level3 unnumbered">
<h3 class="unnumbered">Non-MB-CDI files</h3>
<p>Create a helper function to create a data set with summary information about the data files.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a>summarize_non_mbcdi_qs <span class="ot">&lt;-</span> <span class="cf">function</span>(fn) {</span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">is.character</span>(fn))</span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a>  </span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(fn)) {</span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&#39;File not found `&#39;</span>, fn, <span class="st">&#39;`&#39;</span>)</span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb51-7"><a href="#cb51-7" tabindex="-1"></a>    df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(fn, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb51-8"><a href="#cb51-8" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.data.frame</span>(df)) {</span>
<span id="cb51-9"><a href="#cb51-9" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&#39;Error reading data frame&#39;</span>)</span>
<span id="cb51-10"><a href="#cb51-10" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb51-11"><a href="#cb51-11" tabindex="-1"></a>      out_df <span class="ot">&lt;-</span></span>
<span id="cb51-12"><a href="#cb51-12" tabindex="-1"></a>        <span class="fu">tibble</span>(</span>
<span id="cb51-13"><a href="#cb51-13" tabindex="-1"></a>          <span class="at">file_name =</span> <span class="fu">basename</span>(fn),</span>
<span id="cb51-14"><a href="#cb51-14" tabindex="-1"></a>          <span class="at">n_rows =</span> <span class="fu">dim</span>(df)[<span class="dv">1</span>],</span>
<span id="cb51-15"><a href="#cb51-15" tabindex="-1"></a>          <span class="at">n_vars =</span> <span class="fu">dim</span>(df)[<span class="dv">2</span>]</span>
<span id="cb51-16"><a href="#cb51-16" tabindex="-1"></a>        )</span>
<span id="cb51-17"><a href="#cb51-17" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">arrange</span>(out_df, file_name)</span>
<span id="cb51-18"><a href="#cb51-18" tabindex="-1"></a>    }</span>
<span id="cb51-19"><a href="#cb51-19" tabindex="-1"></a>  }</span>
<span id="cb51-20"><a href="#cb51-20" tabindex="-1"></a>}</span></code></pre></div>
<p>Select the de-identified CSVs to examine.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>fl <span class="ot">&lt;-</span></span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a>  <span class="fu">list.files</span>(</span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a>    <span class="fu">file.path</span>(<span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid&quot;</span>),</span>
<span id="cb52-4"><a href="#cb52-4" tabindex="-1"></a>    <span class="st">&#39;^[0-9]+_non_mbcdi_[12|18|24].*deidentified&#39;</span>,</span>
<span id="cb52-5"><a href="#cb52-5" tabindex="-1"></a>    <span class="at">full.names =</span> <span class="cn">TRUE</span></span>
<span id="cb52-6"><a href="#cb52-6" tabindex="-1"></a>  )</span>
<span id="cb52-7"><a href="#cb52-7" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" tabindex="-1"></a>PLAY_forms <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_df</span>(fl, summarize_non_mbcdi_qs)</span>
<span id="cb52-9"><a href="#cb52-9" tabindex="-1"></a></span>
<span id="cb52-10"><a href="#cb52-10" tabindex="-1"></a>PLAY_forms <span class="sc">%&gt;%</span></span>
<span id="cb52-11"><a href="#cb52-11" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(., <span class="at">format =</span> <span class="st">&#39;html&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-12"><a href="#cb52-12" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
file_name
</th>
<th style="text-align:right;">
n_rows
</th>
<th style="text-align:right;">
n_vars
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1136694_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
1151489_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
286
</td>
</tr>
<tr>
<td style="text-align:left;">
307736_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
274
</td>
</tr>
<tr>
<td style="text-align:left;">
331453_non_mbcdi_24_english_deidentified.csv
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
274
</td>
</tr>
<tr>
<td style="text-align:left;">
331848_non_mbcdi_12_english_deidentified.csv
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
267
</td>
</tr>
<tr>
<td style="text-align:left;">
334099_non_mbcdi_12_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
267
</td>
</tr>
<tr>
<td style="text-align:left;">
363349_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
363381_non_mbcdi_24_english_deidentified.csv
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
363431_non_mbcdi_12_english_deidentified.csv
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
281
</td>
</tr>
<tr>
<td style="text-align:left;">
363465_non_mbcdi_24_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
363466_non_mbcdi_18_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
408149_non_mbcdi_24_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
411388_non_mbcdi_18_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
411456_non_mbcdi_12_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
411469_non_mbcdi_12_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
740623_non_mbcdi_12_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
740624_non_mbcdi_12_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
740625_non_mbcdi_12_english_deidentified.csv
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
740626_non_mbcdi_18_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740627_non_mbcdi_18_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740628_non_mbcdi_18_english_deidentified.csv
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
740629_non_mbcdi_24_english_deidentified.csv
</td>
<td style="text-align:right;">
75
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740630_non_mbcdi_24_bilingual_spanish_deidentified.csv
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
287
</td>
</tr>
<tr>
<td style="text-align:left;">
740631_non_mbcdi_24_bilingual_english_deidentified.csv
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
287
</td>
</tr>
</tbody>
</table>
<p>The later forms (with higher form numbers–the leading integers in the file names) are the newer ones.
These generally have the largest number of entries and have similar numbers of columns–either 287 or 288.
Accordingly, we focus our cleaning efforts here first.</p>
<p>We start with the data files that have <span class="math inline">\(n=288\)</span> columns.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>df740623 <span class="ot">&lt;-</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740623_non_mbcdi_12_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>  )</span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a>df740624 <span class="ot">&lt;-</span></span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740624_non_mbcdi_12_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb53-11"><a href="#cb53-11" tabindex="-1"></a>  )</span>
<span id="cb53-12"><a href="#cb53-12" tabindex="-1"></a></span>
<span id="cb53-13"><a href="#cb53-13" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740624))</span></code></pre></div>
<pre><code>## [1] 288</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>df740625 <span class="ot">&lt;-</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740625_non_mbcdi_12_english_deidentified.csv&quot;</span>,</span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a>  )</span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740625))</span></code></pre></div>
<pre><code>## [1] 288</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a>df740628 <span class="ot">&lt;-</span></span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740628_non_mbcdi_18_english_deidentified.csv&quot;</span>,</span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a>  )</span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740623) <span class="sc">==</span> <span class="fu">names</span>(df740628))</span></code></pre></div>
<pre><code>## [1] 288</code></pre>
<p>So, four of the most recent data files with <span class="math inline">\(n=288\)</span> columns can be aggregated without modification.</p>
<p>Let’s turn to the more recent files with <span class="math inline">\(n=287\)</span> columns.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>df740626 <span class="ot">&lt;-</span></span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740626_non_mbcdi_18_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a>  )</span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a>df740627 <span class="ot">&lt;-</span></span>
<span id="cb59-8"><a href="#cb59-8" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb59-9"><a href="#cb59-9" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740627_non_mbcdi_18_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb59-10"><a href="#cb59-10" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb59-11"><a href="#cb59-11" tabindex="-1"></a>  )</span>
<span id="cb59-12"><a href="#cb59-12" tabindex="-1"></a></span>
<span id="cb59-13"><a href="#cb59-13" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740627))</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<p>Where does the misalignment arise?</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740627)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [71]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [225] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [267] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
## [281]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>The misalignment arises somewhere near column 92.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a>df740629 <span class="ot">&lt;-</span></span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb63-3"><a href="#cb63-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740629_non_mbcdi_24_english_deidentified.csv&quot;</span>,</span>
<span id="cb63-4"><a href="#cb63-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb63-5"><a href="#cb63-5" tabindex="-1"></a>  )</span>
<span id="cb63-6"><a href="#cb63-6" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740629))</span></code></pre></div>
<pre><code>## [1] 287</code></pre>
<p>So, <code>df740626</code> and <code>df740629</code> are aligned and can be merged.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a>df740630 <span class="ot">&lt;-</span></span>
<span id="cb65-2"><a href="#cb65-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb65-3"><a href="#cb65-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740630_non_mbcdi_24_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb65-4"><a href="#cb65-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb65-5"><a href="#cb65-5" tabindex="-1"></a>  )</span>
<span id="cb65-6"><a href="#cb65-6" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740630))</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740630)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [71]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [225] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [267] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
## [281]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>These files also fall out of alignment near column 92.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>df740631 <span class="ot">&lt;-</span></span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb69-3"><a href="#cb69-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/740631_non_mbcdi_24_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb69-4"><a href="#cb69-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb69-5"><a href="#cb69-5" tabindex="-1"></a>  )</span>
<span id="cb69-6"><a href="#cb69-6" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740631))</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a><span class="fu">names</span>(df740626) <span class="sc">==</span> <span class="fu">names</span>(df740631)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [71]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [225] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [267] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
## [281]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>And these files fall out of alignment near column 92.</p>
<p>Let’s see if <code>df740627</code>, <code>df740630</code>, and <code>df740631</code> are aligned with one another.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740627) <span class="sc">==</span> <span class="fu">names</span>(df740630))</span></code></pre></div>
<pre><code>## [1] 287</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">names</span>(df740627) <span class="sc">==</span> <span class="fu">names</span>(df740631))</span></code></pre></div>
<pre><code>## [1] 287</code></pre>
<p>Yes, they are. So, these three can be merged.
We do that first, then address the discrepancies between aggregates.</p>
</div>
<div id="older-forms" class="section level3 unnumbered">
<h3 class="unnumbered">‘Older’ forms</h3>
<p>The “older” forms have varied numbers of columns.
We focus on thos with data (n_vars &gt; 0)</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a>df307736 <span class="ot">&lt;-</span></span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/307736_non_mbcdi_18_english_deidentified.csv&quot;</span>,</span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a>  )</span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a>df331453 <span class="ot">&lt;-</span></span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/331453_non_mbcdi_24_english_deidentified.csv&quot;</span>,</span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-10"><a href="#cb77-10" tabindex="-1"></a>  )</span>
<span id="cb77-11"><a href="#cb77-11" tabindex="-1"></a>df331848 <span class="ot">&lt;-</span></span>
<span id="cb77-12"><a href="#cb77-12" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-13"><a href="#cb77-13" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/331848_non_mbcdi_12_english_deidentified.csv&quot;</span>,</span>
<span id="cb77-14"><a href="#cb77-14" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-15"><a href="#cb77-15" tabindex="-1"></a>  )</span>
<span id="cb77-16"><a href="#cb77-16" tabindex="-1"></a>df334099 <span class="ot">&lt;-</span></span>
<span id="cb77-17"><a href="#cb77-17" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-18"><a href="#cb77-18" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/334099_non_mbcdi_12_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb77-19"><a href="#cb77-19" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-20"><a href="#cb77-20" tabindex="-1"></a>  )</span>
<span id="cb77-21"><a href="#cb77-21" tabindex="-1"></a>df363349 <span class="ot">&lt;-</span></span>
<span id="cb77-22"><a href="#cb77-22" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-23"><a href="#cb77-23" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/363349_non_mbcdi_18_english_deidentified.csv&quot;</span>,</span>
<span id="cb77-24"><a href="#cb77-24" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-25"><a href="#cb77-25" tabindex="-1"></a>  )</span>
<span id="cb77-26"><a href="#cb77-26" tabindex="-1"></a>df363381 <span class="ot">&lt;-</span></span>
<span id="cb77-27"><a href="#cb77-27" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-28"><a href="#cb77-28" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/363381_non_mbcdi_24_english_deidentified.csv&quot;</span>,</span>
<span id="cb77-29"><a href="#cb77-29" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-30"><a href="#cb77-30" tabindex="-1"></a>  )</span>
<span id="cb77-31"><a href="#cb77-31" tabindex="-1"></a>df363431 <span class="ot">&lt;-</span></span>
<span id="cb77-32"><a href="#cb77-32" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-33"><a href="#cb77-33" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/363431_non_mbcdi_12_english_deidentified.csv&quot;</span>,</span>
<span id="cb77-34"><a href="#cb77-34" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-35"><a href="#cb77-35" tabindex="-1"></a>  )</span>
<span id="cb77-36"><a href="#cb77-36" tabindex="-1"></a>df408149 <span class="ot">&lt;-</span></span>
<span id="cb77-37"><a href="#cb77-37" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-38"><a href="#cb77-38" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/408149_non_mbcdi_24_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb77-39"><a href="#cb77-39" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-40"><a href="#cb77-40" tabindex="-1"></a>  )</span>
<span id="cb77-41"><a href="#cb77-41" tabindex="-1"></a>df411456 <span class="ot">&lt;-</span></span>
<span id="cb77-42"><a href="#cb77-42" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-43"><a href="#cb77-43" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/411456_non_mbcdi_12_bilingual_english_deidentified.csv&quot;</span>,</span>
<span id="cb77-44"><a href="#cb77-44" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-45"><a href="#cb77-45" tabindex="-1"></a>  )</span>
<span id="cb77-46"><a href="#cb77-46" tabindex="-1"></a>df411469 <span class="ot">&lt;-</span></span>
<span id="cb77-47"><a href="#cb77-47" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb77-48"><a href="#cb77-48" tabindex="-1"></a>    <span class="st">&quot;../data/csv/home_visit/non_mbcdi/deid/411469_non_mbcdi_12_bilingual_spanish_deidentified.csv&quot;</span>,</span>
<span id="cb77-49"><a href="#cb77-49" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb77-50"><a href="#cb77-50" tabindex="-1"></a>  )</span></code></pre></div>
<p>Let’s look at the two forms that have the same number of columns, <span class="math inline">\(n=274\)</span>, 307736 and 331453.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="fu">names</span>(df307736) <span class="sc">==</span> <span class="fu">names</span>(df331453)</span></code></pre></div>
<pre><code>##   [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [18] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [35] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [52] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [69] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [86] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [103] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [120] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [137] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [154] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [171] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [188] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [205] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [222] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [239] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [273] TRUE TRUE</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df307736) <span class="sc">==</span> <span class="fu">names</span>(df331453)) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">names</span>(df307736))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>So, these two are identical and could be merged.</p>
<pre><code>tar_target(files_274_cols, stringr::str_detect(home_visit_remove_identifiers, &quot;/(307736|331453)&quot;))

tar_target(df_merge_274_cols, make_aggregate_data_file(home_visit_remove_identifiers[files_274_cols]))</code></pre>
<p>How about the files with <span class="math inline">\(n=267\)</span> columns, 331848 and 334099?</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">==</span> <span class="fu">names</span>(df334099)</span></code></pre></div>
<pre><code>##   [1] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [15] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [29] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [43] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [57] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [71] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [225] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [267]  TRUE</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df331848) <span class="sc">==</span> <span class="fu">names</span>(df334099)) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">names</span>(df331848))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;group_combinedquestionnaires/participant_id&quot;             
## [2] &quot;start&quot;                                                   
## [3] &quot;end&quot;                                                     
## [4] &quot;group_combinedquestionnaires/note_fillthisoutbeforestudy&quot;
## [5] &quot;group_combinedquestionnaires/site_id&quot;                    
## [6] &quot;group_combinedquestionnaires/subject_number&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;group_jo84c13/participant_id&quot;             
## [2] &quot;start&quot;                                    
## [3] &quot;end&quot;                                      
## [4] &quot;group_jo84c13/note_fillthisoutbeforestudy&quot;
## [5] &quot;group_jo84c13/site_id&quot;                    
## [6] &quot;group_jo84c13/subject_number&quot;</code></pre>
<p>There is an odd difference in the group label, <code>group_combinedquestionnaires</code> vs. <code>group_jo84c13</code>.</p>
<p>Let’s try deleting the initial group labels and compare again.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" tabindex="-1"></a>n1 <span class="ot">&lt;-</span> <span class="fu">names</span>(df331848)</span>
<span id="cb91-2"><a href="#cb91-2" tabindex="-1"></a>n2 <span class="ot">&lt;-</span> <span class="fu">names</span>(df334099)</span>
<span id="cb91-3"><a href="#cb91-3" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;group_combinedquestionnaires/&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;participant_id&quot;              &quot;start&quot;                      
## [3] &quot;end&quot;                         &quot;note_fillthisoutbeforestudy&quot;
## [5] &quot;site_id&quot;                     &quot;subject_number&quot;</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;group_jo84c13/&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] &quot;participant_id&quot;              &quot;start&quot;                      
## [3] &quot;end&quot;                         &quot;note_fillthisoutbeforestudy&quot;
## [5] &quot;site_id&quot;                     &quot;subject_number&quot;</code></pre>
<p>That looks promising.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" tabindex="-1"></a><span class="fu">names</span>(df331848) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;group_combinedquestionnaires/&quot;</span>) <span class="ot">-&gt;</span> n1</span>
<span id="cb95-2"><a href="#cb95-2" tabindex="-1"></a><span class="fu">names</span>(df334099) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(<span class="st">&quot;group_jo84c13/&quot;</span>) <span class="ot">-&gt;</span> n2</span>
<span id="cb95-3"><a href="#cb95-3" tabindex="-1"></a>n1 <span class="sc">==</span> n2</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
##  [15] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [29] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [43] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [57] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [71] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE
## [225] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [267]  TRUE</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>], n2[<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>])</span></code></pre></div>
<pre><code>##      [,1]                     [,2]                    
## [1,] &quot;test_date&quot;              &quot;test_date&quot;             
## [2,] &quot;child_sex&quot;              &quot;child_birth_date&quot;      
## [3,] &quot;age_group&quot;              &quot;child_sex&quot;             
## [4,] &quot;language_child&quot;         &quot;age_group&quot;             
## [5,] &quot;language_child/english&quot; &quot;language_child&quot;        
## [6,] &quot;language_child/spanish&quot; &quot;language_child/english&quot;
## [7,] &quot;language_instruction&quot;   &quot;language_child/spanish&quot;
## [8,] &quot;acknowledge_site&quot;       &quot;language_instruction&quot;</code></pre>
<p><code>n2</code> or <code>df334099</code> has a <code>child_birth_date</code> field in position 9 that the other data frame does not have.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" tabindex="-1"></a>n1 <span class="sc">|&gt;</span> <span class="fu">str_detect</span>(<span class="st">&quot;child_birth_date&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>If we delete that variable, the data frames will no longer have the same number of columns.
Let’s explore that anyway.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" tabindex="-1"></a>n2_2 <span class="ot">&lt;-</span> n2[<span class="sc">-</span><span class="dv">9</span>]</span>
<span id="cb101-2"><a href="#cb101-2" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" tabindex="-1"></a>n1 <span class="sc">==</span> n2_2</span></code></pre></div>
<pre><code>## Warning in n1 == n2_2: longer object length is not a multiple of shorter object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29] FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE
##  [43] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
##  [71] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
## [225]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [267] FALSE</code></pre>
<p>That helps a bit, but we diverge around column 29.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">28</span><span class="sc">:</span><span class="dv">51</span>], n2_2[<span class="dv">28</span><span class="sc">:</span><span class="dv">51</span>])</span></code></pre></div>
<pre><code>##       [,1]                                                                                                
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested&quot;              
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/birthhospital&quot;
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/afterhome&quot;    
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no&quot;           
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused&quot;      
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/donotknow&quot;    
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested&quot;               
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/birthhospital&quot; 
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/afterhome&quot;     
## [10,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no&quot;            
## [11,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused&quot;       
## [12,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow&quot;     
## [13,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies&quot;       
## [14,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection&quot;   
## [15,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma&quot;          
## [16,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory&quot;     
## [17,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal&quot;
## [18,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc&quot;              
## [19,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_injury_times&quot;                
## [20,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comment_injury&quot;                    
## [21,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_general_health&quot;           
## [22,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;                   
## [23,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care&quot;                           
## [24,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;                       
##       [,2]                                                                                                                                  
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested&quot;                                                
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__in_the_bi&quot;                                 
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/yes__after_goi&quot;                                 
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/no&quot;                                             
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/refused&quot;                                        
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_hearing_tested/don_t_know&quot;                                     
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested&quot;                                                 
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__in_the_bi&quot;                                  
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/yes__after_goi&quot;                                  
## [10,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/no&quot;                                              
## [11,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/refused&quot;                                         
## [12,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/don_t_know&quot;                                      
## [13,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/child_allergies_infections_ill_header&quot;
## [14,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies&quot;                            
## [15,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection&quot;                        
## [16,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma&quot;                               
## [17,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory&quot;                          
## [18,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal&quot;                     
## [19,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc&quot;                                                
## [20,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_injury_times&quot;                                                  
## [21,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comment_injury&quot;                                                      
## [22,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_general_health&quot;                                             
## [23,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;                                                     
## [24,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;</code></pre>
<p>These question labels looks very similar.
There are just some minor changes in the variable names.
<code>n2_2</code> has an extra variable in column 40.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" tabindex="-1"></a>n2_3 <span class="ot">&lt;-</span> n2_2[<span class="sc">-</span><span class="dv">40</span>]</span></code></pre></div>
<p>Then, we can rename some of the columns in <code>n2_3</code> using corresponding names from <code>n1</code>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" tabindex="-1"></a>n2_3 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;yes__in_the_bi&quot;</span>, <span class="st">&quot;birthhospital&quot;</span>) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;yes__after_goi&quot;</span>, <span class="st">&quot;afterhome&quot;</span>) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;don_t_know&quot;</span>, <span class="st">&quot;donotknow&quot;</span>) <span class="ot">-&gt;</span> n2_4</span>
<span id="cb107-2"><a href="#cb107-2" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" tabindex="-1"></a>n1 <span class="sc">==</span> n2_4</span></code></pre></div>
<pre><code>## Warning in n1 == n2_4: longer object length is not a multiple of shorter object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE
##  [43] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [57] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [71] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [225] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [267] FALSE</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">39</span><span class="sc">:</span><span class="dv">51</span>], n2_4[<span class="dv">39</span><span class="sc">:</span><span class="dv">51</span>])</span></code></pre></div>
<pre><code>##       [,1]                                                                                                
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow&quot;     
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/allergies&quot;       
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/ear_infection&quot;   
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/asthma&quot;          
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/respiratory&quot;     
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_general_health/group_medicalprof/gastrointestinal&quot;
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc&quot;              
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_injury_times&quot;                
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comment_injury&quot;                    
## [10,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_general_health&quot;           
## [11,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;                   
## [12,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care&quot;                           
## [13,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;                       
##       [,2]                                                                                                             
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_vision_tested/donotknow&quot;                  
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/allergies&quot;       
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/ear_infection&quot;   
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/asthma&quot;          
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/respiratory&quot;     
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_allergies_infections_ill/gastrointestinal&quot;
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_allergy_etc&quot;                           
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_general_health/child_injury_times&quot;                             
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comment_injury&quot;                                 
## [10,] &quot;group_homevisitquestionnaires/group_health/group_general_health/comments_general_health&quot;                        
## [11,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;                                
## [12,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;                                    
## [13,] &quot;group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking&quot;</code></pre>
<p><code>n1</code> has a <code>group_medicalprof</code> label from <code>allergies</code> through <code>gastrointestinal</code>; <code>n2_4</code> has <code>child_allergies_infections_ill</code> for the same questions.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" tabindex="-1"></a>n2_4 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="st">&quot;child_allergies_infections_ill&quot;</span>, <span class="st">&quot;group_medicalprof&quot;</span>) <span class="ot">-&gt;</span> n2_5</span>
<span id="cb112-2"><a href="#cb112-2" tabindex="-1"></a>n1 <span class="sc">==</span> n2_5</span></code></pre></div>
<pre><code>## Warning in n1 == n2_5: longer object length is not a multiple of shorter object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [57] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [71] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [225] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [267] FALSE</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" tabindex="-1"></a><span class="fu">cbind</span>(n1[<span class="dv">49</span><span class="sc">:</span><span class="dv">60</span>], n2_5[<span class="dv">49</span><span class="sc">:</span><span class="dv">60</span>])</span></code></pre></div>
<pre><code>##       [,1]                                                                             
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/prenatal_care&quot;        
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;    
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking&quot;      
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1&quot;   
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2&quot;   
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3&quot;   
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now&quot;       
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount&quot;
## [10,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_house&quot;         
## [11,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_car&quot;           
## [12,] &quot;group_homevisitquestionnaires/group_health/group_smoking/comments_smoking&quot;      
##       [,2]                                                                             
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/instructions_prenatal&quot;
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_prenatal/comments_prenatal&quot;    
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_smoking/pregnant_smoking&quot;      
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_1&quot;   
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_2&quot;   
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_trimester_3&quot;   
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now&quot;       
##  [8,] &quot;group_homevisitquestionnaires/group_health/group_smoking/mom_smoking_now_amount&quot;
##  [9,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_house&quot;         
## [10,] &quot;group_homevisitquestionnaires/group_health/group_smoking/smoking_car&quot;           
## [11,] &quot;group_homevisitquestionnaires/group_health/group_smoking/comments_smoking&quot;      
## [12,] &quot;group_homevisitquestionnaires/group_health/group_drinking/pregnant_drinking&quot;</code></pre>
<p>It looks like these could be reconciled by deleting <code>prenatal_care</code> from <code>n1</code>.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" tabindex="-1"></a>n1_2 <span class="ot">&lt;-</span> n1[<span class="sc">-</span><span class="dv">50</span>]</span>
<span id="cb117-2"><a href="#cb117-2" tabindex="-1"></a>n1_2 <span class="sc">==</span> n2_5</span></code></pre></div>
<pre><code>## Warning in n1_2 == n2_5: longer object length is not a multiple of shorter object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
##  [71] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [99] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [113] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
## [225]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" tabindex="-1"></a><span class="fu">cbind</span>(n1_2[<span class="dv">64</span><span class="sc">:</span><span class="dv">75</span>], n2_5[<span class="dv">64</span><span class="sc">:</span><span class="dv">75</span>])</span></code></pre></div>
<pre><code>##       [,1]                                                                                                          
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_drinking/comments_drinking&quot;                                 
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_phq4/note_phq4&quot;                                             
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_nervous&quot;                           
##  [4,] &quot;group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_worrying&quot;                          
##  [5,] &quot;group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_littleinterest&quot;                    
##  [6,] &quot;group_homevisitquestionnaires/group_health/group_phq4/group_phq4_001/phq4_down&quot;                              
##  [7,] &quot;group_homevisitquestionnaires/group_health/group_phq4/comments_phq4&quot;                                         
##  [8,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions1&quot;              
##  [9,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbartinstructions/rothbart_instructions2&quot;              
## [10,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_unfamiliarperson&quot;
## [11,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_troubletask&quot;     
## [12,] &quot;group_homevisitquestionnaires/group_rothbart/group_rothbart_001/rothbart_questions/rothbart_companyofchild&quot;  
##       [,2]                                                                                                       
##  [1,] &quot;group_homevisitquestionnaires/group_health/group_drinking/comments_drinking&quot;                              
##  [2,] &quot;group_homevisitquestionnaires/group_health/group_phq4/Experimenter_These_stions_are_about_you&quot;            
##  [3,] &quot;group_homevisitquestionnaires/group_health/group_phq4/comments_phq4&quot;                                      
##  [4,] &quot;group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructor_rothbart&quot;                           
##  [5,] &quot;group_homevisitquestionnaires/group_rothbart/group_dd2kz32/instructions_rothbart2&quot;                        
##  [6,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/rothbart_questions_header&quot;                
##  [7,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_approached_by_a_ld_cling_to_a_parent&quot;
##  [8,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_having_trouble_get_easily_irritated&quot;
##  [9,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_a_familiar_chil_company_of_the_child&quot;
## [10,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/When_offered_a_choic_uickly_and_go_for_it&quot;
## [11,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/During_daily_or_even_eing_quietly_sung_to&quot;
## [12,] &quot;group_homevisitquestionnaires/group_rothbart/rothbart_questions/While_playing_outdoo_and_excitement_of_it&quot;</code></pre>
<p>It looks like the phq4 is <em>not</em> in <code>n2_5</code>.</p>
<p>Let’s check.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" tabindex="-1"></a>n2_5 <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="st">&quot;phq4&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Yes, there are only two PHQ4-related questions in <code>df334099</code>.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" tabindex="-1"></a>df334099 <span class="sc">|&gt;</span> <span class="fu">names</span>() <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="st">&quot;phq4&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>This path of reconciliation does not appear fruitful.</p>
</div>
</div>
<div id="make-aggregate-files" class="section level2 unnumbered">
<h2 class="unnumbered">Make aggregate files</h2>
<div id="non-mb-cdi-files-with-n288-columns" class="section level3 unnumbered">
<h3 class="unnumbered">non-MB-CDI files with <span class="math inline">\(n=288\)</span> columns</h3>
<pre><code>tar_target(files_288_cols, 
  stringr::str_detect(home_visit_remove_identifiers, 
                      &quot;2[3458]_non_mbcdi.*_deidentified\\.csv&quot;)
)

tar_target(df_merge_288_cols,
    make_aggregate_data_file(
        home_visit_remove_identifiers[files_288_cols])
)</code></pre>
</div>
<div id="non-mb-cdi-files-with-n287-columns" class="section level3 unnumbered">
<h3 class="unnumbered">non-MB-CDI files with <span class="math inline">\(n=287\)</span> columns</h3>
<pre><code>tar_target(files_287_cols_1, 
  stringr::str_detect(home_visit_remove_identifiers, 
          &quot;2[69]_non_mbcdi.*_deidentified\\.csv&quot;)),
tar_target(files_287_cols_2, 
  stringr::str_detect(home_visit_remove_identifiers, 
          &quot;(740627|740630|740631)_non.*_deidentified\\.csv&quot;)),
tar_target(df_merge_287_cols_1,
  make_aggregate_data_file(
          home_visit_remove_identifiers[files_287_cols_1])),
tar_target(df_merge_287_cols_2,
  make_aggregate_data_file(
          home_visit_remove_identifiers[files_287_cols_2])),</code></pre>
</div>
<div id="examine-groups-with-n287-cols" class="section level3 unnumbered">
<h3 class="unnumbered">Examine groups with <span class="math inline">\(n=287\)</span> cols</h3>
<p>We focus on the starting column where the column names diverge, column 92.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_287_cols_1, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb128-2"><a href="#cb128-2" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_287_cols_2, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb128-3"><a href="#cb128-3" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_1)[<span class="dv">92</span>]</span></code></pre></div>
<pre><code>## [1] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_feeding_nutrition.instructions_feeding&quot;</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">92</span>]</span></code></pre></div>
<pre><code>## [1] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_locomotor_milestones.group_health.group_feeding_nutrition.instructions_feeding&quot;</code></pre>
<p>There is an erroneous <code>group_locomotor_milestones.</code> in the <code>df_merge_287_cols_2</code> column name.</p>
<p>A bit of sleuthing determines that this <code>group_locomotor_milestones.</code> label is characteristic of columns 92 to 273.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">&quot;group_locomotor_milestones&quot;</span>)</span></code></pre></div>
<pre><code>##   [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [18] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [35] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [52] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [69] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [86] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [103] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [120] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [137] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [154] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [171] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<p>The following should fix this.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" tabindex="-1"></a>old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df_merge_287_cols_2)</span>
<span id="cb134-2"><a href="#cb134-2" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb134-3"><a href="#cb134-3" tabindex="-1"></a>new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="ot">&lt;-</span></span>
<span id="cb134-4"><a href="#cb134-4" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>], <span class="st">&quot;group_locomotor_milestones</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb134-5"><a href="#cb134-5" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="ot">&lt;-</span> new_names</span></code></pre></div>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">==</span> <span class="fu">names</span>(df_merge_287_cols_1)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [71]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [99]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [113]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [225]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [239]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE
## [267]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
## [281]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>We have a second problem with columns from 114 to 210.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df_merge_287_cols_1)[<span class="dv">113</span><span class="sc">:</span><span class="dv">115</span>], <span class="fu">names</span>(df_merge_287_cols_2)[<span class="dv">113</span><span class="sc">:</span><span class="dv">115</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_vision_tested.donotknow&quot;
##      [,2]                                                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;      
##      [,3]                                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection&quot;</code></pre>
<p>One of the problems has to do with column 114. There is a question ending <code>doctor_told_you</code> in <code>names(df_merge_287_cols_1)</code> but not in <code>names(df_merge_287_cols_2)</code>.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_1) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">&quot;doctor_told_you&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" tabindex="-1"></a><span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">|&gt;</span> stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">&quot;doctor_told_you&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>Deleting this question would create additional misalignments and further problems.
We cannot proceed without further discussion with our team.</p>
<p>For now, let’s generate an array with all of the remaining differences in column names.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" tabindex="-1"></a>names_differ <span class="ot">&lt;-</span> (<span class="fu">names</span>(df_merge_287_cols_2) <span class="sc">!=</span> <span class="fu">names</span>(df_merge_287_cols_1))</span>
<span id="cb143-2"><a href="#cb143-2" tabindex="-1"></a><span class="fu">sum</span>(names_differ)</span></code></pre></div>
<pre><code>## [1] 103</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df_merge_287_cols_1)[names_differ], <span class="fu">names</span>(df_merge_287_cols_2)[names_differ])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;      
##      [,2]                                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection&quot;
##      [,3]                                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma&quot;       
##      [,4]                                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.asthma&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory&quot;
##      [,5]                                                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.respiratory&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal&quot;
##      [,6]                                                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.gastrointestinal&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc&quot;                           
##      [,7]                                                                                                               
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_allergy_etc&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times&quot;  
##      [,8]                                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_injury_times&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury&quot;    
##      [,9]                                                                                                                  
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comment_injury&quot;         
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health&quot;
##      [,10]                                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.comments_general_health&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal&quot;        
##      [,11]                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.instructions_prenatal&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care&quot;        
##      [,12]                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.prenatal_care&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal&quot;
##      [,13]                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_prenatal.comments_prenatal&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking&quot;  
##      [,14]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.pregnant_smoking&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1&quot;
##      [,15]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_1&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2&quot;
##      [,16]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_2&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3&quot;
##      [,17]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_trimester_3&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now&quot;    
##      [,18]                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now&quot;       
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount&quot;
##      [,19]                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.mom_smoking_now_amount&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house&quot;         
##      [,20]                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_house&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car&quot;  
##      [,21]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.smoking_car&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking&quot;
##      [,22]                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_smoking.comments_smoking&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking&quot;
##      [,23]                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.pregnant_drinking&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1&quot;
##      [,24]                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_1&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2&quot;
##      [,25]                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_2&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3&quot;
##      [,26]                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.drinking_trimester_3&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking&quot;   
##      [,27]                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_drinking.comments_drinking&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4&quot;            
##      [,28]                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.note_phq4&quot;        
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4&quot;
##      [,29]                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.instructions_phq4&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous&quot;     
##      [,30]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_nervous&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying&quot;
##      [,31]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_worrying&quot;      
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest&quot;
##      [,32]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_littleinterest&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down&quot;          
##      [,33]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.phq4_down&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4&quot;
##      [,34]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_phq4.comments_phq4&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1&quot;
##      [,35]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart1&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2&quot;
##      [,36]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.instructions_rothbart2&quot;                        
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3&quot;
##      [,37]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.instructions_rothbart3&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson&quot;
##      [,38]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_unfamiliarperson&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask&quot;     
##      [,39]                                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_troubletask&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild&quot;
##      [,40]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_companyofchild&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities&quot;
##      [,41]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_choiceactivities&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung&quot;     
##      [,42]                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_quietlysung&quot;    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors&quot;
##      [,43]                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_playingoutdoors&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10&quot;     
##      [,44]                                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_morethan10&quot;       
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks&quot;
##      [,45]                                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_respondingremarks&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults&quot;
##      [,46]                                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitedlovedadults&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair&quot;        
##      [,47]                                                                                                                  
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_fiddlehair&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy&quot;
##      [,48]                                                                                                                    
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_roughrowdy&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged&quot;
##      [,49]                                                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedhugged&quot;       
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity&quot;
##      [,50]                                                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_involvednewactivity&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly&quot;        
##      [,51]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tirequickly&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention&quot;
##      [,52]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_callattention&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags&quot;         
##      [,53]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tags&quot;            
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment&quot;
##      [,54]                                                                                                                        
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_noisyenvironment&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy&quot;          
##      [,55]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_energy&quot;  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles&quot;
##      [,56]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_vehicles&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active&quot;  
##      [,57]                                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_active&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden&quot;
##      [,58]                                                                                                                    
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_forbidden&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful&quot;
##      [,59]                                                                                                                    
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_sadlytearful&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue&quot;    
##      [,60]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_downblue&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse&quot;
##      [,61]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_runhouse&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent&quot;
##      [,62]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_excitingevent&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum&quot;
##      [,63]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_tempertantrum&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently&quot;
##      [,64]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_waitpatiently&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile&quot;  
##      [,65]                                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_rockedsmile&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold&quot;       
##      [,66]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_mold&quot;         
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult&quot;
##      [,67]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_interactadult&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful&quot;      
##      [,68]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_careful&quot;      
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace&quot;
##      [,69]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_enternewplace&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3&quot; 
##      [,70]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_crymorethan3&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed&quot;
##      [,71]                                                                                                                     
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_easilysoothed&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother&quot;    
##      [,72]                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_busyother&quot;      
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople&quot;
##      [,73]                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.group_rothbartquestions.rothbart_differentpeople&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart&quot;                               
##      [,74]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_rothbart.comments_rothbart&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1&quot;
##      [,75]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.mediause_instructions1&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology&quot;       
##      [,76]                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv&quot;
##      [,77]                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.tv&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd&quot;
##      [,78]                                                                                               
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.dvd&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer&quot;
##      [,79]                                                                                               
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.computer&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad&quot;    
##      [,80]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.ipad&quot;           
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame&quot;
##      [,81]                                                                                                      
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.educationalgame&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame&quot;      
##      [,82]                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.home_technology.videogame&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv&quot;      
##      [,83]                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_tv&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how&quot;             
##      [,84]                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_how&quot;              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd&quot;
##      [,85]                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_dvd&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how&quot;             
##      [,86]                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.dvd_how&quot;                  
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer&quot;
##      [,87]                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_computer&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how&quot;             
##      [,88]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.computer_how&quot;         
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad&quot;
##      [,89]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_ipad&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how&quot;             
##      [,90]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.ipad_how&quot;                    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational&quot;
##      [,91]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_educational&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how&quot;             
##      [,92]                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.educational_how&quot;           
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame&quot;
##      [,93]                                                                                                 
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.technology_child_videogame&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how&quot;             
##      [,94]                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.videogame_how&quot;   
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day&quot;
##      [,95]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.tv_hours_per_day&quot;     
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day&quot;
##      [,96]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.note_tv_hours_per_day&quot;                    
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use&quot;
##      [,97]                                                                                                                
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.instructions_technology_use&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale&quot;       
##      [,98]                                                                                                  
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day&quot;
##      [,99]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel1&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1&quot;
##      [,100]                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel2&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2&quot;
##      [,101]                                                                                           
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel3&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3&quot;
##      [,102]                                                                                            
## [1,] &quot;group_combinedquestionnaires.group_databrary.acknowledge_databrary&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.acknowledge_databrary&quot;
##      [,103]                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_saveasdraft&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_saveasdraft&quot;</code></pre>
<p>Visual inspection suggests that these are similar with the following deviations:</p>
<ul>
<li>As noted, <code>df_merge_287_cols_1</code> has a column ending <code>doctor_told_you</code> that is not present in <code>df_merge_287_cols_2</code>.</li>
<li><code>df_merge_287_cols_2</code> has a column ending <code>technology_use_scale</code> that is not present in the <code>df_merge_287_cols_1</code></li>
<li>There are a set of fields in <code>group_databrary</code> that do not align exactly. We will almost certainly delete these, so the misalignment is not a huge problem.</li>
</ul>
<p>As an exploration, let’s see if we can reconcile these by deleting the non-aligning columns.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df_merge_287_cols_1</span>
<span id="cb147-2"><a href="#cb147-2" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df_merge_287_cols_2</span>
<span id="cb147-3"><a href="#cb147-3" tabindex="-1"></a></span>
<span id="cb147-4"><a href="#cb147-4" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb147-5"><a href="#cb147-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;doctor_told_you&#39;</span>))</span>
<span id="cb147-6"><a href="#cb147-6" tabindex="-1"></a></span>
<span id="cb147-7"><a href="#cb147-7" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb147-8"><a href="#cb147-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;technology_use_scale&#39;</span>))</span>
<span id="cb147-9"><a href="#cb147-9" tabindex="-1"></a></span>
<span id="cb147-10"><a href="#cb147-10" tabindex="-1"></a>old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)</span>
<span id="cb147-11"><a href="#cb147-11" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb147-12"><a href="#cb147-12" tabindex="-1"></a>new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>] <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[<span class="dv">92</span><span class="sc">:</span><span class="dv">273</span>], <span class="st">&quot;group_locomotor_milestones</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb147-13"><a href="#cb147-13" tabindex="-1"></a><span class="fu">names</span>(df2) <span class="ot">&lt;-</span> new_names</span>
<span id="cb147-14"><a href="#cb147-14" tabindex="-1"></a></span>
<span id="cb147-15"><a href="#cb147-15" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df2)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [71]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [99]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [113]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [127]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [141]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [155]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [183]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [197]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [211]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [225]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [239]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
## [267]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE
## [281]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>This looks promising.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">263</span>], <span class="fu">names</span>(df2)[<span class="dv">263</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                   
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typicalday&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_typical_day.instructions_typical_day&quot;</code></pre>
<p>This is easily fixed.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" tabindex="-1"></a><span class="fu">names</span>(df1)[<span class="dv">263</span>] <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)[<span class="dv">263</span>]</span></code></pre></div>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">273</span><span class="sc">:</span><span class="dv">275</span>], <span class="fu">names</span>(df2)[<span class="dv">273</span><span class="sc">:</span><span class="dv">275</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel1&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel1&quot;
##      [,2]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel2&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel2&quot;
##      [,3]                                                                                             
## [1,] &quot;group_combinedquestionnaires.group_databrary.note_databraryspiel3&quot;                              
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_databrary.note_databraryspiel3&quot;</code></pre>
<p>The last misalignments relate to Databrary fields.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> df1 <span class="sc">%&gt;%</span></span>
<span id="cb154-2"><a href="#cb154-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;group_databrary&#39;</span>))</span>
<span id="cb154-3"><a href="#cb154-3" tabindex="-1"></a></span>
<span id="cb154-4"><a href="#cb154-4" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span></span>
<span id="cb154-5"><a href="#cb154-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;group_databrary&#39;</span>))</span>
<span id="cb154-6"><a href="#cb154-6" tabindex="-1"></a></span>
<span id="cb154-7"><a href="#cb154-7" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df2)</span></code></pre></div>
<pre><code>##   [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [18] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [35] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [52] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [69] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
##  [86] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [103] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [120] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [137] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [154] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [171] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [188] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [205] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [222] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [239] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [256] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
## [273] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<p>Success!</p>
</div>
</div>
<div id="combining-the-two-groups-of-datasets" class="section level2 unnumbered">
<h2 class="unnumbered">Combining the two groups of datasets</h2>
<p>Now, let’s go back to the data frame with 288 cols and see if we can bring these into alignment.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_288_cols, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb156-2"><a href="#cb156-2" tabindex="-1"></a></span>
<span id="cb156-3"><a href="#cb156-3" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df_merge_288_cols</span>
<span id="cb156-4"><a href="#cb156-4" tabindex="-1"></a></span>
<span id="cb156-5"><a href="#cb156-5" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb156-6"><a href="#cb156-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;group_databrary&#39;</span>))</span>
<span id="cb156-7"><a href="#cb156-7" tabindex="-1"></a></span>
<span id="cb156-8"><a href="#cb156-8" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">dim</span>(df1), <span class="fu">dim</span>(df2), <span class="fu">dim</span>(df3))</span></code></pre></div>
<pre><code>## [1] 100 281  22 281 204 283</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code></pre></div>
<pre><code>## Warning in names(df1) == names(df3): longer object length is not a multiple of shorter
## object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [71]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [99]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [113]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [127] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [141] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [155] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [183] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [197] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [225] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [267] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [281] FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">114</span><span class="sc">:</span><span class="dv">115</span>], <span class="fu">names</span>(df3)[<span class="dv">114</span><span class="sc">:</span><span class="dv">115</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                                                         
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;      
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.doctor_told_you&quot;
##      [,2]                                                                                                                                       
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.ear_infection&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_health.group_general_health.child_allergies_infections_ill.allergies&quot;</code></pre>
<p>Once again, there appears to be a problem with the ‘doctor_told_you’ field. We’ll delete it to see if this fixes one of the problems.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb163-2"><a href="#cb163-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;doctor_told_you&#39;</span>))</span>
<span id="cb163-3"><a href="#cb163-3" tabindex="-1"></a></span>
<span id="cb163-4"><a href="#cb163-4" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code></pre></div>
<pre><code>## Warning in names(df1) == names(df3): longer object length is not a multiple of shorter
## object length</code></pre>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [71]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [99]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [113]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [127]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [141]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [155]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [183]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [197]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
## [211] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [225] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [239] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [267] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [281] FALSE FALSE</code></pre>
<p>We still have misalignments at column 210.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">names</span>(df1)[<span class="dv">210</span><span class="sc">:</span><span class="dv">213</span>], <span class="fu">names</span>(df3)[<span class="dv">210</span><span class="sc">:</span><span class="dv">213</span>])</span></code></pre></div>
<pre><code>##      [,1]                                                                                                          
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals&quot;               
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.technology_use_scale&quot;
##      [,2]                                                                                              
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.meals&quot;   
##      [,3]                                                                                              
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime&quot; 
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.playtime&quot;
##      [,4]                                                                                                    
## [1,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.transportation&quot;
## [2,] &quot;group_combinedquestionnaires.group_homevisitquestionnaires.group_mediause.group_techuse.bedtime&quot;</code></pre>
<p>The ’technology_use_scale` exists in one but not the other.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df3 <span class="sc">%&gt;%</span></span>
<span id="cb168-2"><a href="#cb168-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;technology_use_scale&#39;</span>))</span>
<span id="cb168-3"><a href="#cb168-3" tabindex="-1"></a></span>
<span id="cb168-4"><a href="#cb168-4" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">dim</span>(df1), <span class="fu">dim</span>(df3))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]  100  281
## [2,]  204  281</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" tabindex="-1"></a><span class="fu">names</span>(df1) <span class="sc">==</span> <span class="fu">names</span>(df3)</span></code></pre></div>
<pre><code>##   [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [29]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [43]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [57]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [71]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [99]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [113]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [127]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [141]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [155]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [169]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [183]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [197]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [211]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [225]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [239]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [253]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
## [267]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [281]  TRUE</code></pre>
<div class="rmdimportant">
<p>Future versions of the workflow will need to handle this more elegantly.</p>
<p>Option 1: Fix the underlying forms.</p>
<p>Option 2: Add the ‘missing’ columns as NA in post-processing.</p>
</div>
<p>For now, I’m going to create functions that align these data frames.
These are incorporated into <code>R/functions.R</code> so we do not source them again here.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" tabindex="-1"></a>remove_technology_use_scale <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb172-2"><a href="#cb172-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;technology_use_scale&#39;</span>))</span>
<span id="cb172-3"><a href="#cb172-3" tabindex="-1"></a>}</span>
<span id="cb172-4"><a href="#cb172-4" tabindex="-1"></a></span>
<span id="cb172-5"><a href="#cb172-5" tabindex="-1"></a>remove_doctor_told_you <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb172-6"><a href="#cb172-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;doctor_told_you&#39;</span>))</span>
<span id="cb172-7"><a href="#cb172-7" tabindex="-1"></a>}</span>
<span id="cb172-8"><a href="#cb172-8" tabindex="-1"></a></span>
<span id="cb172-9"><a href="#cb172-9" tabindex="-1"></a>remove_databrary_fields <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb172-10"><a href="#cb172-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&#39;group_databrary&#39;</span>))</span>
<span id="cb172-11"><a href="#cb172-11" tabindex="-1"></a>}</span>
<span id="cb172-12"><a href="#cb172-12" tabindex="-1"></a></span>
<span id="cb172-13"><a href="#cb172-13" tabindex="-1"></a>reconcile_typicalday <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb172-14"><a href="#cb172-14" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="fu">names</span>(df), <span class="st">&#39;typicalday&#39;</span>, <span class="st">&#39;typical_day&#39;</span>)</span>
<span id="cb172-15"><a href="#cb172-15" tabindex="-1"></a>  df</span>
<span id="cb172-16"><a href="#cb172-16" tabindex="-1"></a>}</span>
<span id="cb172-17"><a href="#cb172-17" tabindex="-1"></a></span>
<span id="cb172-18"><a href="#cb172-18" tabindex="-1"></a>remove_permissive_locomotor_milestones_label <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb172-19"><a href="#cb172-19" tabindex="-1"></a>  old_names <span class="ot">&lt;-</span> <span class="fu">names</span>(df)</span>
<span id="cb172-20"><a href="#cb172-20" tabindex="-1"></a>  new_names <span class="ot">&lt;-</span> old_names</span>
<span id="cb172-21"><a href="#cb172-21" tabindex="-1"></a>  contains_locomotor <span class="ot">&lt;-</span></span>
<span id="cb172-22"><a href="#cb172-22" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_detect</span>(new_names, <span class="at">pattern =</span> <span class="st">&quot;locomotor_milestones.*health|division|rothbart|mediause|pets|typical|acknowledge&quot;</span>)</span>
<span id="cb172-23"><a href="#cb172-23" tabindex="-1"></a>  new_names[contains_locomotor] <span class="ot">&lt;-</span></span>
<span id="cb172-24"><a href="#cb172-24" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_remove</span>(new_names[contains_locomotor], <span class="st">&quot;group_locomotor_milestones</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb172-25"><a href="#cb172-25" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> new_names</span>
<span id="cb172-26"><a href="#cb172-26" tabindex="-1"></a>  df</span>
<span id="cb172-27"><a href="#cb172-27" tabindex="-1"></a>}</span>
<span id="cb172-28"><a href="#cb172-28" tabindex="-1"></a></span>
<span id="cb172-29"><a href="#cb172-29" tabindex="-1"></a>remove_X_meta_cols <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb172-30"><a href="#cb172-30" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(df, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;X_&quot;</span>), <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;meta.instanceID&quot;</span>))</span>
<span id="cb172-31"><a href="#cb172-31" tabindex="-1"></a>}</span>
<span id="cb172-32"><a href="#cb172-32" tabindex="-1"></a></span>
<span id="cb172-33"><a href="#cb172-33" tabindex="-1"></a>remove_redundant_group_labels <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb172-34"><a href="#cb172-34" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="fu">names</span>(df), <span class="st">&#39;group_homevisitquestionnaires</span><span class="sc">\\</span><span class="st">.&#39;</span>)</span>
<span id="cb172-35"><a href="#cb172-35" tabindex="-1"></a>  <span class="fu">names</span>(df) <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="fu">names</span>(df), <span class="st">&#39;group_combinedquestionnaires</span><span class="sc">\\</span><span class="st">.&#39;</span>)</span>
<span id="cb172-36"><a href="#cb172-36" tabindex="-1"></a>  df</span>
<span id="cb172-37"><a href="#cb172-37" tabindex="-1"></a>}</span>
<span id="cb172-38"><a href="#cb172-38" tabindex="-1"></a></span>
<span id="cb172-39"><a href="#cb172-39" tabindex="-1"></a>clean_dfs <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb172-40"><a href="#cb172-40" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb172-41"><a href="#cb172-41" tabindex="-1"></a>    <span class="fu">reconcile_typicalday</span>() <span class="sc">%&gt;%</span></span>
<span id="cb172-42"><a href="#cb172-42" tabindex="-1"></a>    <span class="fu">remove_technology_use_scale</span>() <span class="sc">%&gt;%</span></span>
<span id="cb172-43"><a href="#cb172-43" tabindex="-1"></a>    <span class="fu">remove_doctor_told_you</span>() <span class="sc">%&gt;%</span></span>
<span id="cb172-44"><a href="#cb172-44" tabindex="-1"></a>    <span class="fu">remove_permissive_locomotor_milestones_label</span>() <span class="sc">%&gt;%</span></span>
<span id="cb172-45"><a href="#cb172-45" tabindex="-1"></a>    <span class="fu">remove_databrary_fields</span>() <span class="sc">%&gt;%</span></span>
<span id="cb172-46"><a href="#cb172-46" tabindex="-1"></a>    <span class="fu">remove_X_meta_cols</span>() <span class="sc">%&gt;%</span></span>
<span id="cb172-47"><a href="#cb172-47" tabindex="-1"></a>    <span class="fu">remove_redundant_group_labels</span>()</span>
<span id="cb172-48"><a href="#cb172-48" tabindex="-1"></a>}</span></code></pre></div>
<p>Let’s test this workflow with the unmodified files.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_287_cols_1, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb173-2"><a href="#cb173-2" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_287_cols_2, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb173-3"><a href="#cb173-3" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(df_merge_288_cols, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb173-4"><a href="#cb173-4" tabindex="-1"></a></span>
<span id="cb173-5"><a href="#cb173-5" tabindex="-1"></a>df1m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_287_cols_1)</span>
<span id="cb173-6"><a href="#cb173-6" tabindex="-1"></a><span class="fu">dim</span>(df1m)</span></code></pre></div>
<pre><code>## [1] 100 272</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" tabindex="-1"></a>df2m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_287_cols_2)</span>
<span id="cb175-2"><a href="#cb175-2" tabindex="-1"></a><span class="fu">dim</span>(df2m)</span></code></pre></div>
<pre><code>## [1]  22 272</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" tabindex="-1"></a>df3m <span class="ot">&lt;-</span> <span class="fu">clean_dfs</span>(df_merge_288_cols)</span>
<span id="cb177-2"><a href="#cb177-2" tabindex="-1"></a><span class="fu">dim</span>(df3m)</span></code></pre></div>
<pre><code>## [1] 204 272</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" tabindex="-1"></a>(<span class="fu">names</span>(df1m) <span class="sc">==</span> <span class="fu">names</span>(df2m)) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 272</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" tabindex="-1"></a>(<span class="fu">names</span>(df1m) <span class="sc">==</span> <span class="fu">names</span>(df3m)) <span class="sc">|&gt;</span> <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 272</code></pre>
<div id="merging-files-at-last" class="section level3 unnumbered">
<h3 class="unnumbered">Merging files at last</h3>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df1m, df2m, df3m)</span></code></pre></div>
<div class="rmdnote">
<p>As of 2022-12-15, the above has now been incorporated into <code>R/functions.R</code> and into the <code>_targets.R</code> workflow.</p>
</div>
</div>
</div>
<div id="merge-with-databrary-info" class="section level2 unnumbered">
<h2 class="unnumbered">Merge with Databrary info</h2>
<p>For each session (row) in the merged data frame, we pull data from the associated Databrary volume and session.
These data are merged with that drawn from KBT.</p>
<pre><code>tar_target(
  home_visit_w_databrary_df,
  add_databrary_info_to_home_visit_df(home_visit_df)
)</code></pre>
<p>The <code>add_databrary_info_to_home_visit()</code> function in <code>R/functions.R</code> does most of the work.</p>
</div>
<div id="clean-and-prepare-for-export" class="section level2 unnumbered">
<h2 class="unnumbered">Clean and prepare for export</h2>
<!--chapter:end:13-home-visit.Rmd-->
</div>
</div>
<div id="data-dictionary" class="section level1 unnumbered">
<h1 class="unnumbered">Data dictionary</h1>
<!--chapter:end:14-data-dictionary.Rmd-->
</div>
<div id="post-visit-notes" class="section level1 unnumbered">
<h1 class="unnumbered">Post-visit notes</h1>
<div id="select-forms-from-kbt" class="section level2 unnumbered">
<h2 class="unnumbered">Select forms from KBT</h2>
<p>The post-visit notes are stored in a separate KBT form with “Post-Visit” in the title.</p>
<pre><code>tar_target(kb_post_visit, dplyr::filter(
    kb_df, stringr::str_detect(title, &quot;Post\\-Visit&quot;)
  ))</code></pre>
</div>
<div id="download-forms-as-xlsx" class="section level2 unnumbered">
<h2 class="unnumbered">Download forms as XLSX</h2>
<p>A special function <code>make_post_visit_df()</code> downloads the XLSX forms, converts them to CSVs,
saves the CSVs in a specific directory, and then selects one of them–the most recent form–to open as a data frame.</p>
<p>There is a smaller, older post-visit data file with fewer fields that can be reconciled with the current active one at a later date.</p>
<pre><code>tar_target(
    post_visit_df,
    make_post_visit_df(kb_post_visit,
                       &quot;data/xlsx/post_visit&quot;,
                       &quot;data/csv/post_visit&quot;)
  ),</code></pre>
<!--chapter:end:15-post-visit-notes.Rmd-->
</div>
</div>
<div id="part-data-visualization" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Data Visualization</h1>
<!--chapter:end:20-visualizing.Rmd-->
</div>
<div id="screening-visualizations" class="section level1 unnumbered">
<h1 class="unnumbered">Screening visualizations</h1>
<p>These visualizations are intended as a way to test the integrity and utility of the data export and cleaning workflow.</p>
<div id="setup-3" class="section level2 unnumbered">
<h2 class="unnumbered">Setup</h2>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb187-2"><a href="#cb187-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb187-3"><a href="#cb187-3" tabindex="-1"></a><span class="fu">library</span>(forcats)</span></code></pre></div>
</div>
<div id="screeningrecruiting-calls-data" class="section level2 unnumbered">
<h2 class="unnumbered">Screening/recruiting calls data</h2>
<p>Cumulative screening/recruiting calls by site.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(screen_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb188-2"><a href="#cb188-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">add_n_calls_to_demog</span>(screen_df)</span></code></pre></div>
<div id="calls-across-time" class="section level3 unnumbered">
<h3 class="unnumbered">Calls across time</h3>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" tabindex="-1"></a><span class="fu">plot_call_timeseries</span>(df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-screening-calls-cum-1.png" alt="Cumulative screening calls by year and site" width="672" />
<p class="caption">
(#fig:fig-screening-calls-cum)Cumulative screening calls by year and site
</p>
</div>
</div>
<div id="calls-by-site" class="section level3 unnumbered">
<h3 class="unnumbered">Calls by site</h3>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" tabindex="-1"></a>calls_by_site_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb190-2"><a href="#cb190-2" tabindex="-1"></a>  <span class="fu">require</span>(dplyr)</span>
<span id="cb190-3"><a href="#cb190-3" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb190-4"><a href="#cb190-4" tabindex="-1"></a>    <span class="fu">filter</span>(., <span class="sc">!</span><span class="fu">is.na</span>(site_id)) <span class="sc">%&gt;%</span></span>
<span id="cb190-5"><a href="#cb190-5" tabindex="-1"></a>    <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb190-6"><a href="#cb190-6" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="fu">fct_infreq</span>(site_id), <span class="at">fill =</span> site_id) <span class="sc">+</span></span>
<span id="cb190-7"><a href="#cb190-7" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb190-8"><a href="#cb190-8" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb190-9"><a href="#cb190-9" tabindex="-1"></a>      <span class="at">angle =</span> <span class="dv">90</span>,</span>
<span id="cb190-10"><a href="#cb190-10" tabindex="-1"></a>      <span class="at">vjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb190-11"><a href="#cb190-11" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="dv">1</span></span>
<span id="cb190-12"><a href="#cb190-12" tabindex="-1"></a>    )) <span class="sc">+</span> <span class="co"># Rotate text</span></span>
<span id="cb190-13"><a href="#cb190-13" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;site&quot;</span>) <span class="sc">+</span></span>
<span id="cb190-14"><a href="#cb190-14" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb190-15"><a href="#cb190-15" tabindex="-1"></a>}</span>
<span id="cb190-16"><a href="#cb190-16" tabindex="-1"></a></span>
<span id="cb190-17"><a href="#cb190-17" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(screen_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-screening-calls-by-site-1.png" alt="Cumulative screening calls by site" width="672" />
<p class="caption">
(#fig:fig-screening-calls-by-site)Cumulative screening calls by site
</p>
</div>
</div>
<div id="demographics" class="section level3 unnumbered">
<h3 class="unnumbered">Demographics</h3>
<div id="child-age" class="section level4 unnumbered">
<h4 class="unnumbered">Child age</h4>
<p>Child age in months (<code>child_age_mos</code>) by <code>child_sex</code>.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" tabindex="-1"></a>screen_df <span class="sc">%&gt;%</span></span>
<span id="cb191-2"><a href="#cb191-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(.,<span class="sc">!</span><span class="fu">is.na</span>(child_age_mos),<span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">%&gt;%</span></span>
<span id="cb191-3"><a href="#cb191-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb191-4"><a href="#cb191-4" tabindex="-1"></a>  <span class="fu">aes</span>(child_age_mos, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb191-5"><a href="#cb191-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-age-hist-screening-1.png" alt="Histogram of child age at time of recruiting call." width="672" />
<p class="caption">
(#fig:fig-age-hist-screening)Histogram of child age at time of recruiting call.
</p>
</div>
<div class="rmdnote">
<p>Some of the code to clean the <code>screen_df</code> variables could be incorporated into an earlier stage of the workflow.</p>
</div>
</div>
<div id="language-to-child" class="section level4 unnumbered">
<h4 class="unnumbered">Language to child</h4>
<p>Language(s) spoken to child by <code>child_sex</code>.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">%&gt;%</span></span>
<span id="cb192-2"><a href="#cb192-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(.,</span>
<span id="cb192-3"><a href="#cb192-3" tabindex="-1"></a>                <span class="at">language_to_child =</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(language_to_child, <span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>),</span>
<span id="cb192-4"><a href="#cb192-4" tabindex="-1"></a>                <span class="at">language_spoken_home =</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(language_spoken_home, <span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>))</span>
<span id="cb192-5"><a href="#cb192-5" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> language_to_child,</span>
<span id="cb192-6"><a href="#cb192-6" tabindex="-1"></a>      <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##          language_to_child
## child_sex english english_other english_spanish english_spanish_other spanish
##    female     187             2              28                     2      10
##    male       181             4              41                     1       7</code></pre>
</div>
<div id="language-spoken-at-home" class="section level4 unnumbered">
<h4 class="unnumbered">Language spoken at home</h4>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> language_spoken_home, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##          language_spoken_home
## child_sex english english_other english_spanish english_spanish_other spanish
##    female     188             2              28                     0      10
##    male       173             2              45                     2      11</code></pre>
</div>
<div id="to-child-vs.-at-home" class="section level4 unnumbered">
<h4 class="unnumbered">To child vs. at home</h4>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> language_to_child <span class="sc">+</span> language_spoken_home, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##                        language_spoken_home
## language_to_child       english english_other english_spanish english_spanish_other
##   english                   347             1              14                     2
##   english_other               1             3               0                     0
##   english_spanish            10             0              54                     0
##   english_spanish_other       3             0               0                     0
##   spanish                     0             0               5                     0
##                        language_spoken_home
## language_to_child       spanish
##   english                     4
##   english_other               0
##   english_spanish             5
##   english_spanish_other       0
##   spanish                    12</code></pre>
</div>
<div id="child-born-on-due-date" class="section level4 unnumbered">
<h4 class="unnumbered">Child born on due date</h4>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_bornonduedate,</span>
<span id="cb198-2"><a href="#cb198-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_bornonduedate
## child_sex yes
##    female 151
##    male   162</code></pre>
<div class="rmdnote">
<p>There are a large number of NAs. Cross-check with the earlier version
of the survey. It’s possible that this question was not asked early-on.</p>
</div>
</div>
<div id="child-weight" class="section level4 unnumbered">
<h4 class="unnumbered">Child weight</h4>
<p>Must convert pounds and ounces to decimal pounds.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">%&gt;%</span></span>
<span id="cb200-2"><a href="#cb200-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(.,</span>
<span id="cb200-3"><a href="#cb200-3" tabindex="-1"></a>                <span class="at">birth_weight_lbs =</span> child_weight_pounds <span class="sc">+</span> child_weight_ounces<span class="sc">/</span><span class="dv">16</span>)</span>
<span id="cb200-4"><a href="#cb200-4" tabindex="-1"></a></span>
<span id="cb200-5"><a href="#cb200-5" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb200-6"><a href="#cb200-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(birth_weight_lbs), <span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb200-7"><a href="#cb200-7" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(birth_weight_lbs <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb200-8"><a href="#cb200-8" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb200-9"><a href="#cb200-9" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> birth_weight_lbs, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb200-10"><a href="#cb200-10" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.33</span>) <span class="sc">+</span></span>
<span id="cb200-11"><a href="#cb200-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb200-12"><a href="#cb200-12" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="include/img/unnamed-chunk-61-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="birth-complications" class="section level4 unnumbered">
<h4 class="unnumbered">Birth complications</h4>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_birth_complications,</span>
<span id="cb201-2"><a href="#cb201-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_birth_complications
## child_sex  no yes
##    female 207  19
##    male   212  20</code></pre>
</div>
<div id="major-illnesses-or-injuries" class="section level4 unnumbered">
<h4 class="unnumbered">Major illnesses or injuries</h4>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> major_illnesses_injuries,</span>
<span id="cb203-2"><a href="#cb203-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          major_illnesses_injuries
## child_sex  no yes
##    female 219   7
##    male   221  11</code></pre>
<div id="child-sleep" class="section level5 unnumbered">
<h5 class="unnumbered">Child sleep</h5>
</div>
<div id="bed-time" class="section level5 unnumbered">
<h5 class="unnumbered">Bed time</h5>
</div>
<div id="wake-time" class="section level5 unnumbered">
<h5 class="unnumbered">Wake time</h5>
</div>
<div id="duration" class="section level5 unnumbered">
<h5 class="unnumbered">Duration</h5>
<div class="rmdimportant">
<p>This is work yet-to-be-done. The time stamps need to be reformatted prior to
visualization.</p>
</div>
</div>
<div id="nap-hours" class="section level5 unnumbered">
<h5 class="unnumbered">Nap hours</h5>
<div class="rmdimportant">
<p>Some recoding must be done here to handle strings that can’t easily be
converted to numbers.</p>
</div>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb205-2"><a href="#cb205-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">nap_hrs =</span> <span class="fu">as.numeric</span>(child_nap_hours))</span></code></pre></div>
<pre><code>## Warning: There was 1 warning in `dplyr::mutate()`.
## ℹ In argument: `nap_hrs = as.numeric(child_nap_hours)`.
## Caused by warning:
## ! NAs introduced by coercion</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb207-2"><a href="#cb207-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(nap_hrs), <span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb207-3"><a href="#cb207-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb207-4"><a href="#cb207-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> nap_hrs, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb207-5"><a href="#cb207-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb207-6"><a href="#cb207-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb207-7"><a href="#cb207-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="include/img/unnamed-chunk-64-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="sleep-location" class="section level5 unnumbered">
<h5 class="unnumbered">Sleep location</h5>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> child_sleep_location,</span>
<span id="cb208-2"><a href="#cb208-2" tabindex="-1"></a>      <span class="at">data =</span> screen_df)</span></code></pre></div>
<pre><code>##          child_sleep_location
## child_sex bed_parent crib_parent crib_separate crib_sibling other
##    female         14          23           158            9    22
##    male           21          29           163           11     7</code></pre>
</div>
</div>
<div id="mother" class="section level4 unnumbered">
<h4 class="unnumbered">Mother</h4>
<div id="age-at-childbirth" class="section level5 unnumbered">
<h5 class="unnumbered">Age at childbirth</h5>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" tabindex="-1"></a>screen_df <span class="sc">|&gt;</span></span>
<span id="cb210-2"><a href="#cb210-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mother_childbirth_age), <span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">|&gt;</span></span>
<span id="cb210-3"><a href="#cb210-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb210-4"><a href="#cb210-4" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> mother_childbirth_age, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb210-5"><a href="#cb210-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb210-6"><a href="#cb210-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb210-7"><a href="#cb210-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="include/img/unnamed-chunk-66-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Clearly, there are some impossible (erroneous) maternal ages &gt; 100. Here are details:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" tabindex="-1"></a>old_moms <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb211-2"><a href="#cb211-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(mother_childbirth_age <span class="sc">&gt;</span> <span class="dv">100</span>)</span>
<span id="cb211-3"><a href="#cb211-3" tabindex="-1"></a></span>
<span id="cb211-4"><a href="#cb211-4" tabindex="-1"></a>old_moms <span class="sc">|&gt;</span></span>
<span id="cb211-5"><a href="#cb211-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(submit_date, site_id, sub_num, mother_childbirth_age) <span class="sc">|&gt;</span></span>
<span id="cb211-6"><a href="#cb211-6" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb211-7"><a href="#cb211-7" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
submit_date
</th>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
sub_num
</th>
<th style="text-align:right;">
mother_childbirth_age
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2020-02-25
</td>
<td style="text-align:left;">
GEORG
</td>
<td style="text-align:left;">
007
</td>
<td style="text-align:right;">
118.92
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-25
</td>
<td style="text-align:left;">
GEORG
</td>
<td style="text-align:left;">
006
</td>
<td style="text-align:right;">
118.01
</td>
</tr>
<tr>
<td style="text-align:left;">
2022-07-12
</td>
<td style="text-align:left;">
VBLTU
</td>
<td style="text-align:left;">
005
</td>
<td style="text-align:right;">
121.22
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-04-11
</td>
<td style="text-align:left;">
NYUNI
</td>
<td style="text-align:left;">
065
</td>
<td style="text-align:right;">
136.55
</td>
</tr>
</tbody>
</table>
</div>
<div id="mothers-race-and-ethnicity" class="section level5 unnumbered">
<h5 class="unnumbered">Mother’s race and ethnicity</h5>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> screen_df <span class="sc">%&gt;%</span></span>
<span id="cb212-2"><a href="#cb212-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb212-3"><a href="#cb212-3" tabindex="-1"></a>    .,</span>
<span id="cb212-4"><a href="#cb212-4" tabindex="-1"></a>    <span class="at">mother_race =</span> dplyr<span class="sc">::</span><span class="fu">recode</span>(</span>
<span id="cb212-5"><a href="#cb212-5" tabindex="-1"></a>      mother_race,</span>
<span id="cb212-6"><a href="#cb212-6" tabindex="-1"></a>      <span class="at">morethanone =</span> <span class="st">&quot;more_than_one&quot;</span>,</span>
<span id="cb212-7"><a href="#cb212-7" tabindex="-1"></a>      <span class="at">americanindian =</span> <span class="st">&quot;american_indian&quot;</span></span>
<span id="cb212-8"><a href="#cb212-8" tabindex="-1"></a>    ),</span>
<span id="cb212-9"><a href="#cb212-9" tabindex="-1"></a>    <span class="at">mother_ethnicity =</span> dplyr<span class="sc">::</span><span class="fu">recode</span>(</span>
<span id="cb212-10"><a href="#cb212-10" tabindex="-1"></a>      mother_ethnicity,</span>
<span id="cb212-11"><a href="#cb212-11" tabindex="-1"></a>      <span class="at">hispanic_or_la =</span> <span class="st">&quot;hispanic&quot;</span>,</span>
<span id="cb212-12"><a href="#cb212-12" tabindex="-1"></a>      <span class="at">not_hispanic_o =</span> <span class="st">&quot;not_hispanic&quot;</span>,</span>
<span id="cb212-13"><a href="#cb212-13" tabindex="-1"></a>      <span class="at">nothispanic =</span> <span class="st">&quot;not_hispanic&quot;</span></span>
<span id="cb212-14"><a href="#cb212-14" tabindex="-1"></a>    )</span>
<span id="cb212-15"><a href="#cb212-15" tabindex="-1"></a>  )</span>
<span id="cb212-16"><a href="#cb212-16" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> mother_race <span class="sc">+</span> mother_ethnicity,</span>
<span id="cb212-17"><a href="#cb212-17" tabindex="-1"></a>      <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##                  mother_ethnicity
## mother_race       hispanic not_hispanic refused
##   american_indian        3            0       0
##   asian                  0           16       0
##   black                  0           13       0
##   more_than_one         14            6       0
##   other                 24            5       1
##   refused                1            1       2
##   white                 48          318       0</code></pre>
<!--chapter:end:21-viz-screening.Rmd-->
</div>
</div>
</div>
</div>
</div>
<div id="home-visit-visualizations" class="section level1 unnumbered">
<h1 class="unnumbered">Home visit visualizations</h1>
<div id="load-home-visit-data" class="section level2 unnumbered">
<h2 class="unnumbered">Load home visit data</h2>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span></code></pre></div>
<div id="demographics-1" class="section level3 unnumbered">
<h3 class="unnumbered">Demographics</h3>
<div id="child-age-1" class="section level4 unnumbered">
<h4 class="unnumbered">Child age</h4>
<p>Child age in months (<code>age_group</code>) by <code>child_sex</code>.</p>
<p>Note: The child’s exact age in months is part of the Databrary-related data.
That is on the work plan.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" tabindex="-1"></a>home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb215-2"><a href="#cb215-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(.,<span class="sc">!</span><span class="fu">is.na</span>(age_group),<span class="sc">!</span><span class="fu">is.na</span>(child_sex)) <span class="sc">%&gt;%</span></span>
<span id="cb215-3"><a href="#cb215-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb215-4"><a href="#cb215-4" tabindex="-1"></a>  <span class="fu">aes</span>(age_group, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb215-5"><a href="#cb215-5" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb215-6"><a href="#cb215-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb215-7"><a href="#cb215-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-age-grp-by-sex-1.png" alt="Participants by age group and sex" width="672" />
<p class="caption">
(#fig:fig-age-grp-by-sex)Participants by age group and sex
</p>
</div>
</div>
</div>
<div id="language-exposure" class="section level3 unnumbered">
<h3 class="unnumbered">Language exposure</h3>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb216-2"><a href="#cb216-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(., <span class="at">language_child =</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(language_child, <span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>))</span>
<span id="cb216-3"><a href="#cb216-3" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> language_child, <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>##          language_child
## child_sex english english_spanish
##    female     131              24
##    male       130              41</code></pre>
</div>
<div id="locomotor-milestones" class="section level3 unnumbered">
<h3 class="unnumbered">Locomotor milestones</h3>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" tabindex="-1"></a>play_loco <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb218-2"><a href="#cb218-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb218-3"><a href="#cb218-3" tabindex="-1"></a>    .,</span>
<span id="cb218-4"><a href="#cb218-4" tabindex="-1"></a>    age_group,</span>
<span id="cb218-5"><a href="#cb218-5" tabindex="-1"></a>    child_sex,</span>
<span id="cb218-6"><a href="#cb218-6" tabindex="-1"></a>    language_child,</span>
<span id="cb218-7"><a href="#cb218-7" tabindex="-1"></a>    site_id,</span>
<span id="cb218-8"><a href="#cb218-8" tabindex="-1"></a>    subject_number,</span>
<span id="cb218-9"><a href="#cb218-9" tabindex="-1"></a>    locomotor_milestones.who_walk.who_walk_onset_mo,</span>
<span id="cb218-10"><a href="#cb218-10" tabindex="-1"></a>    locomotor_milestones.k_walk.k_walk_onset_mo,</span>
<span id="cb218-11"><a href="#cb218-11" tabindex="-1"></a>    locomotor_milestones.crawl_onset.crawl_onset_mo</span>
<span id="cb218-12"><a href="#cb218-12" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb218-13"><a href="#cb218-13" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb218-14"><a href="#cb218-14" tabindex="-1"></a>    .,</span>
<span id="cb218-15"><a href="#cb218-15" tabindex="-1"></a>    <span class="at">walk_mos_who =</span> locomotor_milestones.who_walk.who_walk_onset_mo,</span>
<span id="cb218-16"><a href="#cb218-16" tabindex="-1"></a>    <span class="at">walk_mos_kea =</span> locomotor_milestones.k_walk.k_walk_onset_mo,</span>
<span id="cb218-17"><a href="#cb218-17" tabindex="-1"></a>    <span class="at">crawl_mos =</span> locomotor_milestones.crawl_onset.crawl_onset_mo</span>
<span id="cb218-18"><a href="#cb218-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb218-19"><a href="#cb218-19" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb218-20"><a href="#cb218-20" tabindex="-1"></a>    .,</span>
<span id="cb218-21"><a href="#cb218-21" tabindex="-1"></a>    <span class="at">walk_mos_who =</span> <span class="fu">as.numeric</span>(walk_mos_who),</span>
<span id="cb218-22"><a href="#cb218-22" tabindex="-1"></a>    <span class="at">walk_mos_kea =</span> <span class="fu">as.numeric</span>(walk_mos_kea),</span>
<span id="cb218-23"><a href="#cb218-23" tabindex="-1"></a>    <span class="at">crawl_mos =</span> <span class="fu">as.numeric</span>(crawl_mos)</span>
<span id="cb218-24"><a href="#cb218-24" tabindex="-1"></a>  )</span></code></pre></div>
<div id="check-for-anomalous-values" class="section level4 unnumbered">
<h4 class="unnumbered">Check for anomalous values</h4>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" tabindex="-1"></a>crawl_mos_min <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb219-2"><a href="#cb219-2" tabindex="-1"></a>walk_mos_min <span class="ot">&lt;-</span> <span class="dv">6</span></span></code></pre></div>
<div id="anomalous-crawling-onset" class="section level5 unnumbered">
<h5 class="unnumbered">Anomalous crawling onset</h5>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb220-2"><a href="#cb220-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., site_id, subject_number, crawl_mos) <span class="sc">%&gt;%</span></span>
<span id="cb220-3"><a href="#cb220-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., crawl_mos <span class="sc">&lt;</span> crawl_mos_min) <span class="sc">%&gt;%</span></span>
<span id="cb220-4"><a href="#cb220-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb220-5"><a href="#cb220-5" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
crawl_mos
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
CHOPH
</td>
<td style="text-align:left;">
003
</td>
<td style="text-align:right;">
3.72
</td>
</tr>
</tbody>
</table>
</div>
<div id="anomalous-walking-onset-kea-criteria" class="section level5 unnumbered">
<h5 class="unnumbered">Anomalous walking onset (KEA criteria)</h5>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb221-2"><a href="#cb221-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., site_id, subject_number, walk_mos_kea) <span class="sc">%&gt;%</span></span>
<span id="cb221-3"><a href="#cb221-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_kea <span class="sc">&lt;</span> walk_mos_min) <span class="sc">%&gt;%</span></span>
<span id="cb221-4"><a href="#cb221-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb221-5"><a href="#cb221-5" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
walk_mos_kea
</th>
</tr>
</thead>
<tbody>
<tr>
</tr>
</tbody>
</table>
</div>
<div id="anomalous-walking-onset-who-criteria" class="section level5 unnumbered">
<h5 class="unnumbered">Anomalous walking onset (WHO criteria)</h5>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb222-2"><a href="#cb222-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., site_id, subject_number, walk_mos_who) <span class="sc">%&gt;%</span></span>
<span id="cb222-3"><a href="#cb222-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_who <span class="sc">&lt;</span> walk_mos_min) <span class="sc">%&gt;%</span></span>
<span id="cb222-4"><a href="#cb222-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb222-5"><a href="#cb222-5" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
walk_mos_who
</th>
</tr>
</thead>
<tbody>
<tr>
</tr>
</tbody>
</table>
</div>
</div>
<div id="crawl-onset" class="section level4 unnumbered">
<h4 class="unnumbered">Crawl onset</h4>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb223-2"><a href="#cb223-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., crawl_mos <span class="sc">&gt;</span> crawl_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(crawl_mos)) <span class="sc">%&gt;%</span></span>
<span id="cb223-3"><a href="#cb223-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb223-4"><a href="#cb223-4" tabindex="-1"></a>  <span class="fu">aes</span>(crawl_mos, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb223-5"><a href="#cb223-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb223-6"><a href="#cb223-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb223-7"><a href="#cb223-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-crawl-onset-hist-1.png" alt="Age of crawling onset (mos) by sex" width="672" />
<p class="caption">
(#fig:fig-crawl-onset-hist)Age of crawling onset (mos) by sex
</p>
</div>
</div>
<div id="walk-onset" class="section level4 unnumbered">
<h4 class="unnumbered">Walk onset</h4>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb224-2"><a href="#cb224-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_kea <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_kea)) <span class="sc">%&gt;%</span></span>
<span id="cb224-3"><a href="#cb224-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb224-4"><a href="#cb224-4" tabindex="-1"></a>  <span class="fu">aes</span>(walk_mos_kea, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb224-5"><a href="#cb224-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb224-6"><a href="#cb224-6" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-walk-mos-kea-1.png" alt="Age (mos) of walking onset (KEA criteria) by sex" width="672" />
<p class="caption">
(#fig:fig-walk-mos-kea)Age (mos) of walking onset (KEA criteria) by sex
</p>
</div>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb225-2"><a href="#cb225-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_who <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_who)) <span class="sc">%&gt;%</span></span>
<span id="cb225-3"><a href="#cb225-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb225-4"><a href="#cb225-4" tabindex="-1"></a>  <span class="fu">aes</span>(walk_mos_who, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb225-5"><a href="#cb225-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb225-6"><a href="#cb225-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb225-7"><a href="#cb225-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-walk-mos-who-1.png" alt="Age (mos) of walking onset (WHO criteria) by sex" width="672" />
<p class="caption">
(#fig:fig-walk-mos-who)Age (mos) of walking onset (WHO criteria) by sex
</p>
</div>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb226-2"><a href="#cb226-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., walk_mos_who <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_who), walk_mos_kea <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_kea)) <span class="sc">%&gt;%</span></span>
<span id="cb226-3"><a href="#cb226-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb226-4"><a href="#cb226-4" tabindex="-1"></a>  <span class="fu">aes</span>(walk_mos_who, walk_mos_kea, <span class="at">color =</span> child_sex) <span class="sc">+</span></span>
<span id="cb226-5"><a href="#cb226-5" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb226-6"><a href="#cb226-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb226-7"><a href="#cb226-7" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">8</span>, <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb226-8"><a href="#cb226-8" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">8</span>, <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb226-9"><a href="#cb226-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb226-10"><a href="#cb226-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb226-11"><a href="#cb226-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="ot">-&gt;</span> walk_p</span>
<span id="cb226-12"><a href="#cb226-12" tabindex="-1"></a></span>
<span id="cb226-13"><a href="#cb226-13" tabindex="-1"></a>ggExtra<span class="sc">::</span><span class="fu">ggMarginal</span>(</span>
<span id="cb226-14"><a href="#cb226-14" tabindex="-1"></a>  walk_p,</span>
<span id="cb226-15"><a href="#cb226-15" tabindex="-1"></a>  play_loco,</span>
<span id="cb226-16"><a href="#cb226-16" tabindex="-1"></a>  walk_mos_who,</span>
<span id="cb226-17"><a href="#cb226-17" tabindex="-1"></a>  walk_mos_kea,</span>
<span id="cb226-18"><a href="#cb226-18" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;density&quot;</span>,</span>
<span id="cb226-19"><a href="#cb226-19" tabindex="-1"></a>  <span class="at">margins =</span> <span class="st">&quot;both&quot;</span>,</span>
<span id="cb226-20"><a href="#cb226-20" tabindex="-1"></a>  <span class="at">groupColour =</span> <span class="cn">TRUE</span>,</span>
<span id="cb226-21"><a href="#cb226-21" tabindex="-1"></a>  <span class="at">groupFill =</span> <span class="cn">TRUE</span></span>
<span id="cb226-22"><a href="#cb226-22" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 4 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 4 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing missing values (`geom_point()`).</code></pre>
<div class="figure" style="text-align: center">
<img src="include/img/fig-walk-mos-kea-who-1.png" alt="Walking onset by WHO vs. KEA criteria" width="672" />
<p class="caption">
(#fig:fig-walk-mos-kea-who)Walking onset by WHO vs. KEA criteria
</p>
</div>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" tabindex="-1"></a>play_loco <span class="sc">%&gt;%</span></span>
<span id="cb232-2"><a href="#cb232-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., crawl_mos <span class="sc">&gt;</span> crawl_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(crawl_mos), walk_mos_kea <span class="sc">&gt;</span> walk_mos_min, <span class="sc">!</span><span class="fu">is.na</span>(walk_mos_kea)) <span class="sc">%&gt;%</span></span>
<span id="cb232-3"><a href="#cb232-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb232-4"><a href="#cb232-4" tabindex="-1"></a>  <span class="fu">aes</span>(crawl_mos, walk_mos_kea, <span class="at">color =</span> child_sex) <span class="sc">+</span></span>
<span id="cb232-5"><a href="#cb232-5" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb232-6"><a href="#cb232-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb232-7"><a href="#cb232-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb232-8"><a href="#cb232-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb232-9"><a href="#cb232-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="ot">-&gt;</span> walk_p</span>
<span id="cb232-10"><a href="#cb232-10" tabindex="-1"></a></span>
<span id="cb232-11"><a href="#cb232-11" tabindex="-1"></a>ggExtra<span class="sc">::</span><span class="fu">ggMarginal</span>(</span>
<span id="cb232-12"><a href="#cb232-12" tabindex="-1"></a>  walk_p,</span>
<span id="cb232-13"><a href="#cb232-13" tabindex="-1"></a>  play_loco,</span>
<span id="cb232-14"><a href="#cb232-14" tabindex="-1"></a>  walk_mos_who,</span>
<span id="cb232-15"><a href="#cb232-15" tabindex="-1"></a>  walk_mos_kea,</span>
<span id="cb232-16"><a href="#cb232-16" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;density&quot;</span>,</span>
<span id="cb232-17"><a href="#cb232-17" tabindex="-1"></a>  <span class="at">margins =</span> <span class="st">&quot;both&quot;</span>,</span>
<span id="cb232-18"><a href="#cb232-18" tabindex="-1"></a>  <span class="at">groupColour =</span> <span class="cn">TRUE</span>,</span>
<span id="cb232-19"><a href="#cb232-19" tabindex="-1"></a>  <span class="at">groupFill =</span> <span class="cn">TRUE</span></span>
<span id="cb232-20"><a href="#cb232-20" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;
## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<div class="figure" style="text-align: center">
<img src="include/img/fig-walk-mos-kea-crawl-mos-1.png" alt="Walking onset vs. Crawling" width="672" />
<p class="caption">
(#fig:fig-walk-mos-kea-crawl-mos)Walking onset vs. Crawling
</p>
</div>
</div>
</div>
<div id="health" class="section level3 unnumbered">
<h3 class="unnumbered">Health</h3>
<div id="feeding" class="section level4 unnumbered">
<h4 class="unnumbered">Feeding</h4>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" tabindex="-1"></a>feeding <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb234-2"><a href="#cb234-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb234-3"><a href="#cb234-3" tabindex="-1"></a>    .,</span>
<span id="cb234-4"><a href="#cb234-4" tabindex="-1"></a>    age_group,</span>
<span id="cb234-5"><a href="#cb234-5" tabindex="-1"></a>    child_sex,</span>
<span id="cb234-6"><a href="#cb234-6" tabindex="-1"></a>    site_id,</span>
<span id="cb234-7"><a href="#cb234-7" tabindex="-1"></a>    subject_number,</span>
<span id="cb234-8"><a href="#cb234-8" tabindex="-1"></a>    language_child,</span>
<span id="cb234-9"><a href="#cb234-9" tabindex="-1"></a>    health.feeding_nutrition.breastfeed,</span>
<span id="cb234-10"><a href="#cb234-10" tabindex="-1"></a>    health.feeding_nutrition.solidfood_age</span>
<span id="cb234-11"><a href="#cb234-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb234-12"><a href="#cb234-12" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(., <span class="at">breastfeed =</span> health.feeding_nutrition.breastfeed,</span>
<span id="cb234-13"><a href="#cb234-13" tabindex="-1"></a>                <span class="at">solid_food_mos =</span> health.feeding_nutrition.solidfood_age) <span class="sc">%&gt;%</span></span>
<span id="cb234-14"><a href="#cb234-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(., <span class="at">solid_food_mos =</span> <span class="fu">as.numeric</span>(solid_food_mos))</span></code></pre></div>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sex <span class="sc">+</span> breastfeed, <span class="at">data =</span> feeding)</span></code></pre></div>
<pre><code>##          breastfeed
## child_sex donotknow  no refused yes
##    female         1   3       0 150
##    male           0  10       1 156</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" tabindex="-1"></a>feeding <span class="sc">%&gt;%</span></span>
<span id="cb237-2"><a href="#cb237-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb237-3"><a href="#cb237-3" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> solid_food_mos, <span class="at">color =</span> child_sex, <span class="at">fill =</span> child_sex) <span class="sc">+</span></span>
<span id="cb237-4"><a href="#cb237-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb237-5"><a href="#cb237-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<pre><code>## Warning: Removed 5 rows containing non-finite values (`stat_bin()`).</code></pre>
<div class="figure" style="text-align: center">
<img src="include/img/fig-solid-food-mos-1.png" alt="Age at introduction of solid foods" width="672" />
<p class="caption">
(#fig:fig-solid-food-mos)Age at introduction of solid foods
</p>
</div>
<p>Clearly, there are some impossible values here.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" tabindex="-1"></a>feeding <span class="sc">|&gt;</span></span>
<span id="cb239-2"><a href="#cb239-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(site_id, subject_number, solid_food_mos) <span class="sc">%&gt;%</span></span>
<span id="cb239-3"><a href="#cb239-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(., solid_food_mos <span class="sc">&gt;</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span></span>
<span id="cb239-4"><a href="#cb239-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&#39;html&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb239-5"><a href="#cb239-5" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:left;">
subject_number
</th>
<th style="text-align:right;">
solid_food_mos
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NYUNI
</td>
<td style="text-align:left;">
996
</td>
<td style="text-align:right;">
999
</td>
</tr>
</tbody>
</table>
</div>
<div id="smokingdrinking" class="section level4 unnumbered">
<h4 class="unnumbered">Smoking/drinking</h4>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" tabindex="-1"></a>smoking_drinking <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb240-2"><a href="#cb240-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb240-3"><a href="#cb240-3" tabindex="-1"></a>    .,</span>
<span id="cb240-4"><a href="#cb240-4" tabindex="-1"></a>    age_group,</span>
<span id="cb240-5"><a href="#cb240-5" tabindex="-1"></a>    child_sex,</span>
<span id="cb240-6"><a href="#cb240-6" tabindex="-1"></a>    language_child,</span>
<span id="cb240-7"><a href="#cb240-7" tabindex="-1"></a>    health.smoking.pregnant_smoking,</span>
<span id="cb240-8"><a href="#cb240-8" tabindex="-1"></a>    health.drinking.pregnant_drinking</span>
<span id="cb240-9"><a href="#cb240-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb240-10"><a href="#cb240-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(., <span class="at">preg_smoking =</span> health.smoking.pregnant_smoking,</span>
<span id="cb240-11"><a href="#cb240-11" tabindex="-1"></a>                <span class="at">preg_drinking =</span> health.drinking.pregnant_drinking)</span>
<span id="cb240-12"><a href="#cb240-12" tabindex="-1"></a></span>
<span id="cb240-13"><a href="#cb240-13" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> preg_smoking <span class="sc">+</span> preg_drinking, smoking_drinking)</span></code></pre></div>
<pre><code>##             preg_drinking
## preg_smoking  no refused yes
##      no      257       0  61
##      refused   0       1   0</code></pre>
</div>
<div id="sleeping-position" class="section level4 unnumbered">
<h4 class="unnumbered">Sleeping position</h4>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" tabindex="-1"></a>sleeping_pos <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb242-2"><a href="#cb242-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb242-3"><a href="#cb242-3" tabindex="-1"></a>    .,</span>
<span id="cb242-4"><a href="#cb242-4" tabindex="-1"></a>    age_group,</span>
<span id="cb242-5"><a href="#cb242-5" tabindex="-1"></a>    child_sex,</span>
<span id="cb242-6"><a href="#cb242-6" tabindex="-1"></a>    language_child,</span>
<span id="cb242-7"><a href="#cb242-7" tabindex="-1"></a>    health.general_health.child_sleeping_position</span>
<span id="cb242-8"><a href="#cb242-8" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb242-9"><a href="#cb242-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(., <span class="at">child_sleeping_position =</span> health.general_health.child_sleeping_position)</span>
<span id="cb242-10"><a href="#cb242-10" tabindex="-1"></a></span>
<span id="cb242-11"><a href="#cb242-11" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="at">formula =</span> <span class="sc">~</span> child_sleeping_position, <span class="at">data =</span> sleeping_pos)</span></code></pre></div>
<pre><code>## child_sleeping_position
##         back      changed    donotknow        other      refused         side 
##          305            4            1            2            1            2 
## stomach_side 
##            6</code></pre>
</div>
</div>
</div>
<div id="post-visit-data" class="section level2 unnumbered">
<h2 class="unnumbered">Post-visit data</h2>
<p>We load the post-visit survey data.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" tabindex="-1"></a><span class="fu">tar_load</span>(post_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb244-2"><a href="#cb244-2" tabindex="-1"></a></span>
<span id="cb244-3"><a href="#cb244-3" tabindex="-1"></a><span class="fu">dim</span>(post_visit_df)</span></code></pre></div>
<pre><code>## [1] 353 180</code></pre>
<div class="rmdnote">
<p>Cleaning this data is set aside for future work.</p>
</div>
<!--chapter:end:22-viz-home-visit.Rmd-->
</div>
</div>
<div id="part-project-monitoring" class="section level1 unnumbered">
<h1 class="unnumbered">(PART*) Project Monitoring</h1>
<!--chapter:end:30-management.Rmd-->
</div>
<div id="state-of-play" class="section level1 unnumbered">
<h1 class="unnumbered">State of PLAY</h1>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(tidyverse))</span>
<span id="cb246-2"><a href="#cb246-2" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(lubridate))</span>
<span id="cb246-3"><a href="#cb246-3" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(forcats))</span></code></pre></div>
<p>The following summarizes the current state of the project as of 2023-06-22.</p>
<div id="recent-data" class="section level2 unnumbered">
<h2 class="unnumbered">Recent data</h2>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(screen_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb247-2"><a href="#cb247-2" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span></code></pre></div>
<div id="last-two-weeks" class="section level3 unnumbered">
<h3 class="unnumbered">Last two weeks</h3>
<div id="screening-calls" class="section level4 unnumbered">
<h4 class="unnumbered">Screening calls</h4>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" tabindex="-1"></a>two_weeks_ago <span class="ot">&lt;-</span> now <span class="sc">-</span> <span class="fu">dweeks</span>(<span class="dv">2</span>)</span>
<span id="cb248-2"><a href="#cb248-2" tabindex="-1"></a>screen_last_two_weeks_df <span class="ot">&lt;-</span> screen_df <span class="sc">%&gt;%</span></span>
<span id="cb248-3"><a href="#cb248-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(submit_date <span class="sc">&gt;</span> two_weeks_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 11 recruiting calls since 2023-06-08.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(screen_last_two_weeks_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/unnamed-chunk-73-1.png" alt="Screening calls in last 2 weeks by site" width="672" />
<p class="caption">
(#fig:unnamed-chunk-73)Screening calls in last 2 weeks by site
</p>
</div>
</div>
<div id="home-visits" class="section level4 unnumbered">
<h4 class="unnumbered">Home visits</h4>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" tabindex="-1"></a>home_last_two_weeks_df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb250-2"><a href="#cb250-2" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(date_today <span class="sc">&gt;</span> two_weeks_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 23 home visits since 2023-06-08.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(home_last_two_weeks_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-2-wk-home-visit-1.png" alt="Home visits in last 2 weeks by site" width="672" />
<p class="caption">
(#fig:fig-last-2-wk-home-visit)Home visits in last 2 weeks by site
</p>
</div>
</div>
</div>
<div id="last-month" class="section level3 unnumbered">
<h3 class="unnumbered">Last month</h3>
<div id="screening-calls-1" class="section level4 unnumbered">
<h4 class="unnumbered">Screening calls</h4>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" tabindex="-1"></a>month_ago <span class="ot">&lt;-</span> now <span class="sc">-</span> <span class="fu">dmonths</span>(<span class="dv">1</span>)</span>
<span id="cb252-2"><a href="#cb252-2" tabindex="-1"></a>screen_last_month_df <span class="ot">&lt;-</span> screen_df <span class="sc">%&gt;%</span></span>
<span id="cb252-3"><a href="#cb252-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(submit_date <span class="sc">&gt;</span> month_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 39 recruiting calls since 2023-05-22 13:30:00.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(screen_last_month_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/unnamed-chunk-74-1.png" alt="Screening calls in last month by site" width="672" />
<p class="caption">
(#fig:unnamed-chunk-74)Screening calls in last month by site
</p>
</div>
</div>
<div id="home-visits-1" class="section level4 unnumbered">
<h4 class="unnumbered">Home visits</h4>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" tabindex="-1"></a>home_last_month_df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb254-2"><a href="#cb254-2" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(date_today <span class="sc">&gt;</span> month_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 50 home visits since 2023-05-22 13:30:00.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(home_last_month_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-mo-home-visit-1.png" alt="Home visits in last month by site" width="672" />
<p class="caption">
(#fig:fig-last-mo-home-visit)Home visits in last month by site
</p>
</div>
</div>
</div>
<div id="last-3-mos" class="section level3 unnumbered">
<h3 class="unnumbered">Last 3 mos</h3>
<div id="screening-calls-2" class="section level4 unnumbered">
<h4 class="unnumbered">Screening calls</h4>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" tabindex="-1"></a>three_mos_ago <span class="ot">&lt;-</span> now <span class="sc">-</span> <span class="fu">dmonths</span>(<span class="dv">3</span>)</span>
<span id="cb256-2"><a href="#cb256-2" tabindex="-1"></a>screen_last_3_df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb256-3"><a href="#cb256-3" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(submit_date <span class="sc">&gt;</span> three_mos_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 124 screening calls since 2023-03-22 16:30:00.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(screen_last_3_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-3mo-calls-1.png" alt="Screening calls in last 3 months by site" width="672" />
<p class="caption">
(#fig:fig-last-3mo-calls)Screening calls in last 3 months by site
</p>
</div>
</div>
<div id="home-visits-2" class="section level4 unnumbered">
<h4 class="unnumbered">Home visits</h4>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" tabindex="-1"></a>home_last_3_month_df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb258-2"><a href="#cb258-2" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(date_today <span class="sc">&gt;</span> three_mos_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 111 home visits since 2023-03-22 16:30:00.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(home_last_3_month_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-3mo-home-visit-1.png" alt="Home visits in last 3 months by site" width="672" />
<p class="caption">
(#fig:fig-last-3mo-home-visit)Home visits in last 3 months by site
</p>
</div>
</div>
</div>
<div id="last-6-mos" class="section level3 unnumbered">
<h3 class="unnumbered">Last 6 mos</h3>
<div id="screening-calls-3" class="section level4 unnumbered">
<h4 class="unnumbered">Screening calls</h4>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" tabindex="-1"></a>six_mos_ago <span class="ot">&lt;-</span> now <span class="sc">-</span> <span class="fu">dmonths</span>(<span class="dv">6</span>)</span>
<span id="cb260-2"><a href="#cb260-2" tabindex="-1"></a>screen_last_6_df <span class="ot">&lt;-</span> screen_df <span class="sc">|&gt;</span></span>
<span id="cb260-3"><a href="#cb260-3" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(submit_date <span class="sc">&gt;</span> six_mos_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 214 screening calls since 2022-12-21 09:00:00.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(screen_last_6_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-6mo-calls-1.png" alt="Screening calls in last 6 months by site" width="672" />
<p class="caption">
(#fig:fig-last-6mo-calls)Screening calls in last 6 months by site
</p>
</div>
</div>
<div id="home-visits-3" class="section level4 unnumbered">
<h4 class="unnumbered">Home visits</h4>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" tabindex="-1"></a>home_last_6_month_df <span class="ot">&lt;-</span> home_visit_df <span class="sc">%&gt;%</span></span>
<span id="cb262-2"><a href="#cb262-2" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(date_today <span class="sc">&gt;</span> six_mos_ago)</span></code></pre></div>
<p>There have been <span class="math inline">\(n=\)</span> 168 home visits since 2022-12-21 09:00:00.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" tabindex="-1"></a><span class="fu">calls_by_site_plot</span>(home_last_6_month_df)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-last-6mo-home-visit-1.png" alt="Home visits in last 6 months by site" width="672" />
<p class="caption">
(#fig:fig-last-6mo-home-visit)Home visits in last 6 months by site
</p>
</div>
</div>
</div>
</div>
<div id="overall" class="section level2 unnumbered">
<h2 class="unnumbered">Overall</h2>
<div id="from-databrary" class="section level3 unnumbered">
<h3 class="unnumbered">From Databrary</h3>
<p>Because of some minor anomalies merging the older KBT surveys, we query the Databrary API for the most complete data about PLAY sessions.
For debugging purposes, we set <code>vb = TRUE</code> so we get complete information about what’s working and what is not.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" tabindex="-1"></a>databraryapi<span class="sc">::</span><span class="fu">login_db</span>(<span class="fu">Sys.getenv</span>(<span class="st">&quot;DATABRARY_LOGIN&quot;</span>))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" tabindex="-1"></a>databrary_df <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_df</span>(play_vols<span class="sc">$</span>play_site_id, make_site_session_summary, <span class="at">vb =</span> <span class="cn">TRUE</span>) </span>
<span id="cb266-2"><a href="#cb266-2" tabindex="-1"></a></span>
<span id="cb266-3"><a href="#cb266-3" tabindex="-1"></a>databrary_df <span class="sc">%&gt;%</span></span>
<span id="cb266-4"><a href="#cb266-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(., site_name, site_id, site_vol_id, PLAY_Gold, PLAY_Silver, No_Visit, <span class="st">`</span><span class="at">NA</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb266-5"><a href="#cb266-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(., <span class="fu">desc</span>(PLAY_Gold)) <span class="sc">%&gt;%</span></span>
<span id="cb266-6"><a href="#cb266-6" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(., <span class="at">format =</span> <span class="st">&#39;html&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb266-7"><a href="#cb266-7" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>()</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
site_name
</th>
<th style="text-align:left;">
site_id
</th>
<th style="text-align:right;">
site_vol_id
</th>
<th style="text-align:right;">
PLAY_Gold
</th>
<th style="text-align:right;">
PLAY_Silver
</th>
<th style="text-align:right;">
No_Visit
</th>
<th style="text-align:right;">
NA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Ohio State University
</td>
<td style="text-align:left;">
PLAYProject_OHIOS
</td>
<td style="text-align:right;">
1103
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
New York University
</td>
<td style="text-align:left;">
PLAYProject_NYUNI
</td>
<td style="text-align:right;">
899
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Georgetown University
</td>
<td style="text-align:left;">
PLAYProject_GEORG
</td>
<td style="text-align:right;">
954
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
UC Santa Cruz
</td>
<td style="text-align:left;">
PLAYProject_UCSCR
</td>
<td style="text-align:right;">
1066
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Georgia
</td>
<td style="text-align:left;">
PLAYProject_UGEOR
</td>
<td style="text-align:right;">
1515
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Houston
</td>
<td style="text-align:left;">
PLAYProject_UHOUS
</td>
<td style="text-align:right;">
1397
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Texas at Austin
</td>
<td style="text-align:left;">
PLAYProject_UTAUS
</td>
<td style="text-align:right;">
1517
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
Children’s Hospital of Philadelphia
</td>
<td style="text-align:left;">
PLAYProject_CHOPH
</td>
<td style="text-align:right;">
1370
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Purdue University
</td>
<td style="text-align:left;">
PLAYProject_PURDU
</td>
<td style="text-align:right;">
1363
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Cal State Long Beach
</td>
<td style="text-align:left;">
PLAYProject_CSULB
</td>
<td style="text-align:right;">
1376
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Iowa
</td>
<td style="text-align:left;">
PLAYProject_UIOWA
</td>
<td style="text-align:right;">
1422
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Boston University
</td>
<td style="text-align:left;">
PLAYProject_BOSTU
</td>
<td style="text-align:right;">
1008
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Indiana University
</td>
<td style="text-align:left;">
PLAYProject_INDNA
</td>
<td style="text-align:right;">
1400
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Vanderbilt University
</td>
<td style="text-align:left;">
PLAYProject_VBLTU
</td>
<td style="text-align:right;">
1391
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Cal State Fullerton
</td>
<td style="text-align:left;">
PLAYProject_CSUFL
</td>
<td style="text-align:right;">
1481
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
UC Riverside
</td>
<td style="text-align:left;">
PLAYProject_UCRIV
</td>
<td style="text-align:right;">
966
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
University of Miami
</td>
<td style="text-align:left;">
PLAYProject_UMIAM
</td>
<td style="text-align:right;">
996
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
Stanford University
</td>
<td style="text-align:left;">
PLAYProject_STANF
</td>
<td style="text-align:right;">
1362
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Virginia Commonwealth University
</td>
<td style="text-align:left;">
PLAYProject_VCOMU
</td>
<td style="text-align:right;">
982
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Cornell University
</td>
<td style="text-align:left;">
PLAYProject_CORNL
</td>
<td style="text-align:right;">
1576
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div id="from-kbt" class="section level3 unnumbered">
<h3 class="unnumbered">From KBT</h3>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" tabindex="-1"></a>targets<span class="sc">::</span><span class="fu">tar_load</span>(home_visit_w_databrary_df, <span class="at">store=</span><span class="st">&quot;../_targets&quot;</span>)</span>
<span id="cb267-2"><a href="#cb267-2" tabindex="-1"></a></span>
<span id="cb267-3"><a href="#cb267-3" tabindex="-1"></a>gold_silver <span class="ot">&lt;-</span> home_visit_w_databrary_df <span class="sc">%&gt;%</span></span>
<span id="cb267-4"><a href="#cb267-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(group_name))</span>
<span id="cb267-5"><a href="#cb267-5" tabindex="-1"></a></span>
<span id="cb267-6"><a href="#cb267-6" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> group_name <span class="sc">+</span> age_group, gold_silver)</span></code></pre></div>
<pre><code>##              age_group
## group_name    12mo 18mo 24mo
##   PLAY_Gold     89   84   63
##   PLAY_Silver    9   23   21</code></pre>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> group_name <span class="sc">+</span> child_sex, gold_silver)</span></code></pre></div>
<pre><code>##              child_sex
## group_name    female male
##   PLAY_Gold      105  131
##   PLAY_Silver     24   29</code></pre>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" tabindex="-1"></a>df_race_eth <span class="ot">&lt;-</span> gold_silver <span class="sc">%&gt;%</span></span>
<span id="cb271-2"><a href="#cb271-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(group_name)) <span class="sc">%&gt;%</span></span>
<span id="cb271-3"><a href="#cb271-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(., <span class="at">participant_race =</span> <span class="fu">recode</span>(participant_race, </span>
<span id="cb271-4"><a href="#cb271-4" tabindex="-1"></a>                                             <span class="st">`</span><span class="at">Black or African American</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Black_or_African_American&quot;</span>,</span>
<span id="cb271-5"><a href="#cb271-5" tabindex="-1"></a>                                             <span class="st">`</span><span class="at">More than one</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;More_than_one&quot;</span>),</span>
<span id="cb271-6"><a href="#cb271-6" tabindex="-1"></a>                <span class="at">participant_ethnicity =</span> <span class="fu">recode</span>(participant_ethnicity, </span>
<span id="cb271-7"><a href="#cb271-7" tabindex="-1"></a>                                               <span class="st">`</span><span class="at">Hispanic or Latino</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Hispanic_or_Latino&quot;</span>,</span>
<span id="cb271-8"><a href="#cb271-8" tabindex="-1"></a>                                               <span class="st">`</span><span class="at">Not Hispanic or Latino</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Not_Hispanic_or_Latino&quot;</span>))</span>
<span id="cb271-9"><a href="#cb271-9" tabindex="-1"></a></span>
<span id="cb271-10"><a href="#cb271-10" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> participant_race <span class="sc">+</span> participant_ethnicity, df_race_eth)</span></code></pre></div>
<pre><code>##                                    participant_ethnicity
## participant_race                    Hispanic_or_Latino Not_Hispanic_or_Latino
##   Asian                                              0                      3
##   Black_or_African_American                          1                      3
##   More_than_one                                     17                     23
##   Native American or Alaskan Native                  1                      0
##   Other                                             11                      6
##   Refused                                            1                      0
##   White                                             40                    183</code></pre>
</div>
<div id="by-site-location-qa-status" class="section level3 unnumbered">
<h3 class="unnumbered">By site, location, &amp; QA status</h3>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span> site_id <span class="sc">+</span> group_name, gold_silver)</span></code></pre></div>
<pre><code>##        group_name
## site_id PLAY_Gold PLAY_Silver
##   BOSTU         6           5
##   CHOPH        15           5
##   CORNL         0           2
##   CSUFL         4           1
##   CSULB         9           1
##   GEORG        23           2
##   INDNA         4           2
##   NYUNI        27           9
##   OHIOS        46           2
##   PURDU        10           4
##   STANF         1           1
##   UCRIV         2           1
##   UCSCR        22           1
##   UGEOR        19           6
##   UHOUS        19           2
##   UIOWA         6           2
##   UMIAM         2           1
##   UTAUS        17           4
##   VBLTU         4           2</code></pre>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" tabindex="-1"></a>gold_silver <span class="sc">%&gt;%</span></span>
<span id="cb275-2"><a href="#cb275-2" tabindex="-1"></a>    <span class="fu">ggplot</span>(.) <span class="sc">+</span></span>
<span id="cb275-3"><a href="#cb275-3" tabindex="-1"></a>    <span class="fu">aes</span>(forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(context_state), <span class="at">fill =</span> context_state) <span class="sc">+</span></span>
<span id="cb275-4"><a href="#cb275-4" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb275-5"><a href="#cb275-5" tabindex="-1"></a>    <span class="fu">facet_grid</span>(. <span class="sc">~</span> group_name) <span class="sc">+</span></span>
<span id="cb275-6"><a href="#cb275-6" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb275-7"><a href="#cb275-7" tabindex="-1"></a>      <span class="at">angle =</span> <span class="dv">90</span>,</span>
<span id="cb275-8"><a href="#cb275-8" tabindex="-1"></a>      <span class="at">vjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb275-9"><a href="#cb275-9" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="dv">1</span></span>
<span id="cb275-10"><a href="#cb275-10" tabindex="-1"></a>    )) <span class="sc">+</span> <span class="co"># Rotate text</span></span>
<span id="cb275-11"><a href="#cb275-11" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;State&quot;</span>, <span class="at">y =</span> <span class="st">&quot;N participants&quot;</span>) <span class="sc">+</span></span>
<span id="cb275-12"><a href="#cb275-12" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="include/img/fig-qa-level-by-state-1.png" alt="QA level by State" width="672" />
<p class="caption">
(#fig:fig-qa-level-by-state)QA level by State
</p>
</div>
</div>
</div>
<div id="clean-up" class="section level2 unnumbered">
<h2 class="unnumbered">Clean-up</h2>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;../.databrary.RData&quot;</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb276-2"><a href="#cb276-2" tabindex="-1"></a>databraryapi<span class="sc">::</span><span class="fu">logout_db</span>()</span></code></pre></div>
<pre><code>## Logout Successful.</code></pre>
<pre><code>## [1] TRUE</code></pre>
<!--chapter:end:32-state-of-PLAY.Rmd-->
</div>
</div>
<!--bookdown:body:end-->
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>PLAY Project: Surveys</strong>" was written by Rick Gilmore. It was last built on 2023-06-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
